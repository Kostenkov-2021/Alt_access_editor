<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content=""/>
    <meta name="viewport" content="maximum-scale=1.0" />
    <title> HTTP mode configuration file </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css"/>
    <link rel="stylesheet" type='text/css' href="styles.css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="favicon.png" type="image/png"/>

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Please enable JavaScript in your browser!</a>
	</noscript>
	<div class="cont">
	<h3 id="t234379" class="heading3">HTTP mode configuration file</h3>
<p class="bodytext">The HTTP mode configuration file (hereinafter, also configuration file) is an XML file that specifies general settings for Kaspersky Scan Engine.</p>
<p class="introheading">HTTP mode configuration file (Linux)</p>
<p class="bodytext">The Kaspersky Scan Engine distribution kit for Linux contains a <code class="programcharacter">%distr_kit%/etc/kavhttpd.xml</code> configuration file. </p>
<p class="bodytext">After <a id="h193042" class="englishcrossreferencetemplate" href="192974.htm" target="_self">installing Kaspersky Scan Engine</a>, you can copy <code class="programcharacter">kavhttpd.xml</code> to your preferred location:</p>
<ul class="listbullet1"><li class="listbullet1">If you copy <code class="programcharacter">kavhttpd.xml</code> to the <code class="programcharacter">/etc/</code> directory, Kaspersky Scan Engine automatically finds and parses this file.</li><li class="listbullet1">If you copy <code class="programcharacter">kavhttpd.xml</code> to a different location, you must set the path to this location when you start Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">by using the <a id="h179931" class="englishcrossreferencetemplate" href="179872.htm" target="_self">systemd unit file</a></li><li class="listbullet2">by running Kaspersky Scan Engine from the command line <a id="h179959" class="englishcrossreferencetemplate" href="179876.htm" target="_self">manually</a></li></ul></li></ul><p class="introheading">HTTP mode configuration file (Windows)</p>
<p class="bodytext">The Kaspersky Scan Engine distribution kit for Windows contains a <code class="programcharacter">%distr_kit%\bin\kavhttpd.xml</code> configuration file.</p>
<p class="bodytext">We recommend specifying full paths to files in <code class="programcharacter">kavhttpd.xml</code>. In particular, it is strongly recommended to specify the full paths to the certificate (the <code class="programcharacter">TlsCertificateFile</code> element) and the key file (the <code class="programcharacter">TlsCertificateKeyFile</code> element).</p>
<p class="introheading">Parameters of the HTTP mode configuration file</p>
<p class="bodytext">Most elements of the configuration file have default values that are used when the element is absent. Elements that are present in the configuration file must not be empty, unless stated otherwise.</p>
<p class="bodytext">KAV HTTPD configuration file contains the following parent elements:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201089" class="englishcrossreferencetemplate" href="201021.htm" target="_self">ServerSettings</a></li><li class="listbullet1"><a id="h201090" class="englishcrossreferencetemplate" href="201022.htm" target="_self">KSNSettings</a></li><li class="listbullet1"><a id="h201091" class="englishcrossreferencetemplate" href="201023.htm" target="_self">KAVScanningSettings</a></li><li class="listbullet1"><a id="h201092" class="englishcrossreferencetemplate" href="201024.htm" target="_self">DirectorySettings</a></li><li class="listbullet1"><a id="h201093" class="englishcrossreferencetemplate" href="200598.htm" target="_self">UseHTTPProxy</a></li><li class="listbullet1"><a id="h201094" class="englishcrossreferencetemplate" href="201047.htm" target="_self">HTTPProxy</a></li><li class="listbullet1"><a id="h201095" class="englishcrossreferencetemplate" href="201025.htm" target="_self">UpdateSettings</a></li><li class="listbullet1"><a id="h201096" class="englishcrossreferencetemplate" href="201055.htm" target="_self">FormatRecognizerSettings</a></li></ul><p class="introheading">Structure of the configuration file</p>
<p class="bodytext">Following is an example of the HTTP mode configuration file.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Configuration&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;ServerSettings&gt;</p>
<p class="program3">&lt;ConnectionString&gt;/tmp/.kavhttpd&lt;/ConnectionString&gt;</p>
<p class="program3">&lt;MaxIncomingConnectionsNum&gt;100&lt;/MaxIncomingConnectionsNum&gt;</p>
<p class="program3">&lt;MaxHTTPSessionsNum&gt;50&lt;/MaxHTTPSessionsNum&gt;</p>
<p class="program3">&lt;MaxTCPFileSize&gt;100&lt;/MaxTCPFileSize&gt;</p>
<p class="program3">&lt;SessionTimeout&gt;1000&lt;/SessionTimeout&gt;</p>
<p class="program3">&lt;Flags&gt;<code class="programcharacter">KAV_SHT_ENGINE_KSN</code> | <code class="programcharacter">KAV_SHT_ENGINE_APUF</code>&lt;/Flags&gt;</p>
<p class="program3">&lt;<code class="programcharacter">TlsCertificateKeyFile</code>&gt;opt/kaspersky/http_data/https_key.pem&lt;/<code class="programcharacter">TlsCertificateKeyFile</code>&gt;</p>
<p class="program3">&lt;<code class="programcharacter">TlsCertificateFile</code>&gt;opt/kaspersky/http_data/https_cert.crt&lt;/<code class="programcharacter">TlsCertificateFile</code>&gt;</p>
<p class="program3">&lt;CORS&gt;</p>
<p class="program4">&lt;AccessControlAllowOrigin&gt;https://example.com&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program4">&lt;AccessControlAllowOrigin&gt;https://kaspersky.ru&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program3">&lt;/CORS&gt;</p>
<p class="program3">&lt;KeepAliveSettings&gt;			</p>
<p class="program4">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program4">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program4">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program3">&lt;/KeepAliveSettings&gt;</p>
<p class="program3">&lt;AuthSettings&gt;</p>
<p class="program4">&lt;UseAccessToken&gt;0&lt;/UseAccessToken&gt; &lt;!--Enable or disable API-token authentication --&gt;</p>
<p class="program4">&lt;AuthRequestField&gt;Authorization&lt;/AuthRequestField&gt;</p>
<p class="program4">&lt;UseBearerAuthScheme&gt;1&lt;/UseBearerAuthScheme&gt;</p>
<p class="program4">&lt;AccessTokens&gt;</p>
<p class="program5">&lt;Token&gt;</p>
<p class="program5">    &lt;Name&gt;Unlimited key&lt;/Name&gt;</p>
<p class="program5">    &lt;Value&gt;JWXA529CU2q7Udv7r3ji6BEMsha-5yu0KqU3yvKtf-6I+TU2AEQACKAABIgpEIIM&lt;/Value&gt;</p>
<p class="program5">    &lt;Description&gt;Kaspersky Scan Engine Clients. Full access scope&lt;/Description&gt;</p>
<p class="program5">    &lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program5">&lt;/Token&gt;</p>
<p class="program5">&lt;Token&gt;</p>
<p class="program5">    &lt;Name&gt;Key for URL-scanning&lt;/Name&gt;</p>
<p class="program5">    &lt;Value&gt;MIIEpgIBAAKCAQEA2UT+I6-ftKvy3UqK0uy5-ahsMEB6ij3r7vdU7q2UC925AXWJ&lt;/Value&gt;</p>
<p class="program5">    &lt;Description&gt;Server access key. Only URL-scanning&lt;/Description&gt;</p>
<p class="program5">    &lt;Enabled&gt;0&lt;/Enabled&gt;</p>
<p class="program5">&lt;/Token&gt;</p>
<p class="program4">&lt;/AccessTokens&gt;</p>
<p class="program3">&lt;/AuthSettings&gt;</p>
<p class="program2">&lt;/ServerSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;KSNSettings&gt;</p>
<p class="program3">&lt;UrlCheckTimeoutMs&gt;20000&lt;/UrlCheckTimeoutMs&gt;</p>
<p class="program3">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
<p class="program3">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
<p class="program2">&lt;/KSNSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;KAVScanningSettings&gt;</p>
<p class="program3">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
<p class="program3">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
<p class="program3">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
<p class="program3">&lt;Flags&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILBASES | KAV_O_M_MAILPLAIN | KAV_O_M_HEURISTIC_LEVEL_DETAIL&lt;/Flags&gt;</p>
<p class="program3">&lt;Mode&gt;KAV_SKIP&lt;/Mode&gt;</p>
<p class="program3">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
<p class="program2">&lt;/KAVScanningSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;DirectorySettings&gt;</p>
<p class="program3">&lt;BasesPath&gt;/home/bases&lt;/BasesPath&gt;</p>
<p class="program3">&lt;TempPath&gt;/home/temp&lt;/TempPath&gt;</p>
<p class="program3">&lt;LicensePath&gt;/home/license&lt;/LicensePath&gt;</p>
<p class="program3">&lt;LicensingMode&gt;1&lt;/LicensingMode&gt;</p>
<p class="program3">&lt;ScanningPaths&gt;</p>
<p class="program4">&lt;ScanningPath&gt;&lt;/ScanningPath&gt;</p>
<p class="program3">&lt;/ScanningPaths&gt;</p>
<p class="program2">&lt;/DirectorySettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;UseHTTPProxy&gt;1&lt;/UseHTTPProxy&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;HTTPProxy&gt;</p>
<p class="program3">&lt;url&gt;myproxy.mycompany.com&lt;/url&gt;</p>
<p class="program3">&lt;port&gt;3128&lt;/port&gt;</p>
<p class="program3">&lt;user&gt;doOTrypDTxpVJxUHYeKQTw==&lt;/user&gt;</p>
<p class="program3">&lt;pass&gt;8mSHXFix3uL+RP9oNeKDZQ==&lt;/pass&gt;</p>
<p class="program2">&lt;/HTTPProxy&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;UpdateSettings&gt;</p>
<p class="program3">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
<p class="program3">&lt;UpdatePeriodMinutes&gt;0&lt;/UpdatePeriodMinutes&gt;</p>
<p class="program3">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
<p class="program3">&lt;UpdateSources&gt;</p>
<p class="program4">&lt;Source&gt;[update source]&lt;/Source&gt;</p>
<p class="program3">&lt;/UpdateSources&gt;</p>
<p class="program3">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
<p class="program3">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
<p class="program3">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
<p class="program2">&lt;/UpdateSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;FormatRecognizerSettings&gt;</p>
<p class="program3">&lt;FormatsToSkipScanning&gt;</p>
<p class="program4">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program4">&lt;KAV_FF_GENERAL_CSV/&gt;</p>
<p class="program4">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program3">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program2">&lt;/FormatRecognizerSettings&gt; </p>
<p class="program">&nbsp;</p>
<p class="program">&lt;/Configuration&gt;</p>
</td>
</tr>

</table>
<p class="spacer"></p>


	<a href="#" class="bt-home">Page top</a>
	</div>
</body>

</html>
