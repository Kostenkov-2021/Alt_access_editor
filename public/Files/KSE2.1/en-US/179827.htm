<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content=""/>
    <meta name="viewport" content="maximum-scale=1.0" />
    <title> Boosting performance of Kaspersky Scan Engine </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css"/>
    <link rel="stylesheet" type='text/css' href="styles.css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="favicon.png" type="image/png"/>

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Please enable JavaScript in your browser!</a>
	</noscript>
	<div class="cont">
	<h1 id="t234286" class="heading1">Boosting performance of Kaspersky Scan Engine</h1>
<p class="bodytext">Kaspersky Scan Engine supports multithreading. This feature allows you to use Kaspersky Scan Engine on high-load systems. </p>
<p class="bodytext">This section describes best practices for boosting performance of Kaspersky Scan Engine.</p>
<p class="introheading">General recommendations on raising performance</p>
<p class="bodytext">To achieve optimal performance:</p>
<ul class="listbullet1"><li class="listbullet1">Use the number of scanning processes equal to the number of CPU cores and two threads per process.</li><li class="listbullet1">Enable Keep-Alive for <a id="h207296" class="englishcrossreferencetemplate" href="207291.htm" target="_self">ICAP</a> and <a id="h207358" class="englishcrossreferencetemplate" href="207348.htm" target="_self">HTTP</a> connections.</li></ul><p class="introheading">Recommendations for raising performance of Kaspersky Scan Engine in HTTP mode</p>
<p class="bodytext">The following list presents the recommended order of configuring Kaspersky Scan Engine for peak performance:</p>
<ol class="listnumber1"><li class="listnumber1">Specify the number of scan processes and scan threads that you want in the <code class="programcharacter">ScannersCount</code> parameter and the <code class="programcharacter">ThreadsCount</code> parameter, respectively.<p class="listcontinue1"> The threads process scan tasks from the scan queue. The length of the scan queue is specified in the <code class="programcharacter">QueueLen</code> parameter of the <a id="h179927" class="englishcrossreferencetemplate" href="184799.htm" target="_self">HTTP mode configuration file</a>.</p>
</li><li class="listnumber1">Specify the maximum number of active TCP connections to Kaspersky Scan Engine in the <code class="programcharacter">MaxHTTPSessionsNum</code> parameter.<p class="listcontinue1">When Kaspersky Scan Engine works in a high-load environment, it is recommended to make the value of this parameter greater than the value of <code class="programcharacter">ThreadsCount</code>, so that the scan queue is filled faster and scan threads do not stand idle. Please notice that Kaspersky Scan Engine loads files into system memory while scanning. The more active sessions Kaspersky Scan Engine has, the more system memory it consumes. You can limit the maximum allowed size of headers and bodies of HTTP messages that are sent to KAV HTTPD by specifying their maximum size in the <code class="programcharacter">MaxTCPFileSize</code> parameter.</p>
</li><li class="listnumber1">Specify the desired number of pending TCP connections to Kaspersky Scan Engine in the <code class="programcharacter">MaxIncomingConnectionsNum</code> parameter. Notice that this value is passed to the <code class="programcharacter">listen(2)</code> system function and may be changed depending on the operating system.</li></ol><p class="bodytext">It is recommended to set the value of <code class="programcharacter">MaxIncomingConnectionsNum</code> several times greater than the value of <code class="programcharacter">MaxHTTPSessionsNum</code>. This way, the pending connections will be put in the connection queue and scan tasks from these clients will not be lost.</p>
<p class="attentionbody">Using TLS significantly reduces the performance of Kaspersky Scan Engine. For best results, use TLS 1.3 as it is the most productive.</p>
<p class="introheading">Recommendations for raising performance of Kaspersky Scan Engine in ICAP mode</p>
<p class="bodytext">Specify the number of scan processes and scan threads that you want in the <code class="programcharacter">ScannersCount</code> parameter and the <code class="programcharacter">ThreadsCount</code> parameter, respectively.</p>


	<a href="#" class="bt-home">Page top</a>
	</div>
</body>

</html>
