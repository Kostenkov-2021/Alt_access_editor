<!DOCTYPE html>
<html lang="ru-RU" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="maximum-scale=1.0">
    <title> Ручная установка (Windows) </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css">
    <link rel="stylesheet" type='text/css' href="styles.css">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.png" type="image/png">

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Пожалуйста, включите JavaScript в вашем браузере!</a>
	</noscript>
	<div class="cont">
	<h3 id="t234442" class="heading3">Ручная установка (Windows)</h3>
<p class="bodytext">В этом разделе описывается, как вручную установить Kaspersky Scan Engine на системах Windows. </p>
<p class="procedureheading">Чтобы установить Kaspersky Scan Engine вручную: </p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Создайте папку <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine</code>. В этом справочном документе эта папка называется <code class="programcharacter">%service_dir%</code>. </li><li class="listnumber1">Распакуйте содержимое пакета распространения в папку <code class="programcharacter">%service_dir%</code> на вашем компьютере.</li><li class="listnumber1">Ознакомьтесь с Пользовательским соглашением (End User License Agreement, EULA) для Kaspersky Scan Engine. Пользовательское соглашение находится по адресу <code class="programcharacter">%service_dir%/doc/license.txt</code>.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения, переходите к следующему шагу. Если вы отклоняете условия Пользовательского соглашения, отмените установку.</p> </li><li class="listnumber1">Откройте файл <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Примите условия Пользовательского соглашения с конечным пользователем. В файле klScanEngineUI.xml замените <code class="programcharacter">&lt;Common&gt;rejected&lt;/Common&gt;</code> на <code class="programcharacter">&lt;Common&gt;accepted&lt;/Common&gt;</code>.</li><li class="listnumber1">Если вы хотите использовать Kaspersky Security Network (KSN), ознакомьтесь с Пользовательским соглашением для KSN и Политикой конфиденциальности. Это Пользовательское соглашение также находится по адресу %service_dir%\doc\ksn_license.txt и содержит ссылку на Политику конфиденциальности.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения для KSN и Политикой конфиденциальности, переходите к следующему шагу. Если вы отклоняете условия Пользовательского соглашения для KSN или Политику конфиденциальности, перейдите к шагу 9.</p> </li><li class="listnumber1">Примите Пользовательское соглашение для KSN. Измените <code class="programcharacter">&lt;KSN&gt;rejected&lt;/KSN&gt; </code>на <code class="programcharacter">&lt;KSN&gt;accepted&lt;/KSN&gt;</code> в klScanEngineUI.xml.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Откройте файл <code class="programcharacter">%service_dir%\bin\kavhttpd.xml</code>. </li><li class="listnumber1">В элементах <code class="programcharacter">BasesPath</code> и <code class="programcharacter">TempPath</code> укажите полный путь к директории <code class="programcharacter">%service_dir%\bin\bases</code> и к директории, содержащей временные файлы, используемые Kaspersky Scan Engine соответственно. Сохраните и закройте файл.</li><li class="listnumber1">Если вы хотите, чтобы Kaspersky Scan Engine запускался автоматически при загрузке системы, выполните следующие действия:<ol class="listalpha2"><li class="listalpha2">В Windows откройте окно командной строки от имени администратора.</li><li class="listalpha2">Выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">sc create &quot;Kaspersky ScanEngine&quot; binpath= &quot;%service_dir%\bin\kavhttpd.exe -c %service_dir%\bin\kavhttpd.xml&quot; start= auto DisplayName= &quot;Kaspersky ScanEngine&quot;</code></p> </li></ol><p class="attentioncontinue1">Обратите внимание, что, если полный путь к файлу конфигурации содержит пробел, вы должны добавить кавычки (<code class="programcharacter">&quot;</code>) после косой черты (<code class="programcharacter">\</code>). Пример: <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine\bin&gt;sc create &quot;Kaspersky ScanEngine&quot; binpath= &quot;C:\Program Files\Kaspersky Lab\ScanEngine\bin\kavhttpd.exe -c \&quot;C:\Program Files\Kaspersky Lab\ScanEngine\bin\kavhttpd.xml\&quot;&quot; </code></p> </li><li class="listnumber1">Перейдите к разделу <a id="h180269" class="englishcrossreferencetemplate" href="179865.htm" target="_self">Начало работы с Kaspersky Scan Engine в режиме HTTP</a>.</li></ol><p class="introheading">Включение Kaspersky Scan Engine GUI</p>
<p class="procedureheading">Чтобы включить Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1"><a id="h193039" class="englishcrossreferencetemplate" href="192976.htm" target="_self">Установите и настройте PostgreSQL</a>.</li><li class="listnumber1">На компьютере, на котором установлен PostgreSQL, выполните перечисленные ниже действия от имени пользователя, который может создавать новых пользователей и базы данных. Для выполнения этих действий вы можете использовать утилиту psql или pgAdmin. Если вы используете утилиту psql, укажите пробел и имя пользователя после параметра <code class="programcharacter">-U</code>. <ol class="listalpha2"><li class="listalpha2">Создайте нового пользователя PostgreSQL с именем <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">CREATE USER scanengine;</code></p> </li><li class="listalpha2">Задайте пароль для пользователя <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">ALTER USER scanengine WITH PASSWORD &#39;%PASSWORD%&#39;;</code></p> </li><li class="listalpha2">Используя PostgreSQL, создайте базу данных под названием <code class="programcharacter">kavebase</code>:<p class="listcontinue2"><code class="programcharacter">CREATE DATABASE kavebase OWNER scanengine;</code></p> </li><li class="listalpha2">В базе данных <code class="programcharacter">kavebase</code> выполните запросы, описанные в <code class="programcharacter">%service_dir%\samples\tables.sql</code>.<p class="listcontinue2"><code class="programcharacter">psql -d kavebase -a -f tables.sql</code></p> </li></ol></li><li class="listnumber1">Откройте <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Измените <code class="programcharacter">&lt;EnableUI&gt;false&lt;/EnableUI&gt;</code> на <code class="programcharacter">&lt;EnableUI&gt;true&lt;/EnableUI&gt;</code>.</li><li class="listnumber1">В элементе <code class="programcharacter">&lt;ConnectionString&gt;</code> укажите адрес веб-службы Kaspersky Scan Engine GUI в формате <code class="programcharacter">%IP%:%port%</code>.<p class="listcontinue1">Например:</p> <p class="listcontinue1"><code class="programcharacter">&lt;ConnectionString&gt;198.51.100.0:443&lt;/ConnectionString&gt;</code></p> </li><li class="listnumber1">Укажите SSL-сертификат для установки в веб-службе Kaspersky Scan Engine GUI.<ul class="listbullet2"><li class="listbullet2">Если у вас уже есть SSL-сертификат, который вы хотите установить в веб-службе Kaspersky Scan Engine GUI, укажите пути к вашему сертификату и вашему закрытому ключу:<ol class="listalpha3"><li class="listalpha3">В элементе <code class="programcharacter">&lt;SSLCertificatePath&gt;</code> укажите путь к вашему сертификату SSL.</li><li class="listalpha3">В элементе <code class="programcharacter">&lt;SSLPrivateKeyPath&gt;</code> укажите путь к вашему закрытому ключу.</li></ol></li><li class="listbullet2">Если у вас нет SSL-сертификата, который вы хотите установить в веб-службе Kaspersky Scan Engine GUI, сгенерируйте новый. Запустите утилиту <code class="programcharacter">%service_dir%\tools\openssl</code> следующим образом:<p class="listcontinue2"><code class="programcharacter">%service_dir%\tools\openssl.exe req -x509 -nodes -days 1825 -subj /C=RU/CN=&quot;%ConnectionString%&quot; -newkey rsa:4096 -extensions EXT -config &quot;%service_dir%\tools\openssl.cnf&quot; -keyout &quot;%service_dir%\httpsrv\kl_scanengine_private.pem&quot; -out &quot;%service_dir%\httpsrv\kl_scanengine_cert.pem&quot;</code></p> <p class="listcontinue2">Здесь <code class="programcharacter">%ConnectionString%</code> – это значение, указанное в элементе <code class="programcharacter">%ConnectionString%</code>. Рекомендуется использовать значения <code class="programcharacter">rsa:4096</code> или <code class="programcharacter">rsa:3072</code> с параметром <code class="programcharacter">-newkey</code>. Минимальное поддерживаемое значение – <code class="programcharacter">rsa:2048</code>. </p> </li></ul></li><li class="listnumber1">Зашифруйте имя пользователя и пароль пользователя, указанного на шаге 3. Kaspersky Scan Engine будет использовать эти имя пользователя и пароль для подключения к базе данных kavebase.<p class="listcontinue1">Чтобы зашифровать учетные данные, <a id="h209335" class="englishcrossreferencetemplate" href="181814.htm" target="_self">используйте утилиту kav_encrypt</a>. Эта утилита также автоматически записывает зашифрованные имя пользователя и пароль в <code class="programcharacter">klScanEngineUI.xml</code>. Утилита находится в папке <code class="programcharacter">%service_dir%\tools\</code>.</p> <p class="listcontinue1">Запустите утилиту kav_encrypt со следующими параметрами:</p> <p class="listcontinue1"><code class="programcharacter">-d %username%:%password%</code></p> </li><li class="listnumber1">В элементе <code class="programcharacter">DatabaseSettings &gt; ConnectionString </code>укажите адрес базы данных kavebase в формате <code class="programcharacter">%IP%:%port%</code>.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Если вы хотите, чтобы Kaspersky Scan Engine GUI запускался автоматически при загрузке системы, выполните следующие действия:<ol class="listalpha2"><li class="listalpha2">Откройте окно командной строки от имени администратора.</li><li class="listalpha2">Выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">sc create &quot;Kaspersky ScanEngine UI&quot; binpath= &quot;%service_dir%\bin\klScanEngineUI.exe --svc&quot; start= auto DisplayName= &quot;Kaspersky ScanEngine UI&quot;</code></p> </li></ol></li><li class="listnumber1">Запустите Kaspersky Scan Engine GUI:<p class="listcontinue1"><code class="programcharacter">sc start &quot;Kaspersky ScanEngine UI&quot;</code></p> </li></ol><p class="bodytext"></p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div>
</body>

</html>
