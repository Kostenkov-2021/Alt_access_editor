<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content=""/>
    <meta name="viewport" content="maximum-scale=1.0" />
    <title> Setting up the connection queue in HTTP mode </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css"/>
    <link rel="stylesheet" type='text/css' href="styles.css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="favicon.png" type="image/png"/>

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Please enable JavaScript in your browser!</a>
	</noscript>
	<div class="cont">
	<h3 id="t234518" class="heading3">Setting up the connection queue in HTTP mode</h3>
<p class="bodytext">The connection queue contains pending connections to Kaspersky Scan Engine. By configuring the connection queue, you can influence the performance of Kaspersky Scan Engine in HTTP mode. This section explains how to configure the connection queue.</p>
<p class="bodytext">Three parameters allow you to configure the connection queue: <code class="programcharacter">MaxHTTPSessionsNum</code>, <code class="programcharacter">MaxIncomingConnectionsNum</code>, and <code class="programcharacter">ThreadsCount</code>. These parameters can be set in the <a id="h179927" class="englishcrossreferencetemplate" href="184799.htm" target="_self">HTTP mode configuration file</a>.</p>
<p class="introheading">MaxHTTPSessionsNum</p>
<p class="bodytext">This parameter specifies the maximum number of active TCP connections that Kaspersky Scan Engine can maintain simultaneously. When a TCP connection with a client closes, Kaspersky Scan Engine can accept another connection in its place.</p>
<p class="introheading">MaxIncomingConnectionsNum</p>
<p class="bodytext">This parameter specifies the maximum number of pending TCP connections to Kaspersky Scan Engine. If the number of pending connections reaches <code class="programcharacter">MaxIncomingConnectionsNum</code>, additional connections may be dropped.</p>
<p class="introheading">ThreadsCount</p>
<p class="bodytext">This parameter specifies the maximum number of simultaneously running scan threads. When a scan thread completes a scanning task, it picks up another one from the scan queue.</p>
<p class="introheading">Examples of the connection queue configuration</p>
<p class="bodytext">These examples show how you can use the connection queue to influence the behavior of Kaspersky Scan Engine.</p>
<ul class="listbullet1"><li class="listbullet1">Kaspersky Scan Engine without a connection queue<p class="listcontinue1">Consider the following example: the value of <code class="programcharacter">MaxIncomingConnectionsNum</code> is <code class="programcharacter">16</code>, the value of <code class="programcharacter">ThreadsCount</code> is <code class="programcharacter">16</code>, and the value of <code class="programcharacter">MaxHTTPSessionsNum</code> is <code class="programcharacter">50</code>. In this example, Kaspersky Scan Engine can accept only <code class="programcharacter">16</code> connections at a time, but because <code class="programcharacter">MaxHTTPSessionsNum</code> is <code class="programcharacter">50</code>, their scan tasks are accepted immediately. Additional connections may be dropped. Sixteen scan threads is usually enough to process scan tasks from 16 clients quickly, so the scan queue will be short.</p>
</li><li class="listbullet1">Kaspersky Scan Engine with a connection queue<p class="listcontinue1">Consider the following example: the value of <code class="programcharacter">MaxIncomingConnectionsNum</code> is <code class="programcharacter">100</code>, the value of <code class="programcharacter">ThreadsCount</code> is <code class="programcharacter">16</code>, and the value of <code class="programcharacter">MaxHTTPSessionsNum</code> is <code class="programcharacter">50</code>. In this example, Kaspersky Scan Engine can accept <code class="programcharacter">50</code> connections at a time. Kaspersky Scan Engine starts processing scan tasks from some of these clients in <code class="programcharacter">16</code> scan threads, and the rest of the scan tasks form the scan queue. Other pending connections form the connection queue and wait to be accepted. Additional connections may be dropped.</p>
</li></ul>


	<a href="#" class="bt-home">Page top</a>
	</div>
</body>

</html>
