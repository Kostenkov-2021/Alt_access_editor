<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content=""/>
    <meta name="viewport" content="maximum-scale=1.0" />
    <title> Automatic upgrade (Linux) </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css"/>
    <link rel="stylesheet" type='text/css' href="styles.css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="favicon.png" type="image/png"/>

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Please enable JavaScript in your browser!</a>
	</noscript>
	<div class="cont">
	<h2 id="t234282" class="heading2">Automatic upgrade (Linux)</h2>
<p class="bodytext">Starting with Kaspersky Scan Engine version 2.0, you can automatically upgrade Kaspersky Scan Engine to a newer version.</p>
<p class="introheading">Using the install utility to upgrade</p>
<p class="bodytext">You can upgrade Kaspersky Scan Engine with the same utility that is used to install Kaspersky Scan Engine: the <code class="programcharacter">install</code> utility. You can find the utility in the <a id="h180273" class="englishcrossreferencetemplate" href="184793.htm" target="_self">distribution kit</a>.</p>
<p class="bodytext">The <code class="programcharacter">install</code> utility upgrades Kaspersky Scan Engine when the program meets the following requirements:</p>
<ul class="listbullet1"><li class="listbullet1">Kaspersky Scan Engine is already installed on the computer (that is, the <code class="programcharacter">/opt/kaspersky/ScanEngine</code> directory exists).<p class="listcontinue1">If Kaspersky Scan Engine is not installed on the computer, the <code class="programcharacter">install</code> utility performs <a id="h193036" class="englishcrossreferencetemplate" href="192977.htm" target="_self">automatic installation</a>.</p>
</li><li class="listbullet1">The version of Kaspersky Scan Engine that is already installed is 2.0 or later, and this version is earlier than the version being installed during the upgrade.<p class="listcontinue1">If Kaspersky Scan Engine version does not meet this requirement, the <code class="programcharacter">install</code> utility displays an error message, and then exits.</p>
</li></ul><p class="bodytext">When upgrading Kaspersky Scan Engine, the <code class="programcharacter">install</code> utility backs up important objects such as configuration files, TLS certificates, and the license. Successful upgrade means that all of these objects are already integrated into the new version of Kaspersky Scan Engine. If the upgrade fails for some reason, the <code class="programcharacter">install</code> utility restores the previous version of Kaspersky Scan Engine, including objects that were backed up.</p>
<p class="introheading">Stopping instances of Kaspersky Scan Engine</p>
<p class="bodytext">If the Kaspersky Scan Engine instance being upgraded is a part of a cluster, you need to stop all instances in the cluster before the upgrade.</p>
<p class="bodytext">It is important to stop all instances because the <code class="programcharacter">install</code> utility modifies the <code class="programcharacter">kavebase</code> database when upgrading Kaspersky Scan Engine.</p>
<p class="procedureheading">To stop the Kaspersky Scan Engine instance:</p>
<ul class="listbullet1"><li class="listbullet1">If an instance works in ICAP mode, run <code class="programcharacter">service kavicapd stop.</code></li><li class="listbullet1">If an instance works in HTTP mode, run <code class="programcharacter">service kavhttpd stop.</code></li><li class="listbullet1">If an instance uses the Kaspersky Scan Engine GUI, run <code class="programcharacter">service klScanEngineUI stop.</code></li></ul><p class="introheading">Upgrading Kaspersky Scan Engine</p>
<p class="procedureheading">To upgrade Kaspersky Scan Engine automatically:</p>
<ol class="listnumber1"><li class="listnumber1">Make sure that you have root (administrator) privileges.</li><li class="listnumber1">Run <code class="programcharacter">install</code>.</li><li class="listnumber1">Read the End User License Agreement (EULA) for Kaspersky Scan Engine.<p class="listcontinue1">If you agree with the terms of the EULA, accept it. If you decline to accept the terms of the EULA, the upgrade will be canceled.</p>
</li><li class="listnumber1">If you agreed to use Kaspersky Security Network (KSN) earlier, the install utility displays the current terms of the EULA for KSN and the Privacy Policy. Read the new EULA for KSN and the Privacy Policy.<p class="listcontinue1">If you agree with the terms of the EULA and the Privacy Policy, accept them. If you decline the terms of the EULA for KSN or the Privacy Policy, you will not be able to use KSN, but the upgrade will continue. You can enable KSN later by using <a id="h182505" class="englishcrossreferencetemplate" href="179699.htm" target="_self">Kaspersky Scan Engine GUI</a> or the Kaspersky Scan Engine configuration file (<a id="h201090" class="englishcrossreferencetemplate" href="201022.htm" target="_self">HTTP</a> or <a id="h201224" class="englishcrossreferencetemplate" href="200603.htm" target="_self">ICAP</a>).</p>
</li><li class="listnumber1">Specify the absolute path to the directory that contains the KAV SDK package.<p class="listcontinue1">The KAV SDK package is located in a separate directory, starting with Kaspersky Scan Engine version 2.1.</p>
</li></ol><p class="bodytext">After you specify the necessary data, Kaspersky Scan Engine is upgraded, and then started.</p>
<p class="bodytext">After you upgrade Kaspersky Scan Engine, you can check the integrity of its components at any time by <a id="h209330" class="englishcrossreferencetemplate" href="209025.htm" target="_self">using the integrity check tool</a>.</p>
<p class="introheading">Migration from the init script to the systemd unit file</p>
<p class="bodytext">Starting from Kaspersky Scan Engine version 2.1, the <code class="programcharacter">init</code> script is no longer supported. Instead of this script, you can use the <code class="programcharacter">systemd</code> unit file.</p>
<p class="bodytext">If you used the <code class="programcharacter">init</code> script to manage Kaspersky Scan Engine in previous versions, the <code class="programcharacter">install</code> utility automatically performs the migration from the <code class="programcharacter">init</code> script to <code class="programcharacter">systemd</code> during the upgrade.</p>
<p class="bodytext">Learn more about using <code class="programcharacter">systemd</code> in <a id="h209554" class="englishcrossreferencetemplate" href="184956.htm" target="_self">HTTP mode</a> and <a id="h209555" class="englishcrossreferencetemplate" href="192397.htm" target="_self">ICAP mode</a>.</p>
<p class="introheading">Adding new elements to the configuration files</p>
<p class="bodytext">There are new elements added in the new version of Kaspersky Scan Engine.  The <code class="programcharacter">install</code> utility does not add these elements to the configuration files during the upgrade. You can add the new elements by using the <a id="h180139" class="englishcrossreferencetemplate" href="179683.htm" target="_self">Kaspersky Scan Engine GUI</a>, or directly to the <a id="h179927" class="englishcrossreferencetemplate" href="184799.htm" target="_self">kavhttpd.xml</a> and <a id="h180154" class="englishcrossreferencetemplate" href="192989.htm" target="_self">kavicapd.xml</a> configuration files. See also the detailed information about <a id="h222091" class="englishcrossreferencetemplate" href="209374.htm" target="_self">the new elements in the configuration file</a>.</p>
<p class="introheading">Clearing browser cache</p>
<p class="bodytext">If you are using the Kaspersky Scan Engine GUI, clear your browser cache after the upgrade.</p>


	<a href="#" class="bt-home">Page top</a>
	</div>
</body>

</html>
