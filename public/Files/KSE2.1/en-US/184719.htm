<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content=""/>
    <meta name="viewport" content="maximum-scale=1.0" />
    <title> Manual installation (Windows) </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css"/>
    <link rel="stylesheet" type='text/css' href="styles.css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="favicon.png" type="image/png"/>

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Please enable JavaScript in your browser!</a>
	</noscript>
	<div class="cont">
	<h3 id="t234442" class="heading3">Manual installation (Windows)</h3>
<p class="bodytext">This section describes how to manually install Kaspersky Scan Engine on Windows systems. </p>
<p class="procedureheading">To install Kaspersky Scan Engine manually: </p>
<ol class="listnumber1"><li class="listnumber1">Make sure that you have administrator privileges.</li><li class="listnumber1">Create the <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine</code> folder. This folder is called <code class="programcharacter">%service_dir%</code> in this Help document. </li><li class="listnumber1">Unpack the distribution kit contents to the <code class="programcharacter">%service_dir%</code> folder on your system.</li><li class="listnumber1">Read the End User License Agreement (EULA) for Kaspersky Scan Engine. The EULA is located at <code class="programcharacter">%service_dir%\doc\license.txt</code>.<p class="listcontinue1">If you agree to the terms of the EULA, proceed to the next step. If you decline the terms of the EULA, cancel the installation.</p>
</li><li class="listnumber1">Open file <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Accept the EULA. Change <code class="programcharacter">&lt;Common&gt;rejected&lt;/Common&gt;</code> to <code class="programcharacter">&lt;Common&gt;accepted&lt;/Common&gt;</code> in the klScanEngineUI.xml file.</li><li class="listnumber1">If you want to use Kaspersky Security Network (KSN), read the EULA for KSN and the Privacy Policy. This EULA is also located at %service_dir%\doc\ksn_license.txt and contains the link to the Privacy Policy.<p class="listcontinue1">If you agree to the terms of the EULA for KSN and the Privacy Policy, proceed to the next step. If you decline the terms of the EULA for KSN or the Privacy Policy, proceed to step 9.</p>
</li><li class="listnumber1">Accept the EULA for KSN. Change <code class="programcharacter">&lt;KSN&gt;rejected&lt;/KSN&gt; </code>to <code class="programcharacter">&lt;KSN&gt;accepted&lt;/KSN&gt;</code> in klScanEngineUI.xml.</li><li class="listnumber1">Save and close <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Open file <code class="programcharacter">%service_dir%\bin\kavhttpd.xml</code>. </li><li class="listnumber1">At the <code class="programcharacter">BasesPath</code> and the <code class="programcharacter">TempPath</code> element specify the full path to the <code class="programcharacter">%service_dir%\bin\bases</code> directory and to the directory that contains temporary files used by Kaspersky Scan Engine, respectively. Save and close the file.</li><li class="listnumber1">If you want Kaspersky Scan Engine to start automatically on system bootup, do the following:<ol class="listalpha2"><li class="listalpha2">In Windows, open a Command Prompt window as Administrator.</li><li class="listalpha2">Run the following command:<p class="listcontinue2"><code class="programcharacter">sc create &quot;Kaspersky ScanEngine&quot; binpath= &quot;%service_dir%\bin\kavhttpd.exe -c  %service_dir%\bin\kavhttpd.xml&quot; start= auto DisplayName= &quot;Kaspersky ScanEngine&quot;</code></p>
</li></ol><p class="attentioncontinue1">Note that if the full path to the configuration file contains a space character, you have to add a quote mark (<code class="programcharacter">&quot;</code>) after the slash (<code class="programcharacter">\</code>) mark. Example: <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine\bin&gt;sc create &quot;Kaspersky ScanEngine&quot; binpath= &quot;C:\Program Files\Kaspersky Lab\ScanEngine\bin\kavhttpd.exe -c \&quot;C:\Program Files\Kaspersky Lab\ScanEngine\bin\kavhttpd.xml\&quot;&quot; </code></p>
</li><li class="listnumber1">Proceed to <a id="h180269" class="englishcrossreferencetemplate" href="179865.htm" target="_self">getting started with Kaspersky Scan Engine in HTTP mode</a>.</li></ol><p class="introheading">Enabling Kaspersky Scan Engine GUI</p>
<p class="procedureheading">To enable Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Make sure that you have administrator privileges.</li><li class="listnumber1"><a id="h193039" class="englishcrossreferencetemplate" href="192976.htm" target="_self">Install and configure PostgreSQL</a>.</li><li class="listnumber1">On the computer that has PostgreSQL installed, perform the actions listed below under a user that can create new users and databases. To perform these actions, you can use either the psql utility, or pgAdmin. If you use the psql utility, specify a space character and a user name after the <code class="programcharacter">-U</code> parameter. <ol class="listalpha2"><li class="listalpha2">Create a new PostgreSQL user called <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">CREATE USER scanengine;</code></p>
</li><li class="listalpha2">Set the password for the <code class="programcharacter">scanengine</code> user:<p class="listcontinue2"><code class="programcharacter">ALTER USER scanengine WITH PASSWORD '%PASSWORD%';</code></p>
</li><li class="listalpha2">Using PostgreSQL, create a database called <code class="programcharacter">kavebase</code>:<p class="listcontinue2"><code class="programcharacter">CREATE DATABASE kavebase OWNER scanengine;</code></p>
</li><li class="listalpha2">In the <code class="programcharacter">kavebase</code> database run the queries described in <code class="programcharacter">%service_dir%\samples\tables.sql</code>.<p class="listcontinue2"><code class="programcharacter">psql -d kavebase -a -f tables.sql</code></p>
</li></ol></li><li class="listnumber1">Open <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Change <code class="programcharacter">&lt;EnableUI&gt;false&lt;/EnableUI&gt;</code> to <code class="programcharacter">&lt;EnableUI&gt;true&lt;/EnableUI&gt;</code>.</li><li class="listnumber1">In the <code class="programcharacter">&lt;ConnectionString&gt;</code> element, specify the address of the Kaspersky Scan Engine GUI web service in <code class="programcharacter">%IP%:%port%</code> format.<p class="listcontinue1">For example:</p>
<p class="listcontinue1"><code class="programcharacter">&lt;ConnectionString&gt;198.51.100.0:443&lt;/ConnectionString&gt;</code></p>
</li><li class="listnumber1">Specify the SSL certificate to install in the Kaspersky Scan Engine GUI web service.<ul class="listbullet2"><li class="listbullet2">If you already have an SSL certificate that you want to install in the Kaspersky Scan Engine GUI web service, specify the paths to your certificate and your private key:<ol class="listalpha3"><li class="listalpha3">In the <code class="programcharacter">&lt;SSLCertificatePath&gt;</code> element, specify the path to your SSL certificate.</li><li class="listalpha3">In the <code class="programcharacter">&lt;SSLPrivateKeyPath&gt;</code> element, specify the path to your private key.</li></ol></li><li class="listbullet2">If you do not have an SSL certificate that you want to install in the Kaspersky Scan Engine GUI web service, generate a new one. Run the <code class="programcharacter">%service_dir%\tools\openssl</code> utility as follows:<p class="listcontinue2"><code class="programcharacter">%service_dir%\tools\openssl.exe req -x509 -nodes -days 1825 -subj /C=RU/CN=&quot;%ConnectionString%&quot; -newkey rsa:4096 -extensions EXT -config &quot;%service_dir%\tools\openssl.cnf&quot; -keyout &quot;%service_dir%\httpsrv\kl_scanengine_private.pem&quot; -out &quot;%service_dir%\httpsrv\kl_scanengine_cert.pem&quot;</code></p>
<p class="listcontinue2">Here <code class="programcharacter">%ConnectionString%</code> is the value that is specified in the <code class="programcharacter">&lt;ConnectionString&gt;</code> element. It is recommended to use the values <code class="programcharacter">rsa:4096</code> or <code class="programcharacter">rsa:3072</code> with the <code class="programcharacter">-newkey</code> parameter. The minimum supported value is <code class="programcharacter">rsa:2048</code>. </p>
</li></ul></li><li class="listnumber1">Encrypt the user name and password of the user that you specified in step 3. Kaspersky Scan Engine will use this user name and password to connect to the kavebase database.<p class="listcontinue1">To encrypt the credentials, <a id="h209335" class="englishcrossreferencetemplate" href="181814.htm" target="_self">use the kav_encrypt utility</a>. This utility also automatically writes the encrypted user name and password to <code class="programcharacter">klScanEngineUI.xml</code>. The utility is located in the <code class="programcharacter">%service_dir%\tools\</code> folder.</p>
<p class="listcontinue1">Run the kav_encrypt utility with the following options:</p>
<p class="listcontinue1"><code class="programcharacter">-d %username%:%password%</code></p>
</li><li class="listnumber1">In the <code class="programcharacter">DatabaseSettings &gt; ConnectionString </code>element, specify the address of the kavebase database in format <code class="programcharacter">%IP%:%port%</code>.</li><li class="listnumber1">Save and close <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">If you want Kaspersky Scan Engine GUI to start automatically on system bootup, do the following:<ol class="listalpha2"><li class="listalpha2">Open a Command Prompt window as Administrator.</li><li class="listalpha2">Run the following command:<p class="listcontinue2"><code class="programcharacter">sc create &quot;Kaspersky ScanEngine UI&quot; binpath= &quot;%service_dir%\bin\klScanEngineUI.exe --svc&quot; start= auto DisplayName= &quot;Kaspersky ScanEngine UI&quot;</code></p>
</li></ol></li><li class="listnumber1">Start Kaspersky Scan Engine GUI:<p class="listcontinue1"><code class="programcharacter">sc start &quot;Kaspersky ScanEngine UI&quot;</code></p>
</li></ol><p class="bodytext"></p>


	<a href="#" class="bt-home">Page top</a>
	</div>
</body>

</html>
