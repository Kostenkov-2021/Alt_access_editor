<!DOCTYPE html>
<html lang="ru-RU" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="maximum-scale=1.0">
    <title> Справочная информация Kaspersky Scan Engine </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type='text/css' href="typography.css">
    <link rel="stylesheet" type='text/css' href="styles.css">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.png" type="image/png">

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class='cont all-in-one-toc'><h1 class='heading1 js_all_in_one_header'>Содержание</h1><ul class='contents contents_all-in-one'><li class="contents__item"><a href='226466.htm'> Справочная информация Kaspersky Scan Engine </a></li><li class="contents__item"><a href='192968.htm'> О Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='209374.htm'> Что нового </a></li><li class="contents__item"><a href='184797.htm'> Основные функции Kaspersky Scan Engine </a></li><li class="contents__item"><a href='192970.htm'> Технологии обнаружения Kaspersky Scan Engine </a></li><li class="contents__item"><a href='184796.htm'> Архитектура Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192971.htm'> Режим HTTP </a></li><li class="contents__item"><a href='192972.htm'> Режим ICAP </a></li><li class="contents__item"><a href='211897.htm'> Экземпляры и кластеры </a></li></ul></li><li class="contents__item"><a href='179824.htm'> Сценарии использования Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='180130.htm'> Защита от угроз </a></li><li class="contents__item"><a href='180131.htm'> Веб-защита от вредоносных и фишинговых сайтов </a></li><li class="contents__item"><a href='180133.htm'> Проверка репутации файлов и URL-адресов в KSN </a></li></ul></li><li class="contents__item"><a href='184795.htm'> Системные требования </a></li><li class="contents__item"><a href='184793.htm'> Содержимое пакета распространения (Linux) </a></li><li class="contents__item"><a href='192973.htm'> Содержимое пакета распространения (Windows) </a></li></ul></li><li class="contents__item"><a href='180558.htm'> Начало работы с Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179865.htm'> Начало работы с Kaspersky Scan Engine в режиме HTTP </a></li><li class="contents__item"><a href='179890.htm'> Начало работы с Kaspersky Scan Engine в режиме ICAP  </a></li></ul></li><li class="contents__item"><a href='192974.htm'> Установка Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='184775.htm'> Подготовка к установке Kaspersky Scan Engine GUI </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192975.htm'> Установка и настройка PostgreSQL (Linux) </a></li><li class="contents__item"><a href='192976.htm'> Установка и настройка PostgreSQL (Windows) </a></li></ul></li><li class="contents__item"><a href='199729.htm'> Установка Kaspersky Scan Engine на Linux </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192977.htm'> Автоматическая установка (Linux) </a></li><li class="contents__item"><a href='180652.htm'> Ручная установка (Linux) </a></li></ul></li><li class="contents__item"><a href='199730.htm'> Установка Kaspersky Scan Engine на Windows </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192978.htm'> Автоматическая установка (Windows) </a></li><li class="contents__item"><a href='184719.htm'> Ручная установка (Windows) </a></li></ul></li></ul></li><li class="contents__item"><a href='221907.htm'> Обновление Kaspersky Scan Engine в Linux </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='221941.htm'> Автоматическое обновление (Linux) </a></li><li class="contents__item"><a href='209771.htm'> Обновление вручную (Linux) </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='225714.htm'> Обновление Kaspersky Scan Engine 2.0 и более поздней версии вручную </a></li><li class="contents__item"><a href='225715.htm'> Обновление Kaspersky Scan Engine 1.0 вручную </a></li></ul></li></ul></li><li class="contents__item"><a href='96464.htm'> Обновление антивирусной базы и обновляемых модулей </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='218188.htm'> Об обновлении </a></li><li class="contents__item"><a href='218259.htm'> Резервное копирование и восстановление антивирусных баз </a></li><li class="contents__item"><a href='218262.htm'> Использование сокращенного набора баз </a></li><li class="contents__item"><a href='218298.htm'> Рекомендации по обновлению антивирусных баз </a></li><li class="contents__item"><a href='218349.htm'> Обновление с HTTPS-сервера </a></li></ul></li><li class="contents__item"><a href='192979.htm'> Использование Kaspersky Scan Engine в режиме HTTP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='184921.htm'> Kaspersky Scan Engine и режим HTTP </a></li><li class="contents__item"><a href='210245.htm'> HTTPS-соединения </a></li><li class="contents__item"><a href='225526.htm'> Рекомендуемые настройки для режима HTTP </a></li><li class="contents__item"><a href='192980.htm'> Настройка Kaspersky Scan Engine в режиме HTTP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='184799.htm'> Файл конфигурации режима HTTP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='201021.htm'> ServerSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='201026.htm'> ConnectionString </a></li><li class="contents__item"><a href='201027.htm'> MaxIncomingConnectionsNum </a></li><li class="contents__item"><a href='201028.htm'> MaxHTTPSessionsNum </a></li><li class="contents__item"><a href='201029.htm'> MaxTCPFileSize </a></li><li class="contents__item"><a href='201030.htm'> SessionTimeout </a></li><li class="contents__item"><a href='201031.htm'> Flags </a></li><li class="contents__item"><a href='200613.htm'> TlsCertificateKeyFile </a></li><li class="contents__item"><a href='200614.htm'> TlsCertificateFile </a></li><li class="contents__item"><a href='201900.htm'> CORS </a></li><li class="contents__item"><a href='207348.htm'> KeepAliveSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='207346.htm'> Enabled </a></li><li class="contents__item"><a href='207350.htm'> TimeoutMs </a></li><li class="contents__item"><a href='207352.htm'> MaxRequests </a></li></ul></li><li class="contents__item"><a href='222092.htm'> AuthSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='222099.htm'> UseAccessToken </a></li><li class="contents__item"><a href='222116.htm'> AuthRequestField </a></li><li class="contents__item"><a href='222121.htm'> UseBearerAuthScheme </a></li><li class="contents__item"><a href='224176.htm'> AccessTokens </a></li><li class="contents__item"><a href='224177.htm'> Token </a></li></ul></li></ul></li><li class="contents__item"><a href='201022.htm'> KSNSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200623.htm'> UrlCheckTimeoutMs </a></li><li class="contents__item"><a href='200624.htm'> ObjectCheckOnDemandTimeoutMs </a></li><li class="contents__item"><a href='201036.htm'> CacheSizeKb </a></li></ul></li><li class="contents__item"><a href='201023.htm'> KAVScanningSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='201037.htm'> ScannersCount </a></li><li class="contents__item"><a href='201038.htm'> ThreadsCount </a></li><li class="contents__item"><a href='200631.htm'> QueueLen </a></li><li class="contents__item"><a href='201040.htm'> Flags </a></li><li class="contents__item"><a href='201041.htm'> Mode </a></li><li class="contents__item"><a href='207145.htm'> MaxArchivesScanningDepth </a></li></ul></li><li class="contents__item"><a href='201024.htm'> DirectorySettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='201042.htm'> BasesPath </a></li><li class="contents__item"><a href='200640.htm'> TempPath </a></li><li class="contents__item"><a href='201044.htm'> LicensePath </a></li><li class="contents__item"><a href='201045.htm'> LicensingMode </a></li><li class="contents__item"><a href='201076.htm'> ScanningPaths </a></li></ul></li><li class="contents__item"><a href='200598.htm'> UseHTTPProxy </a></li><li class="contents__item"><a href='201047.htm'> HTTPProxy </a></li><li class="contents__item"><a href='201025.htm'> UpdateSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200649.htm'> DisableBackup </a></li><li class="contents__item"><a href='200650.htm'> UpdatePeriodMinutes </a></li><li class="contents__item"><a href='200651.htm'> UseOnlyCustomSources </a></li><li class="contents__item"><a href='201051.htm'> UpdateSources </a></li><li class="contents__item"><a href='200653.htm'> UpdatesCertFile </a></li><li class="contents__item"><a href='200654.htm'> CertificateConfirmationAction </a></li><li class="contents__item"><a href='200655.htm'> UseReducedBases </a></li></ul></li><li class="contents__item"><a href='201055.htm'> FormatRecognizerSettings </a></li></ul></li><li class="contents__item"><a href='179868.htm'> Настройка Format Recognizer для использования в режиме HTTP </a></li><li class="contents__item"><a href='179869.htm'> Настройка очереди подключений в режиме HTTP </a></li><li class="contents__item"><a href='179870.htm'> Настройка тайм-аута сеанса </a></li><li class="contents__item"><a href='179872.htm'> Изменение переменных в файле модуля режима HTTP </a></li><li class="contents__item"><a href='179873.htm'> Настройка обновления в режиме HTTP </a></li></ul></li><li class="contents__item"><a href='192981.htm'> Запуск Kaspersky Scan Engine в режиме HTTP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179876.htm'> Запуск Kaspersky Scan Engine в режиме HTTP вручную </a></li><li class="contents__item"><a href='184956.htm'> Запуск Kaspersky Scan Engine в режиме HTTP с помощью файла модуля systemd (Linux) </a></li><li class="contents__item"><a href='192984.htm'> Запуск Kaspersky Scan Engine в качестве службы (Windows) </a></li><li class="contents__item"><a href='186032.htm'> Запуск Kaspersky Scan Engine в режиме HTTP с помощью скрипта BAT (Windows) </a></li><li class="contents__item"><a href='179880.htm'> Мониторинг Kaspersky Scan Engine в режиме HTTP </a></li></ul></li><li class="contents__item"><a href='192985.htm'> Выполнение запросов в режиме HTTP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='181167.htm'> О протоколе KAV </a></li><li class="contents__item"><a href='179875.htm'> Выполнение запросов в режиме HTTP по протоколу KAV версии 3 </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='181169.htm'> Поддерживаемые методы API в протоколе KAV версии 3 </a></li><li class="contents__item"><a href='193000.htm'> Формат POST-запроса на сканирование </a></li><li class="contents__item"><a href='193001.htm'> Формат ответа на POST-запрос на сканирование </a></li><li class="contents__item"><a href='181065.htm'> Повышение коэффициента обнаружения </a></li><li class="contents__item"><a href='224308.htm'> Пример HTTP-запроса, содержащего токен API для авторизации </a></li><li class="contents__item"><a href='193002.htm'> Пример HTTP-запроса на сканирование локального файла </a></li><li class="contents__item"><a href='193003.htm'> Пример HTTP-запроса на сканирование части оперативной памяти </a></li><li class="contents__item"><a href='193004.htm'> Пример HTTP-запроса на проверку URL-адреса </a></li><li class="contents__item"><a href='193005.htm'> Пример HTTP-запроса на получение даты выпуска текущей антивирусной базы </a></li><li class="contents__item"><a href='193007.htm'> Пример HTTP-запроса для получения текущей версии KAV SDK </a></li><li class="contents__item"><a href='193008.htm'> Пример HTTP-запроса на получение лицензионной информации </a></li><li class="contents__item"><a href='193009.htm'> Пример HTTP-запроса на получение обобщенной статистики </a></li><li class="contents__item"><a href='193010.htm'> Пример HTTP-запроса на удаление обобщенной статистики </a></li><li class="contents__item"><a href='193011.htm'> Пример HTTP-запроса на обновление антивирусной базы </a></li><li class="contents__item"><a href='193012.htm'> Пример HTTP-запроса на получение статуса обновления антивирусной базы </a></li><li class="contents__item"><a href='193338.htm'> Пример HTTP-запроса на получение информации из KSN </a></li></ul></li><li class="contents__item"><a href='181038.htm'> Выполнение запросов в режиме HTTP по протоколу KAV версий 1 и 2 </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='181170.htm'> Поддерживаемые методы API в протоколе KAV версий 1 и 2 </a></li><li class="contents__item"><a href='181073.htm'> Заголовки запросов </a></li><li class="contents__item"><a href='224307.htm'> Пример HTTP-запроса, содержащего токен API для авторизации </a></li><li class="contents__item"><a href='181074.htm'> Пример HTTP-запроса на сканирование локального файла </a></li><li class="contents__item"><a href='181076.htm'> Пример HTTP-запроса на сканирование части оперативной памяти </a></li><li class="contents__item"><a href='181078.htm'> Пример составного HTTP-запроса на сканирование блока памяти </a></li><li class="contents__item"><a href='181080.htm'> Пример HTTP-запроса на проверку URL-адреса </a></li><li class="contents__item"><a href='181082.htm'> Пример HTTP-запроса на получение даты выпуска текущей антивирусной базы </a></li><li class="contents__item"><a href='181084.htm'> Пример HTTP-запроса для получения текущей версии KAV SDK </a></li><li class="contents__item"><a href='181086.htm'> Пример HTTP-запроса на получение лицензионной информации </a></li><li class="contents__item"><a href='181088.htm'> Пример HTTP-запроса на получение обобщенной статистики </a></li><li class="contents__item"><a href='181090.htm'> Пример HTTP-запроса на удаление обобщенной статистики </a></li></ul></li><li class="contents__item"><a href='201538.htm'> Получение списка HTTP-методов, поддерживаемых службой </a></li></ul></li><li class="contents__item"><a href='179883.htm'> Использование примера HTTP-клиента </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179884.htm'> Синтаксис и параметры для HTTP-клиента </a></li><li class="contents__item"><a href='182976.htm'> Сканирование файлов через TCP-сокет в режиме сканирования файлов </a></li><li class="contents__item"><a href='179885.htm'> Примеры синтаксиса </a></li><li class="contents__item"><a href='179886.htm'> Результаты сканирования для HTTP-клиента </a></li><li class="contents__item"><a href='179887.htm'> Сообщения об ошибках подключения HTTP-клиента </a></li></ul></li><li class="contents__item"><a href='179881.htm'> Использование прокси-сервера </a></li><li class="contents__item"><a href='179882.htm'> Обновление антивирусных баз в режиме HTTP </a></li><li class="contents__item"><a href='186768.htm'> Логирование в режиме HTTP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179879.htm'> Настройка логирования в режиме HTTP </a></li><li class="contents__item"><a href='186767.htm'> Формат логов CEF в режиме HTTP </a></li><li class="contents__item"><a href='186769.htm'> Формат логов RAW в режиме HTTP </a></li></ul></li><li class="contents__item"><a href='179888.htm'> Сборка исполняемых файлов для службы HTTP и клиента HTTP </a></li></ul></li><li class="contents__item"><a href='184798.htm'> Использование Kaspersky Scan Engine в режиме ICAP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192987.htm'> Kaspersky Scan Engine и режим ICAP </a></li><li class="contents__item"><a href='206407.htm'> Рекомендации по безопасной интеграции </a></li><li class="contents__item"><a href='225528.htm'> Рекомендуемые настройки для режима ICAP </a></li><li class="contents__item"><a href='192988.htm'> Настройка Kaspersky Scan Engine в режиме ICAP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192989.htm'> Файл конфигурации режима ICAP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='201103.htm'> SDKSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200690.htm'> ScannersCount </a></li><li class="contents__item"><a href='200691.htm'> ThreadsCount </a></li><li class="contents__item"><a href='200692.htm'> QueueLen </a></li><li class="contents__item"><a href='200693.htm'> ScanTimeout </a></li><li class="contents__item"><a href='201118.htm'> LicensePath </a></li><li class="contents__item"><a href='201120.htm'> BasesPath </a></li><li class="contents__item"><a href='200697.htm'> TempPath </a></li><li class="contents__item"><a href='201123.htm'> ScanningMode </a></li><li class="contents__item"><a href='201124.htm'> LicensingMode </a></li><li class="contents__item"><a href='207146.htm'> MaxArchivesScanningDepth </a></li></ul></li><li class="contents__item"><a href='200603.htm'> KSNSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200698.htm'> UseKSN </a></li><li class="contents__item"><a href='200702.htm'> ObjectCheckOnDemandTimeoutMs </a></li><li class="contents__item"><a href='200703.htm'> CacheSizeKb </a></li></ul></li><li class="contents__item"><a href='200604.htm'> ProxySettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200704.htm'> UseProxy </a></li><li class="contents__item"><a href='200705.htm'> Host </a></li><li class="contents__item"><a href='200706.htm'> Port </a></li><li class="contents__item"><a href='200707.htm'> User </a></li><li class="contents__item"><a href='200708.htm'> Pass </a></li></ul></li><li class="contents__item"><a href='200605.htm'> UpdateSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200709.htm'> DisableBackup </a></li><li class="contents__item"><a href='200710.htm'> UpdatePeriodMinutes </a></li><li class="contents__item"><a href='200711.htm'> UseOnlyCustomSources </a></li><li class="contents__item"><a href='200712.htm'> UpdateSources </a></li><li class="contents__item"><a href='200713.htm'> UpdatesCertFile </a></li><li class="contents__item"><a href='200714.htm'> CertificateConfirmationAction </a></li><li class="contents__item"><a href='200715.htm'> UseReducedBases </a></li></ul></li><li class="contents__item"><a href='201129.htm'> ICAPSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200716.htm'> Port </a></li><li class="contents__item"><a href='207194.htm'> ReqModeAddress </a></li><li class="contents__item"><a href='207240.htm'> RespModeAddress </a></li><li class="contents__item"><a href='200717.htm'> MaxIcapSessionsCount </a></li><li class="contents__item"><a href='201149.htm'> RAMUsageLimit </a></li><li class="contents__item"><a href='200719.htm'> ScanMaxFileSize </a></li><li class="contents__item"><a href='200720.htm'> Allow204 </a></li><li class="contents__item"><a href='207291.htm'> KeepAliveSettings </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='207292.htm'> Enabled </a></li><li class="contents__item"><a href='207298.htm'> TimeoutMs </a></li><li class="contents__item"><a href='207303.htm'> MaxRequests </a></li><li class="contents__item"><a href='221376.htm'> UseAlways </a></li></ul></li><li class="contents__item"><a href='225221.htm'> RequestingICAPHeaders </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='225222.htm'> ICAPHeader </a></li></ul></li><li class="contents__item"><a href='200726.htm'> HTTPClientIpICAPHeader </a></li><li class="contents__item"><a href='200727.htm'> HTTPUserNameICAPHeader </a></li><li class="contents__item"><a href='201214.htm'> VirusNameICAPHeader </a></li><li class="contents__item"><a href='225156.htm'> DatabaseVersionICAPHeader </a></li><li class="contents__item"><a href='221147.htm'> SendInfectionFoundICAPHeader </a></li><li class="contents__item"><a href='221160.htm'> SendResponseDescICAPHeader </a></li><li class="contents__item"><a href='221161.htm'> SendResponseInfoICAPHeader </a></li><li class="contents__item"><a href='221162.htm'> SendViolationsFoundICAPHeader </a></li><li class="contents__item"><a href='200721.htm'> ScanInReqMode </a></li><li class="contents__item"><a href='200722.htm'> ScanInRespMode </a></li><li class="contents__item"><a href='201153.htm'> RulesFilePath </a></li><li class="contents__item"><a href='201154.htm'> CmdPath </a></li><li class="contents__item"><a href='201155.htm'> ResponsesPath </a></li><li class="contents__item"><a href='201208.htm'> TransferBeforeScanEnding </a></li><li class="contents__item"><a href='200729.htm'> Exclusions </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='200813.htm'> ContentSize </a></li><li class="contents__item"><a href='200814.htm'> ContentType </a></li><li class="contents__item"><a href='200815.htm'> RequestURL </a></li></ul></li><li class="contents__item"><a href='201163.htm'> USR1SignalAction </a></li><li class="contents__item"><a href='201164.htm'> USR2SignalAction </a></li><li class="contents__item"><a href='200730.htm'> LoggingConfigFilePath </a></li></ul></li><li class="contents__item"><a href='206616.htm'> FormatRecognizerSettings </a></li></ul></li><li class="contents__item"><a href='206590.htm'> Настройка Format Recognizer для использования в режиме ICAP </a></li><li class="contents__item"><a href='179893.htm'> Настройка правил сервиса </a></li><li class="contents__item"><a href='192475.htm'> Изменение переменных в файле модуля режима ICAP </a></li><li class="contents__item"><a href='179895.htm'> Работа с шаблонами ответов и скриптами </a></li><li class="contents__item"><a href='179897.htm'> Указание путей к плагинам и библиотекам </a></li></ul></li><li class="contents__item"><a href='192990.htm'> Запуск Kaspersky Scan Engine в режиме ICAP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192397.htm'> Запуск Kaspersky Scan Engine в режиме ICAP с помощью файла модуля systemd </a></li><li class="contents__item"><a href='179900.htm'> Запуск Kaspersky Scan Engine в режиме ICAP вручную </a></li><li class="contents__item"><a href='179901.htm'> Запуск Kaspersky Scan Engine в режиме ICAP с помощью сценария оболочки kavicapd  </a></li></ul></li><li class="contents__item"><a href='221159.htm'> Заголовки ответов </a></li><li class="contents__item"><a href='179902.htm'> Обновление антивирусных баз в режиме ICAP </a></li><li class="contents__item"><a href='182615.htm'> Получение накопленной статистики в режиме ICAP </a></li><li class="contents__item"><a href='186630.htm'> Логирование в режиме ICAP </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179896.htm'> Настройка логирования в режиме ICAP </a></li><li class="contents__item"><a href='186631.htm'> Формат логов CEF в режиме ICAP </a></li><li class="contents__item"><a href='186652.htm'> Формат логов RAW в режиме ICAP </a></li></ul></li><li class="contents__item"><a href='219958.htm'> Интеграция Kaspersky Scan Engine с другими решениями </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179904.htm'> Использование Kaspersky Scan Engine в режиме ICAP со Squid </a></li><li class="contents__item"><a href='212974.htm'> Использование Kaspersky Scan Engine в режиме ICAP с Oracle Solaris Vscan </a></li><li class="contents__item"><a href='219959.htm'> Использование Kaspersky Scan Engine в режиме ICAP с Dell EMC Isilon </a></li><li class="contents__item"><a href='221109.htm'> Использование Kaspersky Scan Engine с F5 BIG-IP Application Security Manager </a></li><li class="contents__item"><a href='221715.htm'> Использование Kaspersky Scan Engine в режиме ICAP с GoAnywhere MFT </a></li></ul></li><li class="contents__item"><a href='179905.htm'> Сборка исполняемых файлов Kaspersky Scan Engine, используемых в режиме ICAP </a></li></ul></li><li class="contents__item"><a href='179683.htm'> Использование Kaspersky Scan Engine GUI </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='219850.htm'> Роли пользователей </a></li><li class="contents__item"><a href='179694.htm'> Вход в Kaspersky Scan Engine </a></li><li class="contents__item"><a href='179706.htm'> Использование нижней панели </a></li><li class="contents__item"><a href='179695.htm'> Панель управления Kaspersky Scan Engine </a></li><li class="contents__item"><a href='179696.htm'> Страница результатов сканирования Kaspersky Scan Engine (Scan results) </a></li><li class="contents__item"><a href='201264.htm'> Настройки кластеров Kaspersky Scan Engine </a></li><li class="contents__item"><a href='179697.htm'> Страницы настроек Kaspersky Scan Engine (Settings) </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179698.htm'> Настройки службы (Service) </a></li><li class="contents__item"><a href='179699.htm'> Настройки сканирования (Scanning) </a></li><li class="contents__item"><a href='224195.htm'> Настройки авторизации (Authorization) </a></li><li class="contents__item"><a href='180283.htm'> Правила ICAP (ICAP rules) </a></li><li class="contents__item"><a href='179701.htm'> Настройки обновления (Update) </a></li><li class="contents__item"><a href='179702.htm'> Настройки лицензирования (License) </a></li><li class="contents__item"><a href='179703.htm'> Настройки логирования (Logging) </a></li><li class="contents__item"><a href='179704.htm'> Настройки прокси (Proxy) </a></li><li class="contents__item"><a href='219610.htm'> Настройки пользователей (Users) </a></li><li class="contents__item"><a href='221467.htm'> Экспорт настроек </a></li></ul></li><li class="contents__item"><a href='179705.htm'> Смена пароля </a></li><li class="contents__item"><a href='185278.htm'> Работа с бинарным файлом klScanEngineUI </a></li><li class="contents__item"><a href='192471.htm'> Запуск службы klScanEngineUI с файловым модулем systemd (Linux) </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192481.htm'> Изменение переменных в файле модуля klScanEngineUI (Linux) </a></li></ul></li></ul></li><li class="contents__item"><a href='206592.htm'> Настройка Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179825.htm'> Редактирование файла конфигурации Kaspersky Scan Engine вручную </a></li><li class="contents__item"><a href='180222.htm'> Распознаваемые форматы файлов </a></li></ul></li><li class="contents__item"><a href='179826.htm'> Проверка возможностей обнаружения вирусов </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='180178.htm'> О стандартном тестовом файле антивируса EICAR </a></li><li class="contents__item"><a href='180193.htm'> Проверка возможностей обнаружения в режиме HTTP </a></li><li class="contents__item"><a href='179903.htm'> Проверка возможностей обнаружения в режиме ICAP </a></li></ul></li><li class="contents__item"><a href='221141.htm'> Аудит системы </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='221146.htm'> Идентификация инициатора события </a></li><li class="contents__item"><a href='221150.htm'> Получение подробной информации о событиях на панели управления </a></li><li class="contents__item"><a href='221189.htm'> Получение подробной информации о событиях из системного журнала </a></li></ul></li><li class="contents__item"><a href='179684.htm'> Логирование </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179928.htm'> Включение логирования вручную </a></li><li class="contents__item"><a href='179926.htm'> Файл конфигурации логирования </a></li><li class="contents__item"><a href='179925.htm'> Пользовательские данные, записываемые в лог </a></li></ul></li><li class="contents__item"><a href='220775.htm'> Интеграция с SIEM-решениями </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='220777.htm'> Интеграция со Splunk </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='220780.htm'> Настройка Splunk </a></li><li class="contents__item"><a href='220782.htm'> Поиск событий Kaspersky Scan Engine в Splunk </a></li></ul></li><li class="contents__item"><a href='220779.htm'> Интеграция с ArcSight ESM </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='220896.htm'> Настройка ArcSight ESM </a></li><li class="contents__item"><a href='220898.htm'> Поиск событий Kaspersky Scan Engine в ArcSight ESM </a></li></ul></li><li class="contents__item"><a href='220778.htm'> Интеграция с KUMA </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='220785.htm'> Настройка KUMA </a></li><li class="contents__item"><a href='220787.htm'> Поиск событий Kaspersky Scan Engine в KUMA </a></li></ul></li><li class="contents__item"><a href='220786.htm'> Настройка Kaspersky Scan Engine для взаимодействия с SIEM </a></li></ul></li><li class="contents__item"><a href='235568.htm'> Интеграция с Docker и Kubernetes </a></li><li class="contents__item"><a href='179827.htm'> Повышение производительности Kaspersky Scan Engine </a></li><li class="contents__item"><a href='192993.htm'> Удаление Kaspersky Scan Engine </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='192994.htm'> Удаление с помощью деинсталлятора (Linux и Windows) </a></li><li class="contents__item"><a href='199825.htm'> Удаление Kaspersky Scan Engine на Linux </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='180699.htm'> Удаление вручную (Linux) </a></li></ul></li><li class="contents__item"><a href='199826.htm'> Удаление Kaspersky Scan Engine на Windows </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='184741.htm'> Удаление вручную (Windows) </a></li></ul></li></ul></li><li class="contents__item"><a href='179831.htm'> Использование утилиты управления паролями </a></li><li class="contents__item"><a href='181814.htm'> Использование утилиты шифрования </a></li><li class="contents__item"><a href='209025.htm'> Использование инструмента проверки целостности </a></li><li class="contents__item"><a href='179686.htm'> Лицензирование </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='179852.htm'> Активация Kaspersky Scan Engine в режиме лицензирования оффлайн </a></li><li class="contents__item"><a href='179855.htm'> Активация Kaspersky Scan Engine в режиме лицензирования онлайн </a></li><li class="contents__item"><a href='179860.htm'> Лицензионные ограничения </a></li></ul></li><li class="contents__item"><a href='182982.htm'> Kaspersky Scan Engine GUI и SSL-сертификаты </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='182983.htm'> Генерация SSL-сертификатов для Kaspersky Scan Engine GUI </a></li><li class="contents__item"><a href='182984.htm'> Добавление самозаверяющего сертификата как доверенного для браузера (Linux) </a></li><li class="contents__item"><a href='186925.htm'> Добавление самозаверяющего сертификата как доверенного для браузера (Windows) </a></li></ul></li><li class="contents__item"><a href='182962.htm'> Поиск и устранение неисправностей </a></li><li class="contents__item"><a href='192996.htm'> Данные, передаваемые в &quot;Лабораторию Касперского&quot; </a><ul class='contents contents_all-in-one'><li class="contents__item"><a href='180001.htm'> Данные, передаваемые в &quot;Лабораторию Касперского&quot; при обновлении </a></li><li class="contents__item"><a href='180002.htm'> Данные, передаваемые в &quot;Лабораторию Касперского&quot; в режиме лицензирования онлайн </a></li><li class="contents__item"><a href='192997.htm'> Данные, передаваемые в &quot;Лабораторию Касперского&quot; при проверке репутации файлов и URL-адресов </a></li><li class="contents__item"><a href='180772.htm'> Статистика, передаваемая в KSN </a></li><li class="contents__item"><a href='185034.htm'> О предоставлении данных </a></li></ul></li><li class="contents__item"><a href='234774.htm'> Обращение в службу технической поддержки </a></li><li class="contents__item"><a href='192998.htm'> Информация о стороннем коде </a></li><li class="contents__item"><a href='192999.htm'> Уведомления о товарных знаках </a></li><li class="contents__item"><a href='55937.htm'> Авторские права </a></li></ul></div><div class="cont" id="226466"><p><a name="226466" style="display: none;">[Topic 226466]</a></p>
	<h1 id="t234418" class="heading1">Справочная информация Kaspersky Scan Engine</h1>
<h5 class="heading5"><img id="f226817" src="kse_logo.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0"> О Kaspersky Scan Engine</h5>
<ul class="listbullet1"><li class="listbullet1"><a id="h222091" class="englishcrossreferencetemplate" href="#209374" target="_self">Что нового</a></li><li class="listbullet1"><a id="h193110" class="englishcrossreferencetemplate" href="#184797" target="_self">Ключевые функции</a></li><li class="listbullet1"><a id="h181527" class="englishcrossreferencetemplate" href="#192970" target="_self">Технологии обнаружения</a></li><li class="listbullet1"><a id="h226821" class="englishcrossreferencetemplate" href="#184796" target="_self">Архитектура</a></li><li class="listbullet1"><a id="h226822" class="englishcrossreferencetemplate" href="#179824" target="_self">Сценарии использования</a></li><li class="listbullet1"><a id="h193112" class="englishcrossreferencetemplate" href="#184795" target="_self">Системные требования</a></li></ul><h5 class="heading5"><img id="f226818" src="pc_06.svg" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0"> Режим HTTP</h5>
<p class="bodytextindent"><a id="h193051" class="englishcrossreferencetemplate" href="#193002" target="_self">Пример HTTP-запроса на сканирование локального файла</a></p>
<h5 class="heading5"><img id="f226819" src="cosole_07.svg" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0"> Режим ICAP</h5>
<p class="bodytextindent"><a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">Запуск Kaspersky Scan Engine в режиме ICAP</a></p>
<h5 class="heading5"><img id="f226820" src="browser_03.svg" class="linkedpngfiletemplateforlandingpage" alt="" vspace="0" hspace="0" align="bottom" border="0"> Веб-интерфейс</h5>
<p class="bodytextindent"><a id="h180139" class="englishcrossreferencetemplate" href="#179683" target="_self">Использование Kaspersky Scan Engine GUI</a></p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192968"><p><a name="192968" style="display: none;">[Topic 192968]</a></p>
	<h1 id="t234268" class="heading1">О Kaspersky Scan Engine</h1>
<p class="bodytext">Kaspersky Scan Engine – это серверное защитное решение, которое обеспечивает антивирусную защиту, сканирование HTTP-трафика и проверку репутации файлов и URL-адресов для сторонних клиентских решений.</p>
<p class="bodytext">Kaspersky Scan Engine обеспечивает комплексную защиту широкого ряда устройств от вредоносных программ, троянцев, червей, руткитов, шпионского и рекламного программного обеспечения. Его можно использовать с различными продуктами и службами, в том числе с приложениями для персональных компьютеров, серверными решениями, прокси-серверами и почтовыми шлюзами.</p>
<p class="bodytext">Решение Kaspersky Scan Engine основано на комплекте Kaspersky Anti-Virus Software Development Kit 8 Level 3 (KAV SDK) и на ядре Kaspersky Anti-Virus Engine, удостоившемся наград, и поэтому использует новейшие методы определения и удаления вредоносного ПО различных типов.</p>
<p class="attentionbody">Вы можете запросить документацию KAV SDK либо купить KAV SDK вместе с документацией у вашего персонального технического менеджера.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#209374" target="_self">Что нового</a></p><p class="relateditem"><a href="#184797" target="_self">Основные функции Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#192970" target="_self">Технологии обнаружения Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#184796" target="_self">Архитектура Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#179824" target="_self">Сценарии использования Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#184795" target="_self">Системные требования</a></p><p class="relateditem"><a href="#184793" target="_self">Содержимое пакета распространения (Linux)</a></p><p class="relateditem"><a href="#192973" target="_self">Содержимое пакета распространения (Windows)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="209374"><p><a name="209374" style="display: none;">[Topic 209374]</a></p>
	<h2 id="t234595" class="heading2">Что нового</h2>
<p class="bodytext">В этом разделе описаны новые функции и улучшения последней версии Kaspersky Scan Engine.</p>
<p class="introheading">Что нового в версии 2.1</p>
<ul class="listbullet1"><li class="listbullet1">Поддерживается многопользовательский режим работы с Kaspersky Scan Engine GUI. Для пользователей Kaspersky Scan Engine GUI доступны <a id="h219851" class="englishcrossreferencetemplate" href="#219850" target="_self">роли</a> <em class="emphasischaracter">Администратор</em> и <em class="emphasischaracter">Оператор</em>.</li><li class="listbullet1"><a id="h221151" class="englishcrossreferencetemplate" href="#221141" target="_self">Функциональность аудита системы</a>. С помощью аудита системы намного проще контролировать работу Kaspersky Scan Engine и анализировать инциденты безопасности, когда они происходят.</li><li class="listbullet1"><a id="h221943" class="englishcrossreferencetemplate" href="#221941" target="_self">Автоматическое обновление</a> до более новой версии Kaspersky Scan Engine с помощью утилиты <code class="programcharacter">install</code>.</li><li class="listbullet1">Различные режимы работы экземпляров Kaspersky Scan Engine в <a id="h212028" class="englishcrossreferencetemplate" href="#211897" target="_self">кластере</a>. Теперь экземпляры Kaspersky Scan Engine могут работать в разных режимах одновременно: когда одни экземпляры работают в режиме ICAP, другие работают в режиме HTTP.</li><li class="listbullet1"><a id="h201478" class="englishcrossreferencetemplate" href="#201264" target="_self">Автоматическое удаление неактивных экземпляров кластера</a>. Если эта функция включена, Kaspersky Scan Engine автоматически удаляет из кластера экземпляры, неактивные в течение заданного времени.</li><li class="listbullet1"><a id="h224351" class="englishcrossreferencetemplate" href="#184921" target="_self">Аутентификация токена API</a>. Если эта функция включена, Kaspersky Scan Engine предоставляет доступ к своим функциям только тем HTTP-клиентам, которые успешно прошли аутентификацию с помощью токена API.</li><li class="listbullet1">Отдельные объекты KAV SDK. Начиная с версии Kaspersky Scan Engine 2.1, объекты KAV SDK поставляются в виде отдельного пакета.</li><li class="listbullet1"><code class="programcharacter">X-</code><a id="h221163" class="englishcrossreferencetemplate" href="#221159" target="_self">поля заголовка</a> ответа:<ul class="listbullet2"><li class="listbullet2">X-Infection-Found</li><li class="listbullet2">X-Response-Desc</li><li class="listbullet2">X-Response-Info</li><li class="listbullet2">X-Violations-Found</li><li class="listbullet2">X-Include</li></ul></li><li class="listbullet1">Пользовательское поле заголовка ответа содержит информацию о версии антивирусных баз, используемых Kaspersky Scan Engine для проверки объектов. Имя поля указано в <a id="h225157" class="englishcrossreferencetemplate" href="#225156" target="_self">DatabaseVersionICAPHeader</a>.</li><li class="listbullet1">Пределы значений изменены для следующих параметров:<ul class="listbullet2"><li class="listbullet2"><a id="h207354" class="englishcrossreferencetemplate" href="#207350" target="_self">KeepAliveSettings &gt; TimeoutMs (режим HTTP)</a></li><li class="listbullet2"><a id="h207355" class="englishcrossreferencetemplate" href="#207352" target="_self">KeepAliveSettings &gt; MaxRequests (режим HTTP)</a></li><li class="listbullet2"><a id="h207304" class="englishcrossreferencetemplate" href="#207298" target="_self">KeepAliveSettings &gt; TimeoutMs (режим ICAP)</a></li><li class="listbullet2"><a id="h207305" class="englishcrossreferencetemplate" href="#207303" target="_self">KeepAliveSettings &gt; MaxRequests (режим ICAP)</a></li></ul></li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184797"><p><a name="184797" style="display: none;">[Topic 184797]</a></p>
	<h2 id="t234417" class="heading2">Основные функции Kaspersky Scan Engine</h2>
<p class="bodytext">Решение Kaspersky Scan Engine может работать в одном из двух режимов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h193041" class="englishcrossreferencetemplate" href="#192979" target="_self">Режим HTTP</a><p class="listcontinue1">В этом режиме Kaspersky Scan Engine работает как REST-подобная служба, которая получает HTTP-запросы от клиентских приложений, сканирует объекты, переданные в этих запросах, и отправляет обратно HTTP-ответы с результатами сканирования.</p>
</li><li class="listbullet1"><a id="h180141" class="englishcrossreferencetemplate" href="#184798" target="_self">Режим ICAP</a><p class="attentioncontinue1">Этот режим доступен только для операционных систем Linux.</p>
<p class="listcontinue1">В этом режиме Kaspersky Scan Engine работает как ICAP-сервер, который сканирует HTTP-трафик, проходящий через прокси-сервер, и URL-адреса, запрашиваемые пользователями, а также блокирует веб-страницы, содержащие вредоносный контент.</p>
</li></ul><p class="bodytext">Решение Kaspersky Scan Engine также включает в себя графический пользовательский интерфейс, который вам позволяет с легкостью настраивать поведение Kaspersky Scan Engine, просматривать его служебные события и результаты сканирования.</p>
<p class="introheading">Сценарии использования:</p>
<p class="introheading"><a id="h180134" class="englishcrossreferencetemplate" href="#180130" target="_self">Защита от угроз</a></p>
<p class="bodytext">Kaspersky Scan Engine может сканировать файлы и участки оперативной памяти, используя антивирусные базы &quot;Лаборатории Касперского&quot; и усовершенствованный эвристический модуль. Поддерживается сканирование сжатых исполняемых файлов, архивов, макросов Microsoft Office, электронных писем и почтовых баз.</p>
<p class="introheading"><a id="h180135" class="englishcrossreferencetemplate" href="#180131" target="_self">Веб-фильтрация</a></p>
<p class="bodytext">Kaspersky Scan Engine может сканировать URL-адреса, явно заданные для проверки (в режиме HTTP), либо URL-адреса, которые запрашивают пользователи через прокси-сервер (в режиме ICAP). В режиме ICAP решение Kaspersky Scan Engine может подставлять заданную пользователем HTML-страницу вместо вредоносных веб-страниц.</p>
<p class="introheading"><a id="h180137" class="englishcrossreferencetemplate" href="#180133" target="_self">Проверка репутации файлов и URL-адресов</a></p>
<p class="bodytext">Kaspersky Scan Engine может получать информацию о проверенных файлах и URL-адресах из Kaspersky Security Network (KSN).</p>
<p class="introheading"><a id="h180139" class="englishcrossreferencetemplate" href="#179683" target="_self">Графический пользовательский интерфейс</a></p>
<p class="bodytext">Графический пользовательский интерфейс дает возможность настроить Kaspersky Scan Engine, проверить статус файла ключа или кода активации Kaspersky Scan Engine, просмотреть служебные события и результаты сканирования. </p>
<p class="introheading">Ключевые функции: </p>
<ul class="listbullet1"><li class="listbullet1">Удостоенная наград антивирусная технология &quot;Лаборатории Касперского&quot; обеспечивает лучшие в своем классе коэффициенты обнаружения вредоносных программ и может мгновенно реагировать на возникающие угрозы.</li><li class="listbullet1">Kaspersky Security Network предоставляет информацию о репутации файлов и интернет-ресурсов, что позволяет приложениям &quot;Лаборатории Касперского&quot; быстрее реагировать на угрозы, не дожидаясь обновления баз, и уменьшает вероятность ложного срабатывания.</li><li class="listbullet1">Блокирует доступ к вредоносным, фишинговым и рекламным URL-адресам.</li><li class="listbullet1">Определяет повторно упакованные объекты и объекты, упакованные при помощи &quot;серых&quot; архиваторов (часто используемых для сокрытия вредоносных программ от антивирусного ПО).</li><li class="listbullet1">Использует усовершенствованный эвристический анализатор и технологии обнаружения, основанные на машинном обучении.</li><li class="listbullet1">Очищает инфицированные файлы, архивы и закодированные объекты.</li><li class="listbullet1">Использует обновляемое антивирусное ядро: технологии обнаружения и логика обработки данных могут обновляться или изменяться посредством обычного обновления антивирусных баз данных.</li><li class="listbullet1">Kaspersky Scan Engine естественным образом поддерживает многопоточность и может выполнять несколько заданий одновременно. Вы можете настроить число сканирующих процессов и потоков для увеличения производительности Kaspersky Scan Engine.</li><li class="listbullet1">Дополнительный фильтрующий слой представлен компонентом Format Recognizer. Вы можете использовать этот компонент для распознавания файлов и игнорирования файлов определенных форматов во время процесса сканирования. Поддерживаются десятки форматов, в том числе исполняемые, офисные файлы, медиафайлы и архивы.</li><li class="listbullet1">Графический пользовательский интерфейс для управления и мониторинга:<ul class="listbullet2"><li class="listbullet2">Позволяет настраивать и управлять приложением.</li><li class="listbullet2">Позволяет отслеживать статус работы приложения, статус используемого файла ключа или кода активации, а также число проверенных и обнаруженных объектов. </li><li class="listbullet2">Предоставляет панель управления с информацией обо всех проверенных объектах. Результаты сканирования могут быть сохранены в формате CSV. </li></ul></li><li class="listbullet1">Простота в установке и конфигурации. После установки не требуется разработка дополнительного ПО, решение запустится в течение минут. </li><li class="listbullet1">Составление отчетов:<ul class="listbullet2"><li class="listbullet2">Важные события приложения отсылаются в системный журнал в формате CEF. </li><li class="listbullet2">Все служебные события видны на панели управления графического интерфейса.</li></ul></li><li class="listbullet1">Возможности сопровождения продукта: <ul class="listbullet2"><li class="listbullet2">Антивирусные базы обновляются автоматически. В случае обнаружения поврежденных баз Kaspersky Scan Engine продолжает использовать старые неповрежденные. </li><li class="listbullet2">Простота отслеживания работы продукта с помощью графического интерфейса.</li><li class="listbullet2">Возможность использования онлайн-активации. При онлайн-активации лицензионная информация для Kaspersky Scan Engine обновляется автоматически.</li></ul></li><li class="listbullet1">Отказоустойчивая архитектура.</li><li class="listbullet1">В пакете распространения поставляется исходный код HTTP-клиента и ICAP-службы для возможности изменения. </li><li class="listbullet1">Подробная документация и поддержка кроссплатформенности прикладного программного интерфейса (API). Схожие прикладные программные интерфейсы для версий под Linux/UNIX и Windows.</li><li class="listbullet1">Возможность минимизировать внешний трафик путем создания локальных зеркал для антивирусных баз (нужны дополнительные программы).</li><li class="listbullet1">Kaspersky Scan Engine поддерживает кластерную архитектуру. Эта функция позволяет делать следующее:<ul class="listbullet2"><li class="listbullet2">Централизованно управлять экземплярами: вы можете применить единые параметры к нескольким экземплярам в кластере.</li><li class="listbullet2">Просматривать события службы из каждого экземпляра кластера.</li><li class="listbullet2">Просматривать результаты сканирования со статистикой для каждого экземпляра кластера.</li><li class="listbullet2">Просматривать информацию о статусе Kaspersky Scan Engine для каждого экземпляра кластера (текущий статус Kaspersky Scan Engine, версия, информация об антивирусных базах и так далее).</li></ul></li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192970"><p><a name="192970" style="display: none;">[Topic 192970]</a></p>
	<h2 id="t234409" class="heading2">Технологии обнаружения Kaspersky Scan Engine</h2>
<p class="bodytext">В этом разделе описаны технологии обнаружения, реализованные в Kaspersky Scan Engine.</p>
<p class="introheading">Анализ сигнатур</p>
<p class="bodytext">Этот метод обнаружения основывается на поиске определенной строки в сканируемых файлах. Сигнатурный анализ также включает обнаружение, основанное на хеше всего вредоносного файла. Традиционные сигнатуры позволяют обнаруживать определенные объекты с высокой точностью. Другие технологии, основанные на использовании сигнатур, такие как структурные эвристические сигнатуры и SmartHash, могут обнаруживать неизвестное и полиморфное вредоносное ПО. </p>
<p class="bodytext">Сигнатурный анализ позволяет обнаруживать определенные атаки с высокой точностью и малой вероятностью ложного срабатывания. Однако этот метод обнаружения неэффективен против полиморфных вредоносных программ и различных версий одного и того же вредоносного ПО. Для высокой эффективности сигнатурного анализа также требуется частое обновление сигнатур.</p>
<p class="bodytext">Часто обновляемая обширная антивирусная база данных Kaspersky Scan Engine обеспечивает высочайший уровень защиты от известного вредоносного ПО, троянцев, червей, руткитов, шпионского и рекламного ПО.</p>
<p class="introheading">Расширенная эвристика</p>
<p class="bodytext">При сканировании скрипта или исполняемого файла ядро Kaspersky Anti-Virus Engine эмулирует его запуск в безопасной искусственной среде. Если во время анализа поведения эмулируемого объекта обнаруживается подозрительное поведение, он считается вредоносным. Этот метод позволяет обнаруживать новое и неизвестное вредоносное ПО.</p>
<p class="bodytext">Компонент Kaspersky Scan Engine, представляющий собой эмулятор, эмулирует функциональную среду запуска для объекта, в том числе функции и различные подсистемы целевой операционной системы. Реальные функции и подсистемы во время эмуляции не используются. </p>
<p class="introheading">Технологии машинного обучения</p>
<p class="bodytext">SmartHash – это запатентованный алгоритм &quot;Лаборатории Касперского&quot; для построения интеллектуальных хешей, учитывающих локализацию. Хеши, учитывающие локализацию, – это статические характеристики файлов, которые могут быть извлечены и разбиты на группы. Значения SmartHash можно вычислить для каждого файла, при этом различные файлы могут иметь одинаковое значение SmartHash, когда они функционируют подобным образом. Поэтому конкретное значение SmartHash идентифицирует целый кластер подобных файлов и позволяет эффективно обнаруживать неизвестные вредоносные программы на основе уже известных семейств. Технология SmartHash использует несколько уровней точности, что позволяет обнаруживать даже сильно полиморфные вредоносные программы. Вместе с этим она позволяет снизить вероятность ложного срабатывания.</p>
<p class="bodytext">Преимущества технологии SmartHash:</p>
<ul class="listbullet1"><li class="listbullet1">Хорошо справляется с новыми, избегающими обнаружение и полиморфными вредоносными программами.</li><li class="listbullet1">Обнаружение в течение нескольких минут. </li><li class="listbullet1">Работа без подключения и с подключением к интернету.</li><li class="listbullet1">Гибкая модель с несколькими уровнями схожести, что позволяет обнаруживать чистые и вредоносные файлы.</li><li class="listbullet1">Устойчивая технология: математическая модель обновляется с помощью машинного обучения и постоянно пересматривается экспертами. Использование технологии SmartHash приводит к минимуму ложных срабатываний и высокому уровню обнаружения.</li></ul><p class="bodytext">SmartHash онлайн также помогает свести к минимуму ложные срабатывания. Значение SmartHash, вычисленное на стороне клиента, можно сравнить с миллиардами известных чистых файлов в базе данных &quot;Лаборатории Касперского&quot; посредством глобальной сети Kaspersky Security Network.</p>
<p class="bodytext">&quot;Лаборатория Касперского&quot; использует машинное обучение для повышения качества обнаружения существующих технологий сканирования. Машинное обучение развертывается для автоматического анализа журналов запуска во внутренних песочницах. Во внутренних поведенческих системах-песочницах запускаются как известные вредоносные файлы, так и неизвестные файлы. Некоторые из этих песочниц имитируют пользовательские системы, на которых запущены стандартные продукты. Наиболее мощные песочницы используют возможности выборочного протоколирования, позволяя очень тонко настраивать обнаружение. </p>
<p class="bodytext">Роботы обрабатывают журналы песочниц по одной строке. Журналы выполнения с записями от новых вредоносных образцов изучаются с помощью машинного обучения, чтобы найти новые индикаторы обнаружения. Эти новые индикаторы обогащают математические модели методов обнаружения, не основанных на сигнатурах, равно как и эвристические поведенческие записи, создаваемые экспертами &quot;Лаборатории Касперского&quot;.</p>
<p class="introheading">Обработка сжатых исполняемых файлов и архивов</p>
<p class="bodytext">Kaspersky Scan Engine включает в себя технологию, позволяющую обнаруживать вирусы и другие объекты внутри сжатых исполняемых файлов и архивов. С помощью этой технологии можно безопасно вылечить или удалить инфицированные архивы и сжатые исполняемые файлы. </p>
<p class="bodytext">Kaspersky Scan Engine поддерживает примерно 4000 различных форматов сжатых исполняемых файлов и архивов.</p>
<p class="introheading">Лечение архивов</p>
<p class="bodytext">Эта технология предназначена для лечения архивов. С помощью этой технологии успешно вылечиваются или удаляются инфицированные объекты внутри архивов (в зависимости от пользовательских настроек). Вам не нужно использовать другие архиваторы.</p>
<p class="bodytext">В настоящее время Kaspersky Anti-Virus Engine удаляет вирусы из архивов следующих форматов: ARJ, CAB, RAR и ZIP.</p>
<p class="introheading">Kaspersky Security Network</p>
<p class="bodytext">Kaspersky Security Network (KSN) – это инфраструктура облачных служб, которая обеспечивает доступ к онлайновой базе знаний &quot;Лаборатории Касперского&quot;, содержащей информацию о репутации файлов, веб-ресурсов и программ. Использование данных из Kaspersky Security Network обеспечивает более быстрое реагирование на угрозы, улучшает производительность некоторых компонентов защиты и уменьшает вероятность ложных срабатываний.</p>
<p class="bodytext">&quot;Лаборатория Касперского&quot; располагает серверы KSN в вычислительных центрах по всему миру, тем самым обеспечивая минимальное время отклика для облачных проверок. База данных KSN содержит терабайты информации; она постоянно обновляется аналитиками по безопасности, а также автоматическими методами.</p>
<p class="bodytext">При использовании KSN вы передаете в &quot;Лабораторию Касперского&quot; информацию об установленной копии Kaspersky Scan Engine и обнаруженных объектах. Эта информация не содержит персональной или конфиденциальной информации пользователя. &quot;Лаборатория Касперского&quot; защищает полученную информацию в соответствии с требованиями законодательства. Смотрите также полный список данных, которые <a id="h193034" class="englishcrossreferencetemplate" href="#192997" target="_self">передаются в &quot;Лабораторию Касперского&quot; при проверке репутации файлов и URL-адресов</a>.</p>
<p class="bodytext">Kaspersky Scan Engine соответствует требованиям Общего регламента по защите данных (GDPR).</p>
<p class="introheading">Обнаружение вредоносных и фишинговых URL-адресов</p>
<p class="bodytext">В Kaspersky Scan Engine входит автономная база данных вредоносных и фишинговых URL-адресов. Кроме того, вы можете проверять репутации сканируемых URL-адресов в Kaspersky Security Network.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184796"><p><a name="184796" style="display: none;">[Topic 184796]</a></p>
	<h2 id="t234406" class="heading2">Архитектура Kaspersky Scan Engine</h2>
<p class="bodytext">Kaspersky Scan Engine представляет собой реализацию HTTP-демона и ICAP-плагина, которые входят в Kaspersky Anti-Virus SDK. </p>
<p class="bodytext">Когда Kaspersky Scan Engine работает как HTTP Daemon, он работает в <em class="emphasischaracter">режиме HTTP</em>. Когда Kaspersky Scan Engine работает как плагин ICAP, он работает в <em class="emphasischaracter">режиме ICAP</em>.</p>
<p class="listheading">Ниже приведены описания режимов.</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h193041" class="englishcrossreferencetemplate" href="#192979" target="_self">Режим HTTP</a><p class="listcontinue1">В данном режиме Kaspersky Scan Engine работает как REST-подобная служба, которая получает HTTP-запросы от клиентских приложений, сканирует файлы и URL-адреса, переданные в этих запросах, и отправляет обратно HTTP-ответы с результатами сканирования.</p>
</li><li class="listbullet1"><a id="h212033" class="englishcrossreferencetemplate" href="#192972" target="_self">Режим ICAP</a><p class="attentioncontinue1">Этот режим доступен только для операционных систем Linux.</p>
<p class="listcontinue1">В этом режиме Kaspersky Scan Engine работает как ICAP-сервер, который сканирует HTTP-трафик (проходящий через прокси-сервер) и URL-адреса, которые запрашивают пользователи, а также отфильтровывает веб-страницы с вредоносным контентом.</p>
</li></ul><p class="listheading">Kaspersky Scan Engine состоит из следующих компонентов:</p>
<ul class="listbullet1"><li class="listbullet1">Служба, обрабатывающая клиентские запросы. Эти службы разные в режимах HTTP и ICAP. </li><li class="listbullet1">Kaspersky Scan Engine GUI<p class="listcontinue1">Графический интерфейс, доступный через браузер. Его функционал реализован в исполняемом файле klScanEngineUI.</p> </li><li class="listbullet1">Kaspersky Anti-Virus Engine<p class="listcontinue1">Исполняемый файл, который сканирует переданные ему объекты.</p> </li></ul><p class="bodytext">В <a id="h212028" class="englishcrossreferencetemplate" href="#211897" target="_self">кластеры</a> можно добавить несколько экземпляров Kaspersky Scan Engine<em class="emphasischaracter">.</em> Это упрощает настройку и дальнейшее управление экземплярами.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192971" target="_self">Режим HTTP</a></p><p class="relateditem"><a href="#192972" target="_self">Режим ICAP</a></p><p class="relateditem"><a href="#211897" target="_self">Экземпляры и кластеры</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192971"><p><a name="192971" style="display: none;">[Topic 192971]</a></p>
	<h3 id="t234378" class="heading3">Режим HTTP</h3>
<p class="bodytext">При работе в режиме HTTP решение Kaspersky Scan Engine состоит из HTTP-службы kavhttpd, ядра Kaspersky Anti-Virus Engine и Kaspersky Scan Engine GUI.</p>
<p class="listheading">Когда вы используете Kaspersky Scan Engine в режиме HTTP, взаимодействие между компонентами происходит в следующем порядке:</p>
<ol class="listnumber1"><li class="listnumber1">Файлы и URL-адреса для сканирования посылаются в kavhttpd в HTTP-запросах.<p class="listcontinue1">Вы можете переслать объекты в kavhttpd двумя способами:</p> <ul class="listbullet2"><li class="listbullet2">используя HTTP-клиент, подобный <a id="h179932" class="englishcrossreferencetemplate" href="#179883" target="_self">примеру HTTP-клиента</a>, включенному в пакет распространения;</li><li class="listbullet2">посылая <a id="h193035" class="englishcrossreferencetemplate" href="#192985" target="_self">HTTP-запросы вручную.</a></li></ul></li><li class="listnumber1">Служба kavhttpd посылает объекты ядру Kaspersky Anti-Virus Engine.</li><li class="listnumber1">Kaspersky Anti-Virus Engine сканирует объекты. <p class="listcontinue1">Если вы используете компонент проверки репутации файлов и URL-адресов, объекты также отправляются в KSN для проверки репутации. </p> </li><li class="listnumber1">После выполнения сканирования Kaspersky Anti-Virus Engine возвращает результат службе kavhttpd.</li><li class="listnumber1">Служба kavhttpd посылает результаты сканирования HTTP-клиенту либо другому приложению, которое послало объекты на сканирование.<p class="listcontinue1">Если вы используете Kaspersky Scan Engine GUI, результаты сканирования отображаются на странице <span class="guicharacter"><a id="h180597" class="englishcrossreferencetemplate" href="#179696" target="_self">Scan results</a></span>.</p> </li></ol><p class="bodytext">Нижеследующий рисунок отображает взаимодействие между компонентами Kaspersky Scan Engine. </p>
<p class="bodytext">
<p class="picture"><img id="f180591" src="http.png" class="linkedpngfiletemplate" alt="Диаграмма, показывающая, как HTTP-клиент или пользовательская программа взаимодействуют с Kaspersky Scan Engine через REST-подобный интерфейс." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Kaspersky Scan Engine в режиме HTTP</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192972"><p><a name="192972" style="display: none;">[Topic 192972]</a></p>
	<h3 id="t234384" class="heading3">Режим ICAP</h3>
<p class="bodytext">При работе в режиме ICAP решение Kaspersky Scan Engine состоит из ICAP-сервера kavicapd, ядра Kaspersky Anti-Virus Engine и Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Когда вы используете Kaspersky Scan Engine в режиме ICAP, взаимодействие между компонентами происходит в следующем порядке:</p>
<ol class="listnumber1"><li class="listnumber1">ICAP-клиент (например, прокси-сервер) посылает ICAP-запросы службе kavicapd. </li><li class="listnumber1">Служба kavicapd отправляет файлы ядру Kaspersky Anti-Virus Engine на сканирование.</li><li class="listnumber1">Kaspersky Anti-Virus Engine сканирует содержимое HTTP-сообщений и URL-адреса, содержащиеся в этих ICAP-запросах. <p class="listcontinue1">Если вы используете компонент проверки репутации файлов и URL-адресов, содержимое HTTP-сообщений и URL-адреса также отправляются в KSN для проверки репутации.</p> </li><li class="listnumber1">После сканирования ядро Kaspersky Anti-Virus Engine возвращает результаты службе kavicapd.</li><li class="listnumber1">Служба kavicapd отправляет ICAP-ответы с результатами сканирования ICAP-клиенту. <p class="listcontinue1">Если вы используете Kaspersky Scan Engine GUI, результаты сканирования отображаются на странице <span class="guicharacter"><a id="h180597" class="englishcrossreferencetemplate" href="#179696" target="_self">Scan results</a></span>.</p> </li></ol><p class="bodytext">Kaspersky Scan Engine может работать одновременно с несколькими ICAP-клиентами.</p>
<p class="bodytext">Нижеследующий рисунок показывает пример взаимодействия между прокси-сервером и Kaspersky Scan Engine в режиме ICAP.</p>
<p class="picture"><img id="f180646" src="icap.png" class="linkedpngfiletemplate" alt="Диаграмма взаимодействия прокси-сервера с Kaspersky Scan Engine по протоколу ICAP." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Kaspersky Scan Engine в режиме ICAP</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="211897"><p><a name="211897" style="display: none;">[Topic 211897]</a></p>
	<h3 id="t234398" class="heading3">Экземпляры и кластеры</h3>
<p class="bodytext">Вы можете установить несколько экземпляров Kaspersky Scan Engine в своей инфраструктуре в режиме HTTP, ICAP или в обоих режимах. Если вам нужно несколько экземпляров, вы можете сгруппировать их в кластеры. Кластер – это набор экземпляров Kaspersky Scan Engine, использующих одну и ту же базу данных <code class="programcharacter">kavebase</code>. Это позволяет пользователям получать доступ к Kaspersky Scan Engine GUI любого из установленных экземпляров и выполнять следующие действия:</p>
<ul class="listbullet1"><li class="listbullet1">Наблюдать за служебными событиями всех установленных экземпляров Kaspersky Scan Engine.</li><li class="listbullet1">Наблюдать за результатами проверки всех установленных экземпляров Kaspersky Scan Engine.</li><li class="listbullet1">Проверять информацию о каждом установленном экземпляре Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Статус экземпляра (включен или выключен).</li><li class="listbullet2">Версия антивирусных баз.</li></ul></li><li class="listbullet1">Управлять настройками каждого установленного экземпляра Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Включать или выключать логирование.</li><li class="listbullet2">Обновлять антивирусные базы.</li></ul></li></ul><p class="bodytext">Вы можете настроить несколько экземпляров Kaspersky Scan Engine одновременно с помощью <em class="emphasischaracter">профилей настройки.</em> Профиль настроек – это набор параметров Kaspersky Scan Engine, которые можно применить к одному или нескольким экземплярам. Профили настроек создаются с помощью <a id="h201478" class="englishcrossreferencetemplate" href="#201264" target="_self">Kaspersky Scan Engine GUI</a>.</p>
<p class="attentionbody">В текущей версии Kaspersky Scan Engine отсутствует балансировщик для распределения запросов на сканирование между разными экземплярами Kaspersky Scan Engine. Если вы хотите распределять запросы на сканирование, вам необходимо использовать сторонний балансировщик.</p>
<p class="picture"><img id="f212065" src="cluster_diagram.png" class="linkedpngfiletemplate" alt="Кластерная диаграмма. К базе данных kavebase подключено несколько экземпляров Kaspersky Scan Engine." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Использование нескольких экземпляров Kaspersky Scan Engine</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">Смотрите также:</p><p class="relateditem"><a href="#201264" target="_self">Настройки кластеров Kaspersky Scan Engine</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179824"><p><a name="179824" style="display: none;">[Topic 179824]</a></p>
	<h2 id="t234413" class="heading2">Сценарии использования Kaspersky Scan Engine</h2>
<p class="bodytext">В этом разделе описаны распространенные сценарии использования Kaspersky Scan Engine.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#180130" target="_self">Защита от угроз</a></p><p class="relateditem"><a href="#180131" target="_self">Веб-защита от вредоносных и фишинговых сайтов</a></p><p class="relateditem"><a href="#180133" target="_self">Проверка репутации файлов и URL-адресов в KSN</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180130"><p><a name="180130" style="display: none;">[Topic 180130]</a></p>
	<h3 id="t234531" class="heading3">Защита от угроз</h3>
<p class="bodytext">Kaspersky Scan Engine помогает защитить вашу сеть и данные, обнаруживая вредоносные программы и легальные программы, которые могут быть использованы злоумышленниками.</p>
<p class="bodytext">Прежде чем приступить к работе с Kaspersky Scan Engine, определитесь со своим вариантом использования в следующем порядке.</p>
<ol class="listnumber1"><li class="listnumber1">Решите, какие данные вы хотите сканировать:<ul class="listbullet2"><li class="listbullet2">Данные, загруженные в вашу сеть вашими пользователями.</li><li class="listbullet2">Данные, созданные внутри вашей организации, например документы.</li><li class="listbullet2">Данные, загруженные из источников за пределами вашей сети. Это может предотвратить атаки на цепочку поставок.</li></ul><p class="listcontinue1">Вы также можете использовать Kaspersky Scan Engine для добавления функций сканирования в свои программы и службы безопасности. Kaspersky Scan Engine проверяет объекты любого формата, в том числе упакованные.</p> </li><li class="listnumber1">Решите, какой режим лучше для вашей среды – HTTP или ICAP.</li><li class="listnumber1">Решите, где вы хотите развернуть Kaspersky Scan Engine. </li><li class="listnumber1">Решите, как вы получите доступ к результатам сканирования:<ul class="listbullet2"><li class="listbullet2">В Kaspersky Scan Engine GUI. </li><li class="listbullet2">В клиентском приложении.</li></ul></li><li class="listnumber1">Решите, какие функции Kaspersky Scan Engine вы будете использовать:<ul class="listbullet2"><li class="listbullet2">Решите, хотите ли вы использовать <a id="h180137" class="englishcrossreferencetemplate" href="#180133" target="_self">Kaspersky Security Network (KSN) для проверки репутации файлов и URL-адресов</a>.</li><li class="listbullet2">Решите, какой уровень эвристики вы хотите использовать.</li><li class="listbullet2">Решите, какие действия должен выполнять Kaspersky Scan Engine после обнаружения вредоносных или легальных программ, которые могут быть использованы злоумышленниками.</li><li class="listbullet2">Решите, хотите ли вы сканировать упакованные исполняемые файлы.</li><li class="listbullet2">Решите, хотите ли вы проверять архивы.</li><li class="listbullet2">Решите, хотите ли вы сканировать электронную почту.</li><li class="listbullet2">Решите, хотите ли вы сканировать почтовые базы.</li></ul></li></ol><p class="bodytext">После определения варианта использования Kaspersky Scan Engine переходите к разделу <a id="h180690" class="englishcrossreferencetemplate" href="#180558" target="_self">Начало работы с Kaspersky Scan Engine</a>.</p>
<p class="bodytext">Ниже приведены инструкции по выполнению типовых задач, которые Kaspersky Scan Engine выполняет в режиме HTTP и ICAP.</p>
<p class="introheading">Сканирование файлов с помощью примера HTTP-клиента (режим HTTP)</p>
<p class="bodytext">В этой инструкции предполагается, что вы уже <a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">установили</a> и настроили Kaspersky Scan Engine с помощью <a id="h193111" class="englishcrossreferencetemplate" href="#192980" target="_self">файла конфигурации</a> или <a id="h180271" class="englishcrossreferencetemplate" href="#179697" target="_self">графического интерфейса</a>.</p>
<p class="procedureheading">Для сканирования файлов в Kaspersky Scan Engine:</p>
<ol class="listnumber1"><li class="listnumber1"><a id="h193043" class="englishcrossreferencetemplate" href="#192981" target="_self">Запустите службу kavhttpd</a>.</li><li class="listnumber1">Запустите пример HTTP-клиента. Клиент находится в директории <code class="programcharacter">/bin/kavhttp_client</code> <a id="h180273" class="englishcrossreferencetemplate" href="#184793" target="_self">пакета распространения</a>.</li><li class="listnumber1">Передайте файлы, которые вы хотите просканировать, в пример HTTP-клиента:<ul class="listbullet2"><li class="listbullet2">Проверять файлы размером более 4 мегабайт (МБ) в <a id="h180274" class="englishcrossreferencetemplate" href="#179884" target="_self">режиме сканирования файлов</a>. Используйте параметр <code class="programcharacter">-f</code> и передайте локальные пути к файлам примеру HTTP-клиента.<p class="listcontinue2">В приведенном ниже примере показано, как сканировать два файла в режиме сканирования файлов:</p> </li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client -f /usr/dir1/example1.zip /usr/dir2/example2.iso</p>
</td>
</tr>

</table> <ul class="listbullet2"><li class="listbullet2">Проверять файлы размером менее 4 МБ в <a id="h180274_2" class="englishcrossreferencetemplate" href="#179884" target="_self">режиме сканирования памяти</a>. Передайте пути (сетевые или локальные) к примеру HTTP-клиента. Для этого используйте параметр <code class="programcharacter">-s</code>.<p class="listcontinue2">В приведенном ниже примере показано, как сканировать файл в режиме сканирования памяти:</p> </li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client -s 192.0.2.0:888 /usr/dir/example.txt</p>
</td>
</tr>

</table> </li><li class="listnumber1"><a id="h180276" class="englishcrossreferencetemplate" href="#179886" target="_self">Просмотрите результаты проверки</a>.</li></ol><p class="introheading">Сканирование трафика, проходящего через прокси-сервер (режим ICAP)</p>
<p class="bodytext">Эта инструкция предполагает, что вы уже <a id="h193042_2" class="englishcrossreferencetemplate" href="#192974" target="_self">установили</a> и настроили Kaspersky Scan Engine с помощью <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации</a> или <a id="h180271_2" class="englishcrossreferencetemplate" href="#179697" target="_self">Kaspersky Scan Engine GUI</a>.</p>
<p class="procedureheading">Чтобы проверить трафик, проходящий через прокси-сервер:</p>
<ol class="listnumber1"><li class="listnumber1">Настройте свой прокси-сервер для работы с Kaspersky Scan Engine (см. пример <a id="h180279" class="englishcrossreferencetemplate" href="#179904" target="_self">использования Kaspersky Scan Engine в режиме ICAP со Squid</a>).</li><li class="listnumber1">Создайте <a id="h180188" class="englishcrossreferencetemplate" href="#179895" target="_self">шаблон ответа, который вы хотите отобразить, или сценарий</a>, который будет выполняться при обнаружении вредоносных или легальных программ, которые могут быть использованы злоумышленниками.</li><li class="listnumber1">Настройте правила службы ICAP на случай, когда Kaspersky Scan Engine обнаруживает вредоносные или легальные программы, которые могут быть использованы злоумышленниками. Вы можете сделать это <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">вручную</a> или с <a id="h180831" class="englishcrossreferencetemplate" href="#180283" target="_self">помощью графического интерфейса</a>.</li><li class="listnumber1"><a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">Запустите службу kavicapd</a>.</li></ol><p class="bodytext">Kaspersky Scan Engine будет автоматически обнаруживать вредоносные или легальные программы, которые могут быть использованы злоумышленниками, а затем обрабатывать их в соответствии с правилами службы ICAP.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180131"><p><a name="180131" style="display: none;">[Topic 180131]</a></p>
	<h3 id="t234594" class="heading3">Веб-защита от вредоносных и фишинговых сайтов</h3>
<p class="bodytext">В этом разделе описаны распространенные сценарии использования Kaspersky Scan Engine для проверки веб-сайтов.</p>
<p class="bodytext">В инструкциях в этом разделе предполагается, что вы уже <a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">установили</a> Kaspersky Scan Engine.</p>
<p class="introheading">Сканирование URL-адресов (режим HTTP)</p>
<p class="procedureheading">Чтобы просканировать URL-адрес с помощью Kaspersky Scan Engine:</p>
<ol class="listnumber1"><li class="listnumber1">В элементе <code class="programcharacter">ServerSettings &gt; Flags</code> <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файла конфигурации</a> kavhttpd.xml укажите нужные настройки:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">KAV_SHT_ENGINE_KSN</code> – Для проверки репутации веб-сайтов с помощью KSN.</li><li class="listbullet2"><code class="programcharacter">KAV_SHT_ENGINE_WMUF</code> – Для обнаружения вредоносных веб-сайтов.</li><li class="listbullet2"><code class="programcharacter">KAV_SHT_ENGINE_APUF</code> – Для обнаружения фишинговых веб-сайтов.</li></ul><p class="listcontinue1">Вы также можете задать настройки с помощью <a id="h180271" class="englishcrossreferencetemplate" href="#179697" target="_self">Kaspersky Scan Engine GUI</a>.</p> </li><li class="listnumber1"><a id="h193043" class="englishcrossreferencetemplate" href="#192981" target="_self">Запустите службу kavhttpd</a>.</li><li class="listnumber1">Отправьте URL-адрес, который вы хотите проверить, службе kavhttpd.<p class="listcontinue1">Например, вы можете использовать пример HTTP-клиента <code class="programcharacter">%service_dir%/bin/kavhttp_client</code> для этой цели следующим образом:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client -u http://example.com</p>
</td>
</tr>

</table> <p class="listcontinue1">Также вы можете отправить <a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">HTTP-запрос POST</a> в службу kavhttpd.</p> </li><li class="listnumber1"><a id="h180276" class="englishcrossreferencetemplate" href="#179886" target="_self">Просмотрите результаты проверки</a>.<p class="listcontinue1">Вы можете заблокировать URL-адреса, для которых возвращается результат <code class="programcharacter">DETECT</code>.</p> </li></ol><p class="introheading">Проверка URL-адресов, запрашиваемых пользователями через прокси-сервер (режим ICAP)</p>
<p class="procedureheading">Чтобы проверить URL-адреса, которые проходят через прокси-сервер:</p>
<ol class="listnumber1"><li class="listnumber1">В файле конфигурации kavicapd.xml укажите нужные параметры:<ul class="listbullet2"><li class="listbullet2">В элементе <code class="programcharacter">SDKSettings &gt; ScanningMode</code> укажите <code class="programcharacter">KAV_O_M_PHISHING</code> для обнаружения фишинговых сайтов.</li><li class="listbullet2">В элементе <code class="programcharacter">KSNSettings &gt; UseKSN</code> укажите <code class="programcharacter">1</code> для проверки репутации сайтов с помощью KSN.</li></ul><p class="listcontinue1">Вы также можете задать настройки с помощью <a id="h180271_2" class="englishcrossreferencetemplate" href="#179697" target="_self">Kaspersky Scan Engine GUI</a>.</p> </li><li class="listnumber1">Настройте свой прокси-сервер для работы с Kaspersky Scan Engine (см. пример <a id="h180279" class="englishcrossreferencetemplate" href="#179904" target="_self">использования Kaspersky Scan Engine в режиме ICAP со Squid</a>).</li><li class="listnumber1">Создайте <a id="h180188" class="englishcrossreferencetemplate" href="#179895" target="_self">шаблон ответа</a>, если вы хотите отображать его вместо фишинговых веб-страниц.</li><li class="listnumber1">Создайте правила службы ICAP для случаев, когда Kaspersky Scan Engine возвращает результаты проверки <code class="programcharacter">PHISHING</code> и <code class="programcharacter">DETECT</code>.<p class="listcontinue1">Вы можете сделать это <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">вручную</a> или с <a id="h180831" class="englishcrossreferencetemplate" href="#180283" target="_self">помощью Kaspersky Scan Engine GUI</a>.</p> </li><li class="listnumber1"><a id="h193043_2" class="englishcrossreferencetemplate" href="#192981" target="_self">Запустите службу kavicapd</a>.</li></ol><p class="bodytext">Kaspersky Scan Engine будет автоматически проверять URL-адреса и обрабатывать их в соответствии с правилами службы ICAP.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180133"><p><a name="180133" style="display: none;">[Topic 180133]</a></p>
	<h3 id="t234356" class="heading3">Проверка репутации файлов и URL-адресов в KSN</h3>
<p class="bodytext">В этом разделе описаны распространенные сценарии, в которых вы можете использовать Kaspersky Scan Engine вместе с <a id="h181527" class="englishcrossreferencetemplate" href="#192970" target="_self">Kaspersky Security Network (KSN)</a> для проверки файлов и веб-сайтов.</p>
<p class="bodytext">В инструкциях в этом разделе предполагается, что вы уже <a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">установили</a> Kaspersky Scan Engine.</p>
<p class="introheading">Проверка файлов и сайтов с проверкой репутации (режим HTTP)</p>
<p class="procedureheading">Чтобы проверить файлы и сайты с помощью проверки репутации:</p>
<ol class="listnumber1"><li class="listnumber1">В элементе <code class="programcharacter">ServerSettings &gt; Flags</code> <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файла конфигурации</a> kavhttpd.xml укажите параметр <code class="programcharacter">KAV_SHT_ENGINE_KSN</code>.<p class="listcontinue1">Вы также можете использовать <a id="h180271" class="englishcrossreferencetemplate" href="#179697" target="_self">Kaspersky Scan Engine GUI</a>, чтобы включить проверку репутации.</p> </li><li class="listnumber1"><a id="h193043" class="englishcrossreferencetemplate" href="#192981" target="_self">Запустите службу kavhttpd</a>.</li><li class="listnumber1">Отправьте URL-адреса и файлы, которые вы хотите проверить, в службу kavhttpd.<p class="listcontinue1">Например, вы можете использовать <a id="h180274" class="englishcrossreferencetemplate" href="#179884" target="_self">пример HTTP-клиента</a> <code class="programcharacter">%service_dir%/bin/kavhttp_client</code>.</p> <p class="listcontinue1">Также вы можете отправлять <a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">HTTP-запросы POST</a> в службу kavhttpd.</p> </li><li class="listnumber1"><a id="h180276" class="englishcrossreferencetemplate" href="#179886" target="_self">Просмотрите результаты проверки</a>.<p class="listcontinue1">Результаты проверки будут зависеть от репутации URL-адресов и файлов.</p> </li></ol><p class="introheading">Проверка URL-адресов, запрашиваемых пользователями через прокси-сервер (режим ICAP)</p>
<p class="procedureheading">Чтобы проверить URL-адреса, которые проходят через прокси-сервер:</p>
<ol class="listnumber1"><li class="listnumber1">В элементе <code class="programcharacter">KSNSettings &gt; UseKSN</code> <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации</a> kavicapd.xml укажите <code class="programcharacter">1</code> для проверки репутации файлов и сайтов с помощью KSN.<p class="listcontinue1">Вы также можете включить проверку репутации с помощью <a id="h180271_2" class="englishcrossreferencetemplate" href="#179697" target="_self">Kaspersky Scan Engine GUI</a>.</p> </li><li class="listnumber1">Настройте свой прокси-сервер для работы с Kaspersky Scan Engine (см. пример <a id="h180279" class="englishcrossreferencetemplate" href="#179904" target="_self">использования Kaspersky Scan Engine в режиме ICAP со Squid</a>).</li><li class="listnumber1">Создайте правила службы ICAP для результатов проверки, возвращаемых Kaspersky Scan Engine.<p class="listcontinue1">Вы можете создавать правила <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">вручную</a> или с <a id="h180831" class="englishcrossreferencetemplate" href="#180283" target="_self">помощью Kaspersky Scan Engine GUI</a>.</p> </li><li class="listnumber1"><a id="h193043_2" class="englishcrossreferencetemplate" href="#192981" target="_self">Запустите службу kavicapd</a>.</li></ol><p class="bodytext">Kaspersky Scan Engine будет возвращать результаты проверки файлов и URL-адресов на основе их репутации в KSN и отвечать в соответствии с заданными вами правилами службы ICAP.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184795"><p><a name="184795" style="display: none;">[Topic 184795]</a></p>
	<h2 id="t234375" class="heading2">Системные требования</h2>
<p class="bodytext">В этом разделе описаны системные требования Kaspersky Scan Engine.</p>
<p class="introheading">Поддерживаемые операционные системы</p>
<p class="bodytext">Kaspersky Scan Engine работает на 64-битной версии Linux® и на 64-битной версии Microsoft® Windows®.</p>
<p class="introheading">Требования к установленному ПО</p>
<p class="bodytext">Kaspersky Scan Engine GUI может быть доступен с помощью следующих браузеров:</p>
<ul class="listbullet1"><li class="listbullet1">Google Chrome™ 60 и более поздние версии;</li><li class="listbullet1">Microsoft Internet Explorer® 11 и более поздние версии;</li><li class="listbullet1">Mozilla™ Firefox™ 55 и более поздние версии;</li><li class="listbullet1">Microsoft Edge 38 и более поздние версии.</li></ul><p class="bodytext">Kaspersky Scan Engine GUI работает при установленной <a id="h181518" class="englishcrossreferencetemplate" href="#184775" target="_self">PostgreSQL 10.7 или более поздней версии</a>.</p>
<p class="bodytext">Пакет распространения Kaspersky Scan Engine не содержит исходного кода библиотек Boost и OpenSSL. Если вы хотите адаптировать HTTP-службу или ICAP-службу под свои нужды, отредактировав и пересобрав исходный код из пакета распространения Kaspersky Scan Engine, загрузите код библиотек Boost и OpenSSL с официальных сайтов и используйте в своей системе. Если вы внесете изменения в исходный код HTTP-службы или ICAP-службы и захотите использовать графический интерфейс Kaspersky Scan Engine, получите одобрение на изменения от вашего персонального технического менеджера, чтобы HTTP-служба или ICAP-служба по-прежнему работала с графическим интерфейсом Kaspersky Scan Engine.</p>
<p class="bodytext">Для сборки HTTPD-службы и ICAP-службы используйте следующее ПО:</p>
<ul class="listbullet1"><li class="listbullet1">Boost 1.72.0 или более поздней версии;</li><li class="listbullet1">OpenSSL (последнюю версию);</li><li class="listbullet1">GCC 7.3 или более позднюю версию;</li><li class="listbullet1">Brotli (только для ICAP);</li><li class="listbullet1">Библиотеки PostgreSQL с 6.4.4 по 7 (не включительно).<p class="listcontinue1">Мы рекомендуем вам установить пакет <code class="programcharacter">libpqxx-devel</code>.</p> </li></ul><p class="introheading">Требования к аппаратуре</p>
<p class="bodytext">Kaspersky Scan Engine требует 1 ГБ свободного места на диске. Если вы планируете использовать Kaspersky Scan Engine GUI, вам нужно также выделить место для базы данных PostgreSQL, которая хранит служебные события. База данных PostgreSQL может храниться на том же компьютере, где установлено решение Kaspersky Scan Engine, либо на другом компьютере. Размер базы данных зависит от количества событий и может достигать нескольких гигабайт. В базе данных хранятся события, произошедшие за последние полгода.</p>
<p class="bodytext">В нижеследующей таблице приведены минимальные требования к процессору и ОЗУ для работы Kaspersky Scan Engine в зависимости от используемой операционной системы.</p>
<table class="tableintopic" width="750" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="375"><p class="tableheading">Операционная система</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="375"><p class="tableheading">Требования к ОЗУ и процессору</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="375"><p class="tablebodytext">64-битный Linux</p>
</td>
<td style="border:1px solid #010101;" width="375"><p class="tablebodytext">1 ГБ ОЗУ</p>
<p class="tablebodytext">1 ГГц либо более быстрый 64-битный (x64) процессор</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="375"><p class="tablebodytext">64-битная Windows 7 и более поздние версии</p>
<p class="tablebodytext">64-битная Windows Server 2008 R2 и более поздние версии</p>
</td>
<td style="border:1px solid #010101;" width="375"><p class="tablebodytext">1 ГБ ОЗУ</p>
<p class="tablebodytext">1 ГГц либо более быстрый 64-битный (x64) процессор</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184793"><p><a name="184793" style="display: none;">[Topic 184793]</a></p>
	<h2 id="t234323" class="heading2">Содержимое пакета распространения (Linux)</h2>
<p class="tablebodytext">В этом разделе описывается состав пакета распространения Kaspersky Scan Engine для систем Linux.</p>
<p class="introheading">Типы пакетов распространения</p>
<p class="tablebodytext">Kaspersky Scan Engine распространяется в следующих типах пакетов распространения:</p>
<ul class="listbullet1"><li class="listbullet1">в виде пакета RPM и набора дополнительных файлов;</li><li class="listbullet1">в виде пакета DEB и набора дополнительных файлов;</li><li class="listbullet1">в виде архива .tar.gz.<p class="listcontinue1">Этот тип пакета распространения можно использовать вместо пакета RPM или DEB.</p> </li></ul><p class="introheading">Пакет распространения RPM и DEB</p>
<p class="bodytext">Такой тип пакета распространения содержит следующие папки и файлы.</p>
<p class="tablename">Состав пакета распространения (пакет RPM и DEB)</p>
<p class="spacerfortables">
<table class="tableintopic" width="690" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td bgcolor="#C0C0C0" style="border:1px solid #010101;" width="408"><p class="tableheading">Путь</p>
</td>
<td bgcolor="#C0C0C0" style="border:1px solid #010101;" width="282"><p class="tableheading">Описание</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext"><code class="programcharacter">Doc_data/*</code></p>
</td>
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext">Файлы документации.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext"><code class="programcharacter">Kaspersky_Scan_Engine.htm</code></p>
</td>
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext">Офлайн-версия документации.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext"><code class="programcharacter">Kaspersky_ScanEngine-Linux-x86_64-%RELEASE_VERSION%-Release.rpm </code></p>
<p class="tablebodytext">(Пакет RPM)</p>
<p class="tablebodytext"><code class="programcharacter">Kaspersky_ScanEngine-Linux-x86_64-%RELEASE_VERSION%-Release.deb</code></p>
<p class="tablebodytext"><code class="programcharacter">(Пакет DEB)</code></p>
</td>
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext">Установочные пакеты.</p>
<p class="tablebodytext">Список файлов внутри этого пакета см. ниже в подразделе &quot;Файлы, содержащиеся в архиве .tgz&quot;.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext"><code class="programcharacter">setup.sh</code></p>
</td>
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext">Скрипт установки.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext"><code class="programcharacter">ReleaseNotes.pdf</code></p>
</td>
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext">Примечания к выпуску.</p>
</td>
</tr>

</table>
<p class="introheading">Файлы, содержащиеся в архиве .tar.gz</p>
<p class="bodytext">Пакет распространения Kaspersky Scan Engine для Linux содержит следующие папки и директории.</p>
<p class="tablename">Содержимое пакета распространения (архив .tar.gz)</p>
<p class="spacerfortables">
<table class="tableintopic" width="690" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Путь</p>
</td>
<td bgcolor="#C0C0C0" style="border:1px solid #010101;" width="354"><p class="tableheading">Описание</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/appinfo.kli</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл с информацией о приложении.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/httpdkavlog.ini</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации, который содержит настройки логирования службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/icapdkavlog.conf</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации, который содержит настройки логирования службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/kavhttpd</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемый файл службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/kavhttp_client</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемый файл клиента kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/kavhttpd.sh</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Скрипт для запуска службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/kavicapd</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемый файл службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/kavicapd.sh</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Скрипт для запуска службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/klScanEngineUI</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Бинарный файл Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/bin/libssp.so.0</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Вспомогательная библиотека.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/doc/Doc_data/</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Директория, которая содержит документацию Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/doc/Kaspersky_Scan_Engine.htm</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Главная страница документации Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/doc/ksn_license.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пользовательское соглашение для Kaspersky Security Network (KSN).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/doc/legal_notices.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Информация о стороннем коде.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/doc/license.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пользовательское соглашение для Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/etc/kavhttpd.service</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл модуля systemd для службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/etc/kavhttpd.xml</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пример файла конфигурации для службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/etc/kavicapd.service</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл модуля systemd для службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/etc/kavicapd.xml</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пример файла конфигурации для службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/etc/klScanEngineUI.service</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл модуля systemd для службы klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/etc/klScanEngineUI.xml</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации для Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/httpsrv/templates/</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Директория, которая содержит шаблоны для Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/icap_data/kavicapd_gui_rules.conf</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Конфигурационный файл, который содержит правила для службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/icap_data/templates/detect_req</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Шаблоны, которые используются в режиме модификации запросов (REQMOD).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/icap_data/templates/detect_resp</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Шаблоны, которые используются в режиме модификации ответов (RESPMOD).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/icap_data/templates/macro_req</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Шаблон ответа, используемый в режиме модификации запросов (REQMOD) для уведомления об обнаружении макроса.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/icap_data/templates/macro_resp</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Шаблон ответа, используемый в режиме модификации ответов (RESPMOD) для уведомления об обнаружении макроса.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/icap_data/scripts/send_syslog</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Скрипт, который выводит в терминал информацию о просканированных объектах и перенаправляет ее в утилиту логирования.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/install</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Скрипт установки.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/integrity_check.xml</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл манифеста со списком файлов программы для утилиты проверки целостности.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/integrity_checker</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита проверки целостности компонентов программы.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/gcc-version</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Текстовый файл с версией GCC.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/platform</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Текстовый файл с версией библиотеки GLIBC.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/ReleaseNotes.pdf</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Примечания к выпуску.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/samples/common/</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Библиотеки, используемые службой kavhttpd и kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/samples/kavhttp/</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Директория, которая содержит исходный код службы kavhttpd и образец клиента для нее.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/samples/kavicap/</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Директория, которая содержит исходный код службы kavicapd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/samples/migrate.sql</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, используемый для обновления базы данных <code class="programcharacter">kavebase</code> до более новой версии.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/samples/tables.sql</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, содержащий SQL-запросы, которые необходимо выполнить после установки Kaspersky Scan Engine вручную.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/tools/kav_encrypt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита для шифрования учетный данных прокси-серверов и базы данных Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/tools/kl_access_util</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита для восстановления пароля от учетной записи admin в графическом интерфейсе Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/tools/libssp.so.0</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Вспомогательная библиотека.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/tools/openssl</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита OpenSSL.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/tools/openssl.cnf</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации для OpenSSL.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/uninstall</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Скрипт удаления.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">/version</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Текстовый файл с версией продукта.</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192973"><p><a name="192973" style="display: none;">[Topic 192973]</a></p>
	<h2 id="t234324" class="heading2">Содержимое пакета распространения (Windows)</h2>
<p class="bodytext">Пакет распространения Kaspersky Scan Engine для Windows содержит следующие папки и файлы:</p>
<p class="tablename">Содержимое пакета распространения (Windows)</p>
<p class="spacerfortables">
<table class="tableintopic" width="690" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<td bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Путь</p>
</td>
<td bgcolor="#C0C0C0" style="border:1px solid #010101;" width="354"><p class="tableheading">Описание</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\appinfo.kli</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл с информацией о приложении.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\kavehost.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемый файл службы kavehost.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\kavhttp_client.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемый файл клиента kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\klScanEngineUI.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Бинарный файл Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\klScanEngineUI.xml</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации для Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\kavhttpd.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемый файл службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\kavhttpd.xml</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пример файла конфигурации для службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\httpdkavlog.ini</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации, который содержит настройки логирования службы kavhttpd.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\bases\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Папка, содержащая файлы антивирусных баз.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\ossl\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Библиотека OpenSSL.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\x86\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">32-образы библиотек, которые используются эмуляторами.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\*.dll</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Динамические библиотеки, используемые Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\bin\*.ppl</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Исполняемые модули Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\Doc_data\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Папка, которая содержит документацию Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\About data provision.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, который описывает процедуру предоставления данных для проверки репутации файлов и веб-адресов.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\About data provision extended.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, который описывает процедуру предоставления данных, когда вы отправляете статистическую информацию KSN в Kaspersky Scan Engine для Linux.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\About data provision - online activation.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, который описывает процедуру предоставления данных для режима лицензирования онлайн.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\Kaspersky_Scan_Engine.html</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Главная страница документации Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\legal_notices.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Информация о стороннем коде.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\license.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пользовательское соглашение для Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\doc\ksn_license.txt</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Пользовательское соглашение для Kaspersky Security Network (KSN).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\httpsrv\etc\kavaccess</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, который содержит зашифрованные учетные данные для Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\httpsrv\templates\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Папка, которая содержит шаблоны для Kaspersky Scan Engine GUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\include\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Папка, которая содержит заголовочные файлы KAV SDK для разработки приложений.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\runtime\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Библиотеки Universal C Runtime (UCRT) C++ Runtime.</p>
<p class="tablebodytext">Эти файлы можно использовать, если в целевой системе эти библиотеки не установлены.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\samples\kavhttp\</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Папка, которая содержит исходный код службы <code class="programcharacter">kavhttpd</code> и образец клиента для нее.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\samples\tables.sql</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл, содержащий SQL-запросы, которые необходимо выполнить после установки Kaspersky Scan Engine вручную.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\tools\kav_encrypt.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита для шифрования учетных данных прокси-серверов и базы данных Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\tools\kavsigner.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита для подписи приложений.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\tools\kl_access_util.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита для восстановления пароля от учетной записи admin в графическом интерфейсе Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\tools\openssl.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Утилита OpenSSL.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\tools\openssl.cnf</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Файл конфигурации для OpenSSL.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\tools\msvcp80.dll</code></p>
<p class="tablebodytext"><code class="programcharacter">\tools\msvcr80.dll</code></p>
<p class="tablebodytext"><code class="programcharacter">\tools\Microsoft.VC80.CRT</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Компоненты Microsoft Visual C++ Redistributable.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\install.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Инсталлятор.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\kl_control.bat </code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Скрипт для управления службами kavhttpd и klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\uninstall.exe</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Деинсталлятор.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\ReleaseNotes.pdf</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Примечания к выпуску.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext"><code class="programcharacter">\version</code></p>
</td>
<td style="border:1px solid #010101;" width="354"><p class="tablebodytext">Текстовый файл с версией продукта.</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180558"><p><a name="180558" style="display: none;">[Topic 180558]</a></p>
	<h1 id="t234371" class="heading1">Начало работы с Kaspersky Scan Engine</h1>
<p class="bodytext">Этот раздел содержит информацию о том, как легко и быстро начать пользоваться Kaspersky Scan Engine.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179865" target="_self">Начало работы с Kaspersky Scan Engine в режиме HTTP</a></p><p class="relateditem"><a href="#179890" target="_self">Начало работы с Kaspersky Scan Engine в режиме ICAP </a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179865"><p><a name="179865" style="display: none;">[Topic 179865]</a></p>
	<h2 id="t234372" class="heading2">Начало работы с Kaspersky Scan Engine в режиме HTTP</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как начать пользоваться Kaspersky Scan Engine в режиме HTTP.</p>
<p class="attentionbody">Перед тем как вы начнете использовать Kaspersky Scan Engine, мы настоятельно рекомендуем вам ограничить доступ к файлам Kaspersky Scan Engine, в том числе к журналам, с помощью встроенных инструментов вашей операционной системы. Эта мера поможет обезопасить вашу информацию.</p>
<p class="procedureheading">Чтобы начать пользоваться Kaspersky Scan Engine в режиме HTTP:</p>
<ol class="listnumber1"><li class="listnumber1"><a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">Установите Kaspersky Scan Engine</a>.<p class="listcontinue1">Kaspersky Scan Engine запускается автоматически после завершения установки.</p> </li><li class="listnumber1">При необходимости <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">настройте Kaspersky Scan Engine для использования в режиме HTTP</a>.<p class="listcontinue1">Например, вы можете настроить <a id="h180155" class="englishcrossreferencetemplate" href="#179868" target="_self">Format Recognizer</a> для увеличения скорости работы Kaspersky Scan Engine в режиме HTTP.</p> </li><li class="listnumber1">При необходимости настройте <a id="h179931" class="englishcrossreferencetemplate" href="#179872" target="_self">файл модуля systemd</a> для управления Kaspersky Scan Engine в режиме HTTP.</li><li class="listnumber1">При необходимости <a id="h180157" class="englishcrossreferencetemplate" href="#179879" target="_self">настройте логирование</a>. <p class="listcontinue1">Обратите внимание, что логирование снижает производительность Kaspersky Scan Engine. Обычно включать логирование нужно только во время интеграции или для отладки.</p> </li><li class="listnumber1"><a id="h179933" class="englishcrossreferencetemplate" href="#179882" target="_self">Обновите антивирусные базы или настройте периодичность обновления</a>.<p class="listcontinue1">Чтобы отслеживать процесс обновления и убедиться, что вы получаете последние обновления, отправьте HTTP-запрос на адрес <code class="programcharacter">/api/v3.0/update/status</code>.</p> </li><li class="listnumber1"><a id="h180562" class="englishcrossreferencetemplate" href="#180193" target="_self">Проверьте возможности обнаружения Kaspersky Scan Engine</a>.</li><li class="listnumber1">Сделайте запрос в Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Запустите <a id="h179932" class="englishcrossreferencetemplate" href="#179883" target="_self">пример HTTP-клиента</a> из командной строки для проверки файлов.</li><li class="listbullet2">Используйте REST-подобный протокол для выполнения <a id="h193035" class="englishcrossreferencetemplate" href="#192985" target="_self">HTTP-запросов</a>.</li><li class="listbullet2">Используйте исходный код примера HTTP-клиента в качестве примера для создания собственного клиента.</li></ul></li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179890"><p><a name="179890" style="display: none;">[Topic 179890]</a></p>
	<h2 id="t234373" class="heading2">Начало работы с Kaspersky Scan Engine в режиме ICAP </h2>
<p class="bodytext">Этот раздел содержит информацию о том, как запустить Kaspersky Scan Engine в режиме ICAP.</p>
<p class="attentionbody">Перед тем как вы начнете использовать Kaspersky Scan Engine, мы настоятельно рекомендуем вам ограничить доступ к файлам Kaspersky Scan Engine, в том числе к журналам, с помощью встроенных инструментов вашей операционной системы. Этот шаг поможет сделать вашу информацию более безопасной.</p>
<p class="procedureheading">Чтобы начать пользоваться Kaspersky Scan Engine в режиме ICAP</p>
<ol class="listnumber1"><li class="listnumber1"><a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">Установите Kaspersky Scan Engine</a>.<p class="listcontinue1">Kaspersky Scan Engine запускается автоматически после завершения установки.</p> </li><li class="listnumber1">При необходимости <a id="h193107" class="englishcrossreferencetemplate" href="#192988" target="_self">настройте Kaspersky Scan Engine для использования в режиме ICAP</a>.</li><li class="listnumber1">Если вы настраиваете режим ICAP вручную (без использования инсталлятора) и используете режим лицензирования офлайн, вы должны поместить файл лицензии в директорию, указанную в элементе <code class="programcharacter">LicensePath</code> файла конфигурации. Если вы используете режим лицензирования онлайн, вам необходимо указать код активации. Смотрите также подробную информацию о режимах лицензирования <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">онлайн</a> и <a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">офлайн</a>.</li><li class="listnumber1">При необходимости <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">настройте правила службы</a>.</li><li class="listnumber1">При необходимости <a id="h190568" class="englishcrossreferencetemplate" href="#179896" target="_self">настройте логирование</a>.<p class="listcontinue1">Обратите внимание, что логирование снижает производительность Kaspersky Scan Engine. Обычно включать логирование нужно только во время интеграции или для отладки.</p> </li><li class="listnumber1">При необходимости <a id="h180129" class="englishcrossreferencetemplate" href="#179897" target="_self">настройте переменные среды</a>.</li><li class="listnumber1"><a id="h180564" class="englishcrossreferencetemplate" href="#179902" target="_self">Обновите антивирусные базы или настройте периодичность обновления</a>.</li><li class="listnumber1"><a id="h180563" class="englishcrossreferencetemplate" href="#179903" target="_self">Проверьте возможности обнаружения Kaspersky Scan Engine</a>.</li><li class="listnumber1"><a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">Запустите Kaspersky Scan Engine в режиме ICAP</a>.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192974"><p><a name="192974" style="display: none;">[Topic 192974]</a></p>
	<h1 id="t234395" class="heading1">Установка Kaspersky Scan Engine</h1>
<p class="bodytext">Этот раздел содержит информацию о том, как установить Kaspersky Scan Engine.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#184775" target="_self">Подготовка к установке Kaspersky Scan Engine GUI</a></p><p class="relateditem"><a href="#199729" target="_self">Установка Kaspersky Scan Engine на Linux</a></p><p class="relateditem"><a href="#199730" target="_self">Установка Kaspersky Scan Engine на Windows</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184775"><p><a name="184775" style="display: none;">[Topic 184775]</a></p>
	<h2 id="t234465" class="heading2">Подготовка к установке Kaspersky Scan Engine GUI</h2>
<p class="bodytext">Kaspersky Scan Engine GUI использует объектно-реляционную систему управления базами данных (СУБД) PostgreSQL для хранения статистики сканирования, результатов сканирования, служебных событий и статуса службы. По этой причине, если вы хотите использовать Kaspersky Scan Engine GUI, вам нужно вначале установить PostgreSQL. </p>
<p class="bodytext">Вы можете использовать одну из двух интеграционных схем: </p>
<ul class="listbullet1"><li class="listbullet1">Установите Kaspersky Scan Engine на том же компьютере, что и PostgreSQL.</li><li class="listbullet1">Установите Kaspersky Scan Engine на другом компьютере, с которого есть доступ к компьютеру с PostgreSQL.</li></ul><table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192975" target="_self">Установка и настройка PostgreSQL (Linux)</a></p><p class="relateditem"><a href="#192976" target="_self">Установка и настройка PostgreSQL (Windows)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192975"><p><a name="192975" style="display: none;">[Topic 192975]</a></p>
	<h3 id="t234393" class="heading3">Установка и настройка PostgreSQL (Linux)</h3>
<p class="bodytext">Kaspersky Scan Engine GUI требует установленной СУБД PostgreSQL 10.7 или более поздней версии. Приведенная ниже процедура описывает установку и настройку PostgreSQL 10.7. Для более поздней версии СУБД процедура может отличаться от данной.</p>
<p class="procedureheading">Чтобы установить и настроить PostgreSQL:</p>
<ol class="listnumber1"><li class="listnumber1">Загрузите и установите PostgreSQL.<p class="listcontinue1">Вы можете установить PostgreSQL одним из следующих способов:</p> <ul class="listbullet2"><li class="listbullet2">Установите пакет, загруженный с веб-сайта PostgreSQL.<p class="listcontinue2">Зайдите на сайт <a class="hyperlinktemplate" href="https://www.postgresql.org/download/" target="_blank">https://www.postgresql.org/download/</a>, чтобы ознакомиться со списком поддерживаемых операционных систем и инструкциями по установке для каждой из них.</p> </li><li class="listbullet2">Установите PostgreSQL из исходного кода.<p class="listcontinue2">Зайдите на сайт <a class="hyperlinktemplate" href="https://www.postgresql.org/docs/10/installation.html" target="_blank">https://www.postgresql.org/docs/10/installation.html</a> для получения инструкций по установке.</p> </li></ul></li><li class="listnumber1">Откройте конфигурационный файл <code class="programcharacter">postgresql.conf</code>. Расположение этого файла зависит от используемой операционной системы:<ul class="listbullet2"><li class="listbullet2">В дистрибутивах Linux, основанных на Debian, файл <code class="programcharacter">postgresql.conf</code> находится в директории <code class="programcharacter">/etc/postgresql/10/main/</code>.</li><li class="listbullet2">В дистрибутивах Linux, основанных на Red Hat, файл <code class="programcharacter">postgresql.conf</code> находится в директории <code class="programcharacter">/var/lib/pgsql/data/</code>.</li></ul><p class="listcontinue1">Если вы используете иную операционную систему, расположение файла <code class="programcharacter">postgresql.conf</code> может быть другим.</p> </li><li class="listnumber1">Укажите IP-адрес, который решение Kaspersky Scan Engine должно использовать для соединения с PostgreSQL, в настройке <code class="programcharacter">listen_addresses</code> конфигурационного файла <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Укажите порт, который СУБД PostgreSQL должна прослушивать в ожидании соединений от Kaspersky Scan Engine, в настройке <code class="programcharacter">port</code> конфигурационного файла <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Откройте конфигурационный файл <code class="programcharacter">pg_hba.conf</code> на редактирование. Этот файл расположен в той же директории, что и файл <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Укажите, что СУБД PostgreSQL должна принимать пароли, зашифрованные по алгоритму MD5, для аутентификации всех ее клиентов:<ol class="listalpha2"><li class="listalpha2">Найдите следующую строку в файле <code class="programcharacter">pg_hba.conf</code>:<p class="listcontinue2"><code class="programcharacter">host all all 127.0.0.1/32 peer</code></p> </li><li class="listalpha2">Отредактируйте эту строку следующим образом:<p class="listcontinue2"><code class="programcharacter">host all all 127.0.0.1/32 md5</code></p> </li></ol><p class="attentioncontinue1">Если файл конфигурации <code class="programcharacter">pg_hba.conf</code> не содержит строку <code class="programcharacter">host all all 127.0.0.1/32 peer</code>, вам необходимо изменить строку<code class="programcharacter"> host all all 127.0.0.1/32 ident</code>.</p> </li><li class="listnumber1">Если PostgreSQL и Kaspersky Scan Engine установлены на разных компьютерах, добавьте следующую строку в файл <code class="programcharacter">pg_hba.conf</code>:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">host all all %IP%/32 md5</p>
</td>
</tr>

</table> <p class="listcontinue1">Здесь <code class="programcharacter">%IP%</code> – IP-адрес компьютера, на котором установлено решение Kaspersky Scan Engine.</p> </li><li class="listnumber1">Сохраните и закройте файл <code class="programcharacter">pg_hba.conf</code>.</li><li class="listnumber1">Перезапустите PostgreSQL, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">service postgresql restart</code></p> </li><li class="listnumber1">Задайте пароль для пользователя PostgreSQL, существующего по умолчанию.<p class="listcontinue1">При установке PostgreSQL создает суперпользователя <code class="programcharacter">postgres</code>. По умолчанию для этого пользователя пароль не задан. </p> <p class="listcontinue1">Чтобы задать пароль для пользователя <code class="programcharacter">postgres</code>:</p> <ol class="listalpha2"><li class="listalpha2">Из командной строки смените правильного пользователя на пользователя <code class="programcharacter">postgres</code>:<p class="listcontinue2"><code class="programcharacter">su postgres</code></p> </li><li class="listalpha2">Из-под учетной записи <code class="programcharacter">postgres</code> запустите утилиту psql, выполнив следующую команду в командной строке:<p class="listcontinue2"><code class="programcharacter">psql</code></p> </li><li class="listalpha2">В psql измените пароль пользователя <code class="programcharacter">postgres</code> с помощью следующей команды:<p class="listcontinue2"><code class="programcharacter">alter user postgres with password &#39;%PASSWORD%&#39;;</code></p> <p class="listcontinue2">Здесь <code class="programcharacter">%PASSWORD%</code> – это новый пароль пользователя <code class="programcharacter">postgres</code>.</p> </li><li class="listalpha2">Закройте утилиту psql, выполнив следующую команду в psql:<p class="listcontinue2"><code class="programcharacter">\q</code></p> </li></ol></li></ol><p class="bodytext">Теперь вы можете установить Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Чтобы установить Kaspersky Scan Engine GUI, вам нужен пользователь PostgreSQL с правами на создание новых баз данных и пользователей. Для этого вы можете использовать пользователя postgres или создать нового.</p>
<p class="bodytext">После установки PostgreSQL и задания пароля для пользователя <code class="programcharacter">postgres</code> вы можете перейти к действиям, описанным в разделе <a id="h193036" class="englishcrossreferencetemplate" href="#192977" target="_self">Автоматическая установка (Linux)</a> или <a id="h181517" class="englishcrossreferencetemplate" href="#180652" target="_self">Ручная установка (Linux)</a>.</p>
<p class="attentionbody">Все данные хранятся в базе данных kavebase. Kaspersky Scan Engine не использует другие базы данных.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192976"><p><a name="192976" style="display: none;">[Topic 192976]</a></p>
	<h3 id="t234394" class="heading3">Установка и настройка PostgreSQL (Windows)</h3>
<p class="procedureheading">Чтобы установить и настроить PostgreSQL:</p>
<ol class="listnumber1"><li class="listnumber1">Загрузите и установите PostgreSQL.<p class="listcontinue1">Зайдите на сайт <a class="hyperlinktemplate" href="https://www.postgresql.org/download/" target="_blank">https://www.enterprisedb.com/downloads/postgres-postgresql-downloads</a>, чтобы просмотреть список поддерживаемых операционных систем и загрузить инсталлятор.</p> </li><li class="listnumber1">Откройте конфигурационный файл <code class="programcharacter">postgresql.conf</code>. Этот файл находится в папке <code class="programcharacter">%postgresql_dir%\data</code>. Здесь <code class="programcharacter">%postgresql_dir%</code> (например, <code class="programcharacter">C:\Program Files\PostgreSQL\11</code>) это папка, в которую был установлен PostgreSQL.</li><li class="listnumber1">Укажите IP-адрес, который решение Kaspersky Scan Engine должно использовать для соединения с PostgreSQL, в настройке <code class="programcharacter">listen_addresses</code> конфигурационного файла <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Укажите порт, который СУБД PostgreSQL должна прослушивать в ожидании соединений от Kaspersky Scan Engine, в настройке <code class="programcharacter">port</code> конфигурационного файла <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Для PostgreSQL версии 13 или более поздней найдите следующую строку в <code class="programcharacter">postgresql.conf</code>:<p class="listcontinue1"><code class="programcharacter">password_encryption = md5 # md5 или scram-sha-256</code></p> <p class="listcontinue1">Если метод шифрования пароля, указанный в этой строке, отличается от <code class="programcharacter">md5</code>, замените его на <code class="programcharacter">md5</code>.</p> </li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Откройте конфигурационный файл <code class="programcharacter">pg_hba.conf</code> на редактирование. Этот файл расположен в той же папке, что и файл <code class="programcharacter">postgresql.conf</code>.</li><li class="listnumber1">Убедитесь, что для PostgreSQL требуются пароли, зашифрованные по алгоритму MD5, для аутентификации всех ее клиентов. Найдите следующую строку в файле <code class="programcharacter">pg_hba.conf</code>:<p class="listcontinue1"><code class="programcharacter">host all all 127.0.0.1/32 md5</code></p> <p class="listcontinue1">Если метод аутентификации, указанный в этой строке, отличается от <code class="programcharacter">md5</code>, замените его на <code class="programcharacter">md5</code>.</p> </li><li class="listnumber1">Если PostgreSQL и Kaspersky Scan Engine установлены на разных компьютерах, добавьте следующую строку в файл <code class="programcharacter">pg_hba.conf</code>:<p class="listcontinue1"><code class="programcharacter">host all all %IP%/32 md5</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%IP%</code> – IP-адрес компьютера, на котором установлено решение Kaspersky Scan Engine.</p> </li><li class="listnumber1">Сохраните и закройте файл <code class="programcharacter">pg_hba.conf</code>.</li><li class="listnumber1">Перезапустите PostgreSQL, выполнив следующие команды:<p class="listcontinue1"><code class="programcharacter">sc stop postgresql-x64-11</code></p> <p class="listcontinue1"><code class="programcharacter">sc start postgresql-x64-11</code></p> </li><li class="listnumber1">Если был выполнен шаг 5, вам необходимо обновить пароль суперпользователя на компьютере, на котором установлен PostgreSQL. Пользователь по умолчанию – <code class="programcharacter">postgres</code>. Вы можете использовать утилиту psql или pgAdmin для выполнения этого действия. Если вы используете утилиту psql, укажите пробел и имя пользователя после параметра -U, как показано ниже: <code class="programcharacter">psql -U postgres</code><p class="listcontinue1">Обновите пароль суперпользователя:</p> <p class="listcontinue1"><code class="programcharacter">ALTER ROLE username WITH PASSWORD &#39;your password&#39;;</code></p> </li></ol><p class="bodytext"> Теперь вы можете установить Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Чтобы установить Kaspersky Scan Engine GUI, вам нужен пользователь PostgreSQL с правами на создание новых баз данных и пользователей. Для этого вы можете использовать пользователя postgres или создать нового.</p>
<p class="bodytext">После установки PostgreSQL вы можете перейти к разделу <a id="h184734" class="englishcrossreferencetemplate" href="#192978" target="_self">Установка с помощью установщика (Windows)</a> или <a id="h184731" class="englishcrossreferencetemplate" href="#184719" target="_self">Установка вручную (Windows)</a>.</p>
<p class="attentionbody">Все данные хранятся в базе данных kavebase. Kaspersky Scan Engine не использует другие базы данных.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="199729"><p><a name="199729" style="display: none;">[Topic 199729]</a></p>
	<h2 id="t234396" class="heading2">Установка Kaspersky Scan Engine на Linux</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как установить Kaspersky Scan Engine на операционную систему Linux.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192977" target="_self">Автоматическая установка (Linux)</a></p><p class="relateditem"><a href="#180652" target="_self">Ручная установка (Linux)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192977"><p><a name="192977" style="display: none;">[Topic 192977]</a></p>
	<h3 id="t234280" class="heading3">Автоматическая установка (Linux)</h3>
<p class="bodytext">В этом разделе описана установка Kaspersky Scan Engine с использованием инсталлятора. Вы можете использовать программу установки, если Kaspersky Scan Engine не установлен на вашем компьютере (папка <code class="programcharacter">/opt/kaspersky/ScanEngine</code> отсутствует).</p>
<p class="attentionbody">Если вы хотите использовать Kaspersky Scan Engine вместе с Kaspersky Scan Engine GUI, вам нужно установить PostgreSQL на компьютер, к которому у Kaspersky Scan Engine есть доступ. Kaspersky Scan Engine GUI не будет работать без PostgreSQL. </p>
<p class="bodytext">Перед установкой и настройкой Kaspersky Scan Engine вам необходимо указать региональные настройки компьютера, на котором установлен Kaspersky Scan Engine. Используйте следующие команды.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">LC_ALL=en_US.utf8</p>
<p class="program">export LC_ALL</p>
</td>
</tr>

</table>
<p class="introheading">Использование инсталлятора для установки Kaspersky Scan Engine:</p>
<p class="bodytext">В приведенной ниже процедуре описаны действия, которые необходимо выполнить, если вы хотите установить Kaspersky Scan Engine с помощью инсталлятора.</p>
<p class="procedureheading">Для автоматической установки Kaspersky Scan Engine:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Запустите утилиту <code class="programcharacter">install</code>.</li><li class="listnumber1">Ознакомьтесь с Пользовательским соглашением (End User License Agreement, EULA) для Kaspersky Scan Engine.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения, примите его. Если вы не согласны с условиями Пользовательского соглашения, прекратите установку.</p> </li><li class="listnumber1">Выберите, использовать ли Kaspersky Scan Engine GUI.</li><li class="listnumber1">Если вы хотите использовать Kaspersky Scan Engine GUI, выполните следующие действия.<ol class="listalpha2"><li class="listalpha2">Убедитесь, что вы <a id="h198591" class="englishcrossreferencetemplate" href="#192975" target="_self">установили и настроили PostgreSQL</a>.</li><li class="listalpha2">Укажите IP-адрес и порт для соединения с PostgreSQL.</li><li class="listalpha2">Выберите, следует ли добавить экземпляр продукта в существующий кластер или подключиться к существующей базе данных. <p class="listcontinue2">Если вы решили добавить экземпляр продукта в существующий кластер, перейдите к следующему шагу. В противном случае перейдите к шагу f.</p> </li><li class="listalpha2">Введите имя пользователя и пароль учетной записи пользователя PostgreSQL.<p class="listcontinue2">Под этими учетными данными Kaspersky Scan Engine будет работать с базой данных.</p> </li><li class="listalpha2">Продолжите процедуру с шага 6.</li><li class="listalpha2">Введите учетные данные пользователя, у которого есть права на создание баз данных и пользователей. Учетные данные этого пользователя нигде не записываются. <p class="listcontinue2">С помощью этой учетной записи Kaspersky Scan Engine создаст новую базу данных kavebase, в которой будут храниться данные Kaspersky Scan Engine, и нового пользователя PostgreSQL. С этого момента Kaspersky Scan Engine будет использовать этого пользователя для внесения изменения в базу данных.</p> </li><li class="listalpha2">Задайте имя пользователя и пароль для новой учетной записи PostgreSQL.<p class="listcontinue2">Инсталлятор создаст учетную запись, под которой Kaspersky Scan Engine будет работать с базой данных. Эта учетная запись будет иметь доступ только к базе данных kavebase.</p> <p class="attentioncontinue2">Эти учетные данные будут храниться в зашифрованном виде и доступны только для пользователя root. Поэтому, если вы запустите службу от имени пользователя без root-прав, отобразится сообщение об ошибке. Чтобы решить эту проблему, после завершения установки настройте доступ к файлу ключа шифрования <code class="programcharacter">kl_scanengine_db.key</code>, хранящегося в директории <code class="programcharacter">httpsrv</code>, чтобы учетная запись пользователя, под которой Kaspersky Scan Engine работал с базой данных, имела разрешение на чтение.</p> </li></ol></li><li class="listnumber1">Выберите режим, в котором будет работать Kaspersky Scan Engine.<p class="listcontinue1">Доступны следующие режимы:</p> <ul class="listbullet2"><li class="listbullet2">HTTP</li><li class="listbullet2">ICAP</li></ul></li><li class="listnumber1">Если вы выбрали режим HTTP, укажите IP-адрес и порт или UNIX-сокет, которые Kaspersky Scan Engine будет использовать для получения запросов на сканирование объектов.<p class="listcontinue1">Если вы выбрали режим ICAP, укажите порт, трафик с которого будет сканироваться решением Kaspersky Scan Engine.</p> </li><li class="listnumber1">Укажите, должно ли решение Kaspersky Scan Engine использовать Kaspersky Security Network (KSN).</li><li class="listnumber1">Если вы хотите использовать KSN, ознакомьтесь с Пользовательским соглашением для KSN и Политикой конфиденциальности.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения и Политики конфиденциальности, примите их. Если вы не примете условия Пользовательского соглашения и Политики конфиденциальности, вы не сможете использовать KSN, но установка продолжится. Вы сможете включить KSN позже, используя <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">Kaspersky Scan Engine GUI</a> или файлы конфигурации Kaspersky Scan Engine (<a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">HTTP</a> или <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">ICAP</a>).</p> </li><li class="listnumber1">Если вы хотите использовать Kaspersky Scan Engine GUI, при необходимости укажите порт, на котором он будет доступен.</li><li class="listnumber1">Укажите, будет ли Kaspersky Scan Engine использовать прокси-сервер.</li><li class="listnumber1">Если вы хотите использовать прокси-сервер, укажите настройки прокси.</li><li class="listnumber1">Укажите директорию, где будут храниться временные файлы.<p class="listcontinue1">Если вы нажмете <kbd class="keycharacter">Enter</kbd>, директория <code class="programcharacter">/tmp</code> будет использоваться для хранения временных файлов.</p> <p class="listcontinue1">Инсталлятор создаст поддиректорию <code class="programcharacter">scanengine</code> в указанной вами директории. Kaspersky Scan Engine будет использовать эту поддиректорию для хранения временных файлов.</p> </li><li class="listnumber1">Начиная с Kaspersky Scan Engine версии 2.1, объекты KAV SDK поставляются отдельным пакетом. Укажите абсолютный путь к директории, в которой находится пакет KAV SDK. Вы также можете нажать <kbd class="keycharacter">Enter</kbd>. В этом случае инсталлятор Kaspersky Scan Engine будет искать файлы KAV SDK в директории на один уровень выше, чем директория, в которой находится установщик.</li><li class="listnumber1">Укажите режим лицензирования, который будет использоваться в Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">Если вы хотите использовать режим лицензирования оффлайн, укажите файл ключа.</li><li class="listbullet2">Если вы хотите использовать режим лицензирования онлайн, укажите код активации.</li></ul></li><li class="listnumber1">Проверьте указанные вами параметры и при необходимости откорректируйте их.</li></ol><p class="bodytext">После того как вы укажете необходимые данные, Kaspersky Scan Engine будет установлен, а затем запущен. Информация об установке будет выведена на консоль.</p>
<p class="bodytext">После установки Kaspersky Scan Engine вы можете в любой момент проверить целостность его компонентов <a id="h209330" class="englishcrossreferencetemplate" href="#209025" target="_self">с помощью утилиты проверки целостности</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180652"><p><a name="180652" style="display: none;">[Topic 180652]</a></p>
	<h3 id="t234441" class="heading3">Ручная установка (Linux)</h3>
<p class="bodytext">В этом разделе описано, как запустить Kaspersky Scan Engine на системах Linux. </p>
<p class="bodytext">Перед установкой и настройкой Kaspersky Scan Engine вам необходимо указать региональные настройки компьютера, на котором установлен Kaspersky Scan Engine. Используйте следующие команды.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">LC_ALL=en_US.utf8</p>
<p class="program">export LC_ALL</p>
</td>
</tr>

</table>
<p class="procedureheading">Чтобы установить Kaspersky Scan Engine вручную: </p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Создайте директорию <code class="programcharacter">/opt/kaspersky/ScanEngine</code>. В этом справочном документе эта директория называется <code class="programcharacter">%service_dir%</code>.</li><li class="listnumber1">Распакуйте содержимое пакета распространения в директорию <code class="programcharacter">%service_dir%</code> на вашем компьютере.</li><li class="listnumber1">Распакуйте объекты из пакета распространения KAV SDK (далее <code class="programcharacter">%SDK_kit%</code>) следующим образом:<ul class="listbullet2"><li class="listbullet2">Объекты из <code class="programcharacter">%SDK_kit%/bin/bases</code> в <code class="programcharacter">%service_dir%/bin/bases</code>.</li><li class="listbullet2">Объекты из <code class="programcharacter">%SDK_kit%/include</code> в <code class="programcharacter">%service_dir%/include</code>.</li><li class="listbullet2">Объекты из <code class="programcharacter">%SDK_kit%/lib</code> в <code class="programcharacter">%service_dir%/lib</code>.</li><li class="listbullet2">Объекты из <code class="programcharacter">% %SDK_kit%/ppl</code> в <code class="programcharacter">%service_dir%/ppl</code>.</li><li class="listbullet2">Файл <code class="programcharacter">%SDK_kit%/tools/kavsigner</code> в <code class="programcharacter">%service_dir%/tools</code>.</li><li class="listbullet2">Файл<code class="programcharacter">% %SDK_kit%/tools/integrity_check_sdk.xml</code> в <code class="programcharacter">%service_dir%</code>.</li></ul><p class="attentioncontinue1">Только пользователи с правами администратора должны иметь доступ к объектам из <code class="programcharacter">%SDK_kit%</code>. <br>Для совместимости с Kaspersky Scan Engine используйте KAV SDK версии 8.9.2.595 или более поздней версии.</p> </li><li class="listnumber1">Ознакомьтесь с Пользовательским соглашением (End User License Agreement, EULA) для Kaspersky Scan Engine. Пользовательское соглашение находится по адресу <code class="programcharacter">%service_dir%/doc/license.txt</code>.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения, переходите к следующему шагу. Если вы отклоняете условия Пользовательского соглашения, отмените установку.</p> </li><li class="listnumber1">Откройте файл <code class="programcharacter">%service_dir%/etc/klScanEngineUI.xml</code>.</li><li class="listnumber1">Примите условия Пользовательского соглашения с конечным пользователем. В файле <code class="programcharacter">klScanEngineUI.xml</code> замените <code class="programcharacter">&lt;Common&gt;rejected&lt;/Common&gt;</code> на <code class="programcharacter">&lt;Common&gt;accepted&lt;/Common&gt;</code>.</li><li class="listnumber1">Если вы хотите использовать Kaspersky Security Network (KSN), ознакомьтесь с Пользовательским соглашением для KSN и Политикой конфиденциальности. Это Пользовательское соглашение также находится по адресу <code class="programcharacter">%service_dir%/doc/ksn_license.txt</code> и содержит ссылку на Политику конфиденциальности.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения для KSN и Политикой конфиденциальности, переходите к следующему шагу. Если вы отклоняете условия Пользовательского соглашения для KSN или Политику конфиденциальности, перейдите к шагу 10.</p> </li><li class="listnumber1">Примите Пользовательское соглашение для KSN. Измените <code class="programcharacter">&lt;KSN&gt;rejected&lt;/KSN&gt;</code> на <code class="programcharacter">&lt;KSN&gt;accepted&lt;/KSN&gt;</code> в <code class="programcharacter">klScanEngineUI.xml</code>.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">%service_dir%/etc/klScanEngineUI.xml</code>.</li><li class="listnumber1">Создайте символьную ссылку на <code class="programcharacter">%service_dir%/etc/klScanEngineUI.xml</code> из директории <code class="programcharacter">/etc/</code>:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ln -s <code class="programcharacter">%service_dir%/etc/klScanEngineUI.xml /etc/klScanEngineUI.xml</code></p>
</td>
</tr>

</table> </li><li class="listnumber1">Если вы хотите использовать Kaspersky Scan Engine GUI, прочтите подраздел &quot;Включение Kaspersky Scan Engine GUI&quot; ниже.</li><li class="listnumber1">Создайте символьную ссылку на соответствующий файл конфигурации Kaspersky Scan Engine из директории <code class="programcharacter">/etc/</code>:<ul class="listbullet2"><li class="listbullet2">Для режима HTTP скопируйте файл <code class="programcharacter">%service_dir%/etc/kavhttpd.xml</code> в директорию <code class="programcharacter">/etc/</code>.</li><li class="listbullet2">Для режима ICAP скопируйте файл <code class="programcharacter">%service_dir%/etc/kavicapd.xml</code> в директорию <code class="programcharacter">/etc/</code>.</li></ul><p class="listcontinue1">Например, в режиме HTTP вы должны выполнить следующую команду:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ln -s <code class="programcharacter">%service_dir%/etc/kavhttpd.xml /etc/kavhttpd.xml</code></p>
</td>
</tr>

</table> </li><li class="listnumber1">Если вы не используете Kaspersky Scan Engine GUI и требуется подключение через прокси-сервер, вы должны указать зашифрованное имя пользователя и пароль для прокси-сервера. Чтобы зашифровать имя пользователя и пароль:<ol class="listalpha2"><li class="listalpha2">Создайте ключ шифрования следующим образом:<p class="listcontinue2"><code class="programcharacter">openssl rand -out %service_dir%/httpsrv/kl_scanengine_db.key 512</code></p> </li><li class="listalpha2">Предоставьте право на чтение только владельцу, выполнив следующую команду:<p class="listcontinue2"><code class="programcharacter">chmod 400 %service_dir%/httpsrv/kl_scanengine_db.key</code></p> </li><li class="listalpha2">Чтобы зашифровать учетные данные, используйте утилиту <code class="programcharacter">kav_encrypt</code>. Эта утилита также автоматически записывает зашифрованные имя пользователя и пароль в файл конфигурации <code class="programcharacter">kavhttpd.xml</code> (для режима HTTP) или <code class="programcharacter">kavicapd.xml</code> (для режима ICAP). Утилита находится в директории <code class="programcharacter">%service_dir%/tools/</code>.<p class="listcontinue2">Запустите утилиту <code class="programcharacter">kav_encrypt</code> со следующими параметрами:</p> <p class="listcontinue2"><code class="programcharacter">-m &lt;httpd | icap&gt; -p &lt;user_name:password&gt;</code></p> </li></ol></li><li class="listnumber1">В <code class="programcharacter">/etc/systemd/system/multi-user.target.wants/</code> создайте символьные ссылки на следующие файлы:<ul class="listbullet2"><li class="listbullet2">В режиме ICAP создайте символьную ссылку на <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/kavicapd.service</code> с помощью следующей команды:</li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ln -s /opt/kaspersky/ScanEngine/etc/kavicapd.service /etc/systemd/system/kavicapd.service</p>
</td>
</tr>

</table> <ul class="listbullet2"><li class="listbullet2">Для режима HTTP создайте символьную ссылку на <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/kavhttpd.service</code> с помощью следующей команды:</li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ln -s /opt/kaspersky/ScanEngine/etc/kavhttpd.service /etc/systemd/system/kavhttpd.service </p>
</td>
</tr>

</table> </li><li class="listnumber1">Зарегистрируйте Kaspersky Scan Engine в системе с помощью следующих команд:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"><code class="programcharacter">systemctl daemon-reload</code></p>
<p class="program"><code class="programcharacter">systemctl enable kavhttpd</code></p>
<p class="program"><code class="programcharacter">systemctl enable kavicapd</code></p>
</td>
</tr>

</table> </li><li class="listnumber1">Запустите зарегистрированные службы Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Для режима ICAP запустите:</li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"> service kavicapd start</p>
</td>
</tr>

</table> <ul class="listbullet2"><li class="listbullet2">Для режима HTTP запустите:</li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"> service kavhttpd start</p>
</td>
</tr>

</table> </li><li class="listnumber1">Перейдите к следующим шагам, как описано в разделе &quot;Начало работы&quot; в <a id="h180269" class="englishcrossreferencetemplate" href="#179865" target="_self">режиме HTTP</a> или <a id="h180693" class="englishcrossreferencetemplate" href="#179890" target="_self">ICAP</a>.</li><li class="listnumber1">Активируйте Kaspersky Scan Engine в <a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">режиме лицензирования офлайн</a> или в <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режиме лицензирования онлайн</a>. </li></ol><p class="bodytext">После установки Kaspersky Scan Engine вы можете в любой момент проверить целостность его компонентов <a id="h209330" class="englishcrossreferencetemplate" href="#209025" target="_self">с помощью утилиты проверки целостности</a>.</p>
<p class="introheading">Включение Kaspersky Scan Engine GUI</p>
<p class="procedureheading">Чтобы включить Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Выполните одно из следующих действий.<ul class="listbullet2"><li class="listbullet2">Если вы ранее не устанавливали экземпляр Kaspersky Scan Engine GUI или не хотите <a id="h212028" class="englishcrossreferencetemplate" href="#211897" target="_self">добавлять новый экземпляр в существующий кластер</a>, выполните действия, описанные в разделе <a id="h181518" class="englishcrossreferencetemplate" href="#184775" target="_self">Подготовка к установке Kaspersky Scan Engine GUI</a>.</li><li class="listbullet2">Если у вас уже есть экземпляр Kaspersky Scan Engine GUI и вы хотите <a id="h212028_2" class="englishcrossreferencetemplate" href="#211897" target="_self">добавить новый экземпляр в тот же кластер</a>, перейдите к шагу 4.</li></ul></li><li class="listnumber1">На компьютере, на котором установлен PostgreSQL, выполните перечисленные ниже действия от имени пользователя, который может создавать новых пользователей и базы данных. Для выполнения этих действий вы можете использовать утилиту psql или pgAdmin.<p class="listcontinue1">Убедитесь, что пользователь, выполняющий запросы к базе данных, имеет доступ к директории, содержащей таблицы <code class="programcharacter">tables.sql</code>, а также имеет доступ на чтение к самому <code class="programcharacter">tables.sql</code>.</p> <ol class="listalpha2"><li class="listalpha2">Создайте нового пользователя PostgreSQL с именем <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">CREATE USER scanengine;</code></p> </li><li class="listalpha2">Задайте пароль для пользователя <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">ALTER USER scanengine WITH PASSWORD &#39;%PASSWORD%&#39;;</code></p> </li><li class="listalpha2">Используя PostgreSQL, создайте базу данных под названием <code class="programcharacter">kavebase</code>:<p class="listcontinue2"><code class="programcharacter">CREATE DATABASE kavebase OWNER scanengine;</code></p> </li><li class="listalpha2">В базе данных <code class="programcharacter">kavebase</code> выполните запросы, описанные в <code class="programcharacter">%service_dir%/samples/tables.sql</code>.<p class="listcontinue2"><code class="programcharacter">psql -d kavebase -a -f tables.sql</code></p> </li></ol></li><li class="listnumber1">Откройте <code class="programcharacter">/etc/klScanEngineUI.xml</code>.</li><li class="listnumber1">В элементе <code class="programcharacter">&lt;Mode&gt;</code> укажите режим работы Kaspersky Scan Engine:<p class="listcontinue1">Для режима HTTP:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Mode&gt;httpd&lt;/Mode&gt;</p>
</td>
</tr>

</table> <p class="listcontinue1">Для режима ICAP:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Mode&gt;icap&lt;/Mode&gt;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Измените <code class="programcharacter">&lt;EnableUI&gt;false&lt;/EnableUI&gt;</code> на <code class="programcharacter">&lt;EnableUI&gt;true&lt;/EnableUI&gt;</code>.</li><li class="listnumber1">В элементе <code class="programcharacter">&lt;ConnectionString&gt;</code> укажите адрес веб-службы Kaspersky Scan Engine GUI в формате %IP%:%port%.<p class="listcontinue1">Например:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ConnectionString&gt;198.51.100.0:443&lt;/ConnectionString&gt;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Укажите SSL-сертификат для установки в веб-службе Kaspersky Scan Engine GUI.<ul class="listbullet2"><li class="listbullet2">Если у вас уже есть SSL-сертификат, который вы хотите установить в веб-службе Kaspersky Scan Engine GUI, укажите пути к вашему сертификату и вашему закрытому ключу:<ol class="listalpha3"><li class="listalpha3">В элементе <code class="programcharacter">&lt;SSLCertificatePath&gt;</code> укажите путь к вашему сертификату SSL.</li><li class="listalpha3">В элементе <code class="programcharacter">&lt;SSLPrivateKeyPath&gt;</code> укажите путь к вашему закрытому ключу.</li></ol></li><li class="listbullet2">Если у вас нет SSL-сертификата, который вы хотите установить в веб-службе Kaspersky Scan Engine GUI, сгенерируйте новый. Запустите утилиту <code class="programcharacter">%service_dir%/tools/openssl</code> следующим образом:</li></ul><table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">/opt/kaspersky/ScanEngine/tools/openssl req -x509 -nodes -days 1825 -subj /C=RU/CN=&quot;%ConnectionString%&quot; -newkey rsa:<code class="programcharacter">4096</code> -extensions EXT -config &quot;/opt/kaspersky/ScanEngine/tools/openssl.cnf&quot; -keyout &quot;/opt/kaspersky/ScanEngine/httpsrv/kl_scanengine_private.pem&quot; -out &quot;/opt/kaspersky/ScanEngine/httpsrv/kl_scanengine_cert.pem&quot;</p>
</td>
</tr>

</table> <p class="listcontinue2">Здесь <code class="programcharacter">%ConnectionString%</code> – это значение, указанное в элементе <code class="programcharacter">%ConnectionString%</code>. Рекомендуется использовать значения <code class="programcharacter">rsa:4096</code> или <code class="programcharacter">rsa:3072</code> с параметром <code class="programcharacter">-newkey</code>. Минимальное поддерживаемое значение – <code class="programcharacter">rsa:2048</code>. </p> <p class="attentioncontinue2">Вы должны настроить доступ к файлу закрытого ключа для Kaspersky Scan Engine GUI, чтобы только пользователь root и учетная запись пользователя, под которой запущена служба, могли иметь разрешение на чтение.</p> </li><li class="listnumber1">Создайте ключ шифрования следующим образом:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">openssl rand -out %service_dir%/httpsrv/kl_scanengine_db.key 512</p>
</td>
</tr>

</table> </li><li class="listnumber1">Предоставьте право на чтение только владельцу, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">chmod 400 %service_dir%/httpsrv/kl_scanengine_db.key</p>
</td>
</tr>

</table> </li><li class="listnumber1">В элементе <code class="programcharacter">DatabaseSettings &gt; ConnectionString </code>укажите адрес новой или существующей базы данных kavebase, к которой вы хотите подключиться, используя формат %IP%:%port%.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">/etc/klScanEngineUI.xml</code>.</li><li class="listnumber1">Зашифруйте имя пользователя и пароль пользователя, который будет использоваться для доступа к базе данных kavebase:<ul class="listbullet2"><li class="listbullet2">Если вы никогда раньше не устанавливали экземпляр Kaspersky Scan Engine с графическим интерфейсом пользователя или не хотите добавлять новый экземпляр в существующий кластер, зашифруйте имя и пароль пользователя, указанного на шаге 3. </li><li class="listbullet2">Если у вас уже есть экземпляр Kaspersky Scan Engine с графическим интерфейсом пользователя и вы хотите добавить новый экземпляр в тот же кластер, зашифруйте имя и пароль пользователя, который используется для доступа к базе данных kavebase кластера.</li></ul><p class="listcontinue1">Чтобы зашифровать учетные данные, <a id="h209335" class="englishcrossreferencetemplate" href="#181814" target="_self">используйте утилиту kav_encrypt</a>. Эта утилита также автоматически записывает зашифрованные имя пользователя и пароль в <code class="programcharacter">/etc/klScanEngineUI.xml</code>. Утилита находится в директории <code class="programcharacter">%service_dir%/tools/</code>.</p> <p class="listcontinue1">Запустите утилиту kav_encrypt со следующими параметрами:</p> <p class="listcontinue1"><code class="programcharacter">-d &#39;%username%:%password%&#39;</code></p> </li><li class="listnumber1">В <code class="programcharacter">/etc/systemd/system/multi-user.target.wants/</code> создайте символьную ссылку на <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/klScanEngineUI.service</code> с помощью следующей команды:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ln -s /opt/kaspersky/ScanEngine/etc/klScanEngineUI.service /etc/systemd/system/klScanEngineUI.service </p>
</td>
</tr>

</table> </li><li class="listnumber1">Зарегистрируйте Kaspersky Scan Engine в системе с помощью следующих команд:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"><code class="programcharacter">systemctl daemon-reload</code></p>
<p class="program"><code class="programcharacter">systemctl enable klScanEngineUI</code></p>
</td>
</tr>

</table> </li><li class="listnumber1">Запустите зарегистрированную службу Kaspersky Scan Engine:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"><code class="programcharacter">service klScanEngineUI start</code></p>
</td>
</tr>

</table> <p class="spacer"> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="199730"><p><a name="199730" style="display: none;">[Topic 199730]</a></p>
	<h2 id="t234397" class="heading2">Установка Kaspersky Scan Engine на Windows</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как установить Kaspersky Scan Engine на операционные системы Windows.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192978" target="_self">Автоматическая установка (Windows)</a></p><p class="relateditem"><a href="#184719" target="_self">Ручная установка (Windows)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192978"><p><a name="192978" style="display: none;">[Topic 192978]</a></p>
	<h3 id="t234281" class="heading3">Автоматическая установка (Windows)</h3>
<p class="bodytext">В этом разделе описана установка Kaspersky Scan Engine с использованием инсталлятора. Вы можете использовать инсталлятор, если Kaspersky Scan Engine не установлен на вашем компьютере.</p>
<p class="attentionbody">Если вы хотите использовать Kaspersky Scan Engine GUI, вам нужно установить СУБД PostgreSQL на компьютер, к которому у Kaspersky Scan Engine есть доступ. Kaspersky Scan Engine GUI не будет работать без доступа к PostgreSQL.</p>
<p class="procedureheading">Чтобы установить Kaspersky Scan Engine, используя инсталлятор:</p>
<ol class="listnumber1"><li class="listnumber1">Распакуйте содержимое пакета распространения в пустую папку на вашем компьютере.</li><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Запустите файл <code class="programcharacter">install.exe</code>.</li><li class="listnumber1">Ознакомьтесь с Пользовательским соглашением (End User License Agreement, EULA) для Kaspersky Scan Engine.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения, примите его. Если вы не согласны с условиями Пользовательского соглашения, прекратите установку.</p> </li><li class="listnumber1">Выберите, использовать ли Kaspersky Scan Engine GUI.</li><li class="listnumber1">Если вы хотите использовать Kaspersky Scan Engine GUI, выполните следующие действия.<ol class="listalpha2"><li class="listalpha2">Убедитесь, что вы <a id="h193039" class="englishcrossreferencetemplate" href="#192976" target="_self">установили и настроили PostgreSQL</a>.</li><li class="listalpha2">Укажите IP-адрес и порт для соединения с PostgreSQL.</li><li class="listalpha2">Введите учетные данные пользователя, у которого есть права на создание баз данных и пользователей. Учетные данные этого пользователя нигде не записываются. <p class="listcontinue2">С помощью этой учетной записи Kaspersky Scan Engine создаст новую базу данных, которая будет называться kavebase, и нового пользователя PostgreSQL с именем scanengine. Учетная запись scanengine будет использоваться для внесения изменения в эту базу данных.</p> </li></ol></li><li class="listnumber1">Укажите IP-адрес и порт, которые Kaspersky Scan Engine будет использовать, чтобы получать запросы на сканирование объектов.</li><li class="listnumber1">Укажите, должно ли решение Kaspersky Scan Engine использовать Kaspersky Security Network (KSN).</li><li class="listnumber1">Если вы хотите использовать KSN, ознакомьтесь с Пользовательским соглашением для KSN и Политикой конфиденциальности.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения и Политики конфиденциальности, примите их. Если вы не примете условия Пользовательского соглашения и Политики конфиденциальности, вы не сможете использовать KSN, но установка продолжится. Вы можете включить KSN позже, используя <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">Kaspersky Scan Engine GUI</a> или <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файл конфигурации</a> Kaspersky Scan Engine.</p> </li><li class="listnumber1">Если вы хотите использовать Kaspersky Scan Engine GUI, при необходимости укажите порт, на котором он будет доступен.</li><li class="listnumber1">Укажите, будет ли Kaspersky Scan Engine использовать прокси-сервер.</li><li class="listnumber1">Если вы хотите использовать прокси-сервер, укажите настройки прокси.</li><li class="listnumber1">Укажите директорию, где будут храниться временные файлы.<p class="listcontinue1">Установочный скрипт создаст в ней поддиректорию <code class="programcharacter">scanengine</code>, в которой будут создаваться временные файлы.</p> </li><li class="listnumber1">Укажите режим лицензирования, который будет использоваться в Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">Если вы хотите использовать режим лицензирования оффлайн, укажите файл ключа.</li><li class="listbullet2">Если вы хотите использовать режим лицензирования онлайн, укажите код активации.</li></ul></li><li class="listnumber1">Проверьте указанные вами параметры и при необходимости откорректируйте их.</li></ol><p class="bodytext">После того как вы укажете все необходимые данные, скрипт <code class="programcharacter">install</code> установит Kaspersky Scan Engine и запустит его. Решение Kaspersky Scan Engine будет установлено в папку <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine</code>.</p>
<p class="bodytext">Информация об установке будет выведена на консоль.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184719"><p><a name="184719" style="display: none;">[Topic 184719]</a></p>
	<h3 id="t234442" class="heading3">Ручная установка (Windows)</h3>
<p class="bodytext">В этом разделе описывается, как вручную установить Kaspersky Scan Engine на системах Windows. </p>
<p class="procedureheading">Чтобы установить Kaspersky Scan Engine вручную: </p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Создайте папку <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine</code>. В этом справочном документе эта папка называется <code class="programcharacter">%service_dir%</code>. </li><li class="listnumber1">Распакуйте содержимое пакета распространения в папку <code class="programcharacter">%service_dir%</code> на вашем компьютере.</li><li class="listnumber1">Ознакомьтесь с Пользовательским соглашением (End User License Agreement, EULA) для Kaspersky Scan Engine. Пользовательское соглашение находится по адресу <code class="programcharacter">%service_dir%/doc/license.txt</code>.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения, переходите к следующему шагу. Если вы отклоняете условия Пользовательского соглашения, отмените установку.</p> </li><li class="listnumber1">Откройте файл <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Примите условия Пользовательского соглашения с конечным пользователем. В файле klScanEngineUI.xml замените <code class="programcharacter">&lt;Common&gt;rejected&lt;/Common&gt;</code> на <code class="programcharacter">&lt;Common&gt;accepted&lt;/Common&gt;</code>.</li><li class="listnumber1">Если вы хотите использовать Kaspersky Security Network (KSN), ознакомьтесь с Пользовательским соглашением для KSN и Политикой конфиденциальности. Это Пользовательское соглашение также находится по адресу %service_dir%\doc\ksn_license.txt и содержит ссылку на Политику конфиденциальности.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения для KSN и Политикой конфиденциальности, переходите к следующему шагу. Если вы отклоняете условия Пользовательского соглашения для KSN или Политику конфиденциальности, перейдите к шагу 9.</p> </li><li class="listnumber1">Примите Пользовательское соглашение для KSN. Измените <code class="programcharacter">&lt;KSN&gt;rejected&lt;/KSN&gt; </code>на <code class="programcharacter">&lt;KSN&gt;accepted&lt;/KSN&gt;</code> в klScanEngineUI.xml.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Откройте файл <code class="programcharacter">%service_dir%\bin\kavhttpd.xml</code>. </li><li class="listnumber1">В элементах <code class="programcharacter">BasesPath</code> и <code class="programcharacter">TempPath</code> укажите полный путь к директории <code class="programcharacter">%service_dir%\bin\bases</code> и к директории, содержащей временные файлы, используемые Kaspersky Scan Engine соответственно. Сохраните и закройте файл.</li><li class="listnumber1">Если вы хотите, чтобы Kaspersky Scan Engine запускался автоматически при загрузке системы, выполните следующие действия:<ol class="listalpha2"><li class="listalpha2">В Windows откройте окно командной строки от имени администратора.</li><li class="listalpha2">Выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">sc create &quot;Kaspersky ScanEngine&quot; binpath= &quot;%service_dir%\bin\kavhttpd.exe -c %service_dir%\bin\kavhttpd.xml&quot; start= auto DisplayName= &quot;Kaspersky ScanEngine&quot;</code></p> </li></ol><p class="attentioncontinue1">Обратите внимание, что, если полный путь к файлу конфигурации содержит пробел, вы должны добавить кавычки (<code class="programcharacter">&quot;</code>) после косой черты (<code class="programcharacter">\</code>). Пример: <code class="programcharacter">C:\Program Files\Kaspersky Lab\ScanEngine\bin&gt;sc create &quot;Kaspersky ScanEngine&quot; binpath= &quot;C:\Program Files\Kaspersky Lab\ScanEngine\bin\kavhttpd.exe -c \&quot;C:\Program Files\Kaspersky Lab\ScanEngine\bin\kavhttpd.xml\&quot;&quot; </code></p> </li><li class="listnumber1">Перейдите к разделу <a id="h180269" class="englishcrossreferencetemplate" href="#179865" target="_self">Начало работы с Kaspersky Scan Engine в режиме HTTP</a>.</li></ol><p class="introheading">Включение Kaspersky Scan Engine GUI</p>
<p class="procedureheading">Чтобы включить Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1"><a id="h193039" class="englishcrossreferencetemplate" href="#192976" target="_self">Установите и настройте PostgreSQL</a>.</li><li class="listnumber1">На компьютере, на котором установлен PostgreSQL, выполните перечисленные ниже действия от имени пользователя, который может создавать новых пользователей и базы данных. Для выполнения этих действий вы можете использовать утилиту psql или pgAdmin. Если вы используете утилиту psql, укажите пробел и имя пользователя после параметра <code class="programcharacter">-U</code>. <ol class="listalpha2"><li class="listalpha2">Создайте нового пользователя PostgreSQL с именем <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">CREATE USER scanengine;</code></p> </li><li class="listalpha2">Задайте пароль для пользователя <code class="programcharacter">scanengine</code>:<p class="listcontinue2"><code class="programcharacter">ALTER USER scanengine WITH PASSWORD &#39;%PASSWORD%&#39;;</code></p> </li><li class="listalpha2">Используя PostgreSQL, создайте базу данных под названием <code class="programcharacter">kavebase</code>:<p class="listcontinue2"><code class="programcharacter">CREATE DATABASE kavebase OWNER scanengine;</code></p> </li><li class="listalpha2">В базе данных <code class="programcharacter">kavebase</code> выполните запросы, описанные в <code class="programcharacter">%service_dir%\samples\tables.sql</code>.<p class="listcontinue2"><code class="programcharacter">psql -d kavebase -a -f tables.sql</code></p> </li></ol></li><li class="listnumber1">Откройте <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Измените <code class="programcharacter">&lt;EnableUI&gt;false&lt;/EnableUI&gt;</code> на <code class="programcharacter">&lt;EnableUI&gt;true&lt;/EnableUI&gt;</code>.</li><li class="listnumber1">В элементе <code class="programcharacter">&lt;ConnectionString&gt;</code> укажите адрес веб-службы Kaspersky Scan Engine GUI в формате <code class="programcharacter">%IP%:%port%</code>.<p class="listcontinue1">Например:</p> <p class="listcontinue1"><code class="programcharacter">&lt;ConnectionString&gt;198.51.100.0:443&lt;/ConnectionString&gt;</code></p> </li><li class="listnumber1">Укажите SSL-сертификат для установки в веб-службе Kaspersky Scan Engine GUI.<ul class="listbullet2"><li class="listbullet2">Если у вас уже есть SSL-сертификат, который вы хотите установить в веб-службе Kaspersky Scan Engine GUI, укажите пути к вашему сертификату и вашему закрытому ключу:<ol class="listalpha3"><li class="listalpha3">В элементе <code class="programcharacter">&lt;SSLCertificatePath&gt;</code> укажите путь к вашему сертификату SSL.</li><li class="listalpha3">В элементе <code class="programcharacter">&lt;SSLPrivateKeyPath&gt;</code> укажите путь к вашему закрытому ключу.</li></ol></li><li class="listbullet2">Если у вас нет SSL-сертификата, который вы хотите установить в веб-службе Kaspersky Scan Engine GUI, сгенерируйте новый. Запустите утилиту <code class="programcharacter">%service_dir%\tools\openssl</code> следующим образом:<p class="listcontinue2"><code class="programcharacter">%service_dir%\tools\openssl.exe req -x509 -nodes -days 1825 -subj /C=RU/CN=&quot;%ConnectionString%&quot; -newkey rsa:4096 -extensions EXT -config &quot;%service_dir%\tools\openssl.cnf&quot; -keyout &quot;%service_dir%\httpsrv\kl_scanengine_private.pem&quot; -out &quot;%service_dir%\httpsrv\kl_scanengine_cert.pem&quot;</code></p> <p class="listcontinue2">Здесь <code class="programcharacter">%ConnectionString%</code> – это значение, указанное в элементе <code class="programcharacter">%ConnectionString%</code>. Рекомендуется использовать значения <code class="programcharacter">rsa:4096</code> или <code class="programcharacter">rsa:3072</code> с параметром <code class="programcharacter">-newkey</code>. Минимальное поддерживаемое значение – <code class="programcharacter">rsa:2048</code>. </p> </li></ul></li><li class="listnumber1">Зашифруйте имя пользователя и пароль пользователя, указанного на шаге 3. Kaspersky Scan Engine будет использовать эти имя пользователя и пароль для подключения к базе данных kavebase.<p class="listcontinue1">Чтобы зашифровать учетные данные, <a id="h209335" class="englishcrossreferencetemplate" href="#181814" target="_self">используйте утилиту kav_encrypt</a>. Эта утилита также автоматически записывает зашифрованные имя пользователя и пароль в <code class="programcharacter">klScanEngineUI.xml</code>. Утилита находится в папке <code class="programcharacter">%service_dir%\tools\</code>.</p> <p class="listcontinue1">Запустите утилиту kav_encrypt со следующими параметрами:</p> <p class="listcontinue1"><code class="programcharacter">-d %username%:%password%</code></p> </li><li class="listnumber1">В элементе <code class="programcharacter">DatabaseSettings &gt; ConnectionString </code>укажите адрес базы данных kavebase в формате <code class="programcharacter">%IP%:%port%</code>.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">%service_dir%\bin\klScanEngineUI.xml</code>.</li><li class="listnumber1">Если вы хотите, чтобы Kaspersky Scan Engine GUI запускался автоматически при загрузке системы, выполните следующие действия:<ol class="listalpha2"><li class="listalpha2">Откройте окно командной строки от имени администратора.</li><li class="listalpha2">Выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">sc create &quot;Kaspersky ScanEngine UI&quot; binpath= &quot;%service_dir%\bin\klScanEngineUI.exe --svc&quot; start= auto DisplayName= &quot;Kaspersky ScanEngine UI&quot;</code></p> </li></ol></li><li class="listnumber1">Запустите Kaspersky Scan Engine GUI:<p class="listcontinue1"><code class="programcharacter">sc start &quot;Kaspersky ScanEngine UI&quot;</code></p> </li></ol><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221907"><p><a name="221907" style="display: none;">[Topic 221907]</a></p>
	<h1 id="t234557" class="heading1">Обновление Kaspersky Scan Engine в Linux</h1>
<p class="bodytext">В этом разделе описывается, как обновить Kaspersky Scan Engine с предыдущей версии на системах Linux.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#221941" target="_self">Автоматическое обновление (Linux)</a></p><p class="relateditem"><a href="#209771" target="_self">Обновление вручную (Linux)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221941"><p><a name="221941" style="display: none;">[Topic 221941]</a></p>
	<h2 id="t234282" class="heading2">Автоматическое обновление (Linux)</h2>
<p class="bodytext">Начиная с Kaspersky Scan Engine версии 2.0, вы можете автоматически обновить Kaspersky Scan Engine до более новой версии.</p>
<p class="introheading">Использование утилиты install для обновления</p>
<p class="bodytext">Вы можете обновить Kaspersky Scan Engine с помощью той же утилиты, которая используется для установки Kaspersky Scan Engine – утилиты <code class="programcharacter">install</code>. Вы можете найти утилиту в <a id="h180273" class="englishcrossreferencetemplate" href="#184793" target="_self">пакете распространения</a>.</p>
<p class="bodytext">Утилита <code class="programcharacter">install</code> обновляет Kaspersky Scan Engine, если программа соответствует следующим требованиям:</p>
<ul class="listbullet1"><li class="listbullet1">Kaspersky Scan Engine уже установлен на компьютере (то есть существует директория <code class="programcharacter">/opt/kaspersky/ScanEngine</code>).<p class="listcontinue1">Если на компьютере не установлен Kaspersky Scan Engine, утилита <code class="programcharacter">install</code> выполнит <a id="h193036" class="englishcrossreferencetemplate" href="#192977" target="_self">автоматическую установку</a>.</p> </li><li class="listbullet1">Уже установлен Kaspersky Scan Engine версии 2.0  или более поздней. Эта версия более ранняя, чем версия, устанавливаемая при обновлении.<p class="listcontinue1">Если версия Kaspersky Scan Engine не соответствует этому требованию, утилита <code class="programcharacter">install</code> выдает сообщение об ошибке и закрывается.</p> </li></ul><p class="bodytext">При обновлении Kaspersky Scan Engine утилита <code class="programcharacter">install</code> выполняет резервное копирование важных объектов, таких как файлы конфигурации, сертификаты TLS и лицензия. Успешное обновление означает, что все эти объекты уже интегрированы в новую версию Kaspersky Scan Engine. Если по какой-либо причине обновление не удается, утилита <code class="programcharacter">install</code> восстанавливает предыдущую версию Kaspersky Scan Engine, включая объекты, для которых выполнено резервное копирование.</p>
<p class="introheading">Остановка экземпляров Kaspersky Scan Engine</p>
<p class="bodytext">Если обновляемый экземпляр Kaspersky Scan Engine является частью кластера, вам необходимо остановить все экземпляры в кластере перед обновлением.</p>
<p class="bodytext">Важно остановить все экземпляры, поскольку утилита <code class="programcharacter">install</code> изменяет базу данных <code class="programcharacter">kavebase</code> при обновлении Kaspersky Scan Engine.</p>
<p class="procedureheading">Чтобы остановить экземпляр Kaspersky Scan Engine:</p>
<ul class="listbullet1"><li class="listbullet1">Если экземпляр работает в режиме ICAP, выполните команду <code class="programcharacter">service kavicapd stop.</code></li><li class="listbullet1">Если экземпляр работает в режиме HTTP, выполните команду <code class="programcharacter">service kavhttpd stop.</code></li><li class="listbullet1">Если экземпляр использует Kaspersky Scan Engine GUI, выполните команду <code class="programcharacter">service klScanEngineUI stop.</code></li></ul><p class="introheading">Обновление Kaspersky Scan Engine</p>
<p class="procedureheading">Для автоматического обновления Kaspersky Scan Engine:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Запустите утилиту <code class="programcharacter">install</code>.</li><li class="listnumber1">Ознакомьтесь с Пользовательским соглашением (End User License Agreement, EULA) для Kaspersky Scan Engine.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения, примите его. Если вы не принимаете условия Пользовательского соглашения, обновление прекратится.</p> </li><li class="listnumber1">Если вы согласились использовать Kaspersky Security Network (KSN) ранее, утилита install отобразит текущие условия Пользовательского соглашения для KSN и Политику конфиденциальности. Ознакомьтесь с новым Пользовательским соглашением для KSN и Политикой конфиденциальности.<p class="listcontinue1">Если вы согласны с условиями Пользовательского соглашения и Политики конфиденциальности, примите их. Если вы не примете условия Пользовательского соглашения для KSN и Политики конфиденциальности, вы не сможете использовать KSN, но обновление продолжится. Вы сможете включить KSN позже, используя <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">Kaspersky Scan Engine GUI</a> или файлы конфигурации Kaspersky Scan Engine (<a id="h201090" class="englishcrossreferencetemplate" href="#201022" target="_self">HTTP</a> или <a id="h201224" class="englishcrossreferencetemplate" href="#200603" target="_self">ICAP</a>).</p> </li><li class="listnumber1">Укажите абсолютный путь к директории, в которой находится пакет KAV SDK.<p class="listcontinue1">Пакет KAV SDK находится в отдельной директории, начиная с версии 2.1 Kaspersky Scan Engine.</p> </li></ol><p class="bodytext">После того как вы укажете необходимые данные, Kaspersky Scan Engine будет обновлен, а затем запущен.</p>
<p class="bodytext">После обновления Kaspersky Scan Engine вы можете в любой момент проверить целостность его компонентов <a id="h209330" class="englishcrossreferencetemplate" href="#209025" target="_self">с помощью утилиты проверки целостности</a>.</p>
<p class="introheading">Миграция из скрипта инициализации в файл модуля systemd</p>
<p class="bodytext">Начиная с Kaspersky Scan Engine версии 2.1, скрипт <code class="programcharacter">инициализации</code> больше не поддерживается. Вместо этого скрипта вы можете использовать файл модуля <code class="programcharacter">systemd</code>.</p>
<p class="bodytext">Если вы использовали скрипт <code class="programcharacter">инициализации</code> для управления Kaspersky Scan Engine в предыдущих версиях, утилита <code class="programcharacter">install</code> автоматически выполнит миграцию со скрипта <code class="programcharacter">инициализации</code> на <code class="programcharacter">systemd</code> во время обновления.</p>
<p class="bodytext">Узнайте больше об использовании <code class="programcharacter">systemd</code> в <a id="h209554" class="englishcrossreferencetemplate" href="#184956" target="_self">режимах HTTP</a> и <a id="h209555" class="englishcrossreferencetemplate" href="#192397" target="_self">ICAP</a>.</p>
<p class="introheading">Добавление новых элементов в файлы конфигурации</p>
<p class="bodytext">В новой версии Kaspersky Scan Engine добавлены новые элементы. Утилита <code class="programcharacter">install</code> не добавляет эти элементы в файлы конфигурации во время обновления. Вы можете добавить новые элементы с помощью <a id="h180139" class="englishcrossreferencetemplate" href="#179683" target="_self">Kaspersky Scan Engine GUI</a> или напрямую в файлы конфигурации <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">kavhttpd.xml</a> и <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">kavicapd.xml</a>. Смотрите также подробную информацию о <a id="h222091" class="englishcrossreferencetemplate" href="#209374" target="_self">новых элементах в файле конфигурации</a>.</p>
<p class="introheading">Очистка кеша браузера</p>
<p class="bodytext">Если вы используете Kaspersky Scan Engine GUI, очистите кеш браузера после обновления.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="209771"><p><a name="209771" style="display: none;">[Topic 209771]</a></p>
	<h2 id="t234445" class="heading2">Обновление вручную (Linux)</h2>
<p class="bodytext">В этом разделе описано, как обновить Kaspersky Scan Engine вручную.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#225714" target="_self">Обновление Kaspersky Scan Engine 2.0 и более поздней версии вручную</a></p><p class="relateditem"><a href="#225715" target="_self">Обновление Kaspersky Scan Engine 1.0 вручную</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225714"><p><a name="225714" style="display: none;">[Topic 225714]</a></p>
	<h3 id="t234449" class="heading3">Обновление Kaspersky Scan Engine 2.0 и более поздней версии вручную</h3>
<p class="procedureheading">Чтобы обновить Kaspersky Scan Engine 2.0 и более поздней версии вручную:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1"><em class="emphasischaracter">Для Kaspersky Scan Engine 2.0. </em>Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">/etc/init.d/kavicapd stop</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">/etc/init.d/kavhttpd stop</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"> <code class="programcharacter">/etc/init.d/klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1"><em class="emphasischaracter">Для Kaspersky Scan Engine 2.1 и более поздней версии. </em>Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavicapd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavhttpd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1">Создайте резервные копии следующих данных:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">/opt/kaspersky/ScanEngine/etc/klScanEngineUI.xml</code></li><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме ICAP:<ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">/opt/kaspersky/ScanEngine/etc/kavicapd.xml</code></li><li class="listbullet3"><code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data</code>, если вы настроили правила ICAP в <code class="programcharacter">kavicapd_gui_rules.conf</code>.</li></ul></li><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме HTTP: <ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">/opt/kaspersky/ScanEngine/etc/kavhttpd.xml</code></li><li class="listbullet3">Если Kaspersky Scan Engine использовал TLS, вам необходимо скопировать закрытый ключ и сертификат, сгенерированные для использования в TLS-соединениях. Расположение этих файлов указывается в элементах <code class="programcharacter">TlsCertificateKeyFile</code> и <code class="programcharacter">TlsCertificateFile</code> файла конфигурации <code class="programcharacter">kavhttpd.xml</code>.</li></ul></li><li class="listbullet2">Если вы сгенерировали сертификат и закрытый ключ для использования с Kaspersky Scan Engine GUI, скопируйте сертификат и закрытый ключ.<p class="listcontinue2">Вы можете найти информацию о расположении сертификата и закрытого ключа в элементах <code class="programcharacter">SSLCertificatePath</code> и <code class="programcharacter">SSLPrivateKeyPath</code> файла <code class="programcharacter">klScanEngineUI.xml</code>.</p> </li><li class="listbullet2">Файл ключа (если Kaspersky Scan Engine был активирован в <a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">режиме лицензирования офлайн</a>) или код активации (если Kaspersky Scan Engine был активирован в <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режиме лицензирования онлайн</a>).<p class="listcontinue2">Вы можете найти информацию о расположении файла ключа или кода активации в элементе <code class="programcharacter">LicensePath</code> файла конфигурации <code class="programcharacter">kavhttpd.xml</code> (если Kaspersky Scan Engine работал в режиме HTTP) или в файле конфигурации <code class="programcharacter">kavicapd.xml</code> (если Kaspersky Scan Engine работал в режиме ICAP).</p> </li></ul></li><li class="listnumber1">В директории <code class="programcharacter">/opt/kaspersky/ScanEngine</code> удалите Kaspersky Scan Engine с помощью <code class="programcharacter">uninstall.</code><p class="listcontinue1">Если вы использовали Kaspersky Scan Engine GUI и хотите продолжить использовать базу данных <code class="programcharacter">kavebase</code>, созданную ранее в PostgreSQL, вам не нужно подтверждать удаление данных из нее. Однако вам необходимо обновить базу данных с помощью следующей команды:</p> <p class="listcontinue1"><code class="programcharacter">psql -d kavebase -a -f %tempdir%/samples/migrate.sql</code></p> <p class="listcontinue1">Приведенная выше команда импортирует содержимое <code class="programcharacter">%tempdir%/samples/migrate.sql</code>.</p> <p class="listcontinue1"><code class="programcharacter">%tempdir%</code> в этой команде – это директория, в которой находится распакованное содержимое пакета распространения Kaspersky Scan Engine.</p> <p class="listcontinue1">Убедитесь, что пользователь, выполняющий запросы к базе данных, имеет доступ к директории, содержащей <code class="programcharacter">migrate.sql</code>, а также имеет доступ на чтение к самому <code class="programcharacter">migrate.sql</code>.</p> <p class="warningcontinue1">Не используйте migrate.sql для обновления базы данных, используемой Kaspersky Scan Engine версии ниже 2.0.</p> <p class="listcontinue1">Вам также необходимо указать те же имя пользователя и пароль, которые использовались для подключения к предыдущей версии базы данных. Вы можете указать имя пользователя и пароль позже, при установке Kaspersky Scan Engine.</p> <p class="listcontinue1">Если вы забыли имя пользователя или пароль, <a id="h226775" class="expandingblocktemplate" href="javascript:toggleBlock('226775')" target="_self">воспользуйтесь утилитой psql</a>.</p> <div id="d226775" class="expandingblock"><p class="bodytext">Если вы забыли имя пользователя или пароль, использованные для подключения к базе данных, используйте утилиту psql, чтобы получить имя пользователя или изменить пароль.</p>
<p class="bodytext">Чтобы увидеть <span class="boldcharacter">имя пользователя</span> базы данных, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">postgres=# \l kavebase</p>
</td>
</tr>

</table>
<p class="bodytext">Утилита psql отображает информацию об имени базы данных и ее владельце (имени пользователя):</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">List of databases</p>
<p class="program">-[ RECORD 1 ]-----+--------------------------</p>
<p class="program">Name | kavebase</p>
<p class="program">Owner | scanengine </p>
</td>
</tr>

</table>
<p class="bodytext">Если вы забыли <span class="boldcharacter">пароль</span>, вам нужно изменить его с помощью следующей команды:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">alter user %USERNAME% with password &#39;%PASSWORD%&#39;; </p>
</td>
</tr>

</table>
<p class="bodytext">Здесь <code class="programcharacter">%PASSWORD%</code> – это новый пароль пользователя <code class="programcharacter">%USERNAME%</code>.</p>
</div></li><li class="listnumber1">Удалите файлы из директории <code class="programcharacter">/opt/kaspersky/ScanEngine/</code> или удалите саму директорию.</li><li class="listnumber1">Установите новую версию Kaspersky Scan Engine с помощью <a id="h193036" class="englishcrossreferencetemplate" href="#192977" target="_self">инсталлятора</a>.</li><li class="listnumber1">Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavicapd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavhttpd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1">Скопируйте данные, резервные копии которых были созданы ранее:<ul class="listbullet2"><li class="listbullet2">Скопируйте <code class="programcharacter">klScanEngineUI.xml</code> в <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/</code></li><li class="listbullet2">Если предыдущая версия Kaspersky Scan Engine работала в режиме ICAP:<ul class="listbullet3"><li class="listbullet3">Скопируйте <code class="programcharacter">kavicapd.xml</code> в <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/</code>.</li><li class="listbullet3">Скопируйте данные из <code class="programcharacter">icap_data</code> в <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data</code>, если вы настроили правила ICAP в <code class="programcharacter">kavicapd_gui_rules.conf </code>.</li></ul></li><li class="listbullet2">Если предыдущая версия Kaspersky Scan Engine работала в режиме HTTP, скопируйте <code class="programcharacter">kavhttpd.xml</code> в <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/</code>,</li><li class="listbullet2">Если вы сделали копии закрытого ключа и сертификата для подключения через TLS в режиме HTTP, скопируйте закрытый ключ и сертификат в директории, указанные в элементах <code class="programcharacter">TlsCertificateKeyFile</code> и <code class="programcharacter">TlsCertificateFile</code> файла конфигурации <code class="programcharacter">kavhttpd.xml</code>.<p class="listcontinue2">Убедитесь, что только пользователи с правами администратора имеют доступ на чтение сертификата и закрытого ключа.</p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI и сделали копии сертификата и закрытого ключа, поместите их в места расположения, указанные в элементах <code class="programcharacter">SSLCertificatePath</code> и <code class="programcharacter">SSLPrivateKeyPath</code> файла <code class="programcharacter">klScanEngineUI.xml</code> соответственно.<p class="listcontinue2">Убедитесь, что только пользователи с правами администратора имеют доступ на чтение сертификата и закрытого ключа.</p> </li><li class="listbullet2">Убедитесь, что файл ключа (если предыдущая версия Kaspersky Scan Engine была активирована в <a id="h180864_2" class="englishcrossreferencetemplate" href="#179852" target="_self">режиме лицензирования офлайн</a>) или код активации (если предыдущая версия Kaspersky Scan Engine была активирована в <a id="h180819_2" class="englishcrossreferencetemplate" href="#179855" target="_self">режиме лицензирования онлайн</a>) находится в правильной директории. <p class="listcontinue2">Вы можете найти информацию о расположении файла ключа или кода активации в элементе <code class="programcharacter">LicensePath</code> файла конфигурации <code class="programcharacter">kavhttpd.xml</code> (если Kaspersky Scan Engine работал в режиме HTTP) или в файле конфигурации <code class="programcharacter">kavicapd.xml</code> (если Kaspersky Scan Engine работал в режиме ICAP).</p> </li></ul></li><li class="listnumber1">Запустите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine в режиме ICAP, выполните команду <code class="programcharacter">service kavicapd start</code></li><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine в режиме HTTP, выполните команду <code class="programcharacter">service kavhttpd start</code></li><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine GUI, выполните команду <code class="programcharacter">service klScanEngineUI start</code></li></ul></li><li class="listnumber1">Если вы используете Kaspersky Scan Engine GUI, очистите кеш браузера после обновления.</li></ol><p class="attentionbody">Если вы решили использовать ту же базу данных <code class="programcharacter">kavebase</code> при установке новой версии Kaspersky Scan Engine, пароль, который вы указали в предыдущей версии для администратора Kaspersky Scan Engine GUI, остается действительным и не сбрасывается на пароль по умолчанию.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225715"><p><a name="225715" style="display: none;">[Topic 225715]</a></p>
	<h3 id="t234448" class="heading3">Обновление Kaspersky Scan Engine 1.0 вручную</h3>
<p class="procedureheading">Чтобы обновить Kaspersky Scan Engine 1.0 вручную:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">/etc/init.d/kavicapd stop</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">/etc/init.d/kavhttpd stop</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"> <code class="programcharacter">/etc/init.d/klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1">Создайте резервные копии следующих данных:<ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме ICAP и вы настроили правила ICAP в <code class="programcharacter">kavicapd_gui_rules.conf</code>, вам необходимо скопировать <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data</code>.</li><li class="listbullet2">Если вы сгенерировали сертификат и закрытый ключ для использования с Kaspersky Scan Engine GUI, скопируйте сертификат и закрытый ключ.<p class="listcontinue2">Вы можете найти информацию о расположении сертификата и закрытого ключа в элементах <code class="programcharacter">SSLCertificatePath</code> и <code class="programcharacter">SSLPrivateKeyPath</code> файла <code class="programcharacter">klScanEngineUI.xml</code>.</p> </li><li class="listbullet2">Файл ключа (если Kaspersky Scan Engine был активирован в <a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">режиме лицензирования офлайн</a>) или код активации (если Kaspersky Scan Engine был активирован в <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режиме лицензирования онлайн</a>).<p class="listcontinue2">Вы можете найти информацию о расположении файла ключа или кода активации в элементе <code class="programcharacter">LicensePath</code> файла конфигурации <code class="programcharacter">kavhttpd.xml</code> (если Kaspersky Scan Engine работал в режиме HTTP) или в файле конфигурации <code class="programcharacter">kavicapd.xml</code> (если Kaspersky Scan Engine работал в режиме ICAP).</p> </li></ul></li><li class="listnumber1">В директории <code class="programcharacter">/opt/kaspersky/ScanEngine</code> удалите Kaspersky Scan Engine с помощью <code class="programcharacter">uninstall.</code><p class="listcontinue1">Если вы использовали Kaspersky Scan Engine GUI, вам также необходимо подтвердить удаление данных из базы данных <code class="programcharacter">kavebase</code>. Структура базы данных Kaspersky Scan Engine 1.0 существенно отличается от новой версии, поэтому вы не можете использовать старую базу данных с новой версией Kaspersky Scan Engine.</p> </li><li class="listnumber1">Удалите файлы из директории <code class="programcharacter">/opt/kaspersky/ScanEngine/</code> или удалите саму директорию.</li><li class="listnumber1">Установите новую версию Kaspersky Scan Engine с помощью <a id="h193036" class="englishcrossreferencetemplate" href="#192977" target="_self">инсталлятора</a>.</li><li class="listnumber1">Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavicapd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavhttpd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1">Скопируйте данные, резервные копии которых были созданы ранее:<ul class="listbullet2"><li class="listbullet2">Скопируйте <code class="programcharacter">klScanEngineUI.xml</code> в <code class="programcharacter">/opt/kaspersky/ScanEngine/etc/</code>. </li><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine GUI:<ol class="listalpha3"><li class="listalpha3">Перейдите в <code class="programcharacter">/opt/kaspersky/ScanEngine/tools/</code>.</li><li class="listalpha3">Выполните следующую команду:<p class="listcontinue3"><code class="programcharacter">./kav_encrypt -d %USERNAME%:%PASSWORD% </code></p> <p class="listcontinue3">Здесь <code class="programcharacter">%USERNAME%</code> и <code class="programcharacter">%PASSWORD%</code> – это имя пользователя и пароль, используемые для подключения к базе данных <code class="programcharacter">kavebase</code>.</p> <p class="listcontinue3">Если вы забыли имя пользователя или пароль, <a id="h226775" class="expandingblocktemplate" href="javascript:toggleBlock('226775')" target="_self">воспользуйтесь утилитой psql</a>.</p> <div id="d226775" class="expandingblock"><p class="bodytext">Если вы забыли имя пользователя или пароль, использованные для подключения к базе данных, используйте утилиту psql, чтобы получить имя пользователя или изменить пароль.</p>
<p class="bodytext">Чтобы увидеть <span class="boldcharacter">имя пользователя</span> базы данных, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">postgres=# \l kavebase</p>
</td>
</tr>

</table>
<p class="bodytext">Утилита psql отображает информацию об имени базы данных и ее владельце (имени пользователя):</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">List of databases</p>
<p class="program">-[ RECORD 1 ]-----+--------------------------</p>
<p class="program">Name | kavebase</p>
<p class="program">Owner | scanengine </p>
</td>
</tr>

</table>
<p class="bodytext">Если вы забыли <span class="boldcharacter">пароль</span>, вам нужно изменить его с помощью следующей команды:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">alter user %USERNAME% with password &#39;%PASSWORD%&#39;; </p>
</td>
</tr>

</table>
<p class="bodytext">Здесь <code class="programcharacter">%PASSWORD%</code> – это новый пароль пользователя <code class="programcharacter">%USERNAME%</code>.</p>
</div></li></ol></li><li class="listbullet2">Если предыдущая версия Kaspersky Scan Engine работала в режиме ICAP и вы настроили правила ICAP в <code class="programcharacter">kavicapd_gui_rules.conf</code>, скопируйте данные из <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data</code>.</li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI и сделали копии сертификата и закрытого ключа, поместите их в места расположения, указанные в элементах <code class="programcharacter">SSLCertificatePath</code> и <code class="programcharacter">SSLPrivateKeyPath</code> файла <code class="programcharacter">klScanEngineUI.xml</code> соответственно.<p class="listcontinue2">Убедитесь, что только пользователи с правами администратора имеют доступ на чтение сертификата и закрытого ключа.</p> </li><li class="listbullet2">Убедитесь, что файл ключа (если предыдущая версия Kaspersky Scan Engine была активирована в <a id="h180864_2" class="englishcrossreferencetemplate" href="#179852" target="_self">режиме лицензирования офлайн</a>) или код активации (если предыдущая версия Kaspersky Scan Engine была активирована в <a id="h180819_2" class="englishcrossreferencetemplate" href="#179855" target="_self">режиме лицензирования онлайн</a>) находится в правильной директории. <p class="listcontinue2">Вы можете найти информацию о расположении файла ключа или кода активации в элементе <code class="programcharacter">LicensePath</code> файла конфигурации <code class="programcharacter">kavhttpd.xml</code> (если Kaspersky Scan Engine работал в режиме HTTP) или в файле конфигурации <code class="programcharacter">kavicapd.xml</code> (если Kaspersky Scan Engine работал в режиме ICAP).</p> </li></ul></li><li class="listnumber1">Запустите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine в режиме ICAP, выполните команду <code class="programcharacter">service kavicapd start</code></li><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine в режиме HTTP, выполните команду <code class="programcharacter">service kavhttpd start</code></li><li class="listbullet2">Чтобы использовать Kaspersky Scan Engine GUI, выполните команду <code class="programcharacter">service klScanEngineUI start</code></li></ul></li><li class="listnumber1">Если вы используете Kaspersky Scan Engine GUI, очистите кеш браузера после обновления.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="96464"><p><a name="96464" style="display: none;">[Topic 96464]</a></p>
	<h1 id="t234554" class="heading1">Обновление антивирусной базы и обновляемых модулей</h1>
<p class="bodytext">Kaspersky Scan Engine использует обновляемые модули и антивирусные базы, позволяющие расширить возможности обнаружения. </p>
<p class="bodytext">В этом разделе приводятся разъяснения и рекомендации по обновлению антивирусных баз и обновляемых модулей Kaspersky Scan Engine, а также описываются рекомендации по обновлению.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#218188" target="_self">Об обновлении</a></p><p class="relateditem"><a href="#218259" target="_self">Резервное копирование и восстановление антивирусных баз</a></p><p class="relateditem"><a href="#218262" target="_self">Использование сокращенного набора баз</a></p><p class="relateditem"><a href="#218298" target="_self">Рекомендации по обновлению антивирусных баз</a></p><p class="relateditem"><a href="#218349" target="_self">Обновление с HTTPS-сервера</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="218188"><p><a name="218188" style="display: none;">[Topic 218188]</a></p>
	<h2 id="t234270" class="heading2">Об обновлении</h2>
<p class="bodytext">Благодаря регулярному обновлению антивирусных баз и обновляемых модулей Kaspersky Scan Engine будет поддерживать высокий уровень безопасности. Смотрите также <a id="h218299" class="englishcrossreferencetemplate" href="#218298" target="_self">рекомендации по обновлению антивирусных баз</a>.</p>
<p class="bodytext">Для обновления антивирусных баз и модулей у вас должен быть действующий файл ключа или код активации Kaspersky Scan Engine.</p>
<p class="warningbody">При обновлении антивирусных баз и модулей Kaspersky Scan Engine передает в &quot;Лабораторию Касперского&quot; зашифрованную строку <code class="programcharacter">User-Agent</code>. Вы также можете посмотреть полный список данных, которые <a id="h180101" class="englishcrossreferencetemplate" href="#180001" target="_self">передаются в &quot;Лабораторию Касперского&quot; при обновлении</a>.</p>
<p class="bodytext">Kaspersky Scan Engine поддерживает следующие методы обновления:</p>
<ul class="listbullet1"><li class="listbullet1">Регулярное обновление с использованием встроенных функций Kaspersky Scan Engine.<p class="listcontinue1">Этот метод не требует установки дополнительного программного обеспечения.</p> <p class="listcontinue1">Рекомендуется использовать этот метод.</p> </li><li class="listbullet1">Обновление с помощью Updater SDK<p class="listcontinue1">Вы можете использовать Updater SDK для загрузки обновлений и создания зеркальных серверов для обновлений.</p> <p class="listcontinue1">Updater SDK, включая документацию по Updater SDK API, поставляется в виде отдельного пакета.</p> </li><li class="listbullet1">Обновление вручную<p class="listcontinue1">Не рекомендуется использовать этот метод.</p> </li></ul><p class="introheading">Обновление с помощью встроенных функций Kaspersky Scan Engine</p>
<p class="listheading">Чтобы настроить регулярное обновление с помощью встроенных функций Kaspersky Scan Engine:</p>
<ul class="listbullet1"><li class="listbullet1">Если вы используете Kaspersky Scan Engine в режиме HTTP, <a id="h180054" class="englishcrossreferencetemplate" href="#179873" target="_self">настройте обновление для режима HTTP</a>.</li><li class="listbullet1">Если вы используете Kaspersky Scan Engine в режиме ICAP, <a id="h180564" class="englishcrossreferencetemplate" href="#179902" target="_self">настройте обновление для режима ICAP</a>.</li><li class="listbullet1">Вы также можете <a id="h201469" class="englishcrossreferencetemplate" href="#179701" target="_self">настроить обновление в Kaspersky Scan Engine GUI</a>.</li></ul><p class="introheading">Обновление с помощью Updater SDK</p>
<p class="bodytext">Updater SDK позволяет обновлять Kaspersky Scan Engine и создавать зеркала для хранения копий обновлений антивирусных баз и обновляемых модулей. Копии загружаются с серверов обновлений &quot;Лаборатории Касперского&quot;. Эти зеркала могут быть развернуты в пределах локальной сети предприятия, чтобы можно было один раз восстановить обновления, а затем распространить их на несколько рабочих мест в локальной сети без необходимости каждый раз связываться с серверами обновлений &quot;Лаборатории Касперского&quot;. Вы также можете использовать Updater SDK для загрузки обновленных антивирусных баз на компьютеры с установленным Kaspersky Scan Engine.</p>
<p class="bodytext">Дополнительные сведения об обновлении с помощью Updater SDK см. в документации к Updater SDK. Вы можете получить документацию Updater SDK у представителя &quot;Лаборатории Касперского&quot;, предоставившего вам пакет распространения Kaspersky Scan Engine.</p>
<p class="introheading">Обновление вручную</p>
<p class="attentionbody">Не рекомендуется использовать этот метод.</p>
<p class="bodytext">Обновлять антивирусные базы вручную можно следующими способами:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h179933" class="englishcrossreferencetemplate" href="#179882" target="_self">В режиме HTTP</a> по запросу.</li><li class="listbullet1">Отправив сигнал <code class="programcharacter">SIGUSR2</code> <a id="h180564_2" class="englishcrossreferencetemplate" href="#179902" target="_self">в режиме ICAP</a>.</li><li class="listbullet1">Нажав кнопку <span class="guicharacter">Update</span> на <a id="h180278" class="englishcrossreferencetemplate" href="#179695" target="_self">панели управления Kaspersky Scan Engine</a>.</li></ul><p class="introheading">О процедуре обновления</p>
<p class="bodytext">Обновления доступны через серверы обновлений &quot;Лаборатории Касперского&quot;, которые представляют собой выделенные серверы в интернете, которые обслуживаются &quot;Лабораторией Касперского&quot; и на которых установлены самые последние версии файлов, предоставленных &quot;Лабораторией Касперского&quot;. Kaspersky Scan Engine также может загружать обновления с зеркальных серверов, созданных с помощью Updater SDK.</p>
<p class="attentionbody">При получении обновлений из инфраструктуры &quot;Лаборатории Касперского&quot; данные передаются по защищенному каналу. Можно использовать протокол HTTPS (TLS). Используемый протокол выбирается инфраструктурой &quot;Лаборатории Касперского&quot;.</p>
<p class="bodytext">В процессе обновления Kaspersky Scan Engine загружаются следующие данные:</p>
<ul class="listbullet1"><li class="listbullet1">Файлы определений вредоносных программ.<p class="listcontinue1">В определениях вредоносных программ хранятся данные сигнатур вредоносных программ. Компоненты сканирования Kaspersky Scan Engine используют эти определения для обнаружения.</p> </li><li class="listbullet1">Обновления для обновляемых модулей.<p class="listcontinue1">В обновляемых модулях реализованы расширенные методы обнаружения в Kaspersky Scan Engine.</p> </li></ul><p class="bodytext">Для выполнения обновлений используется техника дифференциальной загрузки. Kaspersky Scan Engine скачивает только ту часть файла, которая изменилась с момента последнего обновления.</p>
<p class="introheading">Получение информации о текущих антивирусных базах</p>
<p class="bodytext">Вы можете получить информацию о текущих антивирусных базах следующими способами:</p>
<ul class="listbullet1"><li class="listbullet1">На <a id="h180278_2" class="englishcrossreferencetemplate" href="#179695" target="_self">панели управления Kaspersky Scan Engine</a>.</li><li class="listbullet1">Отправив <a id="h193115" class="englishcrossreferencetemplate" href="#193005" target="_self">HTTP-запрос</a> (в режиме HTTP).</li><li class="listbullet1">Из статуса службы <code class="programcharacter">kavicapd</code>, который вызывается командой <code class="programcharacter"><a id="h209555" class="englishcrossreferencetemplate" href="#192397" target="_self">status</a></code> (в режиме ICAP).</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="218259"><p><a name="218259" style="display: none;">[Topic 218259]</a></p>
	<h2 id="t234318" class="heading2">Резервное копирование и восстановление антивирусных баз</h2>
<p class="bodytext">Проблемы с подключением во время загрузки обновлений Kaspersky Scan Engine могут повредить антивирусные базы. По этой причине в Kaspersky Scan Engine есть механизм их автоматического восстановления.</p>
<p class="bodytext">Вы можете настроить резервное копирование следующими способами:</p>
<ul class="listbullet1"><li class="listbullet1">Используйте переключатель <span class="guicharacter">Back up the anti-virus database</span> в <a id="h201469" class="englishcrossreferencetemplate" href="#179701" target="_self">Kaspersky Scan Engine GUI</a>. Чтобы включить резервное копирование, активируйте этот переключатель.</li><li class="listbullet1">Укажите параметр <a id="h201079" class="englishcrossreferencetemplate" href="#200649" target="_self">DisableBackup</a> в файле конфигурации kavhttpd.xml (<a id="h193041" class="englishcrossreferencetemplate" href="#192979" target="_self">режим HTTP</a>). Чтобы включить резервное копирование, установите для этого параметра значение <code class="programcharacter">0</code>.</li><li class="listbullet1">Укажите параметр <a id="h201186" class="englishcrossreferencetemplate" href="#200709" target="_self">DisableBackup</a> в файле конфигурации kavicapd.xml (<a id="h180141" class="englishcrossreferencetemplate" href="#184798" target="_self">режим ICAP</a>). Чтобы включить резервное копирование, установите для этого параметра значение <code class="programcharacter">0</code>.</li></ul><p class="attentionbody">Убедитесь, что ваш жесткий диск имеет достаточно свободного места для полной копии антивирусных баз. </p>
<p class="bodytext">Если KAV Engine не запускается с недавно обновленными антивирусными базами, Kaspersky Scan Engine автоматически восстанавливает предыдущую версию антивирусных баз из резервной копии при следующей инициализации. </p>
<p class="bodytext">После завершения восстановления антивирусных баз Kaspersky Scan Engine удаляет резервную копию. Если резервная копия не найдена, Kaspersky Scan Engine попытается выполнить инициализацию с использованием текущих антивирусных баз.</p>
<p class="bodytext">Когда проблемы с подключением будут решены, попробуйте выполнить обновление еще раз.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="218262"><p><a name="218262" style="display: none;">[Topic 218262]</a></p>
	<h2 id="t234475" class="heading2">Использование сокращенного набора баз</h2>
<p class="bodytext">Вы можете использовать сокращенный набор баз вместо полного набора баз. Сокращенный набор баз меньше по размеру, чем полный набор баз, и при использовании занимает меньше оперативной памяти. Чтобы обеспечить такой же коэффициент обнаружения, как и при использовании полного набора баз, вы должны использовать сокращенный набор баз вместе с KSN.</p>
<p class="introheading">Сокращенный набор баз и KSN</p>
<p class="bodytext">Не рекомендуется использовать сокращенный набор баз без KSN, так как коэффициент обнаружения будет ниже, чем при использовании полного набора баз. В случае отсутствия связи с серверами KSN (например, когда нет доступа в интернет) рекомендуется перейти на полный набор баз.</p>
<p class="bodytext">Если вы загружаете базы на зеркальные серверы, всегда обновляйте как сокращенный, так и полный набор баз, чтобы полный набор баз был актуальным при переходе Kaspersky Scan Engine на него.</p>
<p class="introheading">Переход на сокращенный набор баз с помощью встроенного функционала Kaspersky Scan Engine</p>
<p class="bodytext">В инструкции ниже показан сценарий перехода на сокращенный набор баз с использованием встроенного функционала Kaspersky Scan Engine.</p>
<p class="procedureheading">Чтобы перейти на сокращенный набор баз:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что текущая лицензия поддерживает использование KSN.</li><li class="listnumber1">Включите KSN одним из следующих методов:<ul class="listbullet2"><li class="listbullet2">Флаг <code class="programcharacter">KAV_SHT_ENGINE_KSN</code> в режиме HTTP.</li><li class="listbullet2">Параметр <code class="programcharacter">UseKSN</code> в разделе <code class="programcharacter">KSNSetting</code> <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации режима ICAP</a> в режиме ICAP.<p class="listcontinue2">Убедитесь, что вы прочитали и приняли Пользовательское соглашение с конечным пользователем (EULA). Вы можете найти текст Пользовательского соглашения в <code class="programcharacter">/doc/ksn_license.txt</code>. Чтобы принять Пользовательское соглашение, для параметра <code class="programcharacter">Settings &gt; EULA &gt; KSN</code> в файле конфигурации <code class="programcharacter">klScanEngineUI.xml</code> необходимо установить значение <code class="programcharacter">accepted</code>.</p> </li><li class="listbullet2">Включить переключатель <span class="guicharacter">Enable reputation checking</span> в <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">настройках сканирования</a> в Kaspersky Scan Engine GUI.</li></ul></li><li class="listnumber1">Чтобы начать использовать сокращенный набор баз, в режимах HTTP и ICAP укажите <code class="programcharacter">1</code> для параметра <code class="programcharacter">UseReducedBases</code> файлов конфигурации <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">kavhttpd.xml</a> и <a id="h180154_2" class="englishcrossreferencetemplate" href="#192989" target="_self">kavicapd.xml</a>. По умолчанию используется значение <code class="programcharacter">0</code>.</li><li class="listnumber1">Перезапустите <code class="programcharacter">kavhttpd</code> (в режиме HTTP) или <code class="programcharacter">kavicapd</code> (в режиме ICAP).</li></ol><p class="attentionbody">Обратите внимание, что полный набор баз не удаляется и остается на жестком диске.</p>
<p class="introheading">Переход на полный набор баз с помощью встроенного функционала Kaspersky Scan Engine</p>
<p class="bodytext">В приведенном ниже сценарии показано, как перейти на полный набор баз с помощью встроенных функций Kaspersky Scan Engine.</p>
<p class="procedureheading">Чтобы перейти на полный набор баз:</p>
<ol class="listnumber1"><li class="listnumber1">Установите для параметра <code class="programcharacter">UseReducedBases</code> значение <code class="programcharacter">0</code> (см. <code class="programcharacter">UseReducedBases</code> для режима <a id="h200662" class="englishcrossreferencetemplate" href="#200655" target="_self">HTTP</a> или <a id="h200792" class="englishcrossreferencetemplate" href="#200715" target="_self">ICAP</a>).</li><li class="listnumber1">Перезапустите <code class="programcharacter">kavhttpd</code> (в режиме HTTP) или <code class="programcharacter">kavicapd</code> (в режиме ICAP).</li></ol><p class="attentionbody">Обратите внимание, что сокращенный набор баз не удаляется и остается на жестком диске.</p>
<p class="introheading">Переход с полного набора баз на сокращенный набор баз и удаление полного набора баз</p>
<p class="procedureheading">Чтобы переключиться с полного набора баз на сокращенный, а затем удалить полный набор баз, необходимо сделать следующее:</p>
<ol class="listnumber1"><li class="listnumber1">Выполните шаги с 1-го по 4-й из подраздела &quot;Переход на сокращенный набор баз с помощью встроенных функций Kaspersky Scan Engine&quot; (см. выше).</li><li class="listnumber1">Нажмите <span class="guicharacter">Update from scratch</span> на <a id="h180278" class="englishcrossreferencetemplate" href="#179695" target="_self">панели управления Kaspersky Scan Engine</a>.</li></ol><p class="bodytext">После этого будет загружен сокращенный набор баз.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="218298"><p><a name="218298" style="display: none;">[Topic 218298]</a></p>
	<h2 id="t234285" class="heading2">Рекомендации по обновлению антивирусных баз</h2>
<p class="bodytext">Перечисленные здесь рекомендации помогут вам поддерживать высокий уровень безопасности в Kaspersky Scan Engine.</p>
<p class="warningbody">Избегайте использования устаревших или сильно устаревших антивирусных баз. Если Kaspersky Scan Engine устарел, максимальная защита не может быть гарантирована.</p>
<p class="introheading">Не загружайте на постоянной основе обновления в пустую директорию</p>
<p class="warningbody">В некоторых случаях общедоступные серверы обновлений &quot;Лаборатории Касперского&quot; не содержат некоторых компонентов для обновления. Поэтому не рекомендуется регулярно обновлять базы с нуля (загружать антивирусные базы с сервера обновлений в пустую директорию). В противном случае Kaspersky Scan Engine может не запуститься или работать некорректно. Убедитесь, что целевая директория, в которую загружаются обновления, содержит существующие антивирусные базы. Если у вас возникли проблемы с обновлением существующих антивирусных баз, вы можете попробовать использовать антивирусные базы из пакета распространения.</p>
<p class="introheading">Запланируйте ежедневное обновление</p>
<p class="bodytext">Вы должны запускать процедуру обновления и получать новые описания вредоносных программ и обновления для модулей не реже одного раза в час.</p>
<p class="bodytext">Эта мера снижает вероятность того, что KSN станет недоступным из-за просроченного файла ключа шифрования KSN.</p>
<p class="bodytext">Файл ключа шифрования KSN используется для защиты коммуникации между Kaspersky Scan Engine и серверами KSN. Этот файл обновляется во время регулярной процедуры обновления антивирусных баз. По умолчанию Kaspersky Scan Engine проверяет состояние файла ключа шифрования KSN при каждом обновлении, и, если срок действия текущего файла ключа шифрования KSN истек, во время обновления загружается новый ключ.</p>
<p class="bodytext">При рассмотрении обновлений необходимо использовать следующую классификацию ниже.</p>
<p class="tablename">Классификация актуальности антивирусных баз</p>
<p class="spacerfortables">
<table class="tableintopic" width="437" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Антивирусные базы считаются</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Время последнего обновления</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Актуальны</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Менее суток назад.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Устарели</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Менее трех дней назад.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Чрезвычайно устарели</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Больше недели назад.</p>
</td>
</tr>

</table>
<p class="introheading">Используйте сокращенный набор баз</p>
<p class="bodytext">Вы можете использовать сокращенный набор баз, если хотите <a id="h218348" class="englishcrossreferencetemplate" href="#218262" target="_self">уменьшить занимаемое Kaspersky Scan Engine пространство на жестком диске</a>.</p>
<p class="introheading">Используйте резервную копию антивирусных баз</p>
<p class="bodytext">Рекомендуем включить резервное копирование антивирусных баз. Если Kaspersky Scan Engine не может инициализироваться после обновления, он может <a id="h218441" class="englishcrossreferencetemplate" href="#218259" target="_self">восстановить антивирусные базы из резервной копии</a>.</p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="218349"><p><a name="218349" style="display: none;">[Topic 218349]</a></p>
	<h2 id="t234553" class="heading2">Обновление с HTTPS-сервера</h2>
<p class="attentionbody">Эта функция доступна в Kaspersky Scan Engine, начиная с версии 2.0.</p>
<p class="bodytext">Вы можете настроить среду для получения обновлений с HTTPS-сервера.</p>
<p class="procedureheading">Чтобы настроить обновление с HTTPS-сервера:</p>
<ol class="listnumber1"><li class="listnumber1">Создайте HTTPS-сервер как зеркало для хранения файлов антивирусных баз.</li><li class="listnumber1">На HTTPS-сервере настройте Updater SDK (или утилиту keep-up-to-date) для выполнения обновления и распространения файлов антивирусных баз.<p class="attentioncontinue1">Вы должны использовать Updater SDK или утилиту keep-up-to-date на HTTPS-сервере. Невозможно создать или настроить зеркальный сервер с помощью Kaspersky Scan Engine. Вы можете получить Updater SDK у представителя &quot;Лаборатории Касперского&quot;, который предоставил вам пакет распространения Kaspersky Scan Engine.</p> </li><li class="listnumber1">Настройте Kaspersky Scan Engine для загрузки обновлений с HTTPS-сервера на компьютерах, которые будут использовать HTTPS-сервер.<p class="listcontinue1">Для службы <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">kavhttpd</a> или <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">kavicapd</a> выполните следующие действия.</p> <ul class="listbullet2"><li class="listbullet2">В элементе <code class="programcharacter">UpdateSettings &gt; UpdatesCertFile</code> файла конфигурации <a id="h201083" class="englishcrossreferencetemplate" href="#200653" target="_self">kavhttpd</a> или <a id="h201190" class="englishcrossreferencetemplate" href="#200713" target="_self">kavicapd</a> укажите локальный путь к корневому сертификату ключа, которым подписан TLS-сертификат вашего HTTPS-сервера.<p class="listcontinue2">Вы можете оставить значение этого элемента пустым.</p> </li><li class="listbullet2">В элементе <code class="programcharacter">UpdateSettings &gt; UpdateSources</code> файла конфигурации <a id="h201082" class="englishcrossreferencetemplate" href="#201051" target="_self">kavhttpd</a> или <a id="h201189" class="englishcrossreferencetemplate" href="#200712" target="_self">kavicapd</a> укажите адрес HTTPS-сервера.</li><li class="listbullet2">В элементе <code class="programcharacter">UpdateSettings &gt; UseOnlyCustomSources</code> файла конфигурации <a id="h201081" class="englishcrossreferencetemplate" href="#200651" target="_self">kavhttpd</a> или <a id="h201188" class="englishcrossreferencetemplate" href="#200711" target="_self">kavicapd</a> укажите <code class="programcharacter">1</code>.</li><li class="listbullet2">В элементе <code class="programcharacter">UpdateSettings &gt; CertificateConfirmationAction</code> файла конфигурации <a id="h201084" class="englishcrossreferencetemplate" href="#200654" target="_self">kavhttpd</a> или <a id="h201191" class="englishcrossreferencetemplate" href="#200714" target="_self">kavicapd</a> укажите значение в соответствии с ожидаемым действием, если сервер обновлений использует недоверенный сертификат.</li></ul></li><li class="listnumber1">Перезапустите Kaspersky Scan Engine.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192979"><p><a name="192979" style="display: none;">[Topic 192979]</a></p>
	<h1 id="t234577" class="heading1">Использование Kaspersky Scan Engine в режиме HTTP</h1>
<p class="bodytext">Этот раздел содержит информацию о том, как использовать Kaspersky Scan Engine в режиме HTTP.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#184921" target="_self">Kaspersky Scan Engine и режим HTTP</a></p><p class="relateditem"><a href="#210245" target="_self">HTTPS-соединения</a></p><p class="relateditem"><a href="#225526" target="_self">Рекомендуемые настройки для режима HTTP</a></p><p class="relateditem"><a href="#192980" target="_self">Настройка Kaspersky Scan Engine в режиме HTTP</a></p><p class="relateditem"><a href="#192981" target="_self">Запуск Kaspersky Scan Engine в режиме HTTP</a></p><p class="relateditem"><a href="#192985" target="_self">Выполнение запросов в режиме HTTP</a></p><p class="relateditem"><a href="#179883" target="_self">Использование примера HTTP-клиента</a></p><p class="relateditem"><a href="#179881" target="_self">Использование прокси-сервера</a></p><p class="relateditem"><a href="#179882" target="_self">Обновление антивирусных баз в режиме HTTP</a></p><p class="relateditem"><a href="#186768" target="_self">Логирование в режиме HTTP</a></p><p class="relateditem"><a href="#179888" target="_self">Сборка исполняемых файлов для службы HTTP и клиента HTTP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184921"><p><a name="184921" style="display: none;">[Topic 184921]</a></p>
	<h2 id="t234404" class="heading2">Kaspersky Scan Engine и режим HTTP</h2>
<p class="bodytext">Протокол HTTP является стандартным протоколом для передачи данных в архитектуре &quot;клиент-сервер&quot;. В режиме HTTP решение Kaspersky Scan Engine выступает как REST-подобная служба, которая получает от клиентов HTTP-запросы в формате JSON. Служба сканирует объекты, переданные в этих запросах, и отправляет обратно HTTP-ответы с результатами сканирования в формате JSON или простого текста.</p>
<p class="bodytext">Кроме того, пакет распространения Kaspersky Scan Engine включает в себя <a id="h179932" class="englishcrossreferencetemplate" href="#179883" target="_self">пример HTTP-клиента</a> и его исходный код. Этот пример HTTP-клиента демонстрирует, как делать запросы в Kaspersky Scan Engine в режиме HTTP. Вы также можете использовать скомпилированный пример для <a id="h180274" class="englishcrossreferencetemplate" href="#179884" target="_self">сканирования файлов из командной строки</a>.</p>
<p class="introheading">Способы передачи данных</p>
<p class="listheading">Поддерживаются два способа передачи данных между клиентами и Kaspersky Scan Engine:</p>
<ul class="listbullet1"><li class="listbullet1">TCP-соединение</li><li class="listbullet1">UNIX-сокет<p class="attentioncontinue1">Только для систем Linux.</p> </li></ul><p class="introheading">Режимы сканирования</p>
<p class="listheading">Kaspersky Scan Engine поддерживает следующие режимы сканирования:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">scanfile</code><p class="listcontinue1">В этом режиме пример HTTP-клиента передает пути к файлам в Kaspersky Scan Engine, который читает файлы и проверяет их.</p>
</li><li class="listbullet1"><code class="programcharacter">scanmemory</code><p class="listcontinue1">В этом режиме пример HTTP-клиента передает содержимое файла в Kaspersky Scan Engine, который проверяет содержимое. Максимальный размер объекта, отправляемого на сканирование в режиме сканирования памяти, ограничен системной памятью компьютера.</p>
</li><li class="listbullet1"><code class="programcharacter">checkurl</code><p class="listcontinue1">В этом режиме пример HTTP-клиента передает URL-адреса в Kaspersky Scan Engine, который проверяет их на наличие вредоносных и фишинговых адресов.</p>
</li></ul><p class="bodytext">Вы можете сканировать файлы и URL-адреса, отправляя HTTP-запросы по <a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">протоколу KAV версии 3</a> или <a id="h180281" class="englishcrossreferencetemplate" href="#181038" target="_self">протоколу KAV версии 1 и 2</a>.</p>
<p class="introheading">Авторизация по токену API</p>
<p class="bodytext">Kaspersky Scan Engine поддерживает авторизацию по токену API.</p>
<p class="bodytext">Если авторизация по токену API включена, HTTP-клиенты должны указывать токен API в заголовке запроса при отправке запросов в Kaspersky Scan Engine. Это поле заголовка запроса, используемое для отправки токена API, имеет пользовательское имя. Администратор Kaspersky Scan Engine может указать это имя в разделе <span class="guicharacter"><a id="h224242" class="englishcrossreferencetemplate" href="#224195" target="_self">Authorization</a></span> Kaspersky Scan Engine GUI. Имя по умолчанию – <code class="programcharacter">Authorization</code>.</p>
<p class="attentionbody">Если вы включили авторизацию по токену API и служба kavhttpd не запущена, запуск klScanEngineUI также инициирует запуск службы kavhttpd.</p>
<p class="listheading">Обычная процедура создания и использования токена API следующая:</p>
<ol class="listnumber1"><li class="listnumber1">Администратор Kaspersky Scan Engine создает токен в разделе <span class="guicharacter"><a id="h224242_2" class="englishcrossreferencetemplate" href="#224195" target="_self">Authorization</a></span> Kaspersky Scan Engine GUI.</li><li class="listnumber1">Администратор Kaspersky Scan Engine предоставляет токен пользователям, которые могут использовать его для доступа к службе <code class="programcharacter">kavhttpd</code>.</li><li class="listnumber1">При выполнении HTTP-запросов HTTP-клиент отправляет токен в качестве значения поля авторизации в заголовке запроса. Название поля авторизации в заголовке запроса должно совпадать с именем, указанным в параметрах Kaspersky Scan Engine (см. описание элемента <span class="guicharacter">Authorization header field</span> в разделе <span class="guicharacter"><a id="h224242_3" class="englishcrossreferencetemplate" href="#224195" target="_self">Authorization</a></span>).</li><li class="listnumber1">В случае успешной авторизации Kaspersky Scan Engine предоставляет доступ к своим функциям.</li></ol><p class="bodytext">Чтобы попробовать авторизацию по токену API и понять, как это работает, вы можете использовать <a id="h179932_2" class="englishcrossreferencetemplate" href="#179883" target="_self">HTTP-клиент</a>, поставляемый с Kaspersky Scan Engine: настройте Kaspersky Scan Engine для авторизации запросов, создайте токен API, а затем используйте HTTP-клиент для отправки запроса, содержащего токен. Вы можете найти примеры таких запросов, отправленных по протоколу KAV <a id="h224455" class="englishcrossreferencetemplate" href="#224307" target="_self">версии 1 или 2</a> и <a id="h224456" class="englishcrossreferencetemplate" href="#224308" target="_self">версии 3</a>.</p>
<p class="attentionbody">По соображениям безопасности требуется <a id="h211898" class="englishcrossreferencetemplate" href="#210245" target="_self">HTTPS-соединение</a> для отправки запросов, требующих авторизации.</p>
<p class="introheading">Постоянные соединения Keep-Alive</p>
<p class="bodytext">По умолчанию Kaspersky Scan Engine поддерживает <a id="h207358" class="englishcrossreferencetemplate" href="#207348" target="_self">постоянные соединения Keep-Alive</a>, поэтому он может обрабатывать несколько объектов один за другим, используя одно и то же соединение.</p>
<p class="bodytext">Чтобы открыть постоянное соединение Keep-Alive, HTTP-клиент должен добавить к запросу следующий заголовок:</p>
<table class="tableintopic" width="162" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="162"><p class="program">Connection: Keep-Alive</p>
</td>
</tr>

</table>
<p class="bodytext">Чтобы открыть соединение Keep-Alive, HTTP-клиент должен добавить к запросу следующий заголовок:</p>
<table class="tableintopic" width="126" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="126"><p class="program">Connection: close</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="210245"><p><a name="210245" style="display: none;">[Topic 210245]</a></p>
	<h2 id="t234382" class="heading2">HTTPS-соединения</h2>
<p class="bodytext">Kaspersky Scan Engine в режиме HTTP поддерживает HTTPS для установления безопасного соединения. </p>
<p class="attentionbody">Kaspersky Scan Engine не проверяет сертификат HTTP-клиента.</p>
<p class="bodytext">Kaspersky Scan Engine поддерживает следующие защищенные протоколы и наборы шифров:</p>
<ul class="listbullet1"><li class="listbullet1">Протокол TLS 1.3 и следующие наборы шифров:<ul class="listbullet2"><li class="listbullet2">TLS_AES_256_GCM_SHA384</li><li class="listbullet2">TLS_CHACHA20_POLY1305_SHA256</li><li class="listbullet2">TLS_AES_128_GCM_SHA256</li></ul></li><li class="listbullet1">Протокол TLS 1.2 и следующие наборы шифров:<ul class="listbullet2"><li class="listbullet2">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</li><li class="listbullet2">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</li><li class="listbullet2">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</li><li class="listbullet2">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</li><li class="listbullet2">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</li><li class="listbullet2">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</li><li class="listbullet2">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</li><li class="listbullet2">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</li><li class="listbullet2">TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</li><li class="listbullet2">TLS_DHE_RSA_WITH_AES_256_GCM_SHA384</li><li class="listbullet2">TLS_DHE_RSA_WITH_AES_256_CBC_SHA256</li><li class="listbullet2">TLS_DHE_RSA_WITH_AES_128_CBC_SHA256</li><li class="listbullet2">TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256</li></ul></li></ul><p class="bodytext">Чтобы настроить HTTPS-соединение, вам необходимо указать следующие параметры в файле конфигурации режима HTTP:</p>
<ul class="listbullet1"><li class="listbullet1">Путь к файлу закрытого ключа (элемент <code class="programcharacter"><a id="h201062" class="englishcrossreferencetemplate" href="#200613" target="_self">ServerSettings &gt; TlsCertificateKeyFile</a></code>).</li><li class="listbullet1">Путь к файлу сертификата (элемент <code class="programcharacter"><a id="h201063" class="englishcrossreferencetemplate" href="#200614" target="_self">ServerSettings &gt; TlsCertificateFile</a></code>).</li><li class="listbullet1">Протокол <code class="programcharacter">https</code> (элемент <code class="programcharacter"><a id="h201056" class="englishcrossreferencetemplate" href="#201026" target="_self">ServerSettings &gt; ConnectionString</a></code>).</li></ul><p class="bodytext">Кроме того, вы можете настроить HTTPS-соединение с помощью <a id="h201467" class="englishcrossreferencetemplate" href="#179698" target="_self">Kaspersky Scan Engine GUI</a>.</p>
<p class="bodytext">Ниже приведен пример того, как сгенерировать файлы закрытого ключа и сертификата.</p>
<p class="procedureheading">Чтобы сгенерировать закрытый ключ и сертификат (Linux):</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в <code class="programcharacter">/opt/kaspersky/ScanEngine/tools</code>.</li><li class="listnumber1">Выполните следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./openssl req -new -x509 -config openssl.cnf -newkey ec -pkeyopt ec_paramgen_curve:secp384r1 -nodes -days 3650 -subj &quot;/C=RU/CN=localhost&quot; -keyout kavhttpd.key -out kavhttpd.cert</p>
</td>
</tr>

</table> <p class="listcontinue1">В <code class="programcharacter">/opt/kaspersky/ScanEngine/tools</code> создаются два файла:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">kavhttpd.key –</code> закрытый ключ.</li><li class="listbullet2"><code class="programcharacter">kavhttpd.cert –</code> сертификат.</li></ul></li></ol><p class="procedureheading">Чтобы сгенерировать закрытый ключ и сертификат (Windows):</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в <code class="programcharacter">%service_dir%\tools</code>.</li><li class="listnumber1">Выполните следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">openssl.exe req -new -x509 -config openssl.cnf -newkey ec -pkeyopt ec_paramgen_curve:secp384r1 -nodes -days 3650 -subj &quot;/C=RU/CN=localhost&quot; -keyout kavhttpd.key -out kavhttpd.cert</p>
</td>
</tr>

</table> <p class="listcontinue1">В <code class="programcharacter">%service_dir%\tools</code> создаются два файла:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">kavhttpd.key –</code> закрытый ключ.</li><li class="listbullet2"><code class="programcharacter">kavhttpd.cert –</code> сертификат.</li></ul></li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225526"><p><a name="225526" style="display: none;">[Topic 225526]</a></p>
	<h2 id="t240944" class="heading2">Рекомендуемые настройки для режима HTTP</h2>
<p class="bodytext">В этом разделе описаны рекомендуемые настройки Kaspersky Scan Engine в режиме HTTP.</p>
<p class="bodytext">Если вы используете Kaspersky Scan Engine GUI, укажите рекомендуемые настройки, как описано в таблице ниже.</p>
<p class="tablename">Рекомендуемые настройки режима HTTP в Kaspersky Scan Engine GUI</p>
<p class="spacerfortables">
<table class="tableintopic" width="521" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="193"><p class="tableheading">Настройки в Kaspersky Scan Engine GUI</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="328"><p class="tableheading">Рекомендуемые настройки</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Service &gt; Keep-alive connection</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">См. описание <code class="programcharacter">KeepAliveSettings</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Service &gt; Connection timeout</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">См. описание <code class="programcharacter">TimeoutMs</code> в <code class="programcharacter">KeepAliveSettings</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Service &gt; Sessions</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">См. описание <code class="programcharacter">MaxHTTPSessionsNum</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Service &gt; Connections</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">См. описание <code class="programcharacter">MaxIncomingConnectionsNum</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Service &gt; Threads</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">В два раза больше значения <code class="programcharacter">ScannersCount</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Service &gt; Processes</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">Равно количеству ядер процессора.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Enable reputation checking</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">Активируйте переключатель</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Enable Phishing Protection</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">Активируйте переключатель</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="bodytext">Scanning &gt; Object scan timeout</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">10000 (10 секунд)</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Heuristic analysis level</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="bodytext">Low</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Actions on detected objects</p>
</td>
<td valign="middle" style="border:1px solid #010101;" width="328"><p class="tablebodytext">См. описание <code class="programcharacter">Mode</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Size limit for the received file</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="bodytext">10343 КБ (10,1 МБ)</p>
<p class="attentionbody">Получайте обновленное значение от вашего технического менеджера по работе с клиентами не реже одного раза в год.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Maximum depth</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">5</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="193"><p class="tablebodytext">Scanning &gt; Types of files to scan</p>
</td>
<td style="border:1px solid #010101;" width="328"><p class="tablebodytext">Установите флажок:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">Packed objects</li><li class="tablelistbullet">Archives</li><li class="tablelistbullet">Emails databases</li><li class="tablelistbullet">Emails</li></ul></td>
</tr>

</table>
<p class="bodytext">Если вы не используете Kaspersky Scan Engine GUI, укажите рекомендуемые настройки в файле конфигурации kavhttpd.xml, как описано в таблице ниже.</p>
<p class="tablename">Рекомендуемые настройки для режима HTTP в файле конфигурации</p>
<p class="spacerfortables">
<table class="tableintopic" width="512" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="180"><p class="tableheading">Параметр в kavhttpd.xml</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="332"><p class="tableheading">Рекомендуемые настройки</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">ScannersCount</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="bodytext">Равно количеству ядер процессора.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">ThreadsCount</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="bodytext">В два раза больше значения <code class="programcharacter">ScannersCount</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">MaxIncomingConnectionsNum</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">См. описание <code class="programcharacter">MaxIncomingConnectionsNum</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">MaxHTTPSessionsNum</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">См. описание <code class="programcharacter">MaxHTTPSessionsNum</code> ниже</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">QueueLen</p>
</td>
<td style="border:1px solid #010101;" width="332"><ul class="tablelistbullet"><li class="tablelistbullet">Больше или равно значению <code class="programcharacter">MaxHTTPSessionsNum</code></li><li class="tablelistbullet">Больше, чем значение <code class="programcharacter">ThreadsCount</code></li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">MaxTCPFileSize</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">10591440 байт (10,1 МБ)</p>
<p class="attentionbody">Получайте обновленное значение от вашего технического менеджера по работе с клиентами не реже одного раза в год.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">Flags</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">Укажите флаги:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">KAV_O_M_PACKED</li><li class="tablelistbullet">KAV_O_M_ARCHIVED</li><li class="tablelistbullet">KAV_O_M_MAILPLAIN</li><li class="tablelistbullet">KAV_O_M_MAILBASES</li><li class="tablelistbullet">KAV_O_M_HEURISTIC_LEVEL_SHALLOW</li><li class="tablelistbullet">KAV_SHT_ENGINE_KSN</li><li class="tablelistbullet">KAV_SHT_ENGINE_APUF</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">Mode</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">См. описание <code class="programcharacter">Mode</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">MaxArchivesScanningDepth</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">5</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">SessionTimeout</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">10000 (10 секунд)</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="180"><p class="tablebodytext">KeepAliveSettings</p>
</td>
<td style="border:1px solid #010101;" width="332"><p class="tablebodytext">См. описание <code class="programcharacter">KeepAliveSettings</code> ниже.</p>
</td>
</tr>

</table>
<p class="bodytext"><a id="h201067" class="englishcrossreferencetemplate" href="#201037" target="_self">ScannersCount</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Processes</span>.</p>
<p class="bodytext">Рекомендуемое количество сканирующих процессов равно количеству ядер процессора. Например, если Kaspersky Scan Engine работает на компьютере с 4-ядерным процессором, установите <code class="programcharacter">ScannersCount</code> равным <code class="programcharacter">4</code>.</p>
<p class="bodytext">Смотрите также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме HTTP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen, MaxIncomingConnectionsNum и MaxHTTPSessionsNum&quot;.</p>
<p class="bodytext"><a id="h201068" class="englishcrossreferencetemplate" href="#201038" target="_self">ThreadsCount</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Threads</span>.</p>
<p class="bodytext">Рекомендуемое количество потоков сканирования зависит от количества процессов сканирования, указанного в <code class="programcharacter">ScannersCount</code>: значение <code class="programcharacter">ThreadsCount</code> в два раза больше значения <code class="programcharacter">ScannersCount</code>. Например, если Kaspersky Scan Engine работает на компьютере с 4-ядерным процессором, а <code class="programcharacter">ScannersCount</code> имеет значение <code class="programcharacter">4</code>, установите для <code class="programcharacter">ThreadsCount</code> значение <code class="programcharacter">8</code>.</p>
<p class="bodytext">Смотрите также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме HTTP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen, MaxIncomingConnectionsNum и MaxHTTPSessionsNum&quot;.</p>
<p class="bodytext"><a id="h201057" class="englishcrossreferencetemplate" href="#201027" target="_self">MaxIncomingConnectionsNum</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Connections</span>.</p>
<p class="bodytext">Вы можете настроить этот параметр, чтобы задать длину очереди входящих TCP-соединений, ожидающих соединения с HTTPD. Подробнее о настройке очереди подключений см. в разделе &quot;<a id="h180043" class="englishcrossreferencetemplate" href="#179869" target="_self">Настройка очереди подключений в режиме HTTP</a>&quot;. </p>
<p class="bodytext">Например, вы ожидаете в среднем десять одновременных подключений к клиентам. Если для параметра <code class="programcharacter">MaxHTTPSessionsNum</code> установлено значение 10, все 10 одновременных подключений будут приняты HTTPD для обработки. 11-е входящее TCP-соединение будет ожидать соединения с HTTPD. По крайней мере, 11 дополнительных подключений могут ждать принятия HTTPD, в то время как 12-е дополнительное подключение вызовет сообщение об ошибке. Поэтому при установке значения <code class="programcharacter">MaxIncomingConnectionsNum</code> учитывайте значение <code class="programcharacter">MaxHTTPSessionNum</code>: значение, указанное в <code class="programcharacter">MaxIncomingConnectionsNum</code>, должно быть в несколько раз больше, чем значение, указанное в <code class="programcharacter">MaxHTTPSessionNum</code>.</p>
<p class="bodytext"><a id="h201058" class="englishcrossreferencetemplate" href="#201028" target="_self">MaxHTTPSessionsNum</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Sessions</span>.</p>
<p class="bodytext">При указании значения этого параметра учитывайте следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Максимальное количество потоков сканирования (<code class="programcharacter">ThreadsCount</code>).</li><li class="listbullet1">Максимальную длину очереди задач сканирования (<code class="programcharacter">QueueLen</code>).</li><li class="listbullet1">Максимальную длину очереди ожидания сканирования (<code class="programcharacter">MaxIncomingConnectionsNum</code>).</li><li class="listbullet1">Специфику HTTPD: как правило, HTTPD запускает один процесс сканирования для одной задачи сканирования.</li></ul><p class="listheading">Рекомендуемое значение:</p>
<ul class="listbullet1"><li class="listbullet1">больше или равно:<ol class="listalpha2"><li class="listalpha2">5*ThreadsCount/4 (при сканировании файлов и URL-адресов).</li><li class="listalpha2">3*ThreadsCount/2 (при сканировании системной памяти).</li></ol></li><li class="listbullet1">соответствует ожидаемому количеству HTTP-клиентов, выполняющих запросы к HTTPD.</li></ul><p class="bodytext">Смотрите также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме HTTP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen, MaxIncomingConnectionsNum и MaxHTTPSessionsNum&quot;.</p>
<p class="bodytext"><a id="h201069" class="englishcrossreferencetemplate" href="#200631" target="_self">QueueLen</a></p>
<p class="bodytext">Поскольку задачи сканирования ставятся в очередь из всех одновременно открытых сеансов, учитывайте параметры <code class="programcharacter">MaxHTTPSessionsNum</code>. Длина очереди не должна быть меньше значения <code class="programcharacter">MaxHTTPSessionsNum</code>. В противном случае некоторые клиенты получат ошибку при открытии сессий.</p>
<p class="bodytext">Поскольку задачи сканирования обрабатываются потоками из очереди, длина очереди не должна быть меньше количества потоков в <code class="programcharacter">ThreadsCount</code>. В противном случае некоторые потоки не будут использоваться.</p>
<p class="bodytext">Рекомендуемое значение <code class="programcharacter">QueueLen</code>:</p>
<ul class="listbullet1"><li class="listbullet1">Больше, чем значение <code class="programcharacter">ThreadsCount</code>.</li><li class="listbullet1">Больше или равно значению <code class="programcharacter">MaxHTTPSessionsNum</code>.</li></ul><p class="bodytext">Смотрите также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме HTTP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen, MaxIncomingConnectionsNum и MaxHTTPSessionsNum&quot;.</p>
<p class="bodytext"><a id="h201059" class="englishcrossreferencetemplate" href="#201029" target="_self">MaxTCPFileSize</a></p>
<p class="bodytext">Во время сканирования HTTPD загружает файлы в системную память. Чем больше размер файла и количество активных сеансов, тем больше используется системная память. Указанное значение должно быть меньше размера ОЗУ.</p>
<p class="bodytext">Чтобы повысить производительность, вы можете указать максимальный размер HTTP-сообщений, отправляемых в HTTPD, и установить значение 10591440 байт (10,1 МБ). Это значение обеспечивает обнаружение большинства вредоносных программ.</p>
<p class="attentionbody">Если вы следовали приведенной выше рекомендации, мы также рекомендуем один раз в год проконсультироваться со своим персональным техническим менеджером, чтобы получить обновленное рекомендуемое значение, поскольку средний размер вредоносного ПО меняется из года в год.</p>
<p class="bodytext"><a id="h201061" class="englishcrossreferencetemplate" href="#201031" target="_self">Flags</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Types of files to scan</span>, <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Heuristic analysis level</span> и <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Enable reputation checking</span>.</p>
<p class="bodytext">Рекомендуемое значение для <code class="programcharacter">Flags</code> следующее:</p>
<p class="bodytext"><code class="programcharacter">KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILPLAIN | KAV_O_M_MAILBASES | KAV_O_M_HEURISTIC_LEVEL_SHALLOW | KAV_SHT_ENGINE_KSN</code></p>
<p class="bodytext">Если используется флаг <code class="programcharacter">KAV_SHT_ENGINE_KSN</code>,<code class="programcharacter"> </code>также рекомендуется включить<code class="programcharacter"> </code>защиту от фишинга одним из следующих способов:</p>
<ul class="listbullet1"><li class="listbullet1">В элементе Flags файла конфигурации kavhttpd.xml добавьте флаг <code class="programcharacter">KAV_SHT_ENGINE_APUF</code>.</li><li class="listbullet1">На странице <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> в Kaspersky Scan Engine GUI активируйте переключатель <span class="guicharacter">Enable Phishing Protection</span>.</li></ul><p class="bodytext">Защита от фишинга полезна, когда Kaspersky Scan Engine проверяет URL-адреса.<code class="programcharacter"> </code></p>
<p class="bodytext"><a id="h201071" class="englishcrossreferencetemplate" href="#201041" target="_self">Mode</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Actions on detected objects</span>.</p>
<p class="bodytext">Если предполагается указать локальный путь к объекту (запрос <code class="programcharacter">scanfile</code> для сканирования локального файла), укажите следующее:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_DELETE</code> (если требуется удалить объект без попытки лечения).</li><li class="listbullet1"><code class="programcharacter">KAV_CLEAN_DELETE</code> (если требуется вылечить объект или удалить его, если лечение невозможно).</li></ul><p class="bodytext">Во всех остальных случаях указывайте <code class="programcharacter">KAV_SKIP</code>.</p>
<p class="bodytext"><a id="h206217" class="englishcrossreferencetemplate" href="#207145" target="_self">MaxArchivesScanningDepth</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Maximum depth</span>.</p>
<p class="bodytext">Рекомендуется ограничить максимальную глубину распаковки вложенных архивов во время сканирования. Рекомендуемое значение <code class="programcharacter">MaxArchivesScanningDepth</code> – <code class="programcharacter">5</code>.</p>
<p class="bodytext"><a id="h201060" class="englishcrossreferencetemplate" href="#201030" target="_self">SessionTimeout</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Object scan timeout</span>.</p>
<p class="bodytext">Вы можете установить тайм-аут для всех операций в сеансе: соединение с клиентом, получение данных и проверка объекта. Настройку тайм-аута можно использовать с заголовком <code class="programcharacter">X-KAV-Timeout</code> (см. <a id="h179922" class="englishcrossreferencetemplate" href="#179870" target="_self">Настройка тайм-аута сеанса</a>). </p>
<p class="bodytext">Настройка тайм-аута позволяет:</p>
<ul class="listbullet1"><li class="listbullet1">немедленно освобождать поток сканирования, если время сеанса истекло.</li><li class="listbullet1">более быстро управлять очередью входящих TCP-соединений (длина очереди задается в <code class="programcharacter">MaxIncomingConnectionsNum</code>).</li></ul><p class="bodytext">Первоначально HTTPD получает данные, а затем загружает файлы в системную память во время сканирования. Чем больше размер файла и количество активных сеансов, тем больше используется системная память. Чтобы повысить производительность, вы можете указать максимальный размер HTTP-сообщений, отправляемых в HTTPD (см. <code class="programcharacter">MaxTCPFileSize</code> выше), и ограничить время сеанса в <code class="programcharacter">SessionTimeout</code>. Это позволит вам пропустить крупные объекты или объекты, требующие длительного времени для сканирования.</p>
<p class="bodytext">Перед установкой значения <code class="programcharacter">SessionTimeout</code> рекомендуется оценить ожидаемое количество HTTP-клиентов, запрашивающих HTTPD, а также вероятную длину очереди входящих TCP-соединений.</p>
<p class="bodytext">Обычно значение <code class="programcharacter">SessionTimeout</code> по умолчанию <code class="programcharacter">10000</code> (10 секунд).</p>
<p class="bodytext"><a id="h207358" class="englishcrossreferencetemplate" href="#207348" target="_self">KeepAliveSettings</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Keep-alive connection</span>.</p>
<p class="bodytext">Мы рекомендуем включить Keep-Alive. Когда включен Keep-Alive, Kaspersky Scan Engine поддерживает постоянное соединение даже после обработки запроса и истечения времени ожидания сеанса. Это дает следующие преимущества:</p>
<ul class="listbullet1"><li class="listbullet1">сокращение сетевого трафика.</li><li class="listbullet1">сокращение использования ресурсов сервера.</li><li class="listbullet1">сокращение времени задержки при обработке запросов.</li></ul><p class="bodytext">Keep-Alive особенно полезен для HTTPS-соединений, которые требуют больше процессорного времени и больше взаимодействий клиент-сервер.</p>
<p class="bodytext">Чтобы включить Keep-Alive, установите для элемента <a id="h228936" class="englishcrossreferencetemplate" href="#207346" target="_self">Enabled</a> в <code class="programcharacter">KeepAliveSettings</code> значение <code class="programcharacter">1</code>.</p>
<p class="bodytext">Чтобы определить значения для <code class="programcharacter"><a id="h228937" class="englishcrossreferencetemplate" href="#207350" target="_self">TimeoutMs</a></code> и <code class="programcharacter"><a id="h228938" class="englishcrossreferencetemplate" href="#207352" target="_self">MaxRequests</a></code>, оцените количество клиентов и количество запросов от клиентов.</p>
<p class="bodytext">Например, вы рассчитали, что максимальное количество клиентов равно 10, поэтому устанавливаете <code class="programcharacter">MaxHTTPSessionsNum</code> равным 10. Если <code class="programcharacter">TimeoutMs</code> и <code class="programcharacter">MaxRequests</code> не ограничены и все 10 клиентов отправляют запросы непрерывно, Kaspersky Scan Engine поддерживает соединения с этими 10 клиентами без ограничений. В результате новые соединения не могут быть приняты HTTPD для обработки.</p>
<p class="bodytext">Другой пример. Вы рассчитали, что максимальное количество клиентов равно 10, поэтому устанавливаете <code class="programcharacter">MaxHTTPSessionsNum</code> равным 10. Вы также подсчитали, что максимальное количество запросов от одного клиента составляет 15, поэтому вы устанавливаете <code class="programcharacter">MaxRequests</code> на <code class="programcharacter">15</code>. Если вы не установили ограничение для <code class="programcharacter">TimeoutMs</code> и клиенты не отправляют 15 запросов, Kaspersky Scan Engine поддерживает соединения с этими 10 клиентами без ограничений, поэтому новые соединения не могут быть приняты HTTPD для обработки.</p>
<p class="introheading">Пример работы Kaspersky Scan Engine в режиме HTTP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen, MaxIncomingConnectionsNum и MaxHTTPSessionsNum</p>
<p class="bodytext">Допустим, Kaspersky Scan Engine установлен на компьютере с четырьмя ядрами процессора и у этого компьютера 15 одновременных подключений, а Kaspersky Scan Engine настроен следующим образом:</p>
<ul class="listbullet1"><li class="listbullet1">ScannersCount = 4</li><li class="listbullet1">ThreadsCount = 8</li><li class="listbullet1">QueueLen = 20</li><li class="listbullet1">MaxHTTPSessionsNum = 10</li><li class="listbullet1">MaxIncomingConnectionsNum = 20</li></ul><p class="bodytext">В этом случае:</p>
<ol class="listnumber1"><li class="listnumber1">Пять из пятнадцати клиентов будут поставлены в очередь на подключение.</li><li class="listnumber1">Десять сессий откроются для десяти клиентов.</li><li class="listnumber1">Десять открытых сессий сформируют очередь задач сканирования. Если количество задач сканирования превышает значение <code class="programcharacter">QueueLen</code>, клиент получит ошибку <code class="programcharacter">503</code> - <code class="programcharacter">Service overloaded.</code></li><li class="listnumber1">Kaspersky Scan Engine запускает четыре процесса сканирования.</li><li class="listnumber1">Четыре процесса сканирования создают восемь потоков для одновременной обработки восьми задач проверки из очереди (один поток для одной задачи сканирования).</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192980"><p><a name="192980" style="display: none;">[Topic 192980]</a></p>
	<h2 id="t234301" class="heading2">Настройка Kaspersky Scan Engine в режиме HTTP</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как настроить Kaspersky Scan Engine в режиме HTTP, не используя Kaspersky Scan Engine GUI.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#184799" target="_self">Файл конфигурации режима HTTP</a></p><p class="relateditem"><a href="#179868" target="_self">Настройка Format Recognizer для использования в режиме HTTP</a></p><p class="relateditem"><a href="#179869" target="_self">Настройка очереди подключений в режиме HTTP</a></p><p class="relateditem"><a href="#179870" target="_self">Настройка тайм-аута сеанса</a></p><p class="relateditem"><a href="#179872" target="_self">Изменение переменных в файле модуля режима HTTP</a></p><p class="relateditem"><a href="#179873" target="_self">Настройка обновления в режиме HTTP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184799"><p><a name="184799" style="display: none;">[Topic 184799]</a></p>
	<h3 id="t234379" class="heading3">Файл конфигурации режима HTTP</h3>
<p class="bodytext">Файл конфигурации для режима HTTP (далее также файл конфигурации) представляет собой XML-файл, который определяет параметры Kaspersky Scan Engine.</p>
<p class="introheading">Файл конфигурации режима HTTP (Linux)</p>
<p class="bodytext">Пакет распространения Kaspersky Scan Engine для Linux содержит файл конфигурации <code class="programcharacter">%distr_kit%/etc/kavhttpd.xml</code>. </p>
<p class="bodytext">После <a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">установки Kaspersky Scan Engine</a> скопируйте <code class="programcharacter">kavhttpd.xml</code> в одно из мест расположения по вашему усмотрению:</p>
<ul class="listbullet1"><li class="listbullet1">Если вы скопируете <code class="programcharacter">kavhttpd.xml</code> в директорию <code class="programcharacter">/etc/</code>, Kaspersky Scan Engine найдет и обработает файл автоматически.</li><li class="listbullet1">Если вы скопируете <code class="programcharacter">kavhttpd.xml</code> в другое место расположения, вам нужно указать путь до него при запуске Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">с помощью <a id="h179931" class="englishcrossreferencetemplate" href="#179872" target="_self">файла модуля systemd</a>.</li><li class="listbullet2">запустив Kaspersky Scan Engine из командной строки <a id="h179959" class="englishcrossreferencetemplate" href="#179876" target="_self">вручную</a>.</li></ul></li></ul><p class="introheading">Файл конфигурации режима HTTP (Windows)</p>
<p class="bodytext">Пакет распространения Kaspersky Scan Engine для Windows содержит файл конфигурации <code class="programcharacter">%distr_kit%\bin\kavhttpd.xml</code>.</p>
<p class="bodytext">Рекомендуем указывать полные пути к файлам в <code class="programcharacter">kavhttpd.xml</code>. В частности, настоятельно рекомендуется указывать полные пути к сертификату (элемент <code class="programcharacter">TlsCertificateFile</code>) и файлу ключа (элемент <code class="programcharacter">TlsCertificateKeyFile</code>).</p>
<p class="introheading">Параметры файла конфигурации для режима HTTP</p>
<p class="bodytext">Большинство элементов файла конфигурации имеют значения по умолчанию, которые используются, если элемент не указан явно. Не указывайте в элементах файла конфигурации пустые значения, если возможность этого не указана в данной документации.</p>
<p class="bodytext">Файл конфигурации KAV HTTPD содержит следующие родительские элементы:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201089" class="englishcrossreferencetemplate" href="#201021" target="_self">ServerSettings</a></li><li class="listbullet1"><a id="h201090" class="englishcrossreferencetemplate" href="#201022" target="_self">KSNSettings</a></li><li class="listbullet1"><a id="h201091" class="englishcrossreferencetemplate" href="#201023" target="_self">KAVScanningSettings</a></li><li class="listbullet1"><a id="h201092" class="englishcrossreferencetemplate" href="#201024" target="_self">DirectorySettings</a></li><li class="listbullet1"><a id="h201093" class="englishcrossreferencetemplate" href="#200598" target="_self">UseHTTPProxy</a></li><li class="listbullet1"><a id="h201094" class="englishcrossreferencetemplate" href="#201047" target="_self">HTTPProxy</a></li><li class="listbullet1"><a id="h201095" class="englishcrossreferencetemplate" href="#201025" target="_self">UpdateSettings</a></li><li class="listbullet1"><a id="h201096" class="englishcrossreferencetemplate" href="#201055" target="_self">FormatRecognizerSettings</a></li></ul><p class="introheading">Структура файла конфигурации</p>
<p class="bodytext">Ниже приведен пример файла конфигурации:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Configuration&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;ServerSettings&gt;</p>
<p class="program3">&lt;ConnectionString&gt;/tmp/.kavhttpd&lt;/ConnectionString&gt;</p>
<p class="program3">&lt;MaxIncomingConnectionsNum&gt;100&lt;/MaxIncomingConnectionsNum&gt;</p>
<p class="program3">&lt;MaxHTTPSessionsNum&gt;50&lt;/MaxHTTPSessionsNum&gt;</p>
<p class="program3">&lt;MaxTCPFileSize&gt;100&lt;/MaxTCPFileSize&gt;</p>
<p class="program3">&lt;SessionTimeout&gt;1000&lt;/SessionTimeout&gt;</p>
<p class="program3">&lt;Flags&gt;<code class="programcharacter">KAV_SHT_ENGINE_KSN</code> | <code class="programcharacter">KAV_SHT_ENGINE_APUF</code>&lt;/Flags&gt;</p>
<p class="program3">&lt;<code class="programcharacter">TlsCertificateKeyFile</code>&gt;opt/kaspersky/http_data/https_key.pem&lt;/<code class="programcharacter">TlsCertificateKeyFile</code>&gt;</p>
<p class="program3">&lt;<code class="programcharacter">TlsCertificateFile</code>&gt;opt/kaspersky/http_data/https_cert.crt&lt;/<code class="programcharacter">TlsCertificateFile</code>&gt;</p>
<p class="program3">&lt;CORS&gt;</p>
<p class="program4">&lt;AccessControlAllowOrigin&gt;https://example.com&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program4">&lt;AccessControlAllowOrigin&gt;https://kaspersky.ru&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program3">&lt;/CORS&gt;</p>
<p class="program3">&lt;KeepAliveSettings&gt; </p>
<p class="program4">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program4">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program4">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program3">&lt;/KeepAliveSettings&gt;</p>
<p class="program3">&lt;AuthSettings&gt;</p>
<p class="program4">&lt;UseAccessToken&gt;0&lt;/UseAccessToken&gt; &lt;!--Enable or disable API-token authentication --&gt;</p>
<p class="program4">&lt;AuthRequestField&gt;Authorization&lt;/AuthRequestField&gt;</p>
<p class="program4">&lt;UseBearerAuthScheme&gt;1&lt;/UseBearerAuthScheme&gt;</p>
<p class="program4">&lt;AccessTokens&gt;</p>
<p class="program5">&lt;Token&gt;</p>
<p class="program5"> &lt;Name&gt;Unlimited key&lt;/Name&gt;</p>
<p class="program5"> &lt;Value&gt;JWXA529CU2q7Udv7r3ji6BEMsha-5yu0KqU3yvKtf-6I+TU2AEQACKAABIgpEIIM&lt;/Value&gt;</p>
<p class="program5"> &lt;Description&gt;Kaspersky Scan Engine Clients. Full access scope&lt;/Description&gt;</p>
<p class="program5"> &lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program5">&lt;/Token&gt;</p>
<p class="program5">&lt;Token&gt;</p>
<p class="program5"> &lt;Name&gt;Key for URL-scanning&lt;/Name&gt;</p>
<p class="program5"> &lt;Value&gt;MIIEpgIBAAKCAQEA2UT+I6-ftKvy3UqK0uy5-ahsMEB6ij3r7vdU7q2UC925AXWJ&lt;/Value&gt;</p>
<p class="program5"> &lt;Description&gt;Server access key. Only URL-scanning&lt;/Description&gt;</p>
<p class="program5"> &lt;Enabled&gt;0&lt;/Enabled&gt;</p>
<p class="program5">&lt;/Token&gt;</p>
<p class="program4">&lt;/AccessTokens&gt;</p>
<p class="program3">&lt;/AuthSettings&gt;</p>
<p class="program2">&lt;/ServerSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;KSNSettings&gt;</p>
<p class="program3">&lt;UrlCheckTimeoutMs&gt;20000&lt;/UrlCheckTimeoutMs&gt;</p>
<p class="program3">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
<p class="program3">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
<p class="program2">&lt;/KSNSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;KAVScanningSettings&gt;</p>
<p class="program3">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
<p class="program3">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
<p class="program3">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
<p class="program3">&lt;Flags&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILBASES | KAV_O_M_MAILPLAIN | KAV_O_M_HEURISTIC_LEVEL_DETAIL&lt;/Flags&gt;</p>
<p class="program3">&lt;Mode&gt;KAV_SKIP&lt;/Mode&gt;</p>
<p class="program3">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
<p class="program2">&lt;/KAVScanningSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;DirectorySettings&gt;</p>
<p class="program3">&lt;BasesPath&gt;/home/bases&lt;/BasesPath&gt;</p>
<p class="program3">&lt;TempPath&gt;/home/temp&lt;/TempPath&gt;</p>
<p class="program3">&lt;LicensePath&gt;/home/license&lt;/LicensePath&gt;</p>
<p class="program3">&lt;LicensingMode&gt;1&lt;/LicensingMode&gt;</p>
<p class="program3">&lt;ScanningPaths&gt;</p>
<p class="program4">&lt;ScanningPath&gt;&lt;/ScanningPath&gt;</p>
<p class="program3">&lt;/ScanningPaths&gt;</p>
<p class="program2">&lt;/DirectorySettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;UseHTTPProxy&gt;1&lt;/UseHTTPProxy&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;HTTPProxy&gt;</p>
<p class="program3">&lt;url&gt;myproxy.mycompany.com&lt;/url&gt;</p>
<p class="program3">&lt;port&gt;3128&lt;/port&gt;</p>
<p class="program3">&lt;User&gt;doOTrypDTxpVJxUHYeKQTw==&lt;/User&gt;</p>
<p class="program3">&lt;pass&gt;8mSHXFix3uL+RP9oNeKDZQ==&lt;/pass&gt;</p>
<p class="program2">&lt;/HTTPProxy&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;UpdateSettings&gt;</p>
<p class="program3">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
<p class="program3">&lt;UpdatePeriodMinutes&gt;0&lt;/UpdatePeriodMinutes&gt;</p>
<p class="program3">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
<p class="program3">&lt;UpdateSources&gt;</p>
<p class="program4">&lt;Source&gt;[update source]&lt;/Source&gt;</p>
<p class="program3">&lt;/UpdateSources&gt;</p>
<p class="program3">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
<p class="program3">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
<p class="program3">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
<p class="program2">&lt;/UpdateSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;FormatRecognizerSettings&gt;</p>
<p class="program3">&lt;FormatsToSkipScanning&gt;</p>
<p class="program4">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program4">&lt;KAV_FF_GENERAL_CSV/&gt;</p>
<p class="program4">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program3">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program2">&lt;/FormatRecognizerSettings&gt; </p>
<p class="program">&nbsp;</p>
<p class="program">&lt;/Configuration&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201021"><p><a name="201021" style="display: none;">[Topic 201021]</a></p>
	<h4 id="t234514" class="heading4">ServerSettings</h4>
<p class="bodytext">Указывает настройки сервера для KAV HTTPD. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201056" class="englishcrossreferencetemplate" href="#201026" target="_self">ConnectionString</a></li><li class="listbullet1"><a id="h201057" class="englishcrossreferencetemplate" href="#201027" target="_self">MaxIncomingConnectionsNum</a></li><li class="listbullet1"><a id="h201058" class="englishcrossreferencetemplate" href="#201028" target="_self">MaxHTTPSessionsNum</a></li><li class="listbullet1"><a id="h201059" class="englishcrossreferencetemplate" href="#201029" target="_self">MaxTCPFileSize</a></li><li class="listbullet1"><a id="h201060" class="englishcrossreferencetemplate" href="#201030" target="_self">SessionTimeout</a></li><li class="listbullet1"><a id="h201061" class="englishcrossreferencetemplate" href="#201031" target="_self">Flags</a></li><li class="listbullet1"><a id="h201062" class="englishcrossreferencetemplate" href="#200613" target="_self">TlsCertificateKeyFile</a></li><li class="listbullet1"><a id="h201063" class="englishcrossreferencetemplate" href="#200614" target="_self">TlsCertificateFile</a></li><li class="listbullet1"><a id="h201539" class="englishcrossreferencetemplate" href="#201900" target="_self">CORS</a></li><li class="listbullet1"><a id="h207358" class="englishcrossreferencetemplate" href="#207348" target="_self">KeepAliveSettings</a></li><li class="listbullet1"><a id="h224310" class="englishcrossreferencetemplate" href="#222092" target="_self">AuthSettings</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">ServerSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ServerSettings&gt;</p>
<p class="program2">&lt;ConnectionString&gt;/tmp/.kavhttpd&lt;/ConnectionString&gt;</p>
<p class="program2">&lt;MaxIncomingConnectionsNum&gt;100&lt;/MaxIncomingConnectionsNum&gt;</p>
<p class="program2">&lt;MaxHTTPSessionsNum&gt;50&lt;/MaxHTTPSessionsNum&gt;</p>
<p class="program2">&lt;MaxTCPFileSize&gt;100&lt;/MaxTCPFileSize&gt;</p>
<p class="program2">&lt;SessionTimeout&gt;1000&lt;/SessionTimeout&gt;</p>
<p class="program2">&lt;Flags&gt;<code class="programcharacter">KAV_SHT_ENGINE_KSN</code> | <code class="programcharacter">KAV_SHT_ENGINE_APUF</code>&lt;/Flags&gt;</p>
<p class="program2">&lt;<code class="programcharacter">TlsCertificateKeyFile</code>&gt;opt/kaspersky/http_data/https_key.pem&lt;/<code class="programcharacter">TlsCertificateKeyFile</code>&gt;</p>
<p class="program2">&lt;<code class="programcharacter">TlsCertificateFile</code>&gt;opt/kaspersky/http_data/https_cert.crt&lt;/<code class="programcharacter">TlsCertificateFile</code>&gt;</p>
<p class="program2">&lt;CORS&gt;</p>
<p class="program3">&lt;AccessControlAllowOrigin&gt;http://example.com&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program3">&lt;AccessControlAllowOrigin&gt;https://www.kaspersky.com&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program2">&lt;/CORS&gt;</p>
<p class="program2">&lt;KeepAliveSettings&gt;</p>
<p class="program3">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program3">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program3">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program2">&lt;/KeepAliveSettings&gt;</p>
<p class="program2">&lt;AuthSettings&gt;</p>
<p class="program3">&lt;UseAccessToken&gt;0&lt;/UseAccessToken&gt; &lt;!--Enable or disable API-token authentication --&gt;</p>
<p class="program3">&lt;AuthRequestField&gt;Authorization&lt;/AuthRequestField&gt;</p>
<p class="program3">&lt;UseBearerAuthScheme&gt;1&lt;/UseBearerAuthScheme&gt;</p>
<p class="program3">&lt;AccessTokens&gt;</p>
<p class="program4">&lt;Token&gt;</p>
<p class="program5">&lt;Name&gt;Unlimited key&lt;/Name&gt;</p>
<p class="program5">&lt;Value&gt;SldYQTUyOUNVMnE3VWR2N3Izamk2QkVNc2hhLTV5dTBLcVUzeXZLdGYtNkkrVFUyQUVRQUNLQUFCSWdwRUlJTQ==&lt;/Value&gt;</p>
<p class="program5">&lt;Description&gt;Kaspersky Scan Engine Clients. Full access scope&lt;/Description&gt;</p>
<p class="program5">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program4">&lt;/Token&gt;</p>
<p class="program4">&lt;Token&gt;</p>
<p class="program5">&lt;Name&gt;Key for URL-scanning&lt;/Name&gt;</p>
<p class="program5">&lt;Value&gt;XUmCkYURUdWQldFGIT3TlEQUQQwkBy2LLNaNMVtrkSQUR2kSNUZV=NT2zLRzQJycVW5VNhUVOdLVcUd3YeVFnT=h&lt;/Value&gt;</p>
<p class="program5">&lt;Description&gt;Server access key. Only URL-scanning&lt;/Description&gt;</p>
<p class="program5">&lt;Enabled&gt;0&lt;/Enabled&gt;</p>
<p class="program4">&lt;/Token&gt;</p>
<p class="program3">&lt;/AccessTokens&gt;</p>
<p class="program2">&lt;/AuthSettings&gt;</p>
<p class="program">&lt;/ServerSettings&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201026"><p><a name="201026" style="display: none;">[Topic 201026]</a></p>
	<h5 id="t234310" class="heading5">ConnectionString</h5>
<p class="bodytext">Указывает IP-адрес и порт для Kaspersky Scan Engine посредством протокола (<code class="programcharacter">http://</code> или <code class="programcharacter">https://</code>) или путь к UNIX-сокету, который используется Kaspersky Scan Engine. Значение этого элемента должно быть строкой.</p>
<p class="attentionbody">Если вы хотите использовать протокол HTTPS, элементы <a id="h201062" class="englishcrossreferencetemplate" href="#200613" target="_self">TlsCertificateKeyFile</a> и <a id="h201063" class="englishcrossreferencetemplate" href="#200614" target="_self">TlsCertificateFile</a> являются обязательными.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; ConnectionString</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Обязательный параметр. Значение по умолчанию: <code class="programcharacter">/tmp/.kavhttpd</code> в Linux и <code class="programcharacter">127.0.0.1:9999</code> в Windows. Можно указать IP-адрес и порт для TCP-соединения в следующем формате: <code class="programcharacter">protocol://ip_addr:port</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ConnectionString&gt;/tmp/.kavhttpd&lt;/ConnectionString&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201027"><p><a name="201027" style="display: none;">[Topic 201027]</a></p>
	<h5 id="t234454" class="heading5">MaxIncomingConnectionsNum</h5>
<p class="bodytext">Указывает максимальное количество ожидающих TCP-соединений с Kaspersky Scan Engine в режиме HTTP. Дополнительные соединения могут быть прерваны.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; MaxIncomingConnectionsNum</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">100</code>. </p>
<p class="bodytext">Смотрите также примеры <a id="h180043" class="englishcrossreferencetemplate" href="#179869" target="_self">настройки очереди подключений в режиме HTTP</a>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxIncomingConnectionsNum&gt;100&lt;/MaxIncomingConnectionsNum&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201028"><p><a name="201028" style="display: none;">[Topic 201028]</a></p>
	<h5 id="t234452" class="heading5">MaxHTTPSessionsNum</h5>
<p class="bodytext">Указывает максимальное количество активных TCP-соединений, которые Kaspersky Scan Engine может поддерживать одновременно.</p>
<p class="attentionbody">Не рекомендуется указывать значение, превышающее количество TCP-соединений, которые ваш HTTP-клиент может одновременно поддерживать с Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; MaxHTTPSessionsNum</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. Значение по умолчанию: <code class="programcharacter">10</code>. Если вы установите <code class="programcharacter">MaxHTTPSessionsNum</code> равным <code class="programcharacter">0</code>, будет использовано значение по умолчанию. </p>
<p class="bodytext">Смотрите также примеры <a id="h180043" class="englishcrossreferencetemplate" href="#179869" target="_self">настройки очереди подключений в режиме HTTP</a>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxHTTPSessionsNum&gt;50&lt;/MaxHTTPSessionsNum&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201029"><p><a name="201029" style="display: none;">[Topic 201029]</a></p>
	<h5 id="t234457" class="heading5">MaxTCPFileSize</h5>
<p class="bodytext">Указывает максимальный допустимый размер передаваемого в Kaspersky Scan Engine заголовка и тела HTTP-сообщения.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; MaxTCPFileSize</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. Рекомендуется выделять по крайней мере 100 КБ для заголовков сообщения.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">104857600</code> (100 МБ). Если вы установите <code class="programcharacter">MaxTCPFileSize</code> равным <code class="programcharacter">0</code>, будет использовано значение по умолчанию.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxTCPFileSize&gt;100&lt;/MaxTCPFileSize&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201030"><p><a name="201030" style="display: none;">[Topic 201030]</a></p>
	<h5 id="t234516" class="heading5">SessionTimeout</h5>
<p class="bodytext">Указывает тайм-аут на обработку запроса и отправку ответа (в миллисекундах). </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; SessionTimeout</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. Значение по умолчанию: <code class="programcharacter">1000</code>. Если вы установите <code class="programcharacter">SessionTimeout</code> равным <code class="programcharacter">0</code>, тайм-аут ожидания для обработки запроса и отправки ответа не ограничен. Смотрите также подробную информацию о <a id="h179922" class="englishcrossreferencetemplate" href="#179870" target="_self">настройке тайм-аута сеанса</a>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;SessionTimeout&gt;1000&lt;/SessionTimeout&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201031"><p><a name="201031" style="display: none;">[Topic 201031]</a></p>
	<h5 id="t234357" class="heading5">Flags</h5>
<p class="bodytext">Указывает параметры инициализации Kaspersky Scan Engine. Параметры инициализации определяются комбинацией флагов, разделенных вертикальными чертами (<code class="programcharacter">|</code>).</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; Flags</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть строкой.</p>
<p class="bodytext">Возможные значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_KLAV</code><p class="listcontinue1">Включает антивирусный движок KLAV.</p>
<p class="attentioncontinue1">Если вы указали этот флаг, указывать флаг <code class="programcharacter">KAV_SHT_ENGINE_KLAVEMU</code> не обязательно. Движок KLAV автоматически включает эмулятор KLAV.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_KLAVEMU</code><p class="listcontinue1">Включает глубинный эвристический анализ (эмулятор KLAV). Укажите этот флаг, если вы хотите использовать эвристику.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_WMUF</code><p class="listcontinue1">Включает обнаружение вредоносных веб-адресов.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_APUF</code><p class="listcontinue1">Включает обнаружение фишинговых веб-адресов.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_KSN</code><p class="listcontinue1">Включает проверку репутации файлов и URL-адресов в Kaspersky Security Network (KSN).</p>
<p class="attentioncontinue1">Перед установкой флага <code class="programcharacter">KAV_SHT_ENGINE_KSN</code> убедитесь, что ваш файл ключа позволяет использовать эту функцию и что вы приняли условия Пользовательского соглашения для KSN.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_STATISTIC_MAIL</code><p class="listcontinue1">Включает передачу статистики в KSN в операционной системе Linux.</p>
<p class="attentioncontinue1">Прежде чем указывать флаг <code class="programcharacter">KAV_SHT_ENGINE_STATISTIC_MAIL</code>, убедитесь, что ваш файл ключа позволяет вам использовать эти функции.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_SHT_ENGINE_STATISTIC</code><p class="listcontinue1">Включает передачу статистики в KSN в операционной системе Windows.</p>
<p class="attentioncontinue1">Прежде чем указывать флаг <code class="programcharacter">KAV_SHT_ENGINE_STATISTIC</code>, убедитесь, что ваш файл ключа позволяет вам использовать эти функции.</p>
</li></ul><p class="warningbody">Обратите внимание, что, указывая флаг <code class="programcharacter">KAV_SHT_ENGINE_KSN</code>, <code class="programcharacter">KAV_SHT_ENGINE_STATISTIC_MAIL</code> или <code class="programcharacter">KAV_SHT_ENGINE_STATISTIC</code>, вы соглашаетесь передавать данные, описанные в соответствующем файле About data provision*.txt, в &quot;Лабораторию Касперского&quot;. Смотрите также подробную информацию <a id="h180046" class="englishcrossreferencetemplate" href="#185034" target="_self">о предоставлении данных</a> и <a id="h180773" class="englishcrossreferencetemplate" href="#180772" target="_self">статистику, отправленную в KSN</a>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Flags&gt;<code class="programcharacter">KAV_SHT_ENGINE_KSN</code> | <code class="programcharacter">KAV_SHT_ENGINE_APUF</code>&lt;/Flags&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200613"><p><a name="200613" style="display: none;">[Topic 200613]</a></p>
	<h5 id="t234535" class="heading5">TlsCertificateKeyFile</h5>
<p class="bodytext">Указывает путь к файлу закрытого ключа.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; TlsCertificateKeyFile</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла kavhttpd.</p>
<p class="bodytext">Этот элемент является обязательным, если элемент <code class="programcharacter">ConnectionString</code> содержит протокол <code class="programcharacter">https://</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;<code class="programcharacter">TlsCertificateKeyFile</code>&gt;opt/kaspersky/http_data/https_key.pem&lt;/<code class="programcharacter">TlsCertificateKeyFile</code>&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200614"><p><a name="200614" style="display: none;">[Topic 200614]</a></p>
	<h5 id="t234534" class="heading5">TlsCertificateFile</h5>
<p class="bodytext">Указывает путь к файлу сертификата.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; TlsCertificateFile</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла kavhttpd.</p>
<p class="bodytext">Этот элемент является обязательным, если элемент <code class="programcharacter">ConnectionString</code> содержит протокол <code class="programcharacter">https://</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;<code class="programcharacter">TlsCertificateFile</code>&gt;opt/kaspersky/http_data/https_cert.crt&lt;/<code class="programcharacter">TlsCertificateFile</code>&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201900"><p><a name="201900" style="display: none;">[Topic 201900]</a></p>
	<h5 id="t234313" class="heading5">CORS</h5>
<p class="bodytext">Содержит настройки механизма совместного использования ресурсов между источниками.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; CORS</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">AccessControlAllowOrigin</em><p class="listcontinue1">Указывает список источников (IP-адреса или имена хостов с протоколом), которым должен быть предоставлен доступ к службе kavhttpd. </p>
<p class="listcontinue1">Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2">IP-адрес или имя хоста источника, включая протокол (http:// или https://), который инициирует запросы к службе kavhttpd</li><li class="listbullet2"><code class="programcharacter">*</code><p class="listcontinue2">Это значение позволяет любому источнику получить доступ к службе kavhttpd.</p>
</li><li class="listbullet2">Пустое значение.</li></ul></li></ul><p class="bodytext">Kaspersky Scan Engine в режиме HTTP может получить HTTP-запрос с полем заголовка <code class="programcharacter">Origin</code>, в котором указан IP-адрес или имя хоста, инициирующего запрос. Если файл конфигурации режима HTTP содержит один или несколько элементов <code class="programcharacter">AccessControlAllowOrigin</code>, значение поля заголовка <code class="programcharacter">Origin</code> сопоставляется со значениями, определенными в этих элементах. Возможны следующие результаты сканирования: </p>
<ul class="listbullet1"><li class="listbullet1">Значение поля заголовка <code class="programcharacter">Origin</code> совпадает по крайней мере с одним из значений элемента <code class="programcharacter">AccessControlAllowOrigin</code>.<p class="listcontinue1">В этом случае значение поля заголовка <code class="programcharacter">Origin</code> будет указано в поле <code class="programcharacter">Access-Control-Allow-Origin</code> заголовка ответа. </p> </li><li class="listbullet1">Нет совпадений. <p class="listcontinue1">В этом случае <code class="programcharacter">Access-Control-Allow-Origin</code> будет содержать значение <code class="programcharacter">https://scanengine.kaspersky.com</code>.</p> </li><li class="listbullet1">По крайней мере, один из элементов <code class="programcharacter">AccessControlAllowOrigin</code> содержит значение <code class="programcharacter">*</code>.<p class="listcontinue1">В этом случае поле заголовка ответа <code class="programcharacter">Access-Control-Allow-Origin</code> будет содержать значение <code class="programcharacter">*</code> независимо от значения поля заголовка <code class="programcharacter">Origin</code>.</p> </li></ul><p class="bodytext">Если в запросе отсутствует поле заголовка <code class="programcharacter">Origin</code>, служба kavhttpd обрабатывает его стандартным образом.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;CORS&gt;</p>
<p class="program2">&lt;AccessControlAllowOrigin&gt;http://example.com&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program2">&lt;AccessControlAllowOrigin&gt;https://www.kaspersky.com&lt;/AccessControlAllowOrigin&gt;</p>
<p class="program">&lt;/CORS&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207348"><p><a name="207348" style="display: none;">[Topic 207348]</a></p>
	<h5 id="t234415" class="heading5">KeepAliveSettings</h5>
<p class="bodytext">По умолчанию Kaspersky Scan Engine поддерживает Keep-Alive (постоянные соединения), поэтому HTTP-клиент может использовать одно и то же соединение для отправки нескольких запросов. С помощью <code class="programcharacter">KeepAliveSettings</code> вы можете настроить поддержку Keep-Alive или даже отключить ее.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings</code> &gt; <code class="programcharacter">KeepAliveSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h207353" class="englishcrossreferencetemplate" href="#207346" target="_self">Enabled</a>.</li><li class="listbullet1"><a id="h207354" class="englishcrossreferencetemplate" href="#207350" target="_self">TimeoutMs</a>.</li><li class="listbullet1"><a id="h207355" class="englishcrossreferencetemplate" href="#207352" target="_self">MaxRequests</a>.</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;KeepAliveSettings&gt;</p>
<p class="program2">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program2">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program2">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program">&lt;/KeepAliveSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207346"><p><a name="207346" style="display: none;">[Topic 207346]</a></p>
	<h6 id="t234339" class="heading6">Enabled</h6>
<p class="bodytext">Указывает, включена ли поддержка Keep-Alive.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; KeepAliveSettings &gt; Enabled</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимые значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code> – поддержка Keep-Alive выключена.</li><li class="listbullet1"><code class="programcharacter">1</code> – поддержка Keep-Alive включена.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">1</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207350"><p><a name="207350" style="display: none;">[Topic 207350]</a></p>
	<h6 id="t234532" class="heading6">TimeoutMs</h6>
<p class="bodytext">Время, в течение которого неактивное соединение должно оставаться открытым (в миллисекундах) в ожидании нового запроса от HTTP-клиента.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; KeepAliveSettings &gt; TimeoutMs</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимое значение – это целое число от <code class="programcharacter">0</code> до <code class="programcharacter">18000</code> <code class="programcharacter">(</code>миллисекунд).</p>
<p class="bodytext">Если для <code class="programcharacter">TimeoutMs</code> установлено значение <code class="programcharacter">0</code>, ограничение по времени для подключения отсутствует.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">5000</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207352"><p><a name="207352" style="display: none;">[Topic 207352]</a></p>
	<h6 id="t234455" class="heading6">MaxRequests</h6>
<p class="bodytext">Максимальное количество запросов на одно подключение до его закрытия.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; KeepAliveSettings &gt; MaxRequests</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимое значение – это целое число от <code class="programcharacter">0</code> до <code class="programcharacter">1000</code>.</p>
<p class="bodytext">Если для <code class="programcharacter">MaxRequests</code> установлено значение <code class="programcharacter">0</code>, количество запросов на одно подключение не ограничено.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">1000</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="222092"><p><a name="222092" style="display: none;">[Topic 222092]</a></p>
	<h5 id="t234279" class="heading5">AuthSettings</h5>
<p class="bodytext">Настройки аутентификации по токену API.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings</code> &gt; <code class="programcharacter">AuthSettings</code></p>
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h224179" class="englishcrossreferencetemplate" href="#222099" target="_self">UseAccessToken</a></li><li class="listbullet1"><a id="h222122" class="englishcrossreferencetemplate" href="#222116" target="_self">AuthRequestField</a></li><li class="listbullet1"><a id="h224180" class="englishcrossreferencetemplate" href="#222121" target="_self">UseBearerAuthScheme</a></li><li class="listbullet1"><a id="h224181" class="englishcrossreferencetemplate" href="#224176" target="_self">AccessTokens</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;AuthSettings&gt;</p>
<p class="program2">&lt;UseAccessToken&gt;0&lt;/UseAccessToken&gt; &lt;!--Enable or disable API-token authentication --&gt;</p>
<p class="program2">&lt;AuthRequestField&gt;Authorization&lt;/AuthRequestField&gt;</p>
<p class="program2">&lt;UseBearerAuthScheme&gt;1&lt;/UseBearerAuthScheme&gt;</p>
<p class="program2">&lt;AccessTokens&gt;</p>
<p class="program3">&lt;Token&gt;</p>
<p class="program4">&lt;Name&gt;Unlimited key&lt;/Name&gt;</p>
<p class="program4">&lt;Value&gt;SldYQTUyOUNVMnE3VWR2N3Izamk2QkVNc2hhLTV5dTBLcVUzeXZLdGYtNkkrVFUyQUVRQUNLQUFCSWdwRUlJTQ==&lt;/Value&gt;</p>
<p class="program4">&lt;Description&gt;ScanEngine Clients. Full access scope&lt;/Description&gt;</p>
<p class="program4">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program3">&lt;/Token&gt;</p>
<p class="program3">&lt;Token&gt;</p>
<p class="program4">&lt;Name&gt;Key for URL-scanning&lt;/Name&gt;</p>
<p class="program4">&lt;Value&gt;XUmCkYURUdWQldFGIT3TlEQUQQwkBy2LLNaNMVtrkSQUR2kSNUZV=NT2zLRzQJycVW5VNhUVOdLVcUd3YeVFnT=h&lt;/Value&gt;</p>
<p class="program4">&lt;Description&gt;Server access key. Only URL-scanning&lt;/Description&gt;</p>
<p class="program4">&lt;Enabled&gt;0&lt;/Enabled&gt;</p>
<p class="program3">&lt;/Token&gt;</p>
<p class="program2">&lt;/AccessTokens&gt;</p>
<p class="program">&lt;/AuthSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="222099"><p><a name="222099" style="display: none;">[Topic 222099]</a></p>
	<h6 id="t234559" class="heading6">UseAccessToken</h6>
<p class="bodytext">Указывает, включена ли авторизация по токену API.</p>
<p class="attentionbody">Если вы включили авторизацию по токену API и служба kavhttpd не запущена, запуск klScanEngineUI также инициирует запуск службы kavhttpd.</p>
<p class="bodytext">Элемент <code class="programcharacter">UseAccessToken</code> не может быть пустым. Элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; AuthSettings &gt; UseAccessToken</code></p>
<p class="introheading">Значение</p>
<p class="bodytext">Допустимые значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code> – авторизация по токену API выключена.</li><li class="listbullet1"><code class="programcharacter">1</code> – авторизация по токену API включена.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">0</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseAccessToken&gt;0&lt;/UseAccessToken&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="222116"><p><a name="222116" style="display: none;">[Topic 222116]</a></p>
	<h6 id="t234278" class="heading6">AuthRequestField</h6>
<p class="bodytext">Указывает имя поля заголовка запроса, содержащего токен API.</p>
<p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, элемент <code class="programcharacter">AuthRequestField</code> является обязательным.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; AuthSettings &gt; AuthRequestField</code></p>
<p class="introheading">Значение</p>
<p class="bodytext">Значение должно соответствовать следующим требованиям:</p>
<ul class="listbullet1"><li class="listbullet1">Длина от 3 до 40 символов.</li><li class="listbullet1">Состоит из символов, разрешенных для имен полей заголовков в соответствии с <a class="hyperlinktemplate" href="https://tools.ietf.org/html/rfc7230#section-3.2.6" target="_blank">RFC 7230</a>.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">Authorization</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;AuthRequestField&gt;Authorization&lt;/AuthRequestField&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="222121"><p><a name="222121" style="display: none;">[Topic 222121]</a></p>
	<h6 id="t234561" class="heading6">UseBearerAuthScheme</h6>
<p class="bodytext">Указывает, поддерживает ли Kaspersky Scan Engine схему аутентификации Bearer. Если включена поддержка схемы аутентификации Bearer, Kaspersky Scan Engine ожидает, что поле заголовка запроса, имя которого указано в <a id="h222122" class="englishcrossreferencetemplate" href="#222116" target="_self">AuthRequestField</a>, начинается с префикса <code class="programcharacter">Bearer</code>.</p>
<p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, элемент <code class="programcharacter">UseBearerAuthScheme</code> является обязательным.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings &gt; AuthSettings &gt; UseBearerAuthScheme</code></p>
<p class="introheading">Значение</p>
<p class="bodytext">Допустимые значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code> – поддержка схемы аутентификации Bearer выключена.</li><li class="listbullet1"><code class="programcharacter">1</code> – поддержка схемы аутентификации Bearer включена.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">1</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseBearerAuthScheme&gt;1&lt;/UseBearerAuthScheme&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="224176"><p><a name="224176" style="display: none;">[Topic 224176]</a></p>
	<h6 id="t234271" class="heading6">AccessTokens</h6>
<p class="bodytext">Этот элемент является контейнером для элементов <a id="h224178" class="englishcrossreferencetemplate" href="#224177" target="_self">Token</a>. Если включена аутентификация HTTP-клиентов, Kaspersky Scan Engine предоставляет доступ к своим функциям только тем HTTP-клиентам, которые успешно прошли аутентификацию с помощью токена API.</p>
<p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, элемент <code class="programcharacter">AccessTokens</code> является обязательным.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings</code> &gt; <code class="programcharacter">AuthSettings &gt; AccessTokens</code></p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;AccessTokens&gt;</p>
<p class="program2">&lt;Token&gt;</p>
<p class="program3">&lt;Name&gt;Unlimited key&lt;/Name&gt;</p>
<p class="program3">&lt;Value&gt;SldYQTUyOUNVMnE3VWR2N3Izamk2QkVNc2hhLTV5dTBLcVUzeXZLdGYtNkkrVFUyQUVRQUNLQUFCSWdwRUlJTQ==&lt;/Value&gt;</p>
<p class="program3">&lt;Description&gt;ScanEngine Clients. Full access scope&lt;/Description&gt;</p>
<p class="program3">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program2">&lt;/Token&gt;</p>
<p class="program2">&lt;Token&gt;</p>
<p class="program3">&lt;Name&gt;Key for URL-scanning&lt;/Name&gt;</p>
<p class="program3">&lt;Value&gt;XUmCkYURUdWQldFGIT3TlEQUQQwkBy2LLNaNMVtrkSQUR2kSNUZV=NT2zLRzQJycVW5VNhUVOdLVcUd3YeVFnT=h&lt;/Value&gt;</p>
<p class="program3">&lt;Description&gt;Server access key. Only URL-scanning&lt;/Description&gt;</p>
<p class="program3">&lt;Enabled&gt;0&lt;/Enabled&gt;</p>
<p class="program2">&lt;/Token&gt;</p>
<p class="program">&lt;/AccessTokens&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="224177"><p><a name="224177" style="display: none;">[Topic 224177]</a></p>
	<h6 id="t234536" class="heading6">Token</h6>
<p class="bodytext">Указывает параметры токена API, такие как его имя и значение. В элементе <code class="programcharacter">AccessTokens</code> может быть несколько элементов <code class="programcharacter">Token</code>.</p>
<p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, должен быть хотя бы один элемент <code class="programcharacter">Token</code>, который не может быть пустым. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ServerSettings</code> &gt; <code class="programcharacter">AuthSettings &gt; AccessTokens &gt; Token</code></p>
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1">Name;</li><li class="listbullet1">Value;</li><li class="listbullet1">Description;</li><li class="listbullet1">Enabled.</li></ul><p class="bodytext">См. описание этих элементов ниже.</p>
<p class="introheading">Token &gt; Name</p>
<p class="bodytext">Уникальное имя токена. Каждый токен в элементе <code class="programcharacter">AccessTokens</code> должен иметь уникальное имя. </p>
<p class="bodytext">Имя должно содержать от 1 до 40 символов Unicode.</p>
<p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, должен быть хотя бы один элемент <code class="programcharacter">Name</code>, который не может быть пустым. </p>
<p class="introheading">Token &gt; Value</p>
<p class="bodytext">Элемент, содержащий зашифрованное значение токена API, длиной 88 символов ASCII.</p>
<p class="bodytext">Не указывайте это значение непосредственно в файле конфигурации; используйте вместо него <a id="h224242" class="englishcrossreferencetemplate" href="#224195" target="_self">Kaspersky Scan Engine GUI</a> или <a id="h180277" class="englishcrossreferencetemplate" href="#179831" target="_self">kl_access_util</a>. Когда токен добавляется через Kaspersky Scan Engine GUI или kl_access_util, его значение шифруется. Не помещайте исходный токен в элемент <code class="programcharacter">Value</code>.</p>
<p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, должен быть хотя бы один элемент <code class="programcharacter">Value</code>, который не может быть пустым.</p>
<p class="introheading">Token &gt; Description</p>
<p class="bodytext">Описание содержит дополнительную информацию о токене. Например, имя клиента, использующего токен, или дата и время создания токена.</p>
<p class="bodytext">Описание может содержать до 1000 символов Unicode.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Token &gt; Enabled</p>
<p class="bodytext">Указывает, должен ли Kaspersky Scan Engine авторизовать клиентов, указавших токен в заголовке запроса.</p>
<p class="bodytext">Возможные значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code> – токен выключен. Kaspersky Scan Engine не авторизует клиентов, указавших токен в заголовке запроса.</li><li class="listbullet1"><code class="programcharacter">1</code> – токен включен. Kaspersky Scan Engine может авторизовать клиентов, указавших токен в заголовке запроса.</li></ul><p class="bodytext">Если для элемента <code class="programcharacter">UseAccessToken</code> установлено значение <code class="programcharacter">1</code>, должен быть хотя бы один элемент <code class="programcharacter">Enabled</code>, который не может быть пустым.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <code class="programcharacter">Token</code>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Token&gt;</p>
<p class="program2">&lt;Name&gt;Unlimited key&lt;/Name&gt;</p>
<p class="program2">&lt;Value&gt;SldYQTUyOUNVMnE3VWR2N3Izamk2QkVNc2hhLTV5dTBLcVUzeXZLdGYtNkkrVFUyQUVRQUNLQUFCSWdwRUlJTQ==&lt;/Value&gt;</p>
<p class="program2">&lt;Description&gt;Kaspersky Scan Engine Clients. Full access scope&lt;/Description&gt;</p>
<p class="program2">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program">&lt;/Token&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201022"><p><a name="201022" style="display: none;">[Topic 201022]</a></p>
	<h4 id="t234419" class="heading4">KSNSettings</h4>
<p class="bodytext">Указывает параметры KSN. </p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h200626" class="englishcrossreferencetemplate" href="#200623" target="_self">UrlCheckTimeoutMs</a></li><li class="listbullet1"><a id="h200627" class="englishcrossreferencetemplate" href="#200624" target="_self">ObjectCheckOnDemandTimeoutMs</a></li><li class="listbullet1"><a id="h201066" class="englishcrossreferencetemplate" href="#201036" target="_self">CacheSizeKb</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">KSNSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;KSNSettings&gt;</p>
<p class="program2">&lt;UrlCheckTimeoutMs&gt;20000&lt;/UrlCheckTimeoutMs&gt;</p>
<p class="program2">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
<p class="program2">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
<p class="program">&lt;/KSNSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200623"><p><a name="200623" style="display: none;">[Topic 200623]</a></p>
	<h5 id="t234558" class="heading5">UrlCheckTimeoutMs</h5>
<p class="bodytext">Указывает максимальное время, в течение которого Kaspersky Scan Engine ожидает ответа от KSN при выполнении проверки репутации URL-адресов (в миллисекундах). </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings &gt; UrlCheckTimeoutMs</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">20000</code>.</p>
<p class="attentionbody">Обратите внимание, что этот элемент устанавливает тайм-аут только на проверки репутации в KSN. В этот тайм-аут не входит время, необходимое для отправки запроса на сканирование и получения статуса репутации от KSN.<br> Этот тайм-аут может быть превышен, если KSN обнаружит, что статус репутации просканированного файла — <em class="emphasischaracter">Danger</em>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UrlCheckTimeoutMs&gt;20000&lt;/UrlCheckTimeoutMs&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200624"><p><a name="200624" style="display: none;">[Topic 200624]</a></p>
	<h5 id="t234460" class="heading5">ObjectCheckOnDemandTimeoutMs</h5>
<p class="bodytext">Указывает тайм-аут на ожидание ответа от KSN при проверке репутации файлов (в миллисекундах). </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings &gt; ObjectCheckOnDemandTimeoutMs</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">10000</code>.</p>
<p class="attentionbody">Обратите внимание, что этот элемент устанавливает тайм-аут только на проверки репутации в KSN. В этот тайм-аут не входит время, необходимое для отправки запроса на сканирование и получения статуса репутации от KSN.<br> Этот тайм-аут может быть превышен, если KSN обнаружит, что статус репутации просканированного файла — <em class="emphasischaracter">Danger</em>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201036"><p><a name="201036" style="display: none;">[Topic 201036]</a></p>
	<h5 id="t234289" class="heading5">CacheSizeKb</h5>
<p class="bodytext">Указывает максимальный размер кеша статуса KSN (в килобайтах). Kaspersky Scan Engine использует этот кеш, чтобы хранить информацию о репутации объектов, полученную от KSN.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings &gt; CacheSizeKb</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. Если значение параметра равно <code class="programcharacter">0</code>, кеш статуса KSN не используется. Максимальное возможное значение: <code class="programcharacter">262143</code>.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">30720</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201023"><p><a name="201023" style="display: none;">[Topic 201023]</a></p>
	<h4 id="t234414" class="heading4">KAVScanningSettings</h4>
<p class="bodytext">Указывает настройки сканирования для KAV SDK, который является частью Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201067" class="englishcrossreferencetemplate" href="#201037" target="_self">ScannersCount</a></li><li class="listbullet1"><a id="h201068" class="englishcrossreferencetemplate" href="#201038" target="_self">ThreadsCount</a></li><li class="listbullet1"><a id="h201069" class="englishcrossreferencetemplate" href="#200631" target="_self">QueueLen</a></li><li class="listbullet1"><a id="h201070" class="englishcrossreferencetemplate" href="#201040" target="_self">Flags</a></li><li class="listbullet1"><a id="h201071" class="englishcrossreferencetemplate" href="#201041" target="_self">Mode</a></li><li class="listbullet1"><a id="h206217" class="englishcrossreferencetemplate" href="#207145" target="_self">MaxArchivesScanningDepth</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">KAVScanningSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;KAVScanningSettings&gt;</p>
<p class="program2">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
<p class="program2">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
<p class="program2">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
<p class="program2">&lt;Flags&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILBASES | KAV_O_M_MAILPLAIN | KAV_O_M_HEURISTIC_LEVEL_DETAIL&lt;/Flags&gt;</p>
<p class="program2">&lt;Mode&gt;KAV_SKIP&lt;/Mode&gt;</p>
<p class="program2">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
<p class="program"><code class="programcharacter">&lt;/KAVScanningSe</code>tti<code class="programcharacter">ngs&gt;</code></p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201037"><p><a name="201037" style="display: none;">[Topic 201037]</a></p>
	<h5 id="t234497" class="heading5">ScannersCount</h5>
<p class="bodytext">Указывает количество сканирующих процессов. Вы можете использовать до 256 таких процессов.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings &gt; ScannersCount</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">4</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201038"><p><a name="201038" style="display: none;">[Topic 201038]</a></p>
	<h5 id="t234529" class="heading5">ThreadsCount</h5>
<p class="bodytext">Указывает количество одновременно работающих сканирующих программных потоков. Вы можете использовать до 256 таких потоков.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings &gt; ThreadsCount</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">8</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200631"><p><a name="200631" style="display: none;">[Topic 200631]</a></p>
	<h5 id="t234468" class="heading5">QueueLen</h5>
<p class="bodytext">Указывает максимальную длину очереди задач сканирования.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings &gt; QueueLen</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">1024</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201040"><p><a name="201040" style="display: none;">[Topic 201040]</a></p>
	<h5 id="t234358" class="heading5">Flags</h5>
<p class="bodytext">Указывает режим сканирования.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings &gt; Flags</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Режимы сканирования определяются комбинацией флагов, разделенных вертикальными чертами (<code class="programcharacter">|</code>). Значение этого элемента должно быть строкой. </p>
<p class="bodytext">Возможные значения: </p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_O_M_PACKED</code><p class="listcontinue1">Включает сканирование упакованных исполняемых файлов.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_ARCHIVED</code><p class="listcontinue1">Включает сканирование архивов.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_MAILBASES</code><p class="listcontinue1">Включает сканирование почтовых баз.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_MAILPLAIN</code><p class="listcontinue1">Включает сканирование электронной почты.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_HEURISTIC_LEVEL_SHALLOW</code><p class="listcontinue1">Устанавливает уровень сканирования расширенного эвристического анализатора в значение <code class="programcharacter">shallow</code> (уровень Low в графическом интерфейсе пользователя).</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_HEURISTIC_LEVEL_MEDIUM</code><p class="listcontinue1">Устанавливает уровень сканирования расширенного эвристического анализатора в значение <code class="programcharacter">medium</code> (уровень Medium в графическом интерфейсе пользователя).</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_HEURISTIC_LEVEL_DETAIL</code><p class="listcontinue1">Устанавливает уровень сканирования расширенного эвристического анализатора в значение <code class="programcharacter">detailed</code> (уровень High в графическом интерфейсе пользователя).</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_O_M_MSOFFICE_MACRO</code><p class="listcontinue1">Включает обнаружение макросов в файлах Microsoft Office.</p>
</li></ul><p class="bodytext">Элемент Flags может быть пустым. В этом случае используется значение <code class="programcharacter">0</code>.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILBASES | KAV_O_M_MAILPLAIN | KAV_O_M_HEURISTIC_LEVEL_DETAIL</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Flags&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILBASES | KAV_O_M_MAILPLAIN | KAV_O_M_HEURISTIC_LEVEL_DETAIL&lt;/Flags&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201041"><p><a name="201041" style="display: none;">[Topic 201041]</a></p>
	<h5 id="t234458" class="heading5">Mode</h5>
<p class="bodytext">Указывает режим очистки.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings &gt; Mode</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть строкой. Обязательный параметр.</p>
<p class="bodytext">Возможные значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_SKIP</code><p class="listcontinue1">Если во время сканирования объекта Kaspersky Scan Engine найдет угрозу, рекламную программу или легальную программу, которая может быть использована злоумышленником для нанесения вреда вашим данным, он не предпримет никаких действий над этим объектом. Зараженный объект будет пропущен.</p>
<p class="listcontinue1">Укажите это значение, если вы хотите использовать режим сканирования памяти.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_DELETE</code><p class="listcontinue1">Если во время сканирования объекта Kaspersky Scan Engine найдет угрозу, рекламную программу или легальную программу, которая может быть использована злоумышленником для нанесения вреда вашим данным, он попробует удалить этот объект. Если удаление невозможно, Kaspersky Scan Engine перейдет к сканированию следующего объекта.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_CLEAN_DELETE</code><p class="listcontinue1">Если во время сканирования объекта Kaspersky Scan Engine найдет угрозу, рекламную программу или легальную программу, которая может быть использована злоумышленником для нанесения вреда вашим данным, он попробует вылечить этот объект. Если лечение невозможно, Kaspersky Scan Engine попробует удалить объект. Если удаление невозможно, Kaspersky Scan Engine перейдет к сканированию следующего объекта.</p>
<p class="attentioncontinue1">Вышеуказанные действия будут выполнены только в том случае, если Kaspersky Anti-Virus Engine обнаружит угрозу при обработке запроса <code class="programcharacter">scanfile</code>. Во всех остальных случаях Kaspersky Scan Engine отправляет уведомление только в том случае, если указанные действия могут быть применены к обнаруженному объекту.</p>
</li><li class="listbullet1"><code class="programcharacter">KAV_CLEAN_SKIP</code><p class="listcontinue1">Если во время сканирования объекта Kaspersky Scan Engine найдет угрозу, рекламную программу или легальную программу, которая может быть использована злоумышленником для нанесения вреда вашим данным, он попробует вылечить этот объект. Если лечение невозможно, Kaspersky Scan Engine перейдет к сканированию следующего объекта.</p>
</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">KAV_SKIP</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Mode&gt;KAV_SKIP&lt;/Mode&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207145"><p><a name="207145" style="display: none;">[Topic 207145]</a></p>
	<h5 id="t234450" class="heading5">MaxArchivesScanningDepth</h5>
<p class="bodytext">Указывает максимальную глубину распаковки вложенных архивов при сканировании. Этот параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KAVScanningSettings &gt; MaxArchivesScanningDepth</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. </p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">0</code>.</p>
<p class="bodytext">Рекомендуемое значение: <code class="programcharacter">5</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201024"><p><a name="201024" style="display: none;">[Topic 201024]</a></p>
	<h4 id="t234320" class="heading4">DirectorySettings</h4>
<p class="bodytext">Указывает настройки директорий для KAV SDK, который является частью Kaspersky Scan Engine. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">DirectorySettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201072" class="englishcrossreferencetemplate" href="#201042" target="_self">BasesPath</a> </li><li class="listbullet1"><a id="h201073" class="englishcrossreferencetemplate" href="#200640" target="_self">TempPath</a></li><li class="listbullet1"><a id="h201074" class="englishcrossreferencetemplate" href="#201044" target="_self">LicensePath</a></li><li class="listbullet1"><a id="h201075" class="englishcrossreferencetemplate" href="#201045" target="_self">LicensingMode</a></li><li class="listbullet1"><a id="h201077" class="englishcrossreferencetemplate" href="#201076" target="_self">ScanningPaths</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">DirectorySettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;DirectorySettings&gt;</p>
<p class="program2">&lt;BasesPath&gt;/home/bases&lt;/BasesPath&gt;</p>
<p class="program2">&lt;TempPath&gt;/home/temp&lt;/TempPath&gt;</p>
<p class="program2">&lt;LicensePath&gt;/home/license&lt;/LicensePath&gt;</p>
<p class="program2">&lt;LicensingMode&gt;1&lt;/LicensingMode&gt;</p>
<p class="program2">&lt;ScanningPaths&gt;</p>
<p class="program3">&lt;ScanningPath&gt;&lt;/ScanningPath&gt;</p>
<p class="program2">&lt;/ScanningPaths&gt;</p>
<p class="program">&lt;/DirectorySettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201042"><p><a name="201042" style="display: none;">[Topic 201042]</a></p>
	<h5 id="t234283" class="heading5">BasesPath</h5>
<p class="bodytext">Директория, в которой находится база данных. </p>
<p class="bodytext">Этот элемент является обязательным.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">DirectorySettings &gt; BasesPath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть строкой. </p>
<p class="attentionbody">Обратите внимание, что в системах Windows необходимо указывать полный путь к директории, в которой расположена антивирусная база.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;BasesPath&gt;/home/bases&lt;/BasesPath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200640"><p><a name="200640" style="display: none;">[Topic 200640]</a></p>
	<h5 id="t234527" class="heading5">TempPath</h5>
<p class="bodytext">Указывает директорию, в которой находятся файлы, создаваемые во время работы Kaspersky Scan Engine. </p>
<p class="bodytext">Этот элемент является обязательным.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">DirectorySettings &gt; TempPath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть строкой. Путь до директории должен быть абсолютным.</p>
<p class="warningbody">Не удаляйте файлы из этой директории.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;TempPath&gt;/home/temp&lt;/TempPath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201044"><p><a name="201044" style="display: none;">[Topic 201044]</a></p>
	<h5 id="t234424" class="heading5">LicensePath</h5>
<p class="bodytext">Указывает директорию, в которой хранятся файлы с ID приложения, лицензией и ключом.</p>
<p class="bodytext">Этот элемент является обязательным.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">DirectorySettings &gt; LicensePath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть строкой. Kaspersky Scan Engine ищет эти файлы в следующих директориях:</p>
<ul class="listbullet1"><li class="listbullet1">Директория, указанная в <code class="programcharacter">LicensePath.</code></li><li class="listbullet1">Директория, содержащая исполняемый файл <code class="programcharacter">kavhttpd</code>.</li><li class="listbullet1">Директория <code class="programcharacter">%service_dir%/ppl</code>. Только для систем Linux.</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;LicensePath&gt;/home/license&lt;/LicensePath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201045"><p><a name="201045" style="display: none;">[Topic 201045]</a></p>
	<h5 id="t234428" class="heading5">LicensingMode</h5>
<p class="bodytext">Указывает режим лицензирования, используемый в Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">DirectorySettings &gt; LicensingMode</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Возможные значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">1 – </code><a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">Режим лицензирования офлайн</a>.</li><li class="listbullet1"><code class="programcharacter">2 – </code><a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">Режим лицензирования онлайн</a>.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">1</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;LicensingMode&gt;1&lt;/LicensingMode&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201076"><p><a name="201076" style="display: none;">[Topic 201076]</a></p>
	<h5 id="t234502" class="heading5">ScanningPaths</h5>
<p class="bodytext">Содержит пути к местам расположения, в которых разрешено сканирование, когда HTTP-клиент отправляет запросы на сканирование через TCP-сокет с удаленного компьютера. Сканирование в других местах расположения запрещено. Эти пути находятся в файловой системе компьютера, на котором установлен сервер Kaspersky Scan Engine. Ограничение области сканирования предотвращает проверку всей файловой системы сервера Kaspersky Scan Engine по команде извне.</p>
<p class="bodytext">Kaspersky Scan Engine по умолчанию проверяет объекты в <a id="h201071" class="englishcrossreferencetemplate" href="#201041" target="_self">режиме KAV_SKIP</a>, что означает, что Kaspersky Scan Engine не добавляет и не удаляет объекты в директориях, указанных в <code class="programcharacter">ScanningPath</code>. HTTP-клиент должен отправить объекты для сканирования, а затем удалить их после сканирования.</p>
<p class="attentionbody">Если Kaspersky Scan Engine сканирует объекты в режиме KAV_DELETE, KAV_CLEAN_DELETE или KAV_CLEAN_SKIP, иногда директория, указанная в <code class="programcharacter">ScanningPaths</code>, должна иметь права на запись с правами root.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">DirectorySettings &gt; ScanningPaths</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">ScanningPath</em><p class="listcontinue1">Указывает расположение, где разрешено сканирование по TCP-сокету в режиме сканирования файлов.</p>
<p class="attentioncontinue1">Не рекомендуется использовать ссылки в качестве путей из соображений безопасности. Вместо этого используйте абсолютные пути.</p>
<p class="listcontinue1">Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2">Абсолютный путь до директории.<p class="listcontinue2">Позволяет сканировать файлы, расположенные внутри этой директории и всех ее поддиректорий.</p> <p class="listcontinue2">Директория должна быть расположена на том же компьютере, что и Kaspersky Scan Engine, или на удаленном жестком диске, который смонтирован на этом компьютере.</p> <p class="listcontinue2">Путь должен начинаться с корневой директории файловой системы компьютера, на котором установлен Kaspersky Scan Engine.</p> <p class="listcontinue2">Служба kavhttpd должна иметь права на чтение файлов в этой директории и всех ее поддиректориях.</p> </li><li class="listbullet2">Абсолютный путь до файла.<p class="listcontinue2">Разрешает сканирование указанного файла.</p> <p class="listcontinue2">Файл должен быть расположен на том же компьютере, что и Kaspersky Scan Engine, или на удаленном жестком диске, который смонтирован на этом компьютере.</p> <p class="listcontinue2">Путь должен начинаться с корневой директории файловой системы компьютера, на котором установлен Kaspersky Scan Engine.</p> <p class="listcontinue2">Служба kavhttpd должна иметь права на чтение этого файла.</p> </li><li class="listbullet2"><code class="programcharacter">/</code> (косая черта с наклоном вправо).<p class="listcontinue2">Разрешает сканирование всех файлов.</p> <p class="attentioncontinue2">Только для систем Linux.</p> </li></ul><p class="listcontinue1">Каждое значение должно быть указано внутри отдельного элемента <code class="programcharacter">&lt;ScanningPath&gt;</code>.</p>
</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanningPaths&gt;</p>
<p class="program2">&lt;ScanningPath&gt;&lt;/ScanningPath&gt;</p>
<p class="program">&lt;/ScanningPaths&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200598"><p><a name="200598" style="display: none;">[Topic 200598]</a></p>
	<h4 id="t234562" class="heading4">UseHTTPProxy</h4>
<p class="bodytext">Указывает, использует ли Kaspersky Scan Engine прокси при соединении с интернетом.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UseHTTPProxy</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseHTTPProxy</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Прокси не используется.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Используется прокси.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">UseHTTPProxy</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseHTTPProxy&gt;1&lt;/UseHTTPProxy&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201047"><p><a name="201047" style="display: none;">[Topic 201047]</a></p>
	<h4 id="t234381" class="heading4">HTTPProxy</h4>
<p class="bodytext">Указывает параметры прокси.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">HTTPProxy</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">url</code> – это адрес прокси. Значение этого элемента должно быть строкой.<p class="listcontinue1">Адрес прокси-сервера может быть IPv4-адресом, IPv6-адресом или доменным именем. Не указывайте протокол (<code class="programcharacter">http://</code> или <code class="programcharacter">https://</code>) в этом параметре.</p> <p class="listcontinue1">Если <code class="programcharacter">UseHTTPProxy</code> имеет значение 1, этот параметр является обязательным.</p> </li><li class="listbullet1"><code class="programcharacter">port</code> – это порт прокси. Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">3128</code>.</p> </li><li class="listbullet1"><code class="programcharacter">user</code> – это зашифрованное имя пользователя, используемое для аутентификации на прокси-сервере. Имя пользователя должно быть зашифровано с помощью утилиты <code class="programcharacter">kav_encrypt</code>. Значение этого элемента должно быть строкой.<p class="listcontinue1">Если <code class="programcharacter">UseHTTPProxy</code> имеет значение <code class="programcharacter">1</code>, этот параметр является обязательным.</p> </li><li class="listbullet1"><code class="programcharacter">pass</code> – это зашифрованный пароль, который используется при аутентификации на прокси-сервере. Пароль должен быть зашифрован с помощью утилиты <code class="programcharacter">kav_encrypt</code>. Значение этого элемента должно быть строкой.<p class="listcontinue1">Если <code class="programcharacter">UseHTTPProxy</code> имеет значение <code class="programcharacter">1</code>, этот параметр является обязательным.</p> <p class="spacer"> </li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">HTTPProxy</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;HTTPProxy&gt;</p>
<p class="program2">&lt;url&gt;myproxy.mycompany.com&lt;/url&gt;</p>
<p class="program2">&lt;port&gt;3128&lt;/port&gt;</p>
<p class="program2">&lt;User&gt;doOTrypDTxpVJxUHYeKQTw==&lt;/User&gt;</p>
<p class="program2">&lt;pass&gt;8mSHXFix3uL+RP9oNeKDZQ==&lt;/pass&gt;</p>
<p class="program">&lt;/HTTPProxy&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201025"><p><a name="201025" style="display: none;">[Topic 201025]</a></p>
	<h4 id="t234549" class="heading4">UpdateSettings</h4>
<p class="bodytext">Следующие параметры определяют <a id="h180054" class="englishcrossreferencetemplate" href="#179873" target="_self">настройки обновления Kaspersky Scan Engine</a>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201079" class="englishcrossreferencetemplate" href="#200649" target="_self">DisableBackup</a></li><li class="listbullet1"><a id="h201080" class="englishcrossreferencetemplate" href="#200650" target="_self">UpdatePeriodMinutes</a></li><li class="listbullet1"><a id="h201081" class="englishcrossreferencetemplate" href="#200651" target="_self">UseOnlyCustomSources</a></li><li class="listbullet1"><a id="h201082" class="englishcrossreferencetemplate" href="#201051" target="_self">UpdateSources</a></li><li class="listbullet1"><a id="h201083" class="englishcrossreferencetemplate" href="#200653" target="_self">UpdatesCertFile</a></li><li class="listbullet1"><a id="h201084" class="englishcrossreferencetemplate" href="#200654" target="_self">CertificateConfirmationAction</a></li><li class="listbullet1"><a id="h200662" class="englishcrossreferencetemplate" href="#200655" target="_self">UseReducedBases</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">UpdateSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdateSettings&gt;</p>
<p class="program2">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
<p class="program2">&lt;UpdatePeriodMinutes&gt;0&lt;/UpdatePeriodMinutes&gt;</p>
<p class="program2">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
<p class="program2">&lt;UpdateSources&gt;</p>
<p class="program3">&lt;Source&gt;[update source]&lt;/Source&gt;</p>
<p class="program2">&lt;/UpdateSources&gt;</p>
<p class="program2">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
<p class="program2">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
<p class="program2">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
<p class="program">&lt;/UpdateSettings&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200649"><p><a name="200649" style="display: none;">[Topic 200649]</a></p>
	<h5 id="t234321" class="heading5">DisableBackup</h5>
<p class="bodytext">Определяет, выключена ли функция резервного копирования базы данных. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; DisableBackup</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента DisableBackup</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Резервное копирование антивирусной базы включено.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Резервное копирование антивирусной базы выключено.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200650"><p><a name="200650" style="display: none;">[Topic 200650]</a></p>
	<h5 id="t234545" class="heading5">UpdatePeriodMinutes</h5>
<p class="bodytext">Указывает интервал между автоматическими обновлениями (в минутах). </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UpdatePeriodMinutes</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. Максимальное возможное значение: <code class="programcharacter">44640</code>.</p>
<p class="bodytext">Если этот параметр имеет значение <code class="programcharacter">0</code>, Kaspersky Scan Engine не выполняет автоматические обновления.</p>
<p class="bodytext">По умолчанию в файле конфигурации установлено значение <code class="programcharacter">0</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdatePeriodMinutes&gt;0&lt;/UpdatePeriodMinutes&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200651"><p><a name="200651" style="display: none;">[Topic 200651]</a></p>
	<h5 id="t234564" class="heading5">UseOnlyCustomSources</h5>
<p class="bodytext">Указывает, используются ли источники обновления по умолчанию. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UseOnlyCustomSources</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseOnlyCustomSources</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Серверы обновлений &quot;Лаборатории Касперского&quot; используются вместе с пользовательскими источниками обновлений.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Используются только пользовательские источники обновлений.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201051"><p><a name="201051" style="display: none;">[Topic 201051]</a></p>
	<h5 id="t234551" class="heading5">UpdateSources</h5>
<p class="bodytext">Содержит пользовательские источники обновлений.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UpdateSources</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">Source</em><p class="listcontinue1">Указывает пользовательский источник обновлений. Значение этого элемента должно быть строкой.</p>
<p class="listcontinue1">Каждый источник обновления указан внутри отдельного элемента <code class="programcharacter">&lt;Source&gt;</code>. См. пример указания <a id="h180054" class="englishcrossreferencetemplate" href="#179873" target="_self">пользовательских источников обновления базы</a>.</p>
<p class="listcontinue1">Если Kaspersky Scan Engine должен использовать TLS при подключении к пользовательскому источнику обновлений, вы должны указать протокол <code class="programcharacter">https://</code> в адресе этого пользовательского источника обновлений.</p>
</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdateSources&gt;</p>
<p class="program2">&lt;Source&gt;[update source]&lt;/Source&gt;</p>
<p class="program">&lt;/UpdateSources&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200653"><p><a name="200653" style="display: none;">[Topic 200653]</a></p>
	<h5 id="t234547" class="heading5">UpdatesCertFile</h5>
<p class="bodytext">Путь к корневому сертификату в формате PEM, который будет использоваться для загрузки обновлений с пользовательских HTTPS-серверов обновлений. </p>
<p class="bodytext">Параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UpdatesCertFile</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Вы можете указать абсолютный или относительный путь. Относительный путь определяется относительно расположения исполняемого файла <code class="programcharacter">kavhttpd</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200654"><p><a name="200654" style="display: none;">[Topic 200654]</a></p>
	<h5 id="t234291" class="heading5">CertificateConfirmationAction</h5>
<p class="bodytext">Указывает действие, которое необходимо предпринять, если сервер обновлений использует ненадежный сертификат.</p>
<p class="bodytext">Параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; CertificateConfirmationAction</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента CertificateConfirmationAction</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Сервер обновлений использовать нельзя.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Сервер обновлений по-прежнему должен использоваться.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200655"><p><a name="200655" style="display: none;">[Topic 200655]</a></p>
	<h5 id="t234569" class="heading5">UseReducedBases</h5>
<p class="bodytext">Указывает параметр, который является одним из условий, определяющих, обновляется ли сокращенный набор баз.</p>
<p class="bodytext">Параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UseReducedBases</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseReducedBases</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="bodytext">Полный набор баз всегда обновляется.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="bodytext">Встроенные функции KAV SDK обновляют сокращенный набор баз, если соблюдены все условия обновления сокращенного набора баз. При несоблюдении хотя бы одного из условий принятия обновляется полный набор баз.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201055"><p><a name="201055" style="display: none;">[Topic 201055]</a></p>
	<h4 id="t234365" class="heading4">FormatRecognizerSettings</h4>
<p class="bodytext">Указывает настройки Format Recognizer. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">FormatRecognizerSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">FormatsToSkipScanning</em><p class="listcontinue1">Указывает, какие <a id="h180224" class="englishcrossreferencetemplate" href="#180222" target="_self">форматы файлов</a> решение Kaspersky Scan Engine не должно сканировать в режиме HTTP.</p>
<p class="listcontinue1">Чтобы выключить функцию пропуска форматов, удалите элемент <code class="programcharacter">FormatRecognizerSettings</code> из файла конфигурации или оставьте список <code class="programcharacter">FormatsToSkipScanning</code> пустым.</p>
</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">FormatRecognizerSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;FormatRecognizerSettings&gt;</p>
<p class="program2">&lt;FormatsToSkipScanning&gt;</p>
<p class="program3">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program3">&lt;KAV_FF_GENERAL_CSV/&gt;</p>
<p class="program3">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program2">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program">&lt;/FormatRecognizerSettings&gt; </p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179868"><p><a name="179868" style="display: none;">[Topic 179868]</a></p>
	<h3 id="t234299" class="heading3">Настройка Format Recognizer для использования в режиме HTTP</h3>
<p class="bodytext">Format Recognizer – это компонент, который можно использовать в Kaspersky Scan Engine для распознавания и пропуска файлов определенных форматов в процессе сканирования. Пропуск файлов увеличивает скорость обработки Kaspersky Scan Engine в режиме HTTP.</p>
<p class="introheading">Включение Format Recognizer</p>
<p class="procedureheading">Чтобы включить Format Recognizer:</p>
<ol class="listnumber1"><li class="listnumber1">В <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файле конфигурации режима HTTP</a> найдите раздел <code class="programcharacter">FormatRecognizerSettings</code>.<p class="listcontinue1">Если этот раздел отсутствует, добавьте его вручную следующим образом:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;FormatRecognizerSettings&gt;</p>
<p class="program">...</p>
<p class="program">&lt;/FormatRecognizerSettings&gt; </p>
</td>
</tr>

</table> </li><li class="listnumber1">В этом разделе в списке <code class="programcharacter">FormatsToSkipScanning</code> укажите, какие <a id="h180224" class="englishcrossreferencetemplate" href="#180222" target="_self">форматы файлов</a> не должны проверяться Kaspersky Scan Engine:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;FormatRecognizerSettings&gt;</p>
<p class="program2">&lt;FormatsToSkipScanning&gt;</p>
<p class="program3">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program3">...</p>
<p class="program3">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program2">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program">&lt;/FormatRecognizerSettings&gt;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Чтобы изменения вступили в силу, перезапустите службу <code class="programcharacter">kavhttpd</code> с помощью следующей команды:<p class="listcontinue1"><code class="programcharacter">service kavhttpd restart</code></p> </li></ol><p class="bodytext">Format Recognizer начнет распознавать и пропускать файлы форматов, указанных в списке <code class="programcharacter">FormatsToSkipScanning</code>. Kaspersky Scan Engine не сканирует пропущенные файлы, что увеличивает скорость их обработки.</p>
<p class="introheading">Выключение Format Recognizer</p>
<p class="procedureheading">Чтобы выключить Format Recognizer:</p>
<ol class="listnumber1"><li class="listnumber1">В <a id="h179927_2" class="englishcrossreferencetemplate" href="#184799" target="_self">файле конфигурации режима HTTP</a> удалите раздел <code class="programcharacter">FormatRecognizerSettings</code> или оставьте список <code class="programcharacter">FormatsToSkipScanning</code> пустым.</li><li class="listnumber1">Чтобы изменения вступили в силу, перезапустите службу <code class="programcharacter">kavhttpd</code> с помощью следующей команды:<p class="listcontinue1"><code class="programcharacter">service kavhttpd restart</code></p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179869"><p><a name="179869" style="display: none;">[Topic 179869]</a></p>
	<h3 id="t234518" class="heading3">Настройка очереди подключений в режиме HTTP</h3>
<p class="bodytext">Очередь подключений содержит ожидающие подключения к Kaspersky Scan Engine. Настраивая очередь подключений, вы можете влиять на производительность Kaspersky Scan Engine в режиме HTTP. В этом разделе объясняется, как настроить очередь подключений.</p>
<p class="bodytext">Три параметра позволяют настроить очередь подключений: <code class="programcharacter">MaxHTTPSessionsNum</code>, <code class="programcharacter">MaxIncomingConnectionsNum</code> и <code class="programcharacter">ThreadsCount</code>. Эти параметры можно задать в <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файле конфигурации режима HTTP</a>.</p>
<p class="introheading">MaxHTTPSessionsNum</p>
<p class="bodytext">Этот параметр указывает максимальное количество активных TCP-соединений, которые Kaspersky Scan Engine может поддерживать одновременно. Когда TCP-соединение с клиентом закрывается, Kaspersky Scan Engine может принять другое соединение вместо него.</p>
<p class="introheading">MaxIncomingConnectionsNum</p>
<p class="bodytext">Этот параметр указывает максимальное количество ожидающих TCP-соединений с Kaspersky Scan Engine. Если количество ожидающих соединений достигает <code class="programcharacter">MaxIncomingConnectionsNum</code>, дополнительные соединения могут быть прерваны.</p>
<p class="introheading">ThreadsCount</p>
<p class="bodytext">Этот параметр указывает максимальное количество одновременно работающих сканирующих программных потоков. Когда сканирующий поток завершает задачу сканирования, он берет другую из очереди сканирования.</p>
<p class="introheading">Примеры настройки очереди подключений</p>
<p class="bodytext">Эти примеры показывают, как вы можете использовать очередь соединений, чтобы повлиять на поведение Kaspersky Scan Engine.</p>
<ul class="listbullet1"><li class="listbullet1">Kaspersky Scan Engine без очереди на подключение.<p class="listcontinue1">Рассмотрим следующий пример: значение <code class="programcharacter">MaxIncomingConnectionsNum</code> равно <code class="programcharacter">16</code>, значение <code class="programcharacter">ThreadsCount</code> равно <code class="programcharacter">16</code>, а значение <code class="programcharacter">MaxHTTPSessionsNum</code> равно <code class="programcharacter">50</code>. В этом примере Kaspersky Scan Engine может принимать только <code class="programcharacter">16</code> подключений одновременно, но, поскольку <code class="programcharacter">MaxHTTPSessionsNum</code> равен <code class="programcharacter">50</code>, их задачи проверки принимаются немедленно. Дополнительные соединения могут быть прерваны. Шестнадцати потоков сканирования обычно достаточно для быстрой обработки задач сканирования от 16 клиентов, поэтому очередь на сканирование будет небольшой.</p> </li><li class="listbullet1">Kaspersky Scan Engine с очередью подключений.<p class="listcontinue1">Рассмотрим следующий пример: значение <code class="programcharacter">MaxIncomingConnectionsNum</code> равно <code class="programcharacter">100</code>, значение <code class="programcharacter">ThreadsCount</code> равно <code class="programcharacter">16</code>, а значение <code class="programcharacter">MaxHTTPSessionsNum</code> равно <code class="programcharacter">50</code>. В этом примере Kaspersky Scan Engine может принимать <code class="programcharacter">50</code> подключений одновременно. Kaspersky Scan Engine запускает обработку задач сканирования от некоторых из клиентов в <code class="programcharacter">16</code> потоках сканирования, а остальные задачи сканирования формируют очередь сканирования. Другие ожидающие соединения формируют очередь соединений и ждут, пока их не примут. Дополнительные соединения могут быть прерваны.</p> </li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179870"><p><a name="179870" style="display: none;">[Topic 179870]</a></p>
	<h3 id="t234517" class="heading3">Настройка тайм-аута сеанса</h3>
<p class="bodytext">На тайм-аут сеанса влияют параметры <code class="programcharacter">SessionTimeout</code> и <code class="programcharacter">TimeoutMs</code> <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файла конфигурации режима HTTP</a> и <a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">заголовок запроса</a> <code class="programcharacter">X-KAV-Timeout</code>. В этом разделе объясняется, как настроить тайм-аут сеанса работы Kaspersky Scan Engine в режиме HTTP с использованием этих значений.</p>
<p class="introheading">SessionTimeout</p>
<p class="bodytext">Этот параметр файла конфигурации задает максимальное время, которое Kaspersky Scan Engine может потратить на получение запроса на сканирование объекта и на обработку этого запроса (операции сканирования) в миллисекундах. Тайм-аут действует для всех объектов, отправляемых в Kaspersky Scan Engine.</p>
<p class="bodytext">Рассмотрим следующий пример: для параметра <code class="programcharacter">SessionTimeout</code> установлено значение <code class="programcharacter">4000</code> (четыре секунды), а запрос не содержит заголовка <code class="programcharacter">X-KAV-Timeout</code>. Kaspersky Scan Engine тратит одну секунду на получение запроса. Затем Kaspersky Scan Engine тратит на сканирование оставшиеся три секунды.</p>
<p class="introheading">X-KAV-Timeout</p>
<p class="bodytext">В этом заголовке задается время, которое Kaspersky Scan Engine может потратить на операцию сканирования (в миллисекундах), независимо от значения параметра <code class="programcharacter">SessionTimeout</code>.</p>
<p class="bodytext">Диапазон значений этого параметра от <code class="programcharacter">0</code> до <code class="programcharacter">4294967295</code> (32-разрядное целое положительное число).</p>
<p class="bodytext">Рассмотрим следующий пример: значение <code class="programcharacter">SessionTimeout</code> установлено на <code class="programcharacter">4000</code> (четыре секунды), а значение <code class="programcharacter">X-KAV-Timeout</code> установлено на <code class="programcharacter">10000</code> (10 секунд). Kaspersky Scan Engine тратит одну секунду на получение запроса. Затем Kaspersky Scan Engine тратит на сканирование 10 секунд (значение <code class="programcharacter">X-KAV-Timeout</code>).</p>
<p class="bodytext">Если <code class="programcharacter">SessionTimeout</code> превышен во время приема запроса, сеанс закрывается независимо от значения <code class="programcharacter">X-KAV-Timeout</code>.</p>
<p class="bodytext">Рассмотрим следующий пример: значение <code class="programcharacter">SessionTimeout</code> установлено на <code class="programcharacter">4000</code> (четыре секунды), а значение <code class="programcharacter">X-KAV-Timeout</code> установлено на <code class="programcharacter">10000</code> (10 секунд). Kaspersky Scan Engine тратит четыре секунды на получение запроса, и сеанс закрывается из-за превышения <code class="programcharacter">SessionTimeout</code>.</p>
<p class="bodytext">Вы можете выбрать значение <code class="programcharacter">X-KAV-Timeout</code> в зависимости от размера файлов, которые хотите просканировать. Например, Kaspersky Scan Engine может потребовать 10 секунд для сканирования большого файла или 0,1 секунды для сканирования небольшого файла.</p>
<p class="introheading">TimeoutMs</p>
<p class="bodytext">По умолчанию Kaspersky Scan Engine поддерживает <a id="h207358" class="englishcrossreferencetemplate" href="#207348" target="_self">постоянные соединения Keep-Alive</a>, поэтому он может обрабатывать несколько объектов один за другим, используя одно и то же соединение.</p>
<p class="bodytext">Для каждого нового объекта Kaspersky Scan Engine запускает новый <code class="programcharacter">SessionTimeout</code>. После того как Kaspersky Scan Engine отправит результаты сканирования, соединение будет оставаться открытым в течение всего времени, указанного в параметре <code class="programcharacter">TimeoutMs</code>, даже если время ожидания <code class="programcharacter">SessionTimeout</code> уже истекло. Если новый объект был получен до истечения срока действия <code class="programcharacter">TimeoutMs</code>, начинается новый <code class="programcharacter">SessionTimeout</code>, пока то же соединение остается открытым.</p>
<p class="bodytext">Если поддержка постоянных соединений Keep-Alive выключена, Kaspersky Scan Engine закрывает соединение по истечении времени <code class="programcharacter">SessionTimeout</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179872"><p><a name="179872" style="display: none;">[Topic 179872]</a></p>
	<h3 id="t234294" class="heading3">Изменение переменных в файле модуля режима HTTP</h3>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine, изменив одну или несколько переменных в файле модуля <code class="programcharacter">%distr_kit%/etc/kavhttpd.service</code>.</p>
<p class="introheading">Изменение пути к PID-файлу Kaspersky Scan Engine</p>
<p class="bodytext">Вы можете изменить эту переменную, если хотите создать PID-файл Kaspersky Scan Engine в директории, отличной от <code class="programcharacter">/var/run/kavhttpd.pid</code>.</p>
<p class="bodytext">В следующем примере показано, как эта переменная устанавливается в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">PIDFile=/var/run/kavhttpd.pid</p>
</td>
</tr>

</table>
<p class="introheading">Изменение переменных среды</p>
<p class="bodytext">Вы должны изменить эти переменные среды, если Kaspersky Scan Engine находится не в директории <code class="programcharacter">/opt/kaspersky/ScanEngine</code>.</p>
<p class="bodytext">В файле модуля используются следующие переменные среды:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SDKPATH</code> – указывает директорию, в которой находится Kaspersky Scan Engine. В следующем примере показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=SDKPATH=/opt/kaspersky/ScanEngine</p>
</td>
</tr>

</table> </li><li class="listbullet1"><code class="programcharacter">KL_PLUGINS_PATH</code> – указывает путь к директории, в которой находятся файлы плагина PPL, используемые Kaspersky Scan Engine. В следующем примере показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=KL_PLUGINS_PATH=/ppl</p>
</td>
</tr>

</table> </li><li class="listbullet1"><code class="programcharacter">LD_LIBRARY_PATH</code> – указывает путь к директории, в которой находятся общие библиотеки, используемые Kaspersky Scan Engine. В следующем блоке показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=LD_LIBRARY_PATH=/lib:/ppl</p>
</td>
</tr>

</table> </li></ul><p class="introheading">Изменение путей в команде, выполняемой при запуске kavhttpd</p>
<p class="bodytext">Вы должны изменить пути в команде, выполняемой при запуске kavhttpd, если вы помещаете исполняемый файл <code class="programcharacter">kavhttpd</code> или файл конфигурации режима HTTP в директории, отличные от указанных в файле модуля, или если вы хотите создать PID-файл Kaspersky Scan Engine в директории, отличной от <code class="programcharacter">/var/run/kavhttpd.pid</code>.</p>
<p class="bodytext">В следующем примере показано, как эта команда устанавливается в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ExecStart=/bin/sh -c &#39;cd ${SDKPATH}/bin; ./kavhttpd -c /etc/kavhttpd.xml -p /var/run/kavhttpd.pid&#39;</p>
</td>
</tr>

</table>
<p class="introheading">Включение и выключение мониторинга в команде, выполняемой при запуске kavhttpd</p>
<p class="bodytext">Вы можете включить или выключить мониторинг, добавив или удалив параметр &quot;-w&quot; в команде, выполняемой при запуске kavhttpd.</p>
<p class="bodytext">В следующем примере показано, как включить мониторинг в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ExecStart=/bin/sh -c &#39;cd ${SDKPATH}/bin; ./kavhttpd -c /etc/kavhttpd.xml -p /var/run/kavhttpd.pid -w&#39;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179873"><p><a name="179873" style="display: none;">[Topic 179873]</a></p>
	<h3 id="t234309" class="heading3">Настройка обновления в режиме HTTP</h3>
<p class="bodytext">Этот раздел содержит информацию о том, как настроить обновления Kaspersky Scan Engine.</p>
<p class="introheading">Указание настроек обновления</p>
<p class="bodytext">Kaspersky Scan Engine использует настройки обновления, хранящиеся в <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файле конфигурации режима HTTP</a>. Установите необходимые настройки обновления в kavhttpd.xml перед запуском Kaspersky Scan Engine.</p>
<p class="introheading">Указание пользовательских источников обновления антивирусных баз</p>
<p class="bodytext">Kaspersky Scan Engine обновляет антивирусные базы из источников обновления. В качестве источника обновления антивирусных баз, используемого Kaspersky Scan Engine, можно указать как значение по умолчанию, так и пользовательское значение. Источниками обновления по умолчанию являются серверы обновления &quot;Лаборатории Касперского&quot;.</p>
<p class="bodytext">Можно использовать источники обновления по умолчанию, пользовательские источники обновления или оба.</p>
<p class="procedureheading">Чтобы указать пользовательские источники обновления:</p>
<ol class="listnumber1"><li class="listnumber1">Укажите пользовательские источники обновления в элементе <code class="programcharacter">UpdateSources</code> файла конфигурации kavhttpd.xml. Используйте отдельный элемент <code class="programcharacter">Source</code> для каждого источника.<p class="listcontinue1">Чтобы использовать локальную директорию, укажите абсолютный путь. Чтобы использовать сетевой источник, укажите URL-адрес, включая протокол. Поддерживаются протоколы HTTP и FTP.</p> <p class="listcontinue1">В следующем примере показаны два источника обновления:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdateSources&gt;</p>
<p class="program2">&lt;Source&gt;httpd://example.com/update/source1&lt;/Source&gt;</p>
<p class="program2">&lt;Source&gt;httpd://example.com/update/source2&lt;/Source&gt;</p>
<p class="program">&lt;/UpdateSources&gt;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Если вы хотите использовать только пользовательские источники, то в файле kavhttpd.xml установите параметр <code class="programcharacter">UseOnlyCustomSources</code> в значение <code class="programcharacter">1</code>.<p class="listcontinue1">Если в <code class="programcharacter">UseOnlyCustomSources</code> указан <code class="programcharacter">0</code>, то Kaspersky Scan Engine использует как источники обновлений по умолчанию, так и пользовательские источники. В этом случае Kaspersky Scan Engine сначала ищет обновления в пользовательских источниках обновления.</p> </li></ol><p class="bodytext">Параметры, указанные вами, будут использоваться после начала или перезапуска службы <code class="programcharacter">kavhttpd</code>.</p>
<p class="introheading">Настройка резервного копирования антивирусных баз</p>
<p class="bodytext">Резервное копирование антивирусных баз защищает Kaspersky Scan Engine от возможных неисправностей, вызванных процессом обновления антивирусных баз.</p>
<p class="bodytext">По умолчанию резервное копирование антивирусных баз включено. Kaspersky Scan Engine автоматически создает резервные копии антивирусных баз во время обновлений. Убедитесь, что ваш жесткий диск имеет достаточно свободного места для полной копии антивирусных баз.</p>
<p class="procedureheading">Чтобы выключить резервное копирование антивирусных баз,</p>
<p class="bodytextindent">установите параметр <code class="programcharacter">DisableBackup</code> в файле kavhttpd.xml в значение <code class="programcharacter">1</code>.</p>
<p class="bodytext">Настройки, указанные вами, будут использоваться после начала или перезапуска службы <code class="programcharacter">kavhttpd</code>.</p>
<p class="introheading">Создание подключений к источникам обновления</p>
<p class="bodytext">Для подключения к источникам обновлений Kaspersky Scan Engine использует параметры подключения, указанные в <a id="h179927_2" class="englishcrossreferencetemplate" href="#184799" target="_self">kavhttpd.xml</a>.</p>
<p class="introheading">Автоматические обновления антивирусных баз</p>
<p class="bodytext">Если вы хотите обновлять антивирусные базы через регулярные промежутки времени, используйте автоматические обновления.</p>
<p class="bodytext">По умолчанию автоматические обновления выключены.</p>
<p class="procedureheading">Для настройки автоматических обновлений:</p>
<ol class="listnumber1"><li class="listnumber1">Установите параметр <code class="programcharacter">UpdatePeriodMinutes</code> в файле kavhttpd.xml в значение с требуемым интервалом обновления (в минутах).</li><li class="listnumber1">Перезапустите службу <code class="programcharacter">kavhttpd</code>.</li></ol><p class="bodytext">Kaspersky Scan Engine будет выполнять обновления автоматически.</p>
<p class="bodytext">Вы также можете <a id="h179933" class="englishcrossreferencetemplate" href="#179882" target="_self">обновить базы вручную</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192981"><p><a name="192981" style="display: none;">[Topic 192981]</a></p>
	<h2 id="t234484" class="heading2">Запуск Kaspersky Scan Engine в режиме HTTP</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как запустить Kaspersky Scan Engine в режиме HTTP.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179876" target="_self">Запуск Kaspersky Scan Engine в режиме HTTP вручную</a></p><p class="relateditem"><a href="#184956" target="_self">Запуск Kaspersky Scan Engine в режиме HTTP с помощью файла модуля systemd (Linux)</a></p><p class="relateditem"><a href="#192984" target="_self">Запуск Kaspersky Scan Engine в качестве службы (Windows)</a></p><p class="relateditem"><a href="#186032" target="_self">Запуск Kaspersky Scan Engine в режиме HTTP с помощью скрипта BAT (Windows)</a></p><p class="relateditem"><a href="#179880" target="_self">Мониторинг Kaspersky Scan Engine в режиме HTTP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179876"><p><a name="179876" style="display: none;">[Topic 179876]</a></p>
	<h3 id="t234486" class="heading3">Запуск Kaspersky Scan Engine в режиме HTTP вручную</h3>
<p class="bodytext">Вы можете запустить службу <code class="programcharacter">kavhttpd</code> вручную, запустив бинарный файл kavhttpd.</p>
<p class="bodytext">При ручном запуске службы <code class="programcharacter">kavhttpd</code> доступны следующие параметры:</p>
<p class="tablename">Варианты запуска бинарного файла kavhttpd</p>
<p class="spacerfortables">
<table class="tableintopic" width="804" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="72"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="732"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-c &lt;path&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="732"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Задает путь к файлу конфигурации режима HTTP.</p>
<p class="tablebodytext">Путь может быть абсолютным или относительным. Относительный путь указывается относительно текущей рабочей директории.</p>
<p class="tablebodytext">Путь к файлу конфигурации по умолчанию – <code class="programcharacter">./kavhttpd.xml</code>. </p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-p &lt;path&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="732"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Задает путь к PID-файлу. </p>
<p class="tablebodytext">Путь может быть абсолютным или относительным. Относительный путь указывается относительно текущей рабочей директории.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-w</code></p>
</td>
<td style="border:1px solid #010101;" width="732"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Запускает службу <code class="programcharacter">kavhttpd</code> в сторожевом режиме.</p>
<p class="tablebodytext">В этом режиме служба <code class="programcharacter">kavhttpd</code> автоматически перезапускается при зависании или сбое.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-n</code></p>
</td>
<td style="border:1px solid #010101;" width="732"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Включает режим nodaemon для службы <code class="programcharacter">kavhttpd</code>.</p>
<p class="tablebodytext">При указании этого параметра служба <code class="programcharacter">kavhttpd</code> запускается с высоким приоритетом.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-v</code></p>
</td>
<td style="border:1px solid #010101;" width="732"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Показывает версию Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-h</code></p>
</td>
<td style="border:1px solid #010101;" width="732"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Показывает справочную информацию.</p>
</td>
</tr>

</table>
<p class="bodytext">
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184956"><p><a name="184956" style="display: none;">[Topic 184956]</a></p>
	<h3 id="t234488" class="heading3">Запуск Kaspersky Scan Engine в режиме HTTP с помощью файла модуля systemd (Linux)</h3>
<p class="attentionbody">Только для систем Linux.</p>
<p class="bodytext">Вы можете запустить Kaspersky Scan Engine в режиме HTTP, используя файл модуля kavhttpd.service для <code class="programcharacter">systemd</code>. Файл модуля позволяет вам добавить службу kavhttpd в список запуска служб и управлять службой вручную из командной строки.</p>
<p class="attentionbody">В этом разделе предполагается, что вы хотите добавить службу kavhttpd для всех пользователей. Для получения информации о том, как добавить службу и управлять ею от имени конкретного пользователя, обратитесь к официальной документации для <code class="programcharacter">systemd</code> и <code class="programcharacter">systemctl</code>.</p>
<p class="introheading">Автоматический запуск Kaspersky Scan Engine</p>
<p class="bodytext">Чтобы Kaspersky Scan Engine запускался автоматически, добавьте kavhttpd в список запуска служб.</p>
<p class="procedureheading">Чтобы добавить kavhttpd в список запуска служб:</p>
<ol class="listnumber1"><li class="listnumber1">Поместите файл модуля kavhttpd.service в директорию <code class="programcharacter">/etc/systemd/system/</code>.</li><li class="listnumber1">При необходимости <a id="h179931" class="englishcrossreferencetemplate" href="#179872" target="_self">отредактируйте файл модуля</a>.</li><li class="listnumber1">Перезагрузите <code class="programcharacter">systemd</code>, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl daemon-reload</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что файл модуля kavhttpd.service установлен, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl list-unit-files</p>
</td>
</tr>

</table> </li><li class="listnumber1">Включите запуск kavhttpd при старте системы, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl enable kavhttpd.service</p>
</td>
</tr>

</table> </li></ol><p class="introheading">Удаление Kaspersky Scan Engine из списка запуска служб</p>
<p class="bodytext">Чтобы удалить kavhttpd из списка запуска служб, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl disable kavhttpd.service</p>
</td>
</tr>

</table>
<p class="introheading">Управление Kaspersky Scan Engine с помощью systemd из терминала</p>
<p class="bodytext">Чтобы запустить kavhttpd без перезагрузки компьютера, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl start kavhttpd</p>
</td>
</tr>

</table>
<p class="attentionbody">После выполнения этой команды сценарий выводит сообщение <code class="programcharacter">[OK]</code> и немедленно возвращает управление терминалу, но для запуска службы <code class="programcharacter">kavhttpd</code> потребуется некоторое время.</p>
<p class="bodytext">Чтобы остановить kavhttpd без перезагрузки компьютера, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl stop kavhttpd</p>
</td>
</tr>

</table>
<p class="bodytext">Чтобы перезагрузить антивирусные базы, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl reload kavhttpd</p>
</td>
</tr>

</table>
<p class="bodytext">
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192984"><p><a name="192984" style="display: none;">[Topic 192984]</a></p>
	<h3 id="t234485" class="heading3">Запуск Kaspersky Scan Engine в качестве службы (Windows)</h3>
<p class="bodytext">Если вы зарегистрировали kavehttpd как службу Windows, вы можете запустить ее из командной строки с помощью следующих команд:</p>
<ul class="listbullet1"><li class="listbullet1">Если вы установили Kaspersky Scan Engine <a id="h184734" class="englishcrossreferencetemplate" href="#192978" target="_self">с помощью инсталлятора</a> или <a id="h184731" class="englishcrossreferencetemplate" href="#184719" target="_self">зарегистрировали kavehttpd как службу вручную</a>:<p class="listcontinue1"><code class="programcharacter">net start &quot;Kaspersky ScanEngine&quot;</code></p> </li><li class="listbullet1">Если вы зарегистрировали kavehttpd <a id="h179959" class="englishcrossreferencetemplate" href="#179876" target="_self">с помощью бинарного файла kavehttpd</a>:<p class="listcontinue1"><code class="programcharacter">net start kavhttpd</code></p> </li></ul><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186032"><p><a name="186032" style="display: none;">[Topic 186032]</a></p>
	<h3 id="t234487" class="heading3">Запуск Kaspersky Scan Engine в режиме HTTP с помощью скрипта BAT (Windows)</h3>
<p class="bodytext">В состав пакета распространения Kaspersky Scan Engine входит скрипт BAT, позволяющий управлять службой kavhttpd и службой klScanEngineUI.</p>
<p class="bodytext">Этот скрипт не будет работать, если вы <a id="h179959" class="englishcrossreferencetemplate" href="#179876" target="_self">вручную добавили службу kavhttpd в список служб Windows.</a></p>
<p class="bodytext">Скрипт запускается из командной строки.</p>
<p class="bodytext">Синтаксис:</p>
<p class="bodytext"><code class="programcharacter">kl_control.bat start | stop | restart | status | help</code></p>
<p class="bodytext">В таблице ниже описаны параметры kl_control.bat. Если вы укажете более одной опции, скрипт выполнит первую и завершится.</p>
<p class="tablename">Параметры kl_control.bat</p>
<table class="tableintopic" width="630" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="150"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="480"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><code class="programcharacter">start</code></p>
</td>
<td style="border:1px solid #010101;" width="480"><p class="tablebodytext">Запускает службу kavhttpd. Если включен Kaspersky Scan Engine GUI, также запускается служба klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><code class="programcharacter">stop</code></p>
</td>
<td style="border:1px solid #010101;" width="480"><p class="tablebodytext">Останавливает службу kavhttpd. Если включен Kaspersky Scan Engine GUI, он также останавливает службу klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><code class="programcharacter">restart</code></p>
</td>
<td style="border:1px solid #010101;" width="480"><p class="tablebodytext">Останавливает и перезапускает службу kavhttpd. Если Kaspersky Scan Engine GUI включен, он также останавливает и перезапускает службу klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><code class="programcharacter">status</code></p>
</td>
<td style="border:1px solid #010101;" width="480"><p class="tablebodytext">Проверяет, запущены ли службы kavhttpd и klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="150"><p class="tablebodytext"><code class="programcharacter">help</code></p>
</td>
<td style="border:1px solid #010101;" width="480"><p class="tablebodytext">Показывает справочную информацию.</p>
</td>
</tr>

</table>
<p class="bodytext">Сценарий kl_control.bat выводит сообщение об ошибке, если при попытке остановить или запустить службу kavhttpd произошла ошибка. Если вы получили сообщение об ошибке, вы можете проверить состояние службы kavhttpd или службы klScanEngineUI с помощью диспетчера задач Windows.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179880"><p><a name="179880" style="display: none;">[Topic 179880]</a></p>
	<h3 id="t234459" class="heading3">Мониторинг Kaspersky Scan Engine в режиме HTTP</h3>
<p class="bodytext">Когда мониторинг включен, служба kavhttpd автоматически перезапускается в случае зависания или сбоя.</p>
<p class="bodytext">Если логирование включено вместе с мониторингом, процесс мониторинга записывает сообщения журнала в отдельный файл.</p>
<p class="procedureheading">Чтобы включить мониторинг:</p>
<ol class="listnumber1"><li class="listnumber1">Установите параметр <code class="programcharacter">-w</code> в команде запуска в файле модуля systemd для службы kavhttpd.</li><li class="listnumber1">Перезапустите Kaspersky Scan Engine, выполнив следующую команду: <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">service kavhttpd restart</p>
</td>
</tr>

</table> </li></ol><p class="bodytext">Смотрите также информацию о <a id="h179931" class="englishcrossreferencetemplate" href="#179872" target="_self">редактировании файла модуля</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192985"><p><a name="192985" style="display: none;">[Topic 192985]</a></p>
	<h2 id="t234437" class="heading2">Выполнение запросов в режиме HTTP</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как совершать запросы в режиме HTTP.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#181167" target="_self">О протоколе KAV</a></p><p class="relateditem"><a href="#179875" target="_self">Выполнение запросов в режиме HTTP по протоколу KAV версии 3</a></p><p class="relateditem"><a href="#181038" target="_self">Выполнение запросов в режиме HTTP по протоколу KAV версий 1 и 2</a></p><p class="relateditem"><a href="#201538" target="_self">Получение списка HTTP-методов, поддерживаемых службой</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181167"><p><a name="181167" style="display: none;">[Topic 181167]</a></p>
	<h3 id="t234269" class="heading3">О протоколе KAV</h3>
<p class="bodytext">Клиентское приложение использует протокол KAV для взаимодействия с Kaspersky Scan Engine посредством HTTP-запросов. Текущая версия протокола KAV – 3, но также поддерживаются версии 1 и 2.</p>
<p class="bodytext">Выберите версию протокола, которая лучше всего подходит для вашего решения:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">Протоколу KAV версии 3</a><p class="listcontinue1">В версии 3 протокола тела сообщений запроса и сообщений ответа имеют формат JSON. Версия 3 поддерживает больше методов API, чем версии 1 и 2.</p>
<p class="listcontinue1">Это рекомендуемая версия протокола.</p>
<p class="attentioncontinue1">Обратите внимание, что в системах Windows используется только протокол KAV версии 3.</p>
</li><li class="listbullet1"><a id="h180281" class="englishcrossreferencetemplate" href="#181038" target="_self">Протокол KAV версии 1 и 2</a><p class="listcontinue1">В версиях 1 и 2 протокола тело запроса и тело ответа имеют формат простого текста.</p>
<p class="listcontinue1">Используйте эти версии протокола, если для вашего решения необходим простой текстовый формат.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179875"><p><a name="179875" style="display: none;">[Topic 179875]</a></p>
	<h3 id="t234438" class="heading3">Выполнение запросов в режиме HTTP по протоколу KAV версии 3</h3>
<p class="bodytext">Этот раздел содержит информацию о том, как отправлять HTTP-запросы к Kaspersky Scan Engine, используя протокол KAV версии 3.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#181169" target="_self">Поддерживаемые методы API в протоколе KAV версии 3</a></p><p class="relateditem"><a href="#193000" target="_self">Формат POST-запроса на сканирование</a></p><p class="relateditem"><a href="#193001" target="_self">Формат ответа на POST-запрос на сканирование</a></p><p class="relateditem"><a href="#181065" target="_self">Повышение коэффициента обнаружения</a></p><p class="relateditem"><a href="#224308" target="_self">Пример HTTP-запроса, содержащего токен API для авторизации</a></p><p class="relateditem"><a href="#193002" target="_self">Пример HTTP-запроса на сканирование локального файла</a></p><p class="relateditem"><a href="#193003" target="_self">Пример HTTP-запроса на сканирование части оперативной памяти</a></p><p class="relateditem"><a href="#193004" target="_self">Пример HTTP-запроса на проверку URL-адреса</a></p><p class="relateditem"><a href="#193005" target="_self">Пример HTTP-запроса на получение даты выпуска текущей антивирусной базы</a></p><p class="relateditem"><a href="#193007" target="_self">Пример HTTP-запроса для получения текущей версии KAV SDK</a></p><p class="relateditem"><a href="#193008" target="_self">Пример HTTP-запроса на получение лицензионной информации</a></p><p class="relateditem"><a href="#193009" target="_self">Пример HTTP-запроса на получение обобщенной статистики</a></p><p class="relateditem"><a href="#193010" target="_self">Пример HTTP-запроса на удаление обобщенной статистики</a></p><p class="relateditem"><a href="#193011" target="_self">Пример HTTP-запроса на обновление антивирусной базы</a></p><p class="relateditem"><a href="#193012" target="_self">Пример HTTP-запроса на получение статуса обновления антивирусной базы</a></p><p class="relateditem"><a href="#193338" target="_self">Пример HTTP-запроса на получение информации из KSN</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181169"><p><a name="181169" style="display: none;">[Topic 181169]</a></p>
	<h4 id="t234522" class="heading4">Поддерживаемые методы API в протоколе KAV версии 3</h4>
<p class="bodytext">В следующей таблице перечислены методы API, которые Kaspersky Scan Engine поддерживает в режиме HTTP при использовании протокола KAV версии 3. Формат запросов не зависит от того, использует ли клиент TCP или UNIX-сокеты для взаимодействия с Kaspersky Scan Engine.</p>
<p class="tablename">Методы API, поддерживаемые в режиме HTTP в протоколе KAV версии 3</p>
<table class="tableintopic" width="1044" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="186"><p class="tableheading">Метод API</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="84"><p class="tableheading">Метод HTTP</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="84"><p class="tableheading">Формат</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="690"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/scanfile</code></p>
<p class="tablebodytext"><code class="programcharacter">/api/v3.1/scanfile</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193051" class="englishcrossreferencetemplate" href="#193002" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Сканирует файл.</p>
<p class="tablebodytext">Используйте метод API <code class="programcharacter">/api/v3.1/scanfile</code>, чтобы получить <a id="h193050" class="englishcrossreferencetemplate" href="#193001" target="_self">дополнительную информацию</a> о процессе сканирования.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/scanmemory</code></p>
<p class="tablebodytext"><code class="programcharacter">/api/v3.1/scanmemory</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext"><a id="h193113" class="englishcrossreferencetemplate" href="#193003" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Сканирует блок системной памяти.</p>
<p class="tablebodytext">Используйте метод API <code class="programcharacter">/api/v3.1/scanmemory</code>, чтобы получить <a id="h193050_2" class="englishcrossreferencetemplate" href="#193001" target="_self">дополнительную информацию</a> о процессе сканирования.</p>
<p class="bodytext">При сканировании системной памяти используйте только режим очистки KAV_SKIP. Kaspersky Scan Engine не может лечить или удалять файлы в этом режиме.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/checkurl</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193114" class="englishcrossreferencetemplate" href="#193004" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Проверяет URL-адрес.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/basesdate</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193115" class="englishcrossreferencetemplate" href="#193005" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Получает дату выпуска антивирусных баз. Вы можете использовать этот метод, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/version</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193116" class="englishcrossreferencetemplate" href="#193007" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Получает текущую версию KAV SDK. Вы можете использовать этот метод, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/licenseinfo</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193117" class="englishcrossreferencetemplate" href="#193008" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Получает информацию о текущем файле ключа или коде активации. Вы можете использовать этот метод, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/getstatistics</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193118" class="englishcrossreferencetemplate" href="#193009" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Получает накопленную статистику.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/clearstatistics</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193119" class="englishcrossreferencetemplate" href="#193010" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Очищает накопленную статистику.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/update/start</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193120" class="englishcrossreferencetemplate" href="#193011" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Обновляет антивирусные базы.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.0/update/status</code></p>
<p class="tablebodytext"><code class="programcharacter">/api/v3.1/update/status</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193121" class="englishcrossreferencetemplate" href="#193012" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Получает статус процесса обновления базы данных.</p>
<p class="tablebodytext">Воспользуйтесь методом API <code class="programcharacter">/api/v3.1/update/status</code>, чтобы получить <a id="h179933" class="englishcrossreferencetemplate" href="#179882" target="_self">более подробную информацию</a> о процессе обновления антивирусных баз.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="tablebodytext"><code class="programcharacter">/api/v3.1/ksninfo</code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="tablebodytext"><a id="h193339" class="englishcrossreferencetemplate" href="#193338" target="_self">Формат запроса</a></p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="tablebodytext">Получает информацию о KSN.</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193000"><p><a name="193000" style="display: none;">[Topic 193000]</a></p>
	<h4 id="t234360" class="heading4">Формат POST-запроса на сканирование</h4>
<p class="bodytext">POST-запросы на сканирование объекта имеют следующий формат:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">* Заголовки запроса *</p>
<p class="program">&nbsp;</p>
<p class="program">* Тело запроса *</p>
<p class="program">{</p>
<p class="program2">&quot;timeout&quot;: &quot;%TIMEOUT%&quot;,</p>
<p class="program2">&quot;omitCleanSubobjectResults&quot;: %TO_OMIT_CLEAN_SUBOBJECT_RESULTS%,</p>
<p class="program2">&quot;url&quot;: &quot;%URL%&quot;,</p>
<p class="program2">&quot;hostIp&quot;: &quot;%HOST_IP%&quot;,</p>
<p class="program2">&quot;requestHeaders&quot;: &quot;%REQUEST_HEADERS%&quot;,</p>
<p class="program2">&quot;responseHeaders&quot;: &quot;%RESPONSE_HEADERS%&quot;,</p>
<p class="program2">&quot;object&quot;: &quot;%OBJECT%&quot;,</p>
<p class="program2">&quot;name&quot;: &quot;%SCAN_OBJECT_NAME%&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">timeout</code> – тайм-аут на сканирование объекта (в миллисекундах). Это поле не является обязательным.</li><li class="listbullet1"><code class="programcharacter">omitCleanSubobjectResults</code> – переменная логического типа, которая определяет, будут ли включены в массив <code class="programcharacter">subObjectsScanResults</code> вложенные объекты с результатом сканирования <code class="programcharacter">CLEAN</code>. Если указано значение <code class="programcharacter">true</code>, такие объекты не будут включены в массив; если указано значение <code class="programcharacter">false</code>, то такие объекты включаются в массив. Значение по умолчанию: <code class="programcharacter">true</code>. Это поле не является обязательным.<p class="listcontinue1">Смотрите также подробную информацию о <a id="h193050" class="englishcrossreferencetemplate" href="#193001" target="_self">структуре массива subObjectsScanResults</a>.</p> </li><li class="listbullet1"><code class="programcharacter">url</code> – URL-адрес, который будет использован как контекст для запроса на сканирование. Это поле не является обязательным.<p class="listcontinue1">Это поле можно использовать для <a id="h181066" class="englishcrossreferencetemplate" href="#181065" target="_self">повышения коэффициента обнаружения</a>.</p> </li><li class="listbullet1"><code class="programcharacter">hostIp</code> – IP-адрес хоста, на котором размещен просканированный URL-адрес. Это поле не является обязательным.<p class="listcontinue1">Это поле можно использовать для <a id="h181066_2" class="englishcrossreferencetemplate" href="#181065" target="_self">повышения коэффициента обнаружения</a>. Вам необходимо включить KSN, чтобы использовать это поле.</p> </li><li class="listbullet1"><code class="programcharacter">requestHeaders</code> – заголовки HTTP-запроса, извлеченные из HTTP-трафика. Это поле не является обязательным.<p class="listcontinue1">Это поле можно использовать для <a id="h181066_3" class="englishcrossreferencetemplate" href="#181065" target="_self">повышения коэффициента обнаружения</a>.</p> </li><li class="listbullet1"><code class="programcharacter">responseHeaders</code> – заголовки HTTP-ответа, извлеченные из HTTP-трафика. Это поле не является обязательным.<p class="listcontinue1">Это поле можно использовать для <a id="h181066_4" class="englishcrossreferencetemplate" href="#181065" target="_self">повышения коэффициента обнаружения</a>.</p> </li><li class="listbullet1"><code class="programcharacter">object</code> – абсолютный путь до файла, который нужно просканировать (если запрос послан к <code class="programcharacter">/api/v3.0/scanfile</code>), или строка, закодированная по алгоритму Base64 (если запрос послан к <code class="programcharacter">/api/v3.0/scanmemory</code>). В этом поле можно указать только один объект. Это поле является обязательным для заполнения.</li><li class="listbullet1"><code class="programcharacter">name</code> – имя объекта для сканирования в режиме scanmemory (если запрос послан к <code class="programcharacter">/api/v3.1/scanmemory</code>). Значение может быть от 1 до 300 символов Юникода. Это поле не является обязательным.</li></ul><p class="bodytext">Специальные символы в теле запроса должны быть экранированы, как указано в <a class="directhyperlinktemplate" href="https://www.ecma-international.org/publications/standards/Ecma-404.htm" target="_blank">Standard ECMA-404 (The JSON Interchange Syntax)</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193001"><p><a name="193001" style="display: none;">[Topic 193001]</a></p>
	<h4 id="t234359" class="heading4">Формат ответа на POST-запрос на сканирование</h4>
<p class="bodytext">Если POST-запрос был успешно обработан, тело ответа будет содержать JSON-объект со следующими полями:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;object&quot;: &quot;%SCAN_OBJECT%&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;%SCAN_RESULT%&quot;,</p>
<p class="program2">&quot;detectionName&quot;: &quot;%DETECTED_OBJECT%&quot;,</p>
<p class="program2">&quot;name&quot;: &quot;%SCAN_OBJECT_NAME%&quot;,</p>
<p class="program2">&quot;containsOfficeMacro&quot;: &quot;%IS_MACRO_CONTAINED%&quot;,</p>
<p class="program2">&quot;subObjectsScanResults&quot;: [</p>
<p class="program2">{</p>
<p class="program3">&quot;object&quot;: &quot;%SCAN_FILE%&quot;,</p>
<p class="program3">&quot;scanResult&quot;: &quot;%SCAN_RESULT%&quot;,</p>
<p class="program3">&quot;detectionName&quot;: &quot;%DETECTED_OBJECT%&quot;,</p>
<p class="program3">&quot;containsOfficeMacro&quot;: &quot;%IS_MACRO_CONTAINED%&quot;</p>
<p class="program2">},</p>
<p class="program2">...</p>
<p class="program2">{</p>
<p class="program3">&quot;object&quot;: &quot;%SCAN_FILE%&quot;,</p>
<p class="program3">&quot;scanResult&quot;: &quot;%SCAN_RESULT%&quot;,</p>
<p class="program3">&quot;detectionName&quot;: &quot;%DETECTED_OBJECT%&quot;,</p>
<p class="program3">&quot;containsOfficeMacro&quot;: &quot;%IS_MACRO_CONTAINED%&quot;</p>
<p class="program2">}</p>
<p class="program2">]</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext"> Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">object</code> – абсолютный путь до просканированного файла (если запрос был послан к <code class="programcharacter">/api/v3.0/scanfile</code>) или строка <code class="programcharacter">&quot;memory&quot;</code> (если запрос был послан к <code class="programcharacter">/api/v3.0/scanmemory</code>).</li><li class="listbullet1"><code class="programcharacter">scanResult</code> – результат сканирования веб-адреса. Может иметь следующие значения:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">CLEAN</code></li><li class="listbullet2"><code class="programcharacter">DETECT</code></li><li class="listbullet2"><code class="programcharacter">DISINFECTED</code></li><li class="listbullet2"><code class="programcharacter">DELETED</code></li><li class="listbullet2"><code class="programcharacter">NON_SCANNED</code></li><li class="listbullet2"><code class="programcharacter">SERVER_ERROR</code></li></ul><p class="listcontinue1">Если запрос был послан к <code class="programcharacter">/api/v3.0/scanfile</code> или к <code class="programcharacter">/api/v3.0/scanmemory</code>, причина того, что объект не сканируется, может быть добавлена к результату <code class="programcharacter">NON_SCANNED</code>. Например:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/Documents\/filestoscan\/test.zip&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;NON_SCANNED (PASSWORD PROTECTED)&quot;,</p>
<p class="program2">&quot;containsOfficeMacro&quot;: &quot;false&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table> <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">NON_SCANNED (CANCELED)</code><p class="listcontinue2">Сканирование отменено.</p>
</li><li class="listbullet2"><code class="programcharacter">NON_SCANNED (CORRUPTED)</code><p class="listcontinue2">Сканируемый объект поврежден. </p>
</li><li class="listbullet2"><code class="programcharacter">NON_SCANNED (ACCESS DENIED)</code><p class="listcontinue2">Доступ к объекту запрещен.</p>
</li><li class="listbullet2"><code class="programcharacter">NON_SCANNED (SKIPPED)</code><p class="listcontinue2">Сканирование пропущено.</p>
</li><li class="listbullet2"><code class="programcharacter">NON_SCANNED (PASSWORD PROTECTED)</code><p class="listcontinue2">Проверяемый объект защищен паролем.</p>
</li><li class="listbullet2"><code class="programcharacter">NON_SCANNED</code><p class="listcontinue2">Причина, по которой объект не сканируется, не определена.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">detectionName</code> – имя обнаруженного вредоносного объекта в классификации &quot;Лаборатории Касперского&quot;.</li><li class="listbullet1"><code class="programcharacter">name</code> – имя объекта, указанного в поле <code class="programcharacter">name</code> тела запроса (если запрос был послан к <code class="programcharacter">/api/v3.1/scanmemory</code>). Если сканируемый объект имеет вложенные подобъекты, элемент <code class="programcharacter">name</code> указывается только в родительском объекте.</li><li class="listbullet1"><code class="programcharacter">containsOfficeMacro</code> – переменная логического типа, которая имеет значение <code class="programcharacter">true</code>, если в просканированном объекте был обнаружен макрос, и <code class="programcharacter">false</code> в противоположном случае.</li><li class="listbullet1"><code class="programcharacter">subObjectsScanResults</code> – массив, состоящий из результатов сканирования подобъектов, вложенных в просканированный объект. Это поле и все вложенные в него поля будут добавлены в ответ, только если просканированный объект включает вложенные подобъекты.<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">subObjectsScanResults/object</code> – путь до вложенного подобъекта. Обратите внимание, что путь к подобъекту отделен от пути к родительскому объекту двумя косыми чертами (<code class="programcharacter">//</code>), например:<p class="listcontinue2"><code class="programcharacter">/home/user/archive.tar//folder/subobject</code></p> </li><li class="listbullet2"><code class="programcharacter">subObjectsScanResults/scanResult</code> – результат сканирования вложенного подобъекта.</li><li class="listbullet2"><code class="programcharacter">subObjectsScanResults/detectionName</code> – имя обнаруженного вредоносного объекта в классификации &quot;Лаборатории Касперского&quot;.</li><li class="listbullet2"><code class="programcharacter">subObjectsScanResults/containsOfficeMacro</code> – переменная логического типа, которая имеет значение <code class="programcharacter">true</code>, если в просканированном подобъекте был обнаружен макрос, и <code class="programcharacter">false</code> в противоположном случае.</li></ul></li></ul><p class="bodytext">Если POST-запрос был обработан с ошибкой, тело ответа будет содержать JSON-объект с единственным полем <code class="programcharacter">error</code>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;error&quot;: &quot;%СООБЩЕНИЕ ОБ ОШИБКЕ%&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext"> Здесь поле <code class="programcharacter">error</code> содержит описание ошибки, которая произошла во время обработки запроса.</p>
<p class="introheading">Дополнительные поля в протоколе KAV версии 3.1</p>
<p class="bodytext">Поле <code class="programcharacter">reason</code> появляется только в том случае, если вы используете протокол KAV версии 3.1. В этом поле указывается причина, по которой объект не проверяется. Это поле появляется, если запрос был послан к <code class="programcharacter">/api/v3.1/scanfile</code> или к <code class="programcharacter">/api/v3.1/scanmemory</code> и если значение поля <code class="programcharacter">scanResult</code> равно <code class="programcharacter">NON_SCANNED</code>.</p>
<p class="bodytext">Возможные значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">Canceled</code><p class="listcontinue1">Сканирование отменено.</p>
</li><li class="listbullet1"><code class="programcharacter">Corrupted</code><p class="listcontinue1">Сканируемый объект поврежден. </p>
</li><li class="listbullet1"><code class="programcharacter">Access denied</code><p class="listcontinue1">Доступ к объекту запрещен.</p>
</li><li class="listbullet1"><code class="programcharacter">Skipped</code><p class="listcontinue1">Сканирование пропущено. </p>
</li><li class="listbullet1"><code class="programcharacter">Password protected</code><p class="listcontinue1">Проверяемый объект защищен паролем.</p>
</li><li class="listbullet1"><code class="programcharacter">Max depth exceeded</code><p class="listcontinue1">Превышена максимальная глубина распаковки вложенных архивов при сканировании.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181065"><p><a name="181065" style="display: none;">[Topic 181065]</a></p>
	<h4 id="t234391" class="heading4">Повышение коэффициента обнаружения</h4>
<p class="bodytext">Когда выполняется HTTP-запрос на сканирование файла или блока памяти, есть два способа увеличить коэффициент обнаружения, указав необязательный контекст задачи сканирования:</p>
<ul class="listbullet1"><li class="listbullet1">Укажите источник объекта для сканирования в поле <code class="programcharacter">url</code> тела запроса POST:<ul class="listbullet2"><li class="listbullet2">Если объект для сканирования был получен из Интернета, укажите веб-адрес источника, включая протокол, например:<p class="listcontinue2"><code class="programcharacter">http://example.com</code></p> <p class="listcontinue2">Поддерживаются протоколы HTTP, HTTPS и FTP.</p> <p class="listcontinue2">Если URL-адрес неизвестен, рекомендуется использовать <code class="programcharacter">http://example.com</code> в качестве контекста задачи сканирования.</p> </li><li class="listbullet2">Если объект для сканирования был получен по электронной почте, укажите адрес отправителя в следующем формате: <code class="programcharacter">[from:%sender_address%]</code>, например:<p class="listcontinue2"><code class="programcharacter">[from:example@example.com]</code></p> <p class="listcontinue2">Если адрес отправителя неизвестен, рекомендуется использовать <code class="programcharacter">[from: test@relay.example]</code> в качестве контекста задачи сканирования.</p> </li></ul><p class="listcontinue1">Ниже приведен пример HTTP-запроса на сканирование локального файла, полученного из Интернета. Обратите внимание на использование поля <code class="programcharacter">url</code> для указания веб-адреса источника:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/scanfile HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 22</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;timeout&quot;: &quot;10000&quot;,</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/eicar&quot;,</p>
<p class="program2">&quot;url&quot;: &quot;http:\/\/example.com&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table> <p class="listcontinue1">Ответ такой же, как в <a id="h193051" class="englishcrossreferencetemplate" href="#193002" target="_self">примере HTTP-запроса на сканирование локального файла</a>.</p> </li><li class="listbullet1">Предоставьте заголовки запроса и ответа, собранные из HTTP-трафика, связанного с объектом для сканирования, в полях <code class="programcharacter">requestHeaders</code> и <code class="programcharacter">responseHeaders</code> тела запроса POST.<p class="attentioncontinue1">Обратите внимание, что вы можете комбинировать два типа контекста задачи сканирования для дальнейшего повышения коэффициента обнаружения. В приведенном ниже примере заголовки запроса и ответа указаны вместе с веб-адресом источника.</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/scanfile HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 22</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/eicars.tar&quot;,</p>
<p class="program2">&quot;requestHeaders&quot;: &quot;: authority: example.com\r\n: method: GET\r\n path:\/ \r\n:scheme: https\r\naccept: text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8\r\naccept-encoding: gzip, deflate, br\r\naccept-language: ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7,mt;q=0.6\r\ncache-control: no-cache\r\npragma: no-cache\r\nupgrade-insecure-requests: 1\r\nuser-agent: Mozilla\/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/71.0.3578.98 Safari\/537.36&quot;,</p>
<p class="program2">&quot;responseHeaders&quot;: &quot;accept-ranges: bytes\r\ncache-control: max-age=604800\r\ncontent-type: text\/html; charset=UTF-8\r\ndate: Thu, 31 Jan 2019 18:51:11 GMT\r\netag: \&quot;1541025663\&quot;\r\nexpires: Thu, 07 Feb 2019 18:51:11 GMT\r\nlast-modified: Fri, 09 Aug 2013 23:54:35 GMT\r\nserver: ECS (dca\/532C)\r\nstatus: 200\r\nvary: Accept-Encoding\r\nx-cache: HIT&quot;,</p>
<p class="program2">&quot;url&quot;: &quot;http:\/\/example.com&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table> <p class="listcontinue1">На успешно обработанный запрос будет получен следующий ответ:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 Ok</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 15:46:29 GMT</p>
<p class="program">Content-Length: 75</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;object&quot;: \/home\/user\/eicars.tar&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program2">&quot;detectionName&quot;: &quot;multiple&quot;,</p>
<p class="program2">&quot;subObjectsScanResults&quot;: [</p>
<p class="program2">{</p>
<p class="program3">&quot;object&quot;: &quot;\/home\/user\/eicars.tar\/\/eicar1&quot;,</p>
<p class="program3">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program3">&quot;detectionName&quot;: &quot;EICAR-Test-File&quot;</p>
<p class="program2">},</p>
<p class="program2">{</p>
<p class="program3">&quot;object&quot;: &quot;\/home\/user\/eicars.tar\/\/eicar2&quot;,</p>
<p class="program3">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program3">&quot;detectionName&quot;: &quot;EICAR-Test-File&quot;</p>
<p class="program2">}</p>
<p class="program2">]</p>
<p class="program">}</p>
</td>
</tr>

</table> <p class="spacer"> </li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="224308"><p><a name="224308" style="display: none;">[Topic 224308]</a></p>
	<h4 id="t234265" class="heading4">Пример HTTP-запроса, содержащего токен API для авторизации</h4>
<p class="introheading">Протокол версии 3.0</p>
<p class="bodytext">Если в Kaspersky Scan Engine включена авторизация HTTP-клиентов, все HTTP-запросы должны содержать токен API.</p>
<p class="bodytext">В следующем примере показан HTTP-запрос, содержащий токен API в поле <code class="programcharacter">Authorization</code>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/scanfile HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 22</p>
<p class="program">Authorization: SldYQTUyOUNVMnE3VWR2N3Izamk2QkVNc2hhLTV5dTBLcVUzeXZLdGYtNkkrVFUyQUVRQUNLQUFCSWdwRUlJTQ==</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;timeout&quot;: &quot;10000&quot;,</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/eicar&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">В этом примере <code class="programcharacter">Authorization</code> – это имя по умолчанию для поля заголовка запроса, используемого для авторизации. Вы можете изменить это имя в разделе <span class="guicharacter"><a id="h224242" class="englishcrossreferencetemplate" href="#224195" target="_self">Authorization</a></span> Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 15:46:29 GMT</p>
<p class="program">Content-Length: 75</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/eicar&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program2">&quot;detectionName&quot;: &quot;EICAR-Test-File&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Если авторизация не удалась и был указан префикс Bearer, ответ будет следующим:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.1 401 Unauthorized</p>
<p class="program">WWW-Authenticate: Bearer realm=&quot;API Kaspersky Scan Engine&quot;</p>
</td>
</tr>

</table>
<p class="bodytext">Если авторизация не удалась и префикс Bearer не был указан, ответ будет следующим:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.1 401 Unauthorized</p>
<p class="program">WWW-Authenticate: Token realm=&quot;API Kaspersky Scan Engine&quot;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193002"><p><a name="193002" style="display: none;">[Topic 193002]</a></p>
	<h4 id="t234264" class="heading4">Пример HTTP-запроса на сканирование локального файла</h4>
<p class="introheading">Протокол версии 3.0</p>
<p class="bodytext">Ниже приведен пример HTTP-запроса на сканирование локального файла:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/scanfile HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 22</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;timeout&quot;: &quot;10000&quot;,</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/eicar&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="attentionbody">В поле <code class="programcharacter">object</code> можно указать только один объект.</p>
<p class="bodytext">Смотрите также <a id="h193049" class="englishcrossreferencetemplate" href="#193000" target="_self">описание всех возможных полей в теле запроса</a> и <a id="h181066" class="englishcrossreferencetemplate" href="#181065" target="_self">рекомендации по увеличению коэффициента обнаружения</a>.</p>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 15:46:29 GMT</p>
<p class="program">Content-Length: 75</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;object&quot;: &quot;\/home\/user\/eicar&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program2">&quot;detectionName&quot;: &quot;EICAR-Test-File&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Смотрите также <a id="h193050" class="englishcrossreferencetemplate" href="#193001" target="_self">описание всех возможных полей в теле ответа</a>.</p>
<p class="introheading">Протокол версии 3.1</p>
<p class="bodytext">Формат запроса такой же, но в ответе есть <a id="h193050_2" class="englishcrossreferencetemplate" href="#193001" target="_self">дополнительные поля</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193003"><p><a name="193003" style="display: none;">[Topic 193003]</a></p>
	<h4 id="t234263" class="heading4">Пример HTTP-запроса на сканирование части оперативной памяти</h4>
<p class="introheading">Протокол версии 3.0</p>
<p class="bodytext">Ниже приведен пример HTTP-запроса на сканирование блока оперативной памяти:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/scanmemory HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 105</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;timeout&quot;: &quot;10000&quot;,</p>
<p class="program2">&quot;object&quot;: &quot;WDVPIVAlQEFQWzRcUFpYNTQoUF4pN0NDKTd9JEVJQ0FSLVNUQU5EQVJELUFOVElWSVJVUy1URVNULUZJTEUhJEgrSCo=&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="attentionbody">В поле <code class="programcharacter">object</code> можно указать только один объект.</p>
<p class="bodytext">Смотрите также <a id="h193049" class="englishcrossreferencetemplate" href="#193000" target="_self">описание всех возможных полей в теле запроса</a> и <a id="h181066" class="englishcrossreferencetemplate" href="#181065" target="_self">рекомендации по увеличению коэффициента обнаружения</a>.</p>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 16:08:12 GMT</p>
<p class="program">Content-Length: 72</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;object&quot;: &quot;memory&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program2">&quot;detectionName&quot;: &quot;EICAR-Test-File&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Смотрите также <a id="h193050" class="englishcrossreferencetemplate" href="#193001" target="_self">описание всех возможных полей в теле ответа</a>.</p>
<p class="introheading">Протокол версии 3.1</p>
<p class="bodytext">Формат запроса такой же, но в ответе есть <a id="h193050_2" class="englishcrossreferencetemplate" href="#193001" target="_self">дополнительные поля</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193004"><p><a name="193004" style="display: none;">[Topic 193004]</a></p>
	<h4 id="t234257" class="heading4">Пример HTTP-запроса на проверку URL-адреса</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на проверку URL-адреса:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/checkurl HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 50</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;timeout&quot;: &quot;10000&quot;,</p>
<p class="program2">&quot;url&quot;: &quot;http:\/\/<code class="programcharacter">bug.qainfo.ru</code>\/<code class="programcharacter">TesT</code>\/Aphish_w&quot;,</p>
<p class="program2">&quot;hostIp&quot;: &quot;233.252.0.1&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 16:15:44 GMT</p>
<p class="program">Content-Length: 104</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;url&quot;: &quot;http:\/\/<code class="programcharacter">bug.qainfo.ru</code>\/<code class="programcharacter">TesT</code>\/Aphish_w&quot;,</p>
<p class="program2">&quot;scanResult&quot;: &quot;DETECT&quot;,</p>
<p class="program2">&quot;detectionName&quot;: &quot;PHISHING_URL&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext"> Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">url</code> – проверенный URL-адрес.</li><li class="listbullet1"><code class="programcharacter">scanResult</code> – результат сканирования веб-адреса. Может иметь следующие значения:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">CLEAN</code></li><li class="listbullet2"><code class="programcharacter">DETECT</code></li><li class="listbullet2"><code class="programcharacter">DISINFECTED</code></li><li class="listbullet2"><code class="programcharacter">DELETED</code></li><li class="listbullet2"><code class="programcharacter">NON_SCANNED</code></li><li class="listbullet2"><code class="programcharacter">SERVER_ERROR</code></li></ul></li><li class="listbullet1"><code class="programcharacter">detectionName</code> – имя обнаруженного вредоносного объекта в классификации &quot;Лаборатории Касперского&quot;. Статус может иметь следующие значения:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">PHISHING_URL</code></li><li class="listbullet2"><code class="programcharacter">MALICIOUS_URL</code></li><li class="listbullet2"><code class="programcharacter">ADWARE_URL</code></li><li class="listbullet2"><code class="programcharacter">RISKWARE_URL</code></li></ul></li></ul><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193005"><p><a name="193005" style="display: none;">[Topic 193005]</a></p>
	<h4 id="t234262" class="heading4">Пример HTTP-запроса на получение даты выпуска текущей антивирусной базы</h4>
<p class="bodytext">Запрос на получение даты выпуска текущей антивирусной базы обычно посылается, чтобы убедиться, что база успешно обновилась до последней версии.</p>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение даты выпуска текущей антивирусной базы:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET /api/v3.0/basesdate HTTP/1.0</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 19:03:18 GMT</p>
<p class="program">Content-Length: 50</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;databaseVersion&quot;: &quot;30.01.2019 18:38 GMT&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext"> Здесь <code class="programcharacter">databaseVersion</code> содержит текущую версию антивирусных баз в следующем формате: <code class="programcharacter">DD.MM.YYYY hh:mm GMT</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193007"><p><a name="193007" style="display: none;">[Topic 193007]</a></p>
	<h4 id="t234261" class="heading4">Пример HTTP-запроса для получения текущей версии KAV SDK</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение версии библиотеки KAV SDK, на которой основана текущая версия Kaspersky Scan Engine:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET /api/v3.0/version HTTP/1.0</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 19:05:51 GMT</p>
<p class="program">Content-Length: 36</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;KAVSDKVersion&quot;: &quot;8.8.2.58&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext"> Здесь <code class="programcharacter">KAVSDKVersion</code> содержит текущую версию KAV SDK в следующем формате: <code class="programcharacter">MajorVersion.MinorVersion.BuildNumber.Revision</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193008"><p><a name="193008" style="display: none;">[Topic 193008]</a></p>
	<h4 id="t234260" class="heading4">Пример HTTP-запроса на получение лицензионной информации</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение лицензионной информации:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET /api/v3.0/licenseinfo HTTP/1.0</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос, который содержит лицензионную информацию, если вы используете <a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">режим лицензирования офлайн</a>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 19:04:30 GMT</p>
<p class="program">Content-Length: 81</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;licenseName&quot;: &quot;EXAMPLE.key&quot;,</p>
<p class="program2">&quot;licenseExpirationDate&quot;: &quot;05.12.2020&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">licenseName</code> – имя используемого файла ключа.</li><li class="listbullet1"><code class="programcharacter">licenseExpirationDate</code> – дата, до которой действителен используемый файл ключа. Дата указана в следующем формате: <code class="programcharacter">DD.MM.YYYY</code>.</li></ul><p class="bodytext">Нижеприведенный блок показывает ответ на запрос, который содержит лицензионную информацию, если вы используете <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режим лицензирования онлайн</a>. В этом примере срок действия лицензионного билета истек.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">Content-Length: 185</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;activationCode&quot;: &quot;EXMPL-*****-*****-12345&quot;,</p>
<p class="program2">&quot;licenseExpirationDate&quot;: &quot;05.12.2020&quot;,</p>
<p class="program2">&quot;ticketExpired&quot;: &quot;The license ticket has expired. Computer must be connected to the Internet to update the license ticket.&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">activationCode</code> – используемый код активации.</li><li class="listbullet1"><code class="programcharacter">licenseExpirationDate</code> – дата, до которой действителен используемый код активации. Дата указана в следующем формате: <code class="programcharacter">DD.MM.YYYY</code>.</li><li class="listbullet1"><code class="programcharacter">ticketExpired</code> – сообщение, которое будет включено в ответ, если истек срок действия лицензионного билета.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193009"><p><a name="193009" style="display: none;">[Topic 193009]</a></p>
	<h4 id="t234259" class="heading4">Пример HTTP-запроса на получение обобщенной статистики</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение обобщенной статистики:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET /api/v3.0/getstatistics HTTP/1.0</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 19:07:54 GMT</p>
<p class="program">Content-Length: 314</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;statistics&quot;: {</p>
<p class="program3">&quot;total_requests&quot;: 3,</p>
<p class="program3">&quot;infected_requests&quot;: 3,</p>
<p class="program3">&quot;protected_requests&quot;: 3,</p>
<p class="program3">&quot;error_requests&quot;: 0,</p>
<p class="program3">&quot;engine_errors&quot;: 0,</p>
<p class="program3">&quot;processed_data&quot;: 204,</p>
<p class="program3">&quot;infected_data&quot;: 204,</p>
<p class="program3">&quot;processed_urls&quot;: 1,</p>
<p class="program3">&quot;infected_urls&quot;: 1</p>
<p class="program2">}</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext"> Здесь <code class="programcharacter">statistics</code> – это объект, содержащий следующую накопленную статистику:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">total_requests</code> – общее количество запросов на сканирование файла или блока памяти и проверки URL-адреса.</li><li class="listbullet1"><code class="programcharacter">infected_requests</code> – количество запросов, на которые Kaspersky Scan Engine вернул результат сканирования <code class="programcharacter">DETECT</code>, <code class="programcharacter">DISINFECTED</code> или <code class="programcharacter">DELETED</code>.</li><li class="listbullet1"><code class="programcharacter">protected_requests</code> – количество запросов, на которые Kaspersky Scan Engine вернул результат сканирования <code class="programcharacter">DISINFECTED</code> или <code class="programcharacter">DELETED</code>.</li><li class="listbullet1"><code class="programcharacter">error_requests</code> – количество запросов, на которые Kaspersky Scan Engine вернул результат сканирования <code class="programcharacter">NON_SCANNED</code> (ошибка сканирования связана со сканируемым объектом).</li><li class="listbullet1"><code class="programcharacter">engine_errors</code> – количество запросов, на которые Kaspersky Scan Engine вернул результат сканирования <code class="programcharacter">SERVER_ERROR</code> (ошибка сканирования не связана со сканируемым объектом).</li><li class="listbullet1"><code class="programcharacter">processed_data</code> – размер всех просканированных файлов в байтах.</li><li class="listbullet1"><code class="programcharacter">infected_data</code> – размер всех просканированных файлов в байтах, отправленных в запросах, на которые Kaspersky Scan Engine вернул результат сканирования <code class="programcharacter">DETECT</code>, <code class="programcharacter">DISINFECTED</code> или <code class="programcharacter">DELETED</code>.</li><li class="listbullet1"><code class="programcharacter">processed_urls</code> – количество проверенных URL-адресов.</li><li class="listbullet1"><code class="programcharacter">infected_urls</code> – количество URL-адресов, распознанных решением Kaspersky Scan Engine как вредоносные, фишинговые, рекламные или легальные программы, которые злоумышленники могут использовать для нанесения ущерба компьютеру и данным.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193010"><p><a name="193010" style="display: none;">[Topic 193010]</a></p>
	<h4 id="t234258" class="heading4">Пример HTTP-запроса на удаление обобщенной статистики</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на удаление обобщенной статистики:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/clearstatistics HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 2</p>
<p class="program">&nbsp;</p>
<p class="program">{}</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 19:09:27 GMT</p>
<p class="program">Content-Length: 27</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;error&quot;: &quot;CLEARED&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193011"><p><a name="193011" style="display: none;">[Topic 193011]</a></p>
	<h4 id="t234353" class="heading4">Пример HTTP-запроса на обновление антивирусной базы</h4>
<p class="attentionbody">Этот запрос может быть выполнен, только если HTTP-клиент и Kaspersky Scan Engine установлены на одном компьютере. Если вы пошлете этот запрос с другого компьютера, Kaspersky Scan Engine вернет ошибку <code class="programcharacter">405 Method Not Allowed</code>.</p>
<p class="bodytext">Ниже приведен пример HTTP-запроса на обновление антивирусной базы:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /api/v3.0/update/start HTTP/1.0</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 2</p>
<p class="program">&nbsp;</p>
<p class="program">{}</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа, который будет возвращен в случае, если обновление началось успешно:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 18:05:44 GMT</p>
<p class="program">Content-Length: 26</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;update started&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа, который будет возвращен в случае, если запрос был послан, когда обновление уже началось:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 18:05:44 GMT</p>
<p class="program">Content-Length: 35</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;update already launched&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа, который будет возвращен в случае, если во время запуска обновления произошла ошибка:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 18:05:44 GMT</p>
<p class="program">Content-Length: 40</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;error while launching update&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193012"><p><a name="193012" style="display: none;">[Topic 193012]</a></p>
	<h4 id="t234348" class="heading4">Пример HTTP-запроса на получение статуса обновления антивирусной базы</h4>
<p class="attentionbody">Этот запрос может быть выполнен, только если HTTP-клиент и Kaspersky Scan Engine установлены на одном компьютере. Если вы пошлете этот запрос с другого компьютера, Kaspersky Scan Engine вернет ошибку <code class="programcharacter">405 Method Not Allowed</code>.</p>
<p class="introheading">Протокол версии 3.0</p>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение статуса обновления антивирусной базы:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET /api/v3.0/update/status HTTP/1.0</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 30 Jan 2019 18:05:44 GMT</p>
<p class="program">Content-Length: 116</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;not started&quot;,</p>
<p class="program2">&quot;last_update_result&quot;: &quot;success&quot;,</p>
<p class="program2">&quot;last_update_time&quot;: &quot;21:03:53 30.01.2019&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Смотрите также <a id="h179933" class="englishcrossreferencetemplate" href="#179882" target="_self">описание всех полей, которые могут быть включены в тело ответа</a>.</p>
<p class="introheading">Протокол версии 3.1</p>
<p class="bodytext">Формат запроса такой же, но в ответе есть <a id="h179933_2" class="englishcrossreferencetemplate" href="#179882" target="_self">дополнительные поля</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="193338"><p><a name="193338" style="display: none;">[Topic 193338]</a></p>
	<h4 id="t234349" class="heading4">Пример HTTP-запроса на получение информации из KSN</h4>
<p class="bodytext">В следующем примере показан HTTP-запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET /api/v3.1/ksninfo</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">Server: KAVHTTPD/1.0</p>
<p class="program">X-KAV-ProtocolVersion: 3</p>
<p class="program">Date: Wed, 02 Dec 2019 18:06:50 GMT</p>
<p class="program">Content-Length: 190</p>
<p class="program">&nbsp;</p>
<p class="program">{</p>
<p class="program2">&quot;ksnStatus&quot;: &quot;Connected&quot;,</p>
<p class="program2">&quot;whiteApplications&quot;: %whiteApplications%,</p>
<p class="program2">&quot;malwareApplications&quot;: %malwareApplications%,</p>
<p class="program2">&quot;blockedThreats&quot;: %blockedThreats%,</p>
<p class="program2">&quot;region&quot;: &quot;%ksnRegion%&quot;,</p>
<p class="program2">&quot;responseTimestamp&quot;: &quot;%responseTimestamp%&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Если KSN выключен, тело ответа содержит объект JSON с одним полем <code class="programcharacter">ksnStatus</code>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;ksnStatus&quot;: &quot;KSN turned off&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181038"><p><a name="181038" style="display: none;">[Topic 181038]</a></p>
	<h3 id="t234439" class="heading3">Выполнение запросов в режиме HTTP по протоколу KAV версий 1 и 2</h3>
<p class="bodytext">Этот раздел содержит информацию о том, как отправлять HTTP-запросы к Kaspersky Scan Engine, используя протокол KAV версий 1 и 2.</p>
<p class="bodytext">
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#181170" target="_self">Поддерживаемые методы API в протоколе KAV версий 1 и 2</a></p><p class="relateditem"><a href="#181073" target="_self">Заголовки запросов</a></p><p class="relateditem"><a href="#224307" target="_self">Пример HTTP-запроса, содержащего токен API для авторизации</a></p><p class="relateditem"><a href="#181074" target="_self">Пример HTTP-запроса на сканирование локального файла</a></p><p class="relateditem"><a href="#181076" target="_self">Пример HTTP-запроса на сканирование части оперативной памяти</a></p><p class="relateditem"><a href="#181078" target="_self">Пример составного HTTP-запроса на сканирование блока памяти</a></p><p class="relateditem"><a href="#181080" target="_self">Пример HTTP-запроса на проверку URL-адреса</a></p><p class="relateditem"><a href="#181082" target="_self">Пример HTTP-запроса на получение даты выпуска текущей антивирусной базы</a></p><p class="relateditem"><a href="#181084" target="_self">Пример HTTP-запроса для получения текущей версии KAV SDK</a></p><p class="relateditem"><a href="#181086" target="_self">Пример HTTP-запроса на получение лицензионной информации</a></p><p class="relateditem"><a href="#181088" target="_self">Пример HTTP-запроса на получение обобщенной статистики</a></p><p class="relateditem"><a href="#181090" target="_self">Пример HTTP-запроса на удаление обобщенной статистики</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181170"><p><a name="181170" style="display: none;">[Topic 181170]</a></p>
	<h4 id="t234523" class="heading4">Поддерживаемые методы API в протоколе KAV версий 1 и 2 </h4>
<p class="bodytext">Помимо использования <a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">протокола KAV версии 3</a>, вы можете отправлять POST- и GET-запросы к Kaspersky Scan Engine с помощью протокола KAV версий 1 и 2.</p>
<p class="bodytext">В следующей таблице перечислены методы API, которые Kaspersky Scan Engine поддерживает в режиме HTTP при использовании протокола KAV версий 1 и 2.</p>
<p class="tablename">Методы API, поддерживаемые в режиме HTTP в протоколе KAV версий 1 и 2</p>
<table class="tableintopic" width="960" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="186"><p class="tableheading">Метод API</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="84"><p class="tableheading">Метод HTTP</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="690"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181075" class="englishcrossreferencetemplate" href="#181074" target="_self">/scanfile</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Сканирует файл.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181077" class="englishcrossreferencetemplate" href="#181076" target="_self">/scanmemory</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Сканирует блок системной памяти.</p>
<p class="bodytext">При сканировании системной памяти используйте только режим очистки KAV_SKIP. Kaspersky Scan Engine не может лечить или удалять файлы в этом режиме.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181081" class="englishcrossreferencetemplate" href="#181080" target="_self">/checkurl</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Проверяет URL-адрес. </p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181083" class="englishcrossreferencetemplate" href="#181082" target="_self">/basesdate</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Получает дату выпуска антивирусных баз. Вы можете использовать этот метод, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181085" class="englishcrossreferencetemplate" href="#181084" target="_self">/version</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Получает текущую версию KAV SDK. Вы можете использовать этот метод, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181087" class="englishcrossreferencetemplate" href="#181086" target="_self">/licenseinfo</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Получает информацию о текущем файле ключа или коде активации. Вы можете использовать этот метод, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181089" class="englishcrossreferencetemplate" href="#181088" target="_self">/getstatistics</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">GET</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Получает накопленную статистику.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="186"><p class="bodytext"><code class="programcharacter"><a id="h181091" class="englishcrossreferencetemplate" href="#181090" target="_self">/clearstatistics</a></code></p>
</td>
<td style="border:1px solid #010101;" width="84"><p class="bodytext">POST</p>
</td>
<td style="border:1px solid #010101;" width="690"><p class="bodytext">Очищает накопленную статистику.</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181073"><p><a name="181073" style="display: none;">[Topic 181073]</a></p>
	<h4 id="t234477" class="heading4">Заголовки запросов</h4>
<p class="attentionbody">HTTP-запрос к Kaspersky Scan Engine методом POST должен содержать заголовок <code class="programcharacter">Content-Length</code>.</p>
<p class="bodytext">При отправке HTTP-запроса вы можете задать три заголовка запроса, специфичные для Kaspersky Scan Engine:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">X-KAV-ProtocolVersion</code><p class="listcontinue1">Этот заголовок определяет используемую версию протокола KAV. Этот заголовок является обязательным.</p>
</li><li class="listbullet1"><code class="programcharacter">X-KAV-Timeout</code><p class="listcontinue1">Этот заголовок указывает тайм-аут операции сканирования в миллисекундах (но не тайм-аут сеанса). Этот заголовок не является обязательным. </p>
<p class="listcontinue1">Этот заголовок принимает значения от <code class="programcharacter">0</code> до <code class="programcharacter">4294967295</code> (32-разрядное целое положительное число). Задайте значение в зависимости от характеристик проверяемого объекта (например, его размера, является ли он составным или нет; Kaspersky Scan Engine дольше проверяет большой составной объект).</p>
<p class="listcontinue1">Смотрите также подробную информацию о <a id="h179922" class="englishcrossreferencetemplate" href="#179870" target="_self">тайм-ауте сканирования и тайм-ауте сеанса</a>.</p>
</li><li class="listbullet1"><code class="programcharacter">X-KAV-ObjectURL</code><p class="listcontinue1">Этот заголовок содержит контекст задачи проверки, который Kaspersky Scan Engine использует для повышения коэффициента обнаружения. Этот заголовок не является обязательным.</p>
<p class="listcontinue1">Использование этого заголовка не влияет на производительность сканирования.</p>
<p class="attentioncontinue1">Мы рекомендуем вам использовать контекст задачи сканирования при интеграции типа gateway.</p>
<p class="listcontinue1">Используйте следующий формат для контекста:</p>
<ul class="listbullet2"><li class="listbullet2">Если объект для сканирования был получен из Интернета, укажите веб-адрес источника, включая протокол, например:<p class="listcontinue2"><code class="programcharacter">http://example.com</code></p> <p class="listcontinue2">Поддерживаются протоколы HTTP, HTTPS и FTP.</p> <p class="listcontinue2">Если URL-адрес неизвестен, мы рекомендуем использовать <code class="programcharacter">http://example.com</code> в качестве контекста задачи сканирования.</p> </li><li class="listbullet2">Если объект для сканирования был получен по электронной почте, укажите адрес отправителя в следующем формате: <code class="programcharacter">[from:%sender_address%]</code>, например:<p class="listcontinue2"><code class="programcharacter">[from:example@example.com]</code></p> <p class="listcontinue2">Если адрес отправителя неизвестен, рекомендуется использовать <code class="programcharacter">[from: test@relay.example]</code> в качестве контекста задачи сканирования.</p> </li></ul><p class="attentioncontinue1">Контекст задачи сканирования применим только к проверке файлов и памяти. Если вы укажете контекст задачи сканирования для URL-адреса, он будет проигнорирован.</p>
</li><li class="listbullet1"><code class="programcharacter">X-KAV-HostIP</code><p class="listcontinue1">Этот заголовок указывает IP-адрес хоста, на котором размещен URL-адрес для сканирования. Добавление его в запрос увеличивает коэффициент обнаружения.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="224307"><p><a name="224307" style="display: none;">[Topic 224307]</a></p>
	<h4 id="t234342" class="heading4">Пример HTTP-запроса, содержащего токен API для авторизации</h4>
<p class="bodytext">Если в Kaspersky Scan Engine включена авторизация HTTP-клиентов, все HTTP-запросы должны содержать <a id="h224351" class="englishcrossreferencetemplate" href="#184921" target="_self">токен API</a>.</p>
<p class="bodytext">В следующем примере показан HTTP-запрос, содержащий токен API в поле <code class="programcharacter">Authorization</code>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /scanfile HTTP/1.0</p>
<p class="program">Content-Length: 35</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">X-KAV-Timeout: 10</p>
<p class="program">Authorization: SldYQTUyOUNVMnE3VWR2N3Izamk2QkVNc2hhLTV5dTBLcVUzeXZLdGYtNkkrVFUyQUVRQUNLQUFCSWdwRUlJTQ==</p>
<p class="program">&nbsp;</p>
<p class="program">* Full path to the EICAR test file * </p>
</td>
</tr>

</table>
<p class="bodytext">В этом примере <code class="programcharacter">Authorization</code> – это имя по умолчанию для поля заголовка запроса, используемого для авторизации. Вы можете изменить это имя в разделе <span class="guicharacter"><a id="h224242" class="englishcrossreferencetemplate" href="#224195" target="_self">Authorization</a></span> Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 32</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">DETECT EICAR-Test-File</p>
</td>
</tr>

</table>
<p class="bodytext">Если авторизация не удалась и был указан префикс Bearer, ответ будет следующим:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.1 401 Unauthorized</p>
<p class="program">WWW-Authenticate: Bearer realm=&quot;API Kaspersky Scan Engine&quot;</p>
</td>
</tr>

</table>
<p class="bodytext">Если авторизация не удалась и префикс Bearer не был указан, ответ будет следующим:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.1 401 Unauthorized</p>
<p class="program">WWW-Authenticate: Token realm=&quot;API Kaspersky Scan Engine&quot;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181074"><p><a name="181074" style="display: none;">[Topic 181074]</a></p>
	<h4 id="t234352" class="heading4">Пример HTTP-запроса на сканирование локального файла</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на сканирование локального файла:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /scanfile HTTP/1.0</p>
<p class="program">Content-Length: 35</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">X-KAV-Timeout: 10</p>
<p class="program">&nbsp;</p>
<p class="program">* Full path to the EICAR test file * </p>
</td>
</tr>

</table>
<p class="attentionbody">Если файл для сканирования большой, вы можете указать заголовок <code class="programcharacter">X-KAV-Timeout</code>.</p>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 32</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">DETECT EICAR-Test-File</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181076"><p><a name="181076" style="display: none;">[Topic 181076]</a></p>
	<h4 id="t234351" class="heading4">Пример HTTP-запроса на сканирование части оперативной памяти</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на сканирование блока оперативной памяти:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /scanmemory HTTP/1.0</p>
<p class="program">Content-Length: 35</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">X-KAV-Timeout: 10</p>
<p class="program">&nbsp;</p>
<p class="program">* Содержание тестового файла EICAR * </p>
</td>
</tr>

</table>
<p class="attentionbody">Если файл для сканирования большой, вы можете указать заголовок <code class="programcharacter">X-KAV-Timeout</code>.</p>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 64</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">DETECT EICAR-Test-File</p>
</td>
</tr>

</table>
<p class="bodytext">Вы также можете сделать <a id="h181079" class="englishcrossreferencetemplate" href="#181078" target="_self">составной запрос на сканирование</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181078"><p><a name="181078" style="display: none;">[Topic 181078]</a></p>
	<h4 id="t234341" class="heading4">Пример составного HTTP-запроса на сканирование блока памяти</h4>
<p class="bodytext">В Kaspersky Scan Engine составной HTTP-запрос – это HTTP-запрос, содержащий заголовки запроса или ответа, полученные из HTTP-трафика, связанного со сканируемым объектом. Вы можете отправлять составные HTTP-запросы, чтобы повысить коэффициент обнаружения. </p>
<p class="attentionbody">Kaspersky Scan Engine не поддерживает составные HTTP-запросы, как определено в RFC 1341.</p>
<p class="attentionbody">Для выполнения составных HTTP-запросов используйте протокол KAV версии 2, указав его в заголовке запроса <code class="programcharacter">X-KAV-ProtocolVersion</code>.</p>
<p class="bodytext">Тело составного HTTP-запроса должно состоять не более чем из трех частей. Эти части содержат следующие данные:</p>
<ul class="listbullet1"><li class="listbullet1">Заголовки запроса (необязательно).<p class="listcontinue1">Эта часть должна начинаться со строки <code class="programcharacter">Request headers</code>, за которой следует символ <code class="programcharacter">\r\n</code>. За этими символами должны следовать заголовки запросов из HTTP-трафика, относящегося к сканируемому объекту.</p> </li><li class="listbullet1">Заголовки ответа (необязательно).<p class="listcontinue1">Эта часть должна начинаться со строки <code class="programcharacter">Response headers</code>, за которой следует символ <code class="programcharacter">\r\n</code>. За этими символами должны следовать заголовки ответов из HTTP-трафика, относящегося к сканируемому объекту.</p> </li><li class="listbullet1">Объект для сканирования.<p class="listcontinue1">Эта часть может содержать полный путь к файлу для сканирования (если запрос был послан к <code class="programcharacter">/scanfile</code>) или строку (если запрос был послан к <code class="programcharacter">/scanmemory</code>).</p> </li></ul><p class="bodytext">В следующем примере показан составной HTTP-запрос для сканирования блока памяти:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST /scanmemory HTTP/1.0</p>
<p class="program">Content-Length: 753</p>
<p class="program">X-KAV-ProtocolVersion: 2</p>
<p class="program">X-KAV-Timeout: 10</p>
<p class="program"><code class="programcharacter">X-KAV-ObjectURL: http://example.com</code></p>
<p class="program">Content-Type: multipart/mixed; boundary=gc0p4Jq0M2Yt08jU534c0p</p>
<p class="program">&nbsp;</p>
<p class="program">--gc0p4Jq0M2Yt08jU534c0p</p>
<p class="program">Заголовки запросов</p>
<p class="program">GET /files/test.exe HTTP/1.1</p>
<p class="program">Host: source.example.com</p>
<p class="program">Accept: application/octet-stream</p>
<p class="program">Referer: http://malicious.example.com/</p>
<p class="program">Host: source.example.com</p>
<p class="program">Connection: Keep-Alive</p>
<p class="program">--gc0p4Jq0M2Yt08jU534c0p</p>
<p class="program">Заголовки ответов</p>
<p class="program">HTTP/1.1 200 OK</p>
<p class="program">Content-Type: application/octet-stream</p>
<p class="program">Content-Length: 21541</p>
<p class="program">Date: Mon, 25 Sep 2017 11:01:54 GMT</p>
<p class="program">Last-Modified: Fri, 28 Sep 2017 03:15:02 GMT</p>
<p class="program">--gc0p4Jq0M2Yt08jU534c0p</p>
<p class="program">* Содержание тестового файла EICAR *</p>
<p class="program">--gc0p4Jq0M2Yt08jU534c0p--</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Fri, 28 Sep 2017 03:15:02 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 64</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 2</p>
<p class="program">&nbsp;</p>
<p class="program">DETECT EICAR-Test-File</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181080"><p><a name="181080" style="display: none;">[Topic 181080]</a></p>
	<h4 id="t234343" class="heading4">Пример HTTP-запроса на проверку URL-адреса</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на проверку URL-адреса:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"><code class="programcharacter">POST /checkurl HTTP/1.0</code></p>
<p class="program"><code class="programcharacter">Content-Length: 27</code></p>
<p class="program"><code class="programcharacter">X-KAV-ProtocolVersion: 1</code></p>
<p class="program"><code class="programcharacter">X-KAV-Timeout: 15</code></p>
<p class="program">&nbsp;</p>
<p class="program"><code class="programcharacter">* Фишинговый URL-адрес для проверки * </code></p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:22 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 110</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">DETECT PHISHING_URL</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181082"><p><a name="181082" style="display: none;">[Topic 181082]</a></p>
	<h4 id="t234350" class="heading4">Пример HTTP-запроса на получение даты выпуска текущей антивирусной базы</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение даты выпуска текущей антивирусной базы:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET <code class="programcharacter">/basesdate</code> HTTP/1.0</p>
<p class="program">Host: example.com</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 15:03:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 40</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">database version: 9.02.2014 15:03 GMT</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181084"><p><a name="181084" style="display: none;">[Topic 181084]</a></p>
	<h4 id="t234347" class="heading4">Пример HTTP-запроса для получения текущей версии KAV SDK</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение версии библиотеки KAV SDK, на которой основана текущая версия Kaspersky Scan Engine:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET <code class="programcharacter">/version</code> HTTP/1.0</p>
<p class="program">Host: example.com</p>
<p class="program">X-KAV-ProtocolVersion: 1 </p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 27</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">KAV SDK version: 8.8.0.80</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181086"><p><a name="181086" style="display: none;">[Topic 181086]</a></p>
	<h4 id="t234346" class="heading4">Пример HTTP-запроса на получение лицензионной информации</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение лицензионной информации:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET <code class="programcharacter">/licenseinfo</code> HTTP/1.0</p>
<p class="program">Host: example.com</p>
<p class="program">X-KAV-ProtocolVersion: 1 </p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос, который содержит лицензионную информацию, если вы используете <a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">режим лицензирования офлайн</a>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 65</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">key file name: EXAMPLE.key</p>
<p class="program">license expiration date: 05.12.2020</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос, который содержит лицензионную информацию, если вы используете <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режим лицензирования онлайн</a>. В этом примере срок действия лицензионного билета истек.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 185</p>
<p class="program">Connection: close</p>
<p class="program">Content-Type: text/plain</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
<p class="program">&nbsp;</p>
<p class="program">activation code: EXMPL-*****-*****-12345</p>
<p class="program">license expiration date: 05.12.2020</p>
<p class="program">The license ticket has expired. Computer must be connected to the Internet to update the license ticket.</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181088"><p><a name="181088" style="display: none;">[Topic 181088]</a></p>
	<h4 id="t234345" class="heading4">Пример HTTP-запроса на получение обобщенной статистики</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на получение обобщенной статистики:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">GET <code class="programcharacter">/getstatistics</code> HTTP/1.0</p>
<p class="program">Host: example.com</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
</td>
</tr>

</table>
<p class="bodytext">Описание статистики, возвращаемой в HTTP-ответе, смотрите в примере <a id="h193118" class="englishcrossreferencetemplate" href="#193009" target="_self">выполнения этого запроса в протоколе KAV версии 3</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181090"><p><a name="181090" style="display: none;">[Topic 181090]</a></p>
	<h4 id="t234344" class="heading4">Пример HTTP-запроса на удаление обобщенной статистики</h4>
<p class="bodytext">Ниже приведен пример HTTP-запроса на удаление обобщенной статистики:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">POST <code class="programcharacter">/clearstatistics</code> HTTP/1.0</p>
<p class="program">User-Agent: KAV HTTP Client</p>
<p class="program">Content-Length: 0</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.0 200 OK</p>
<p class="program">Date: Mon, 10 February 2014 12:25:21 GMT</p>
<p class="program">Server: KAVHTTPD</p>
<p class="program">Content-Length: 0</p>
<p class="program">Connection: close</p>
<p class="program">X-KAV-ProtocolVersion: 1</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201538"><p><a name="201538" style="display: none;">[Topic 201538]</a></p>
	<h3 id="t234374" class="heading3">Получение списка HTTP-методов, поддерживаемых службой</h3>
<p class="bodytext">Когда Kaspersky Scan Engine работает в режиме HTTP, вы можете сделать запрос OPTIONS на все поддерживаемые методы API. Этот запрос позволяет получить информацию о методах HTTP, которые поддерживаются в сервисе kavhttpd.</p>
<p class="bodytext">Чтобы сделать запрос, укажите метод API для метода OPTIONS.</p>
<p class="bodytext">Ниже приведен пример запроса OPTIONS:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">OPTIONS /api/v3.1/version HTTP/1.1</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример ответа на запрос:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">HTTP/1.1 200 OK</p>
<p class="program">Date: Wed, 15 Jul 2020 10:15:44 GMT</p>
<p class="program">Content-Length: 0</p>
<p class="program">Allow: OPTIONS, GET</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь <code class="programcharacter">Allow</code> – список методов HTTP, которые поддерживаются в этом методе API.</p>
<p class="bodytext">Если HTTP-запрос содержит поле <code class="programcharacter">Origin</code> (поле, содержащее IP-адрес или имя хоста, инициирующего запрос) и если элемент <code class="programcharacter">AccessControlAllowOrigin</code> определен в файле конфигурации режима HTTP, ответ будет содержать <code class="programcharacter">Access-Control-Allow-Origin</code> и поля <code class="programcharacter">Access-Control-Allow-Methods</code> вместо поля <code class="programcharacter">Allow</code>. В этом случае поле <code class="programcharacter">Access-Control-Allow-Origin</code> может содержать значения, описанные в разделе <code class="programcharacter"><a id="h201539" class="englishcrossreferencetemplate" href="#201900" target="_self">ServerSettings &gt; CORS</a></code>, а значение поля <code class="programcharacter">Access-Control-Allow-Methods</code> аналогично значению поля <code class="programcharacter">Allow</code>.</p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179883"><p><a name="179883" style="display: none;">[Topic 179883]</a></p>
	<h2 id="t234587" class="heading2">Использование примера HTTP-клиента</h2>
<p class="bodytext">В этом разделе объясняется, как использовать пример HTTP-клиента из командной строки. Пример HTTP-клиента находится в <code class="programcharacter">%service_dir%/bin</code>.</p>
<p class="attentionbody">В этом разделе объясняется, как использовать исполняемый файл примера HTTP-клиента. Объяснение реализации примера HTTP-клиента выходит за рамки данной документации. Исходный код примера HTTP-клиента находится в директории <code class="programcharacter">/samples/kavhttp</code> пакета распространения Kaspersky Scan Engine.</p>
<p class="introheading">О примере HTTP-клиента</p>
<p class="bodytext">Пример HTTP-клиента – это консольное приложение, демонстрирующее, как реализовать клиент для Kaspersky Scan Engine в режиме HTTP. Вы также можете использовать его для сканирования файлов из консоли.</p>
<p class="bodytext">Пример HTTP-клиента отправляет HTTP-запросы к Kaspersky Scan Engine. Он поддерживает TCP-соединения (Windows и Linux) и соединения через UNIX-сокеты (только Linux), а также может передавать пути к файлам или их содержимое в Kaspersky Scan Engine.</p>
<p class="bodytext">Когда Kaspersky Scan Engine завершает сканирование файлов, он отправляет ответ примеру HTTP-клиента. Пример HTTP-клиента <a id="h180276" class="englishcrossreferencetemplate" href="#179886" target="_self">выводит результат сканирования в стандартный вывод</a>.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179884" target="_self">Синтаксис и параметры для HTTP-клиента</a></p><p class="relateditem"><a href="#182976" target="_self">Сканирование файлов через TCP-сокет в режиме сканирования файлов</a></p><p class="relateditem"><a href="#179885" target="_self">Примеры синтаксиса</a></p><p class="relateditem"><a href="#179886" target="_self">Результаты сканирования для HTTP-клиента</a></p><p class="relateditem"><a href="#179887" target="_self">Сообщения об ошибках подключения HTTP-клиента</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179884"><p><a name="179884" style="display: none;">[Topic 179884]</a></p>
	<h3 id="t234524" class="heading3">Синтаксис и параметры для HTTP-клиента</h3>
<p class="bodytext">Вы можете указать один или несколько параметров для примера HTTP-клиента.</p>
<p class="introheading">Options</p>
<p class="bodytext">В примере HTTP-клиента доступны следующие параметры:</p>
<p class="tablename">Параметры для запуска примера HTTP-клиента</p>
<p class="spacerfortables">
<table class="tableintopic" width="804" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="240"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="564"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-s</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает адрес Kaspersky Scan Engine или путь к Unix-сокету. Строку подключения можно указывать в кавычках или без них. Если этот параметр не указан, используется Unix-сокет по умолчанию <code class="programcharacter">/tmp/.kavhttpd</code>.</p>
<p class="tablebodytext">UNIX-сокеты поддерживаются только в системах Linux.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-t</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает время ожидания обработки запроса в миллисекундах.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-u</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает URL-адрес для сканирования.</p>
<p class="attentionbody">Одновременно можно указать только один URL-адрес.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-i</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает IP-адрес (IPv4 или IPv6) узла, на который ссылается URL-адрес. Этот параметр можно использовать только с <code class="programcharacter">-u</code> .</p>
<p class="tablebodytext">Указание IP-адреса увеличивает коэффициент обнаружения Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-f</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Включает режим сканирования файлов.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-c</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает контекст задачи сканирования. Если указан этот параметр, запрос должен иметь заголовок <code class="programcharacter">X-KAV-ObjectURL</code>, содержащий значение параметра, без кавычек.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--req</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает путь к файлу с заголовками запросов, которые были получены из HTTP-трафика для проверяемого объекта.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--resp</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает путь к файлу с заголовками ответов, которые были получены из HTTP-трафика для проверяемого объекта.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-b</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Показывает дату выпуска антивирусных баз. Вы можете использовать этот параметр, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-v</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Показывает текущую версию KAV SDK Вы можете использовать этот параметр, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-l</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Показывает информацию о текущем файле ключа. Вы можете использовать этот параметр, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-h</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Показывает справочную информацию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-j</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Выполняет HTTP-запрос в формате JSON.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-d</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Выполняет HTTP-запрос на запуск обновления антивирусных баз. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-p</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Показывает статус процесса обновления антивирусных баз. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">‑‑getstat</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Получает накопленную статистику. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">‑‑clearstat</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Очищает накопленную статистику. Может использоваться с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-t</code> и <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-o</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">При выполнении HTTP-запроса в формате JSON пропускает объекты с результатом сканирования <code class="programcharacter">CLEAN</code> из массива <code class="programcharacter">subObjectsScanResults</code> в ответном сообщении. Может использоваться только с параметром <code class="programcharacter">-j</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--cipher</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="bodytext">Задает набор шифров, который должен использоваться для обмена с kavhttpd. </p>
<p class="bodytext">В TLS 1.2 поддерживаются следующие наборы шифров:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">ECDHE-ECDSA-AES256-GCM-SHA384</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-ECDSA-AES256-SHA384</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-ECDSA-AES128-GCM-SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-ECDSA-AES128-SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-RSA-AES256-GCM-SHA384</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-RSA-AES256-SHA384</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-RSA-AES128-GCM-SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-RSA-AES128-SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">ECDHE-RSA-CHACHA20-POLY1305</code></li><li class="tablelistbullet"><code class="programcharacter">DHE-RSA-AES256-GCM-SHA384</code></li><li class="tablelistbullet"><code class="programcharacter">DHE-RSA-AES256-SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">DHE-RSA-AES128-SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">DHE-RSA-CHACHA20-POLY1305</code></li></ul><p class="bodytext">В TLS 1.3 поддерживаются следующие наборы шифров:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">TLS_AES_256_GCM_SHA384</code></li><li class="tablelistbullet"><code class="programcharacter">TLS_CHACHA20_POLY1305_SHA256</code></li><li class="tablelistbullet"><code class="programcharacter">TLS_AES_128_GCM_SHA256</code></li></ul><p class="bodytext">По умолчанию используется следующее значение: <code class="programcharacter">ECDHE-ECDSA-AES256-GCM-SHA384</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">‑-check‑period</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Проверяет, соответствует ли срок действия сертификата текущей дате в зависимости от часового пояса.</p>
<p class="tablebodytext">По умолчанию проверка не выполняется.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">‑-check‑subject</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Проверяет, совпадает ли имя субъекта сертификата (поля <code class="programcharacter">SubjectAltNames</code> и <code class="programcharacter">Common Name</code>) с доменным именем сервера.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--check‑chain</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Проверяет сертификат по пути сертификации.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--ca-path</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает полный путь к директории, в которой хранятся сертификаты CA. Сертификат из указанной директории используется для проверки действительности сертификата TLS и его конфигурации.</p>
<p class="tablebodytext">Если этот параметр не указан, HTTP-клиент использует следующие пути:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">/etc/pki/tls/certs</code></li><li class="tablelistbullet"><code class="programcharacter">/etc/ssl/certs</code></li></ul><p class="bodytext">Чтобы использовать параметр <code class="programcharacter">--ca-path</code>, подготовьте директорию, содержащую сертификаты, как описано в <a id="h212473" class="englishcrossreferencetemplate" href="#179885" target="_self">примерах синтаксиса</a>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--ca-cert</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает полный путь к директории, в которой хранится пакет CA. Пакетный файл используется для проверки действительности сертификата TLS и его конфигурации.</p>
<p class="tablebodytext">Если этот параметр не указан в операционной системе Linux, HTTP-клиент использует один из следующих файлов (в зависимости от того, какой из них будет найден первым):</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">/etc/ssl/certs/ca-certificates.crt</code></li><li class="tablelistbullet"><code class="programcharacter">/etc/pki/tls/certs/ca-bundle.crt</code></li><li class="tablelistbullet"><code class="programcharacter">/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem</code></li><li class="tablelistbullet"><code class="programcharacter">/etc/ssl/ca-bundle.pem</code></li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">‑‑repeat‑timeout REPEAT_TIMEOUT</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Указывает, что сканирование объектов будет повторяться не менее <code class="programcharacter">REPEAT_TIMEOUT</code> секунд.</p>
<p class="tablebodytext">Если аргумент не указан, все объекты будут просканированы один раз. В противном случае сканирование будет выполняться не менее указанного количества секунд.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--quiet </code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Результаты сканирования не отображаются.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">‑‑threads THREADS (=1)</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Задает количество потоков для параллельного сканирования файлов.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">-m [ ‑‑measure ]</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Измеряет и отображает следующее:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">Время сканирования в формате <code class="programcharacter">%H:%M:%S.%ms</code>.</li><li class="tablelistbullet">Накопленная статистика сканирования до и после сканирования.</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--auth-field</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Указывает имя поля заголовка запроса, используемого для аутентификации.</p>
<p class="tablebodytext">Если не указано иное, по умолчанию используется имя <code class="programcharacter">Authorization</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--access-token</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Указывает значение токена API, используемого для аутентификации. </p>
<p class="tablebodytext">Объедините эту опцию с <code class="programcharacter">--auth-field</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="240"><p class="tablebodytext"><code class="programcharacter">--add-bearer-prefix</code></p>
</td>
<td style="border:1px solid #010101;" width="564"><p class="tablebodytext">Добавляет префикс <code class="programcharacter">Bearer</code> к значению токена API, указанному в <code class="programcharacter">--access-token</code>.</p>
<p class="tablebodytext">Объедините эту опцию с <code class="programcharacter">--access-token</code>.</p>
</td>
</tr>

</table>
<p class="introheading">Тип соединения</p>
<p class="bodytext">Пример HTTP-клиента поддерживает два типа соединения:</p>
<ul class="listbullet1"><li class="listbullet1">TCP-соединение<p class="listcontinue1">Чтобы использовать TCP-соединение, укажите IP-адрес в параметре <code class="programcharacter">-s</code> в следующем формате: &quot;<code class="programcharacter">ip_addr:port</code>&quot;.</p> </li><li class="listbullet1">Соединение через UNIX-сокет (только для Linux)<p class="listcontinue1">Чтобы использовать UNIX-сокет, укажите путь к сокету в параметре <code class="programcharacter">-s</code>.</p> <p class="listcontinue1">Этот параметр используется по умолчанию. Файл сокета по умолчанию <code class="programcharacter">/tmp/.kavhttpd</code>.</p> </li></ul><p class="introheading">Тайм-аут</p>
<p class="bodytext">Пример HTTP-клиента использует значение, указанное в параметре <code class="programcharacter">-t</code>, для определения тайм-аута сканирования, аналогично <a id="h179981" class="englishcrossreferencetemplate" href="#179875" target="_self">заголовку</a> <code class="programcharacter">X-KAV-Timeout</code>.</p>
<p class="bodytext">Значение тайм-аута по умолчанию <code class="programcharacter">2000</code>.</p>
<p class="bodytext">Если в этом параметре указано <code class="programcharacter">0</code>, тайм-аут бесконечен.</p>
<p class="introheading">Режим сканирования</p>
<p class="bodytext">Пример HTTP-клиента поддерживает два режима проверки, которые можно указать с помощью параметра <code class="programcharacter">-f</code>:</p>
<ul class="listbullet1"><li class="listbullet1">режим сканирования файлов (<code class="programcharacter">-f</code>).<p class="listcontinue1">В этом режиме пример HTTP-клиента передает пути к файлам в Kaspersky Scan Engine, который читает файлы и проверяет их.</p> <p class="listcontinue1">Чтобы отправить <a id="h182977" class="englishcrossreferencetemplate" href="#182976" target="_self">запрос на сканирование на удаленный компьютер через TCP-сокет</a>, вы должны указать пути к файлам, которые вы хотите сканировать, или директориям, которые содержат эти файлы. Вам не нужно этого делать, если пример HTTP-клиента и Kaspersky Scan Engine находятся на одном компьютере.</p> </li><li class="listbullet1">режим сканирования памяти (по умолчанию).<p class="listcontinue1">В этом режиме пример HTTP-клиента передает содержимое файла в Kaspersky Scan Engine, который сканирует содержимое.</p> <p class="attentioncontinue1">Используйте только режим очистки KAV_SKIP с режимом сканирования памяти. Kaspersky Scan Engine не может лечить или удалять файлы в этом режиме.</p> </li></ul><p class="introheading">Контекст задачи сканирования</p>
<p class="bodytext">Kaspersky Scan Engine использует контекст задачи сканирования для повышения коэффициента обнаружения. Использование этого параметра не влияет на производительность сканирования.</p>
<p class="bodytext">Рекомендуется использовать контекст задачи сканирования при интеграции типа gateway.</p>
<p class="bodytext">Используйте следующий формат для контекста:</p>
<ul class="listbullet1"><li class="listbullet1">Если объект для сканирования был получен из Интернета, укажите URL источника, включая протокол,<p class="listcontinue1">Пример: <code class="programcharacter">http://example.com</code></p> <p class="listcontinue1">Поддерживаются протоколы HTTP, HTTPS и FTP. Если исходный URL-адрес неизвестен, рекомендуется использовать <code class="programcharacter">http://example.com</code> в качестве контекста задачи сканирования.</p> </li><li class="listbullet1">Если объект для проверки был получен по электронной почте, укажите адрес отправителя. Используйте следующий формат: <code class="programcharacter">[from:%sender_address%]</code>.<p class="listcontinue1">Пример: <code class="programcharacter">[from:example@example.com]</code></p> </li></ul><p class="bodytext">Если объект получен по электронной почте, но адрес отправителя неизвестен, рекомендуется использовать <code class="programcharacter">[from:test@relay.example]</code> в качестве контекста задачи сканирования.</p>
<p class="attentionbody">Контекст задачи сканирования применим только к сканированию файлов. Если вы укажете контекст задачи сканирования для URL-адреса, он будет проигнорирован.</p>
<p class="introheading">Заголовки запросов и ответов</p>
<p class="bodytext">Указание заголовков запросов и ответов, собранных из HTTP-трафика, относящегося к проверяемому объекту, повышает коэффициент обнаружения. Рекомендуется использовать заголовки запроса и ответа при интеграции  типа gateway.</p>
<p class="introheading">Информационные сообщения</p>
<p class="bodytext">Параметры <code class="programcharacter">-b</code>, <code class="programcharacter">-v</code> и <code class="programcharacter">-l</code> можно использовать только вместе с параметрами <code class="programcharacter">-s</code>, <code class="programcharacter">-j</code> и <code class="programcharacter">-t</code>. Если вы используете их с любым другим параметром, <code class="programcharacter">kavhttp_client</code> вернет ошибку.</p>
<p class="bodytext">Вы можете использовать параметры <code class="programcharacter">-b</code>, <code class="programcharacter">-v</code> и <code class="programcharacter">-l</code>, чтобы проверить, запущен ли <code class="programcharacter">kavhttpd</code>.</p>
<p class="introheading">Сканирование файлов</p>
<p class="bodytext">Вы можете указать один или несколько файлов для сканирования, разделив их пробелом. В зависимости от режима сканирования, пример HTTP-клиента затем передает пути к этим файлам или их содержимому в Kaspersky Scan Engine.</p>
<p class="bodytext">Также вы можете указать директорию, в которой хранятся файлы. Все файлы, находящиеся внутри этой директории и всех вложенных в нее директорий, будут просканированы.</p>
<p class="bodytext">Используйте следующий синтаксис для сканирования файлов в режиме сканирования файлов:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client [-s &lt;ip:port | unix-socket&gt;] [-t &lt;timeout&gt;] [-c &lt;context&gt;] [--req &lt;req_file&gt;] [--resp &lt;resp_file&gt;] -f &lt;file1&gt; [&lt;file2&gt;...]</p>
</td>
</tr>

</table>
<p class="bodytext">Используйте следующий синтаксис для сканирования содержимого файлов в режиме сканирования памяти:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client [-s &lt;ip:port | unix-socket&gt;] [-t &lt;timeout&gt;] [-c &lt;context&gt;] [--req &lt;req_file&gt;] [--resp &lt;resp_file&gt;] &lt;file1&gt; [&lt;file2&gt;...]</p>
</td>
</tr>

</table>
<p class="introheading">Сканирование URL-адресов</p>
<p class="bodytext">Вы можете указать URL-адрес для сканирования. Если URL-адрес содержит пробелы или табуляции, заключите URL-адрес в кавычки или используйте URL-кодирование. Аналогичным образом, если URL-адрес содержит кавычки (<code class="programcharacter">&quot;</code>), используйте URL-кодирование.</p>
<p class="bodytext">Одновременное сканирование нескольких URL-адресов не поддерживается. Если вы укажете более одного URL-адреса, будет сканироваться только первый.</p>
<p class="attentionbody">Файлы не могут быть просканированы, если указан параметр <code class="programcharacter">-u</code>. Параметры <code class="programcharacter">-u</code> и <code class="programcharacter">-f</code> нельзя использовать вместе.</p>
<p class="bodytext">Используйте следующий синтаксис для сканирования URL-адреса:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client [-s &lt;IP:port | unix-socket&gt;] [-t &lt;timeout&gt;] [-i &lt;IP&gt;] -u &lt;URL&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="182976"><p><a name="182976" style="display: none;">[Topic 182976]</a></p>
	<h3 id="t234499" class="heading3">Сканирование файлов через TCP-сокет в режиме сканирования файлов</h3>
<p class="bodytext">Вы можете отправлять запросы на сканирование как в режиме scanmemory, так и в режиме scanfile. Запросы отправляются от клиента HTTP на удаленном компьютере на компьютер, на котором работает сервис kavhttpd. </p>
<p class="bodytext">В режиме scanmemory содержимое сканируемого объекта отправляется в запросе HTTP и сканируется в памяти системы компьютера, на котором работает kavhttpd.</p>
<p class="bodytext">В режиме scanfile HTTP-клиент отправляет в службу kavhttpd путь к объекту, который находится на том же компьютере, что и служба kavhttpd, или на удаленном жестком диске, который смонтирован на этом компьютере. kavhttpd считывает объект с жесткого диска и сканирует его.</p>
<p class="bodytext">Однако, когда Kaspersky Scan Engine получает запрос на сканирование от клиента на удаленном компьютере в режиме сканирования файлов, он сканирует только те файлы, которые размещены в местах, указанных в элементах &lt;<code class="programcharacter">ScanningPath&gt;</code> файла конфигурации режима HTTP. Это ограничение необходимо для предотвращения случайного сканирования всей файловой системы удаленного компьютера. </p>
<p class="procedureheading">Для сканирования файла с помощью TCP-сокета в режиме scanfile:</p>
<ol class="listnumber1"><li class="listnumber1">В элементе <code class="programcharacter">&lt;ScanningPath&gt;</code> файла конфигурации <a id="h201077" class="englishcrossreferencetemplate" href="#201076" target="_self">укажите местоположение файла, который вы хотите сканировать</a>.<p class="listcontinue1">Kaspersky Scan Engine не добавляет и не удаляет объекты в директориях, указанных в <code class="programcharacter">ScanningPath</code>. HTTP-клиент должен отправить объекты для сканирования, а затем удалить их после сканирования.</p> <p class="listcontinue1">В следующем примере показано, как указать директорию, содержащую файлы для сканирования:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanningPaths&gt;</p>
<p class="program2">&lt;ScanningPath&gt;/mnt/to_scan/&lt;/ScanningPath&gt;</p>
<p class="program">&lt;/ScanningPaths&gt;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Подключитесь к Kaspersky Scan Engine на удаленном компьютере с помощью TCP-сокета и сканируйте файл в режиме scanfile. <p class="listcontinue1">В следующем примере показано, как проверить файл eicar.txt, расположенный в директории <code class="programcharacter">/mnt/to_scan/</code> на компьютере, на котором запущена служба kavhttpd:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s 192.0.2.42:9999 /mnt/to_scan/eicar.txt</p>
</td>
</tr>

</table> <p class="spacer"> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179885"><p><a name="179885" style="display: none;">[Topic 179885]</a></p>
	<h3 id="t234525" class="heading3">Примеры синтаксиса</h3>
<p class="bodytext">В этом разделе приведены примеры использования HTTP-клиента из командной строки.</p>
<p class="introheading">Сканирование файлов и URL-адресов</p>
<p class="bodytext">Использовать UNIX-сокет по умолчанию для сканирования одного файла, передав его содержимое:</p>
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="642"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client eicar.txt</p>
</td>
</tr>

</table>
<p class="bodytext">Использовать UNIX-сокет по умолчанию для сканирования одного файла, передав путь к файлу:</p>
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="642"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f eicar.txt</p>
</td>
</tr>

</table>
<p class="bodytext">Подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать два файла, передав их содержимое:</p>
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="642"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s 192.0.2.42:9999 eicar.txt test.sh</p>
</td>
</tr>

</table>
<p class="bodytext">Подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать два файла, передав их содержимое с 10-секундным тайм-аутом:</p>
<table class="tableintopic" width="678" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="678"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s 192.0.2.42:9999 -t 10000 eicar.txt test.sh</p>
</td>
</tr>

</table>
<p class="spacer">
<p class="bodytext">Подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать файл, передав путь к нему:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s 192.0.2.42:9999 /mnt/to_scan/eicar.txt</p>
</td>
</tr>

</table>
<p class="bodytext">Подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать URL-адрес:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s 192.0.2.42:9999 -u http://example.com</p>
</td>
</tr>

</table>
<p class="bodytext">Подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать URL-адрес с IP-адресом хоста, на который ссылается URL-адрес:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s 192.0.2.42:9999 -i 233.252.0.1 -u http://bug.qainfo.ru/TesT/Aphish_w</p>
</td>
</tr>

</table>
<p class="bodytext">Подключиться к Kaspersky Scan Engine через TCP-сокет и запросить дату выпуска антивирусных баз:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client –b -s 192.0.2.42:9999</p>
</td>
</tr>

</table>
<p class="introheading">Сканирование файлов и URL-адресов после авторизации с помощью токена API</p>
<p class="bodytext">Авторизоваться с помощью токена API, подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать файл, передав путь к файлу:</p>
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="642"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://192.0.2.42:443/mnt/to_scan/eicar.txt --auth-field --access-token Ab345-KAV</p>
</td>
</tr>

</table>
<p class="bodytext">Авторизоваться с помощью токена API, подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать URL-адрес:</p>
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="642"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s https://192.0.2.42:443 -u http://example.com --auth-field --access-token Ab345-KAV</p>
</td>
</tr>

</table>
<p class="bodytext">Авторизоваться с помощью токена API и схемы аутентификации Bearer, подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать файл, передав путь к файлу:</p>
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="642"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://192.0.2.42:443 /mnt/to_scan/eicar.txt --auth-field --add-bearer-prefix --access-token Ab345-KAV</p>
</td>
</tr>

</table>
<p class="bodytext">Авторизоваться с помощью токена API и схемы аутентификации Bearer, подключиться к Kaspersky Scan Engine через TCP-сокет и просканировать URL-адрес:</p>
<table class="tableintopic" width="678" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="678"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s https://192.0.2.42:443 -u http://example.com -auth-field --add-bearer-prefix --access-token Ab345-KAV</p>
</td>
</tr>

</table>
<p class="spacer">
<p class="introheading">Сканирование файлов и URL-адресов и проверка сертификата TLS</p>
<p class="bodytext">В Linux, чтобы использовать параметр <code class="programcharacter">--ca-path</code>, подготовьте директорию, содержащую сертификаты:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">openssl rehash /mnt/your-cert-dir/</p>
</td>
</tr>

</table>
<p class="bodytext">В Windows, чтобы использовать параметр <code class="programcharacter">--ca-path</code>, вы должны назвать файлы сертификатов в директории поиска следующим образом: <em class="emphasischaracter">&lt;hash&gt;.0</em>, <em class="emphasischaracter">&lt;hash&gt;.1</em>, <em class="emphasischaracter">&lt;hash&gt;.2 </em>и т. д., где <em class="emphasischaracter">&lt;hash&gt;</em> – это хеш файла (например,<em class="emphasischaracter"> d93f38c8.0</em>).</p>
<p class="bodytext">Чтобы получить хеш файла, используйте следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">openssl.exe x509 -hash -noout -in &quot;full path to the certificate file&quot;</p>
</td>
</tr>

</table>
<p class="bodytext">Просканировать файл и указать полный путь к пакету сертификатов:</p>
<ul class="listbullet1"><li class="listbullet1">В Windows:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">%service_dir%\bin\kavhttp_client -f -s https://127.0.0.1:443 C:\eicar.txt -j --ca-cert C:\your-cert-dir\CertificateFile.cert</p>
</td>
</tr>

</table> </li><li class="listbullet1">В Linux:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://127.0.0.1:443 /mnt/to_scan/eicar.txt --ca-cert /mnt/your-cert-dir/CertificateFile.cert</p>
</td>
</tr>

</table> </li></ul><p class="bodytext">Просканировать URL-адрес и указать путь к папке, содержащей файл сертификата:</p>
<ul class="listbullet1"><li class="listbullet1">В Windows:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">%service_dir%\bin\kavhttp_client -s https://127.0.0.1:443 –u https://example.com -j --ca-path C:\your-cert-dir\</p>
</td>
</tr>

</table> </li><li class="listbullet1">В Linux:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -s https://127.0.0.1:443 –u https://example.com --ca-path /mnt/your-cert-dir/</p>
</td>
</tr>

</table> </li></ul><p class="bodytext">Просканировать файл и указать параметры проверки сертификата:</p>
<ul class="listbullet1"><li class="listbullet1">В Windows:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">%service_dir%\bin\kavhttp_client -f -s https://127.0.0.1:443 C:\eicar.txt -j --check-period</p>
<p class="program">%service_dir%\bin\kavhttp_client -f -s https://127.0.0.1:443 C:\eicar.txt -j --check-subject</p>
<p class="program">%service_dir%\bin\kavhttp_client -f -s https://127.0.0.1:443 C:\eicar.txt -j --check-chain</p>
</td>
</tr>

</table> </li><li class="listbullet1">В Linux:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://127.0.0.1:443 /mnt/to_scan/eicar.txt --check-period</p>
<p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://127.0.0.1:443 /mnt/to_scan/eicar.txt --check-subject</p>
<p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://127.0.0.1:443 /mnt/to_scan/eicar.txt --check-chain</p>
</td>
</tr>

</table> </li></ul><p class="bodytext">Просканировать файл и указать параметры проверки сертификата одной командой:</p>
<ul class="listbullet1"><li class="listbullet1">В Windows:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">%service_dir%\bin\kavhttp_client -f -s https://127.0.0.1:443 C:\eicar.txt -j --check-period --check-subject --check-chain --ca-path C:\your-cert-dir\</p>
</td>
</tr>

</table> </li><li class="listbullet1">В Linux:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://127.0.0.1:443 /mnt/to_scan/eicar.txt --check-period --check-subject --check-chain --ca-path /mnt/your-cert-dir/</p>
</td>
</tr>

</table> </li></ul><p class="bodytext">Просканировать файл и проверить пакет сертификатов и файл сертификата:</p>
<ul class="listbullet1"><li class="listbullet1">В Windows:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">%service_dir%\bin\kavhttp_client -f -s https://127.0.0.1:443 C:\eicar.txt -j --ca-path C:\your-cert-dir\ --ca-cert C:\your-cert-dir\CertificateFile.cert</p>
</td>
</tr>

</table> </li><li class="listbullet1">В Linux:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">user@computer:/opt/kaspersky/ScanEngine/bin# ./kavhttp_client -f -s https://127.0.0.1:443 /mnt/to_scan/eicar.txt --ca-path /mnt/your-cert-dir/ --ca-cert /mnt/your-cert-dir/CertificateFile.cert</p>
</td>
</tr>

</table> </li></ul><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179886"><p><a name="179886" style="display: none;">[Topic 179886]</a></p>
	<h3 id="t234493" class="heading3">Результаты сканирования для HTTP-клиента</h3>
<p class="bodytext">Для каждого просканированного файла пример HTTP-клиента выводит результат сканирования, в котором указывается, считается ли просканированный объект незараженным или вредоносным.</p>
<p class="bodytext">Возможны следующие результаты сканирования:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">CLEAN</code><p class="listcontinue1">Просканированный объект считается незараженным.</p>
</li><li class="listbullet1"><code class="programcharacter">DETECT</code><p class="listcontinue1">Просканированный объект считается вредоносным. За результатом сканирования следует имя обнаруженного объекта или тип обнаруженного URL-адреса.</p>
<p class="listcontinue1">Kaspersky Scan Engine обнаруживает URL-адреса следующих типов:</p>
<ul class="listbullet2"><li class="listbullet2">Вредоносные URL-адреса. При обнаружении такого URL-адреса Kaspersky Scan Engine возвращает <code class="programcharacter">DETECT</code> <code class="programcharacter">MALICIOUS_URL</code>. Приоритет этого типа – 1 (высший приоритет).</li><li class="listbullet2">Фишинговые URL-адреса. При обнаружении такого URL-адреса Kaspersky Scan Engine возвращает <code class="programcharacter">DETECT</code> <code class="programcharacter">PHISHING_URL</code>. Приоритет этого типа – 2.</li><li class="listbullet2">URL-адреса рекламного ПО. При обнаружении такого URL-адреса Kaspersky Scan Engine возвращает <code class="programcharacter">DETECT</code> <code class="programcharacter">ADWARE_URL</code>. Приоритет этого типа – 3.<p class="attentioncontinue2">URL-адрес этого типа может быть обнаружен только при включенной облачной защите.</p> </li><li class="listbullet2">URL-адреса, ведущие к легальным программам, которые могут быть использованы злоумышленниками для нанесения вреда компьютеру или данным пользователя При обнаружении такого URL-адреса Kaspersky Scan Engine возвращает <code class="programcharacter">DETECT</code> <code class="programcharacter">RISKWARE_URL</code>. Приоритет этого типа – 4 (низший приоритет).<p class="attentioncontinue2">URL-адрес этого типа может быть обнаружен только при включенной облачной защите.</p> </li></ul><p class="listcontinue1">URL-адрес может принадлежать одновременно нескольким типам. В этом случае Kaspersky Scan Engine возвращает результат проверки <code class="programcharacter">DETECT</code> с наивысшим приоритетом.</p>
</li><li class="listbullet1"><code class="programcharacter">DISINFECTED</code><p class="listcontinue1">Просканированный объект успешно вылечен.</p>
</li><li class="listbullet1"><code class="programcharacter">DELETED</code><p class="listcontinue1">Просканированный объект удален.</p>
</li></ul><p class="bodytext">Если просканированный объект содержит макросы, к результату проверки этого файла добавляется &quot;<code class="programcharacter">AND CONTAINS OFFICE MACRO&quot;</code>.</p>
<p class="bodytext">Ниже приведен образец вывода, создаваемого примером HTTP-клиента:</p>
<table class="tableintopic" width="564" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="564"><p class="program">./kavhttp_client test.sh service.sh eicar.txt</p>
<p class="program">Server address: /tmp/.kavhttpd</p>
<p class="program">Network timeout: 2000</p>
<p class="program">Scan mode: scanmemory</p>
<p class="program">Scan file: test.sh</p>
<p class="program">CLEAN</p>
<p class="program">Scan file: service.sh</p>
<p class="program">CLEAN</p>
<p class="program">Scan file: eicar.txt</p>
<p class="program">DETECT EICAR-Test-File</p>
</td>
</tr>

</table>
<p class="bodytext">Если операция сканирования завершилась неудачно, результат сканирования будет содержать один из следующих кодов ошибки:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">NON_SCANNED</code><p class="listcontinue1">Указанный объект не просканирован. Причина этого также указывается.</p>
</li><li class="listbullet1"><code class="programcharacter">SERVER_ERROR</code><p class="listcontinue1">Произошла ошибка в Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">CONNECTION_CLOSED</code><p class="listcontinue1">Kaspersky Scan Engine прервал подключение.</p>
</li><li class="listbullet1"><code class="programcharacter">CLIENT_TIMEOUT</code><p class="listcontinue1">Превышен тайм-аут операции. Это происходит, когда превышен тайм-аут клиента.</p>
</li><li class="listbullet1"><code class="programcharacter">CONNECTION_FAILED</code><p class="listcontinue1">Не удалось установить соединение с Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">HTTP_ERROR</code><p class="listcontinue1">Код состояния HTTP, полученный от сервера, отличается от <code class="programcharacter">200</code>. Также предоставляется код состояния HTTP и его описание.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179887"><p><a name="179887" style="display: none;">[Topic 179887]</a></p>
	<h3 id="t234377" class="heading3">Сообщения об ошибках подключения HTTP-клиента</h3>
<p class="bodytext">При возникновении ошибки подключения HTTP-клиент выводит сообщение об ошибке на консоль.</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">Invalid response</code> <p class="listcontinue1">Соединение было прервано, когда клиент ждал ответа от сервера. После этой ошибки клиент завершает работу.</p>
</li><li class="listbullet1">За <code class="programcharacter">Invalid response</code> следует <code class="programcharacter">CONNECTION_CLOSED</code><p class="listcontinue1">Соединение было прервано, когда клиент передавал файл для сканирования на сервер.</p> </li><li class="listbullet1">За <code class="programcharacter">Invalid response</code> следует <code class="programcharacter">CLIENT_TIMEOUT</code><p class="listcontinue1">Превышен тайм-аут клиента (определенный параметром <code class="programcharacter">-t</code>).</p> </li><li class="listbullet1"><code class="programcharacter">HTTP_ERROR 408 Request Timeout</code><p class="listcontinue1">Превышен тайм-аут обработки (определенный параметром <code class="programcharacter">SessionTimeout</code>).</p>
</li></ul><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179881"><p><a name="179881" style="display: none;">[Topic 179881]</a></p>
	<h2 id="t234575" class="heading2">Использование прокси-сервера</h2>
<p class="bodytext">Kaspersky Scan Engine может использовать прокси-сервер для подключения к облачным службам &quot;Лаборатории Касперского&quot;.</p>
<p class="bodytext">Если в файле конфигурации режима HTTP указан прокси-сервер, Kaspersky Scan Engine выполняет следующие действия:</p>
<ol class="listnumber1"><li class="listnumber1">Kaspersky Scan Engine пытается установить прямое соединение с местом назначения.<p class="attentioncontinue1">Обратите внимание, что это происходит, даже если указан прокси-сервер.</p> </li><li class="listnumber1">Если установить прямое соединение не удается, Kaspersky Scan Engine пытается установить соединение с помощью указанного прокси-сервера.</li><li class="listnumber1">Если не удается установить соединение с прокси-сервером, Kaspersky Scan Engine использует только офлайн-технологии.<p class="attentioncontinue1">Обратите внимание, что это также происходит, когда проблемы с сетью не позволяют установить соединение с прокси-сервером. В этом случае Kaspersky Scan Engine через определенные промежутки времени пытается установить соединение с прокси-сервером. Если соединение установлено до истечения определенного времени, Kaspersky Scan Engine использует онлайн-технологии.</p> <p class="spacer"> </li></ol><p class="attentionbody">Чтобы использовать новые настройки прокси-сервера, необходимо перезапустить Kaspersky Scan Engine.</p>
<p class="bodytext">Kaspersky Scan Engine не выводит информацию об использовании онлайн- и офлайн-технологий в командную строку. Вы должны проанализировать файлы логов, чтобы получить эту информацию.</p>
<p class="bodytext">Смотрите также информацию о <a id="h180102" class="englishcrossreferencetemplate" href="#179684" target="_self">включении логирования</a> и <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">указании прокси-сервера</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179882"><p><a name="179882" style="display: none;">[Topic 179882]</a></p>
	<h2 id="t234555" class="heading2">Обновление антивирусных баз в режиме HTTP</h2>
<p class="bodytext">В конфигурации по умолчанию Kaspersky Scan Engine использует антивирусные базы из директории <code class="programcharacter">./bin/bases</code>. Вы можете обновить антивирусные базы, отправив сигнал или HTTP-запрос в Kaspersky Scan Engine.</p>
<p class="warningbody">При обновлении антивирусных баз Kaspersky Scan Engine передает в &quot;Лабораторию Касперского&quot; зашифрованную строку user agent. Вы также можете посмотреть полный список данных, которые <a id="h180101" class="englishcrossreferencetemplate" href="#180001" target="_self">передаются в &quot;Лабораторию Касперского&quot; при обновлении</a>.</p>
<p class="introheading">Обновление антивирусных баз по запросу</p>
<p class="bodytext">Если вы хотите обновить антивирусные базы вручную, используйте обновление по запросу.</p>
<p class="procedureheading">Чтобы обновить антивирусные базы по запросу с помощью сигналов:</p>
<ol class="listnumber1"><li class="listnumber1">Перед запуском службы <code class="programcharacter">kavhttpd</code> укажите настройку обновления в kavhttpd.xml.</li><li class="listnumber1">Запустите <code class="programcharacter">службу kavhttpd</code>.</li><li class="listnumber1">Отправьте сигнал <code class="programcharacter">SIGUSR2</code> службе <code class="programcharacter">kavhttpd</code>.<p class="listcontinue1">Если клиент и Kaspersky Scan Engine установлены и работают на одном компьютере, вы можете отправить HTTP-запрос на адрес <code class="programcharacter">/api/v3.0/update/start</code> для обновления антивирусных баз. Если вы пошлете этот запрос c другого компьютера, Kaspersky Scan Engine вернет ошибку <code class="programcharacter">405 Method Not Allowed</code>. Если обновление антивирусных баз было успешно начато, ответ HTTP будет содержать следующий объект JSON:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;update started&quot;</p>
<p class="program">} </p>
</td>
</tr>

</table> <p class="listcontinue1">Чтобы узнать, как отслеживать статус обновления антивирусных баз, см. подраздел &quot;Получение статуса обновления антивирусных баз&quot; ниже.</p> </li></ol><p class="procedureheading">Чтобы обновить антивирусные базы по запросу с помощью примера HTTP-клиента,</p>
<p class="bodytextindent">вызовите пример HTTP-клиента с параметром -d:</p>
<p class="bodytextindent"><code class="programcharacter">kavhttp_client -j -d</code></p>
<p class="procedureheading">Чтобы обновить антивирусные базы по запросу в Windows,</p>
<p class="bodytextindent">вызовите пример HTTP-клиента с параметром <code class="programcharacter">-d</code>:</p>
<p class="bodytextindent"><code class="programcharacter">kavhttp_client.exe -j -d</code></p>
<p class="bodytext">Смотрите также подробную информацию о <a id="h180054" class="englishcrossreferencetemplate" href="#179873" target="_self">планировании автоматического обновления</a>.</p>
<p class="introheading">Получение статуса обновления антивирусных баз</p>
<p class="bodytext">Если вы хотите получить статус обновления антивирусных баз, отправьте GET-запрос по адресу <code class="programcharacter">/api/v3.0/update/status</code> или по адресу <code class="programcharacter">/api/v3.1/update/status</code>.</p>
<p class="attentionbody">Вы можете отправить этот запрос, только если клиент и Kaspersky Scan Engine установлены и работают на одном компьютере.</p>
<p class="bodytext">Когда Kaspersky Scan Engine получает запрос, он возвращает ответ в следующем формате:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;%UPDATE_STATUS%&quot;,</p>
<p class="program2">&quot;progress&quot;: &quot;%UPDATE_PROGRESS%&quot;,</p>
<p class="program2">&quot;last_update_result&quot;: &quot;%UPDATE_RESULT%&quot;,</p>
<p class="program2">&quot;last_update_time&quot;: &quot;%UPDATE_TIME%&quot;,</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">status</code> – текущий статус обновления. Статус может иметь следующие значения:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">&quot;in progress&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;not started&quot;</code></li></ul></li><li class="listbullet1"><code class="programcharacter">progress</code> – прогресс обновления антивирусных баз в процентах.<p class="listcontinue1">Этот элемент включается в ответ только в том случае, если обновление выполняется в данный момент (то есть если элемент <code class="programcharacter">status</code> имеет значение <code class="programcharacter">&quot;in progress&quot;</code>).</p> </li><li class="listbullet1"><code class="programcharacter">last_update_result</code> – результат последнего обновления. Статус может иметь следующие значения:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">&quot;success&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;all components are up to date&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;invalid update sources&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;not all components are updated&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;download error&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;error while updating&quot;</code></li><li class="listbullet2"><code class="programcharacter">&quot;error %ERROR_CODE% occurred&quot;</code>, где <code class="programcharacter">%ERROR_CODE%</code> – это код ошибки, полученный от Kaspersky Scan Engine</li></ul><p class="listcontinue1">Этот элемент включается в ответ только в том случае, если обновление не выполняется в данный момент (то есть если элемент <code class="programcharacter">status</code> имеет значение <code class="programcharacter">&quot;not started&quot;</code>).</p> </li><li class="listbullet1"><code class="programcharacter">last_update_time</code> – это дата и время последнего обновления в следующем формате: <code class="programcharacter">%hh%:%mm%:%ss% %DD%.%MM%.%YYYY%</code>.<p class="listcontinue1">Этот элемент включается в ответ только в том случае, если обновление не выполняется в данный момент (то есть если элемент <code class="programcharacter">status</code> имеет значение <code class="programcharacter">&quot;not started&quot;</code>).</p> </li></ul><p class="introheading">Дополнительные поля в протоколе KAV версии 3.1</p>
<p class="bodytext">Если вы отправите GET-запрос на адрес <code class="programcharacter">/api/v3.1/update/status</code>, вы сможете получить дополнительную информацию о процессе обновления антивирусных баз. Некоторые обновления базы данных можно использовать только после перезагрузки операционной системы или перезапуска Kaspersky Scan Engine. В этом случае ответ имеет расширенный формат:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;status&quot;: &quot;%UPDATE_STATUS%&quot;,</p>
<p class="program2">&quot;progress&quot;: &quot;%UPDATE_PROGRESS%&quot;,</p>
<p class="program2">&quot;last_update_result&quot;: &quot;%UPDATE_RESULT%&quot;,</p>
<p class="program2">&quot;last_update_time&quot;: &quot;%UPDATE_TIME%&quot;,</p>
<p class="program2">&quot;action_needed&quot;: &quot;%ACTION_NEEDED%&quot;,</p>
<p class="program2">&quot;action_apply_period&quot;: &quot;%APPLY_PERIOD%&quot;</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">%ACTION_NEEDED%</code> – действие, которое необходимо выполнить, прежде чем вы сможете применить обновления. Статус может иметь следующие значения:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">Product restart needed</code><p class="listcontinue2">Это означает, что вы должны перезапустить Kaspersky Scan Engine.</p>
</li><li class="listbullet2"><code class="programcharacter">OS reboot needed</code><p class="listcontinue2">Это означает, что вы должны перезагрузить операционную систему, в которой работает Kaspersky Scan Engine.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%APPLY_PERIOD%</code> – рекомендуемый период (в часах) для выполнения действия, указанного в <code class="programcharacter">%ACTION_NEEDED%</code>.<p class="listcontinue1">Это действие не выполняется автоматически, вы должны выполнить его самостоятельно.</p> </li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186768"><p><a name="186768" style="display: none;">[Topic 186768]</a></p>
	<h2 id="t234433" class="heading2">Логирование в режиме HTTP</h2>
<p class="bodytext">В этом разделе объясняется, как работать с журналами в режиме HTTP.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179879" target="_self">Настройка логирования в режиме HTTP</a></p><p class="relateditem"><a href="#186767" target="_self">Формат логов CEF в режиме HTTP</a></p><p class="relateditem"><a href="#186769" target="_self">Формат логов RAW в режиме HTTP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179879"><p><a name="179879" style="display: none;">[Topic 179879]</a></p>
	<h3 id="t234305" class="heading3">Настройка логирования в режиме HTTP</h3>
<p class="bodytext">В этом разделе описано, как настроить логирование в режиме HTTP вручную без использования Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Смотрите также подробные инструкции по <a id="h180103" class="englishcrossreferencetemplate" href="#179928" target="_self">включению логирования</a>.</p>
<p class="introheading">Настройка логирования</p>
<p class="bodytext">Чтобы настроить логирование, измените параметры в файле конфигурации логирования httpdkavlog.ini (далее – файл конфигурации логирования), расположенном в директории <code class="programcharacter">%service_dir%/bin</code>. Файл конфигурации состоит из нескольких разделов.</p>
<p class="introheading">Раздел DebugLogging</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">LogLevel</code> – указывает уровень логирования.<p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">0</code><p class="listcontinue2">Выключает логирование. Это значение по умолчанию.</p>
</li><li class="listbullet2"><code class="programcharacter">1</code><p class="listcontinue2">Включает режим полного логирования. Используйте этот режим для отладки.</p>
<p class="warningcontinue2">Если вы включите режим полного логирования, учтите, что сообщения журнала будут содержать <a id="h206306" class="englishcrossreferencetemplate" href="#179925" target="_self">конфиденциальные данные</a>.</p>
<p class="attentioncontinue2">Kaspersky Scan Engine в режиме HTTP не удаляет автоматически файлы логов предыдущих инициализаций. При необходимости вы можете удалить эти файлы логов вручную.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">LogFolder</code> – указывает путь к директории, в которой хранятся файлы журналов. <p class="listcontinue1">Путь может быть абсолютным или относительным. Относительный путь вычисляется относительно директории, содержащей бинарный файл <code class="programcharacter">kavhttpd</code>.</p> </li></ul><p class="introheading">Раздел SyslogLogging</p>
<p class="bodytext">Приведенные ниже настройки доступны только для операционных систем Linux.</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SyslogEnabled</code> – указывает, отправляет ли Kaspersky Scan Engine сообщения системного журнала.<p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">0</code><p class="listcontinue2">Выключает отправку сообщений системного журнала. </p>
</li><li class="listbullet2"><code class="programcharacter">1</code><p class="listcontinue2">Включает отправку сообщений системного журнала.</p>
<p class="warningcontinue2">Если вы разрешаете отправку сообщений системного журнала, учтите, что эти сообщения будут содержать конфиденциальные данные, такие как личные данные, определенные GDPR, данные конфигурации продукта и информацию о лицензировании.</p>
</li></ul></li></ul><p class="introheading">Раздел SyslogDestination </p>
<p class="bodytext">Этот элемент содержит группу настроек, определяющих формат журналов. Если необходимо записывать журналы в разные места, вы можете указать несколько элементов <code class="programcharacter">SyslogDestination</code>. В этом случае значения подэлементов <code class="programcharacter">SyslogTarget</code> должны различаться.</p>
<p class="attentionbody">Если <code class="programcharacter">SyslogEnabled</code> (см. выше) имеет значение <code class="programcharacter">1</code>, вы должны включить хотя бы один элемент <code class="programcharacter">SyslogDestination</code>.</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SyslogFormat</code> – указывает формат сообщений системного журнала. <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">cef</code> – указывает формат <code class="programcharacter">cef</code> сообщений системного журнала.</li><li class="listbullet2"><code class="programcharacter">raw</code> – указывает формат <code class="programcharacter">raw</code> сообщений системного журнала. Значение <code class="programcharacter">raw</code> используется, когда значение, указанное в этом элементе, не является <code class="programcharacter">cef</code> или <code class="programcharacter">raw</code>, или если в этом элементе не указано значение, или если файл конфигурации логирования не содержит параметр <code class="programcharacter">SyslogFormat</code>.</li></ul></li><li class="listbullet1"><code class="programcharacter">SyslogTarget</code> – задает адрес назначения для сообщений системного журнала. <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">%PROTOCOL%%IP%:%PORT%</code>, где:<ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">%PROTOCOL%</code> – сетевой протокол (используйте <code class="programcharacter">tcp://</code> или <code class="programcharacter">udp://</code> для этого значения). </li><li class="listbullet3"><code class="programcharacter">%IP%</code> – IPv4-адрес, который получает сообщения системного журнала. </li><li class="listbullet3"><code class="programcharacter">%PORT%</code> – порт, который получает сообщения системного журнала.</li></ul><p class="listcontinue2">Если вы не укажете протокол, как описано выше, Kaspersky Scan Engine будет использовать протокол UDP.</p> </li><li class="listbullet2"><code class="programcharacter">localhost</code> – указывает, что сообщения системного журнала перенаправляются в <code class="programcharacter">syslogd</code>.</li><li class="listbullet2">Путь к директории, в которой хранятся файлы с сообщениями системного журнала. Путь должен начинаться с <code class="programcharacter">/var/log/kaspersky</code>.<p class="listcontinue2">Директория содержит файл <code class="programcharacter">httpd_kav_syslog.log</code>. Файлы с сообщениями системного журнала, созданные предыдущими сеансами, не удаляются. Если в директории есть старый файл, Kaspersky Scan Engine записывает в этот файл новую информацию, не удаляя старые данные. </p> </li></ul></li><li class="listbullet1"><code class="programcharacter">SyslogEvents</code> – определяет события, которые необходимо зарегистрировать. <p class="listcontinue1">Допускается указывать несколько значений <code class="programcharacter">SyslogEvents</code>. Каждое из этих значений устанавливает тип события, которое будет зарегистрировано в местоположении, указанном в атрибуте <code class="programcharacter">SyslogTarget</code>. Если вы указываете несколько значений для одного места назначения, разделите их символом точки с запятой (<code class="programcharacter">;</code>).</p> <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">Audit</code> – указывает события аудита системы.</li><li class="listbullet2"><code class="programcharacter">Init</code> – указывает события инициализации службы. </li><li class="listbullet2"><code class="programcharacter">Deinit</code> – указывает события деинициализации службы и сторожевые события. </li><li class="listbullet2"><code class="programcharacter">Update</code> – указывает события обновления и перезагрузки антивирусных баз.</li><li class="listbullet2"><code class="programcharacter">License</code> – указывает события, связанные с лицензией.</li><li class="listbullet2"><code class="programcharacter">Engine</code> - указывает события антивирусного движка. Эти события могут часто публиковаться.</li><li class="listbullet2"><code class="programcharacter">ScanResultClean</code> – указывает события завершения сканирования, когда сканируемый объект считается безопасным.</li><li class="listbullet2"><code class="programcharacter">ScanResultDetect</code> – указывает события завершения сканирования при обнаружении угрозы.</li><li class="listbullet2"><code class="programcharacter">ScanResultOther</code> – указывает события завершения сканирования, когда объект не сканировался.</li></ul><p class="listcontinue1">Если элемент <code class="programcharacter">SyslogDestination</code> не содержит дочернего элемента <code class="programcharacter">SyslogEvents</code>, регистрируются все события HTTP. </p> <p class="listcontinue1">Если настройки <code class="programcharacter">SyslogDestination</code> неверны, логирование в указанное место назначения будет выключено.</p> <p class="listcontinue1">Когда логирование системного журнала включено, также включается аудит системы. Если ни один из элементов <code class="programcharacter">SyslogEvents</code> не содержит события <code class="programcharacter">Audit</code>, настройки аудита системы устанавливаются следующим образом: для <code class="programcharacter">SyslogFormat</code> задано значение <code class="programcharacter">raw</code>, для <code class="programcharacter">SyslogTarget</code> задано значение <code class="programcharacter">localhost</code>, а для <code class="programcharacter">SyslogEvents</code> задано значение <code class="programcharacter">audit</code>.</p> </li></ul><p class="attentionbody">Kaspersky Scan Engine может вести логи отладки и отправлять сообщения системного журнала одновременно или по отдельности.</p>
<p class="introheading">Структура файла конфигурации логирования</p>
<p class="bodytext">Ниже приведен пример файла конфигурации логирования:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">[DebugLogging]</p>
<p class="program">LogLevel=0</p>
<p class="program">LogFolder=logs</p>
<p class="program">[SyslogLogging]</p>
<p class="program">SyslogEnabled=0</p>
<p class="program">[SyslogDestination]</p>
<p class="program">SyslogFormat=raw</p>
<p class="program">SyslogTarget=localhost</p>
<p class="program">SyslogEvents=audit;init;deinit;update;license;engine</p>
<p class="program">[SyslogDestination]</p>
<p class="program">SyslogFormat=cef</p>
<p class="program">SyslogTarget=/var/log/kaspersky/kse_udp_lic_events</p>
<p class="program">SyslogEvents=license;update</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186767"><p><a name="186767" style="display: none;">[Topic 186767]</a></p>
	<h3 id="t234361" class="heading3">Формат логов CEF в режиме HTTP</h3>
<p class="bodytext">Если Kaspersky Scan Engine настроен на запись сообщений системного журнала в формате CEF, записи журнала о событиях выглядят следующим образом:</p>
<p class="program">CEF:0|Kaspersky|Scan Engine HTTP Service|%VERSION%|%EVENT_CLASS_ID%|%EVENT_NAME%|%SEVERITY%| msg=%EVENT_MSG% src=%CLIENT_IP% dvcpid=%HTTP_SERVICE_PID% sproc=unix_socket dvc=%HTTP_SERVICE_IP% dvchost=%HOSTNAME% start=%EVENT_TIME% fileHash=%SCANNED_FILE_MD5_HASH% fname=%SCANNED_FILE_NAME% request=%SCANNED_URL% act=%ACTION_MADE% cs1=%SCAN_RESULT% cs1Label=Scan result cs2=%VIRUS_NAME% cs2Label=Virus name flexString1=%SDK_VERSION% flexString1Label=Anti-Virus Engine version</p>
<p class="bodytext">Запись имеет следующие поля:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">%VERSION%</code><p class="listcontinue1">Версия Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%EVENT_CLASS_ID%</code><p class="listcontinue1">Класс события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">1</code><p class="listcontinue2">Служебное событие (не связанное со сканированием).</p>
</li><li class="listbullet2"><code class="programcharacter">2</code><p class="listcontinue2">Событие, связанное с ошибками.</p>
</li><li class="listbullet2"><code class="programcharacter">3</code><p class="listcontinue2">Событие, связанное со сканированием (например, результат сканирования).</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%EVENT_NAME%</code><p class="listcontinue1">Название события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">Initializing</code> – инициализация Kaspersky Scan Engine.</li><li class="listbullet2"><code class="programcharacter">Deinitializing</code> – деинициализация Kaspersky Scan Engine.</li><li class="listbullet2"><code class="programcharacter">Service event</code> – произошло служебное событие.</li><li class="listbullet2"><code class="programcharacter">Service error</code> – в службе kavhttpd произошла ошибка.</li><li class="listbullet2"><code class="programcharacter">Core error</code> – в Kaspersky Anti-Virus Engine произошла ошибка.</li><li class="listbullet2"><code class="programcharacter">Scan result</code> – Kaspersky Scan Engine завершил сканирование объекта.</li><li class="listbullet2"><code class="programcharacter">Audit</code> – произошло событие <a id="h221151" class="englishcrossreferencetemplate" href="#221141" target="_self">аудита системы</a>.</li></ul></li><li class="listbullet1"><code class="programcharacter">%SEVERITY%</code><p class="listcontinue1">Уровень важности события. Чем выше уровень, тем важнее событие. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">3</code><p class="listcontinue2">Это значение указывается для событий аудита системы, информационный уровень.</p>
</li><li class="listbullet2"><code class="programcharacter">5</code><p class="listcontinue2">Это значение указывается для служебных событий, когда начинается сканирование или если результат сканирования – <code class="programcharacter">CLEAN</code>.</p>
</li><li class="listbullet2"><code class="programcharacter">6</code><p class="listcontinue2">Это значение указывается для событий аудита системы, уровень предупреждения.</p>
</li><li class="listbullet2"><code class="programcharacter">7</code><p class="listcontinue2">Это значение указывается для инициализации, деинициализации и ошибок.</p>
</li><li class="listbullet2"><code class="programcharacter">8</code><p class="listcontinue2">Это значение указывается для событий аудита системы (критический уровень) и если результат сканирования отличен от <code class="programcharacter">CLEAN</code>. Эти события считаются опасными.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%EVENT_MSG%</code><p class="listcontinue1">Описание события. Например, текст сообщения об ошибке.</p>
</li><li class="listbullet1"><code class="programcharacter">%CLIENT_IP%</code><p class="listcontinue1">IP-адрес HTTP-клиента, отправившего запрос на сканирование в Kaspersky Scan Engine. Это поле появляется только в том случае, если запрос отправляется через TCP-сокет и связан со сканированием.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_SERVICE_PID%</code><p class="listcontinue1">PID Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_SERVICE_IP%</code><p class="listcontinue1">IP-адрес, который Kaspersky Scan Engine использует для получения запросов на сканирование от клиентов. Это поле появляется только в том случае, если Kaspersky Scan Engine получает запросы на сканирование через TCP-сокет.</p>
</li><li class="listbullet1"><code class="programcharacter">%HOSTNAME%</code><p class="listcontinue1">Имя хоста компьютера, на котором работает Kaspersky Scan Engine. Это поле появляется только в том случае, если включено логирование системного журнала в формате CEF.</p>
</li><li class="listbullet1"><code class="programcharacter">%EVENT_TIME%</code><p class="listcontinue1">Время и дата события. Время и дата берутся с компьютера, на котором работает Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">sproc=unix_socket</code><p class="listcontinue1">Это поле появляется только в том случае, если Kaspersky Scan Engine получает запросы на сканирование через UNIX-сокет.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_FILE_MD5_HASH%</code><p class="listcontinue1">Хеш объекта, переданного на сканирование в Kaspersky Scan Engine. Это поле появляется только в том случае, если клиент отправил запрос на сканирование и Kaspersky Scan Engine завершил сканирование.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_FILE_NAME%</code><p class="listcontinue1">Имя сканируемого файла. Если клиент отправил запрос на сканирование части оперативной памяти, значение этого поля – <code class="programcharacter">MEMORY_BLOCK</code>. Это поле появляется только в том случае, если клиент отправил запрос на сканирование и Kaspersky Scan Engine завершил сканирование.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_URL%</code><p class="listcontinue1">URL-адрес, указанный в заголовке <code class="programcharacter">X-KAV-ObjectURL</code> запроса на сканирование. Это поле появляется только в том случае, если клиент отправил запрос на сканирование и Kaspersky Scan Engine завершил сканирование.</p>
</li><li class="listbullet1"><code class="programcharacter">%ACTION_MADE%</code><p class="listcontinue1">Действие, которое было выполнено в отношении обнаруженной угрозы или легальной программы, которая может быть использована злоумышленниками. Это поле отображается только в событиях, содержащих результаты сканирования.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCAN_RESULT%</code> <p class="listcontinue1">Результат сканирования. Это поле отображается только в событиях, содержащих результаты сканирования.</p>
</li><li class="listbullet1"><code class="programcharacter">cs1Label=Scan result</code><p class="listcontinue1">Это поле отображается только в событиях, содержащих результаты сканирования.</p>
</li><li class="listbullet1"><code class="programcharacter">%VIRUS_NAME%</code><p class="listcontinue1">Название обнаруженной угрозы или легальной программы, которая может быть использована злоумышленниками. Это поле появляется только в том случае, если была обнаружена угроза или легальная программа, которая может быть использована злоумышленниками.</p>
</li><li class="listbullet1"><code class="programcharacter">cs2Label=Virus name</code><p class="listcontinue1">Это поле появляется только в том случае, если была обнаружена угроза или легальная программа, которая может быть использована злоумышленниками.</p>
</li><li class="listbullet1"><code class="programcharacter">%SDK_VERSION%</code><p class="listcontinue1">Версия KAV SDK, на которой основан Kaspersky Scan Engine.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186769"><p><a name="186769" style="display: none;">[Topic 186769]</a></p>
	<h3 id="t234363" class="heading3">Формат логов RAW в режиме HTTP</h3>
<p class="bodytext">Если Kaspersky Scan Engine настроен на запись сообщений системного журнала в формате RAW, записи журнала о событиях выглядят следующим образом:</p>
<p class="program">&lt;%PRIORITY%&gt;1 %TIMESTAMP% %HTTP_SERVICE_IP% KasperskyHTTPService %HTTP_SERVICE_PID% %MESSAGE_ID% - BOM %MESSAGE%\n</p>
<p class="bodytext">Запись имеет следующие поля:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">%PRIORITY%</code><p class="listcontinue1">Уровень критичности события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">163</code><p class="listcontinue2">Это значение указывается для ошибок.</p>
</li><li class="listbullet2"><code class="programcharacter">165</code><p class="listcontinue2">Это значение указывается, если результат сканирования отличен от <code class="programcharacter">CLEAN</code>.</p>
</li><li class="listbullet2"><code class="programcharacter">166</code><p class="listcontinue2">Это значение указывается для служебных событий или если результат сканирования – <code class="programcharacter">CLEAN</code>.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%TIMESTAMP%</code><p class="listcontinue1">Дата и время события в часовом поясе всемирного координированного времени (UTC).</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_SERVICE_IP%</code><p class="listcontinue1">IP-адрес, который Kaspersky Scan Engine использует для получения запросов на сканирование от клиентов. Если Kaspersky Scan Engine получает запросы на сканирование через UNIX-сокет, в поле указывается имя хоста компьютера, на котором работает Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_SERVICE_PID%</code><p class="listcontinue1">PID Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%MESSAGE_ID%</code><p class="listcontinue1">Класс события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">AUDIT_MESSAGE</code><p class="listcontinue2">Событие аудита.</p>
</li><li class="listbullet2"><code class="programcharacter">SERVICE_MESSAGE</code><p class="listcontinue2">Служебное событие.</p>
</li><li class="listbullet2"><code class="programcharacter">ERROR_MESSAGE</code><p class="listcontinue2">Ошибка.</p>
</li><li class="listbullet2"><code class="programcharacter">SCAN_RESULT_CLEAN_MESSAGE</code><p class="listcontinue2">Просканированный объект считается безопасным.</p>
</li><li class="listbullet2"><code class="programcharacter">SCAN_RESULT_DETECT_MESSAGE</code><p class="listcontinue2">Обнаружена угроза.</p>
</li><li class="listbullet2"><code class="programcharacter">SCAN_RESULT_OTHER_MESSAGE</code><p class="listcontinue2">Объект не просканирован.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%MESSAGE%</code><p class="listcontinue1">Описание события. Например, текст сообщения об ошибке.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179888"><p><a name="179888" style="display: none;">[Topic 179888]</a></p>
	<h2 id="t234288" class="heading2">Сборка исполняемых файлов для службы HTTP и клиента HTTP</h2>
<p class="bodytext">Вы можете скомпилировать службу kavehttpd и пример HTTP-клиента из исходного кода, расположенного в директории <code class="programcharacter">%service_dir%/samples/kavhttp/</code>. </p>
<p class="introheading">Требования к установленному ПО</p>
<p class="bodytext">Чтобы скомпилировать службу kavehttpd и пример HTTP-клиента, вы должны установить на свой компьютер следующее программное обеспечение:</p>
<ul class="listbullet1"><li class="listbullet1">Boost 1.72.0 или более поздней версии. Исходные файлы службы kavehttpd динамически связываются с Boost, для чего требуется пакет boost-devel.<p class="listcontinue1">Библиотеки Boost должны компилироваться статически. Вы можете найти список необходимых библиотек Boost в <code class="programcharacter">%service_dir%/samples/kavhttp/Makefile</code>.</p> </li><li class="listbullet1">Библиотека OpenSSL. Рекомендуется установить пакет openssl-devel.</li><li class="listbullet1">Библиотеки PostgreSQL с 6.4.4 по 7 (не включительно). Рекомендуется установить пакет libpqxx-devel.</li><li class="listbullet1">Набор компиляторов GNU (GCC) 7.3.0 или более поздней версии. Используйте одну и ту же версию GCC для компиляции Boost и службы kavhttpd.</li></ul><p class="introheading">Компиляция Kaspersky Scan Engine и примера HTTP-клиента в Linux</p>
<p class="procedureheading">Чтобы скомпилировать Kaspersky Scan Engine и пример HTTP-клиента в Linux:</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в директорию <code class="programcharacter">%service_dir%/samples/kavhttp/</code>.</li><li class="listnumber1">Запустите <code class="programcharacter">make</code>.<p class="listcontinue1">Скомпилированные исполняемые файлы клиента будут помещены в директорию <code class="programcharacter">%service_dir%/bin</code>. Скомпилированные исполняемые файлы службы будут помещены в директорию <code class="programcharacter">%service_dir%/opt/kaspersky/ScanEngine/sdk8l3/bin/</code>.</p> </li></ol><p class="bodytext">В следующем примере демонстрируется сборка исполняемых файлов:</p>
<table class="tableintopic" width="636" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="636"><p class="program">user@computer:/opt/kaspersky/ScanEngine# cd ./samples/kavhttp/</p>
<p class="program">user@computer:/opt/kaspersky/ScanEngine/samples/kavhttp/# make</p>
</td>
</tr>

</table>
<p class="introheading">Kaspersky Scan Engine и пример HTTP-клиента в Windows</p>
<p class="procedureheading">Чтобы скомпилировать Kaspersky Scan Engine и пример HTTP-клиента в Windows:</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в папку <code class="programcharacter">%service_dir%/samples/kavhttp/http_service/windows</code>.</li><li class="listnumber1">Сделайте следующее:<ul class="listbullet2"><li class="listbullet2">Если вы хотите скомпилировать службу kavehttpd, откройте файл <code class="programcharacter">kavhttpd.vcxproj</code> в Microsoft Visual Studio 2017 и более поздних версий.</li><li class="listbullet2">Если вы хотите скомпилировать пример HTTP-клиента, откройте файл <code class="programcharacter">kavhttp_client.vcxproj</code> в Microsoft Visual Studio 2017 и более поздних версиях.</li></ul></li><li class="listnumber1">В Solution Explorer нажмите правой кнопкой мыши на проект и выберите пункт <span class="boldcharacter">Properties</span>.</li><li class="listnumber1">В открывшемся окне свойств в дереве навигации слева выберите <span class="boldcharacter">Configuration Properties</span> &gt; <span class="boldcharacter">Linker</span> &gt; <span class="boldcharacter">Input</span>. Для свойства <span class="boldcharacter">Additional Dependencies</span> добавьте пути к библиотекам Boost, OpenSSL и PostgreSQL.</li><li class="listnumber1">В навигационном дереве слева выберите <span class="boldcharacter">Configuration Properties</span> &gt; <span class="boldcharacter">С/C++</span>. Для свойства <span class="boldcharacter">Additional Include Directories</span> добавьте заголовки библиотек Boost, OpenSSL и PostgreSQL.</li><li class="listnumber1">В Solution Explorer нажмите правой кнопкой мыши на проект и выберите пункт <span class="boldcharacter">Build</span>.</li></ol><p class="warningbody">Если вы используете Kaspersky Scan Engine GUI и планируете изменить предоставленные двоичные файлы, сначала получите предварительное одобрение на все изменения у своего персонального технического менеджера (ПТМ).</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184798"><p><a name="184798" style="display: none;">[Topic 184798]</a></p>
	<h1 id="t234578" class="heading1">Использование Kaspersky Scan Engine в режиме ICAP</h1>
<p class="bodytext">В этом разделе описана работа Kaspersky Scan Engine в режиме ICAP.</p>
<p class="attentionbody">Режим ICAP доступен только для операционных систем Linux.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192987" target="_self">Kaspersky Scan Engine и режим ICAP</a></p><p class="relateditem"><a href="#206407" target="_self">Рекомендации по безопасной интеграции</a></p><p class="relateditem"><a href="#225528" target="_self">Рекомендуемые настройки для режима ICAP</a></p><p class="relateditem"><a href="#192988" target="_self">Настройка Kaspersky Scan Engine в режиме ICAP</a></p><p class="relateditem"><a href="#192990" target="_self">Запуск Kaspersky Scan Engine в режиме ICAP</a></p><p class="relateditem"><a href="#221159" target="_self">Заголовки ответов</a></p><p class="relateditem"><a href="#179902" target="_self">Обновление антивирусных баз в режиме ICAP</a></p><p class="relateditem"><a href="#182615" target="_self">Получение накопленной статистики в режиме ICAP</a></p><p class="relateditem"><a href="#186630" target="_self">Логирование в режиме ICAP</a></p><p class="relateditem"><a href="#219958" target="_self">Интеграция Kaspersky Scan Engine с другими решениями</a></p><p class="relateditem"><a href="#179905" target="_self">Сборка исполняемых файлов Kaspersky Scan Engine, используемых в режиме ICAP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192987"><p><a name="192987" style="display: none;">[Topic 192987]</a></p>
	<h2 id="t234405" class="heading2">Kaspersky Scan Engine и режим ICAP</h2>
<p class="bodytext">Протокол ICAP (Internet Content Adaptation Protocol) используется для коммуникации между прокси-серверами и поставщиками услуг. В режиме ICAP решение Kaspersky Scan Engine взаимодействует с прокси-серверами, совместимыми с протоколом ICAP. Kaspersky Scan Engine сканирует HTTP-трафик, который проходит через прокси-сервер, а также URL-адреса, запрашиваемые пользователями.</p>
<p class="bodytext">При запуске в режиме ICAP решение Kaspersky Scan Engine состоит из службы kavicapd, файлов конфигурации и библиотек. Ключевые функции:</p>
<ul class="listbullet1"><li class="listbullet1">Сканирование URL-адреса.<p class="listcontinue1">Kaspersky Scan Engine позволяет сканировать URL-адреса, которые запрашивает пользователь через прокси-сервер. Эта функция доступна как для режима REQMOD (проверяются объекты, передаваемые от пользователя через прокси-сервер), так и для режима RESPMOD (проверяются объекты, передаваемые пользователю с прокси-сервера).</p> </li><li class="listbullet1">Сканирование HTTP-трафика.<p class="listcontinue1">Kaspersky Scan Engine позволяет сканировать входящий и исходящий HTTP-трафик, который проходит через прокси-сервер. Эта функция доступна как для режима REQMOD (проверяются объекты, передаваемые от пользователя через прокси-сервер), так и для режима RESPMOD (проверяются объекты, передаваемые пользователю с прокси-сервера). </p> <p class="listcontinue1">Поддерживается сканирование составных объектов (объектов, включающих в себя несколько файлов).</p> </li><li class="listbullet1">Поддержка кода состояния HTTP <code class="programcharacter">204 No</code> <code class="programcharacter">Content</code>.<p class="listcontinue1">Служба kavicapd может быть настроена на возврат такого кода состояния, если сообщение, посланное клиентом, не требует модификации.</p> </li><li class="listbullet1">Управление поведением службы kavicapd с помощью настройки <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">правил службы</a>.</li><li class="listbullet1">Режим отправки по частям.<p class="listcontinue1">Этот режим, также называемый <em class="emphasischaracter">Data Trickling</em>, позволяет сканировать файлы целиком и посылать их пользователю по блокам до окончания сканирования. Плагин продолжает сканирование файлов и одновременно отправляет пользователю первые блоки файлов. Эта функция позволяет пользователям быстро получать отсканированные файлы большого размера.</p> </li><li class="listbullet1">Режим предварительной проверки.<p class="listcontinue1">В этом режиме ICAP-клиент посылает запрос ICAP-плагину, а ICAP-плагин выполняет предварительную проверку объекта с помощью правил исключений. Такие запросы позволяют не сканировать те объекты, которые заведомо не являются вредоносными.</p> </li><li class="listbullet1">Обновления ISTag.<p class="listcontinue1">Значение ISTag в заголовке ICAP-ответа Kaspersky Scan Engine обновляется каждый раз, когда происходит одно из следующих событий:</p> <ul class="listbullet2"><li class="listbullet2">Инициализация Kaspersky Scan Engine.</li><li class="listbullet2">Изменение страниц настроек Kaspersky Scan Engine.</li><li class="listbullet2">Антивирусная база обновлена.</li></ul></li></ul><p class="introheading">Постоянные соединения Keep-Alive</p>
<p class="bodytext">По умолчанию Kaspersky Scan Engine поддерживает <a id="h207296" class="englishcrossreferencetemplate" href="#207291" target="_self">постоянные соединения Keep-Alive</a>, поэтому он может обрабатывать несколько объектов один за другим, используя одно и то же соединение.</p>
<p class="bodytext">Чтобы открыть постоянное соединение Keep-alive, запрос ICAP должен содержать поле <code class="programcharacter">Connection</code> со значением <code class="programcharacter">Keep-Alive</code>.</p>
<p class="bodytext">Чтобы закрыть соединение, ICAP-запрос должен содержать поле <code class="programcharacter">Connection</code> со значением <code class="programcharacter">close</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="206407"><p><a name="206407" style="display: none;">[Topic 206407]</a></p>
	<h2 id="t234472" class="heading2">Рекомендации по безопасной интеграции</h2>
<p class="bodytext">В этом разделе описаны рекомендуемые методы безопасной интеграции вашего продукта с Kaspersky Scan Engine. </p>
<p class="warningbody">Несоблюдение этих рекомендаций может привести к проблемам с безопасностью.</p>
<p class="introheading">Использование кратчайшего административного расстояния</p>
<p class="bodytext">Настройте свою сеть так, чтобы административное расстояние между службой kavicapd и прокси-службой было как можно меньше. </p>
<p class="introheading">  </p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225528"><p><a name="225528" style="display: none;">[Topic 225528]</a></p>
	<h2 id="t240949" class="heading2">Рекомендуемые настройки для режима ICAP</h2>
<p class="bodytext">В этом разделе описаны рекомендуемые настройки Kaspersky Scan Engine в режиме ICAP.</p>
<p class="bodytext">Если вы используете Kaspersky Scan Engine GUI, укажите рекомендуемые настройки, как описано в таблице ниже.</p>
<p class="tablename">Рекомендуемые настройки для режима ICAP в Kaspersky Scan Engine GUI</p>
<p class="spacerfortables">
<table class="tableintopic" width="512" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="210"><p class="tableheading">Настройки в Kaspersky Scan Engine GUI</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="302"><p class="tableheading">Рекомендуемые настройки</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Processes</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="bodytext">Равно количеству ядер процессора.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Threads</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="bodytext">В два раза больше значения <code class="programcharacter">ScannersCount</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Sessions</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">См. описание <code class="programcharacter">MaxIcapSessionsCount</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Partial mode</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">Вкл.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Delay</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">10</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Chunk size</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">4</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Prevent re-downloading</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">Вкл.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Maximum cache size</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">5000</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Lifetime for blocked URLs</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">1800</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Service &gt; Keep-alive</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">См. описание <code class="programcharacter">KeepAliveSettings</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Skip large objects</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">Вкл.</p>
<p class="tablebodytext">10343 КБ (10,1 МБ)</p>
<p class="attentionbody">Получайте обновленное значение от вашего технического менеджера по работе с клиентами не реже одного раза в год.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Types of files to scan</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">Установите флажки:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">Packed objects</li><li class="tablelistbullet">Archives</li><li class="tablelistbullet">Email databases</li><li class="tablelistbullet">Emails</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Heuristic analysis level</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">Low</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Object scan timeout</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">10000 (10 секунд)</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Maximum depth</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">5</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Scan scope in Request mode</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">URL (сканирование только запрошенных URL-адресов).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Scan scope in Response mode</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">Files</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="210"><p class="tablebodytext">Scanning &gt; Enable reputation checking</p>
</td>
<td style="border:1px solid #010101;" width="302"><p class="tablebodytext">См. описание <code class="programcharacter">UseKSN</code> ниже.</p>
</td>
</tr>

</table>
<p class="bodytext">Если вы не используете Kaspersky Scan Engine GUI, укажите рекомендуемые параметры в файле конфигурации kavicapd.xml, как описано в таблице ниже.</p>
<p class="tablename">Рекомендуемые настройки для режима ICAP в файле конфигурации</p>
<p class="spacerfortables">
<table class="tableintopic" width="512" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="168"><p class="tableheading">Параметр в kavicapd.xml</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="344"><p class="tableheading">Рекомендуемые настройки</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ScannersCount</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="bodytext">Равно количеству ядер процессора.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ThreadsCount</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="bodytext">В два раза больше значения <code class="programcharacter">ScannersCount</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">MaxIcapSessionsCount</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">См. описание <code class="programcharacter">MaxIcapSessionsCount</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">QueueLen</p>
</td>
<td style="border:1px solid #010101;" width="344"><ul class="tablelistbullet"><li class="tablelistbullet">Больше, чем значение <code class="programcharacter">ThreadsCount</code>.</li><li class="tablelistbullet">Как минимум вдвое больше значения <code class="programcharacter">MaxIcapSessionsCount</code>.</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">RAMUsageLimit</p>
</td>
<td style="border:1px solid #010101;" width="344"><ul class="tablelistbullet"><li class="tablelistbullet">Не превышает размер ОЗУ.</li><li class="tablelistbullet">В два раза больше максимального размера файла для сканирования больших файлов.</li><li class="tablelistbullet">Не менее 600 МБ, что в два раза больше размера антивирусных баз и библиотек Kaspersky Scan Engine (всего 300 МБ).</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ScanMaxFileSize</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">10343 КБ (10,1 МБ)</p>
<p class="attentionbody">Получайте обновленное значение от вашего технического менеджера по работе с клиентами не реже одного раза в год.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ScanningMode</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">Укажите флаги:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">KAV_O_M_PACKED</li><li class="tablelistbullet">KAV_O_M_ARCHIVED</li><li class="tablelistbullet">KAV_O_M_MAILPLAIN</li><li class="tablelistbullet">KAV_O_M_MAILBASES</li><li class="tablelistbullet">KAV_O_M_HEURISTIC_LEVEL_SHALLOW</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ScanTimeout</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">10000 (10 секунд)</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">MaxArchivesScanningDepth</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">5</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ScanInReqMode</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext"><code class="programcharacter">URL</code> (сканирование только запрошенных URL-адресов).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ScanInRespMode</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext"><code class="programcharacter">Content</code> (сканирование только тела HTTP-сообщения).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">TransferBeforeScanEnding</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">Delay</p>
<p class="tablebodytext">(Атрибут TransferBeforeScanEnding)</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">10</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">ChunkSize</p>
<p class="tablebodytext">(Атрибут TransferBeforeScanEnding)</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">4</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">BlockedUrlCacheEnabled</p>
<p class="tablebodytext">(Атрибут TransferBeforeScanEnding)</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">1</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">BlockedUrlCacheKb</p>
<p class="tablebodytext">(Атрибут TransferBeforeScanEnding)</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">5000</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">BlockedUrlCacheTtlSec</p>
<p class="tablebodytext">(Атрибут TransferBeforeScanEnding)</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">1800</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">UseKSN</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">См. описание <code class="programcharacter">UseKSN</code> ниже.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="168"><p class="tablebodytext">KeepAliveSettings</p>
</td>
<td style="border:1px solid #010101;" width="344"><p class="tablebodytext">См. описание <code class="programcharacter">KeepAliveSettings</code> ниже.</p>
</td>
</tr>

</table>
<p class="bodytext"><a id="h200733" class="englishcrossreferencetemplate" href="#200690" target="_self">ScannersCount</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Processes</span>.</p>
<p class="bodytext">Рекомендуемое количество сканирующих процессов равно количеству ядер процессора. Например, если Kaspersky Scan Engine работает на компьютере с 4-ядерным процессором, установите <code class="programcharacter">ScannersCount</code> равным <code class="programcharacter">4</code>.</p>
<p class="bodytext">См. также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме ICAP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen и MaxIcapSessionsCount&quot;.</p>
<p class="bodytext"><a id="h201166" class="englishcrossreferencetemplate" href="#200691" target="_self">ThreadsCount</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Threads</span>.</p>
<p class="bodytext">Рекомендуемое количество потоков сканирования зависит от количества процессов сканирования, указанного в <code class="programcharacter">ScannersCount</code>: значение <code class="programcharacter">ThreadsCount</code> в два раза больше значения <code class="programcharacter">ScannersCount</code>. Например, если Kaspersky Scan Engine работает на компьютере с 4-ядерным процессором, а <code class="programcharacter">ScannersCount</code> имеет значение <code class="programcharacter">4</code>, установите для <code class="programcharacter">ThreadsCount</code> значение <code class="programcharacter">8</code>.</p>
<p class="bodytext">См. также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме ICAP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen и MaxIcapSessionsCount&quot;.</p>
<p class="bodytext"><a id="h201196" class="englishcrossreferencetemplate" href="#200717" target="_self">MaxIcapSessionsCount</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Sessions</span>.</p>
<p class="bodytext">При определении максимального числа одновременных подключений к Kaspersky Scan Engine учитывайте следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Максимальное количество потоков сканирования (<code class="programcharacter">ThreadsCount</code>).</li><li class="listbullet1">Максимальную длину очереди задач сканирования (<code class="programcharacter">QueueLen</code>).</li><li class="listbullet1">Специфику ICAP: как правило, kavicapd запускает два потока сканирования для одной задачи сканирования.</li></ul><p class="bodytext">Чем больше количество активных соединений, тем быстрее заполняются все потоки сканирования и, как следствие, тем длиннее очередь для задач сканирования.</p>
<p class="listheading">Рекомендуемое значение <code class="programcharacter">MaxIcapSessionsCount</code>:</p>
<ul class="listbullet1"><li class="listbullet1">Равно среднему количеству запросов ICAP-клиента в минуту.</li><li class="listbullet1">Больше, чем значение <code class="programcharacter">ScannersCount</code>.</li><li class="listbullet1">Больше, чем значение <code class="programcharacter">ThreadsCount</code>.</li><li class="listbullet1">Превышает количество активных процессов, используемых прокси-сервером.</li><li class="listbullet1">Превышает максимальное количество подключений от клиентов, обслуживаемых выбранным прокси-сервером.</li></ul><p class="bodytext">См. также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме ICAP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen и MaxIcapSessionsCount&quot;.</p>
<p class="bodytext"><a id="h201167" class="englishcrossreferencetemplate" href="#200692" target="_self">QueueLen</a></p>
<p class="bodytext">Длина очереди задач сканирования не должна быть меньше количества потоков проверки (<code class="programcharacter">ThreadsCount</code>). В противном случае некоторые потоки сканирования никогда не будут использоваться. </p>
<p class="bodytext">Поскольку задачи сканирования ставятся в очередь из всех открытых сеансов, учитывайте значение <code class="programcharacter">MaxIcapSessionsCount</code>. Очередь задач сканирования не должна быть меньше <code class="programcharacter">MaxIcapSessionsCount</code>. В противном случае некоторые клиенты получат ошибку <code class="programcharacter">503 - Service overloaded</code> при попытке открыть сеанс.</p>
<p class="bodytext">Рекомендуемое значение <code class="programcharacter">QueueLen</code>:</p>
<ul class="listbullet1"><li class="listbullet1">Больше, чем значение <code class="programcharacter">ThreadsCount</code>.</li><li class="listbullet1">Как минимум вдвое больше значения <code class="programcharacter">MaxIcapSessionsCount</code>.</li></ul><p class="bodytext">См. также подраздел &quot;Пример работы Kaspersky Scan Engine в режиме ICAP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen и MaxIcapSessionsCount&quot;.</p>
<p class="bodytext"><a id="h201197" class="englishcrossreferencetemplate" href="#201149" target="_self">RAMUsageLimit</a></p>
<p class="bodytext">Если в Kaspersky Scan Engine поступает много больших объектов для сканирования или много одновременных запросов, программа часто может останавливать обработку запросов из-за чрезмерного потребления системной памяти. Когда обработка запроса прекращается, Kaspersky Scan Engine записывает в файл журнала одно из следующих сообщений: <code class="programcharacter">Can&#39;t accept request: Not enough memory!</code> или <code class="programcharacter">Can&#39;t accept new request: Not enough memory!</code> Клиенты получают сообщение об ошибке <code class="programcharacter">503 - Service overloaded</code>.</p>
<p class="bodytext">Рекомендуется ограничить максимальный объем системной памяти, чтобы предотвратить ее чрезмерное использование. При превышении этого лимита Kaspersky Scan Engine прекращает сканирование объектов.</p>
<p class="bodytext">Рекомендуемое значение <code class="programcharacter">RAMUsageLimit</code>:</p>
<ul class="listbullet1"><li class="listbullet1">Не превышает размер ОЗУ.</li><li class="listbullet1">В два раза больше максимального размера файла для сканирования больших файлов. Например, для сканирования файла размером 1 ГБ требуется около 2 ГБ ОЗУ.</li><li class="listbullet1">Не менее 600 МБ, что в два раза больше размера антивирусных баз и библиотек Kaspersky Scan Engine (всего 300 МБ). Такой размер необходим из-за того, что объем системной памяти удваивается при перезагрузке базы данных.</li></ul><p class="bodytext"><a id="h201198" class="englishcrossreferencetemplate" href="#200719" target="_self">ScanMaxFileSize</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Skip large objects</span>.</p>
<p class="bodytext">При указании максимального размера файла для сканирования Kaspersky Scan Engine учитывайте значение <code class="programcharacter">RAMUsageLimit</code>: <code class="programcharacter">ScanMaxFileSize</code> не должен быть больше <code class="programcharacter">RAMUsageLimit</code>. Чтобы повысить производительность Kaspersky Scan Engine, установите <code class="programcharacter">ScanMaxFileSize</code> равным 10343 КБ (10,1 МБ). Это рекомендуемое значение, поскольку его достаточно для обнаружения большинства вредоносных программ.</p>
<p class="attentionbody">Если вы следовали приведенной выше рекомендации, мы также рекомендуем один раз в год проконсультироваться со своим персональным техническим менеджером, чтобы получить обновленное рекомендуемое значение, поскольку средний размер вредоносного ПО меняется из года в год.</p>
<p class="bodytext"><a id="h201173" class="englishcrossreferencetemplate" href="#201123" target="_self">ScanningMode</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Types of files to scan</span> и <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Heuristic analysis level</span>.</p>
<p class="bodytext">Рекомендуемое значение для <code class="programcharacter">ScanningMode</code> следующее:</p>
<p class="bodytext"><code class="programcharacter">KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILPLAIN | KAV_O_M_MAILBASES | KAV_O_M_HEURISTIC_LEVEL_SHALLOW</code></p>
<p class="bodytext"><a id="h201168" class="englishcrossreferencetemplate" href="#200693" target="_self">ScanTimeout</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Object scan timeout</span>.</p>
<p class="bodytext">Рекомендуемое значение для <code class="programcharacter">ScanTimeout</code> – <code class="programcharacter">10000</code> (10 секунд).</p>
<p class="bodytext"><a id="h207137" class="englishcrossreferencetemplate" href="#207146" target="_self">MaxArchivesScanningDepth</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Maximum depth</span>.</p>
<p class="bodytext">Рекомендуется ограничить максимальную глубину распаковки вложенных архивов во время сканирования. Рекомендуемое значение <code class="programcharacter">MaxArchivesScanningDepth</code> – <code class="programcharacter">5</code>.</p>
<p class="bodytext"><a id="h201200" class="englishcrossreferencetemplate" href="#200721" target="_self">ScanInReqMode</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Scan scope in Request mode</span>.</p>
<p class="bodytext">Рекомендуемое значение для <code class="programcharacter">ScanInReqMode</code> – <code class="programcharacter">URL</code>. Если указано это значение, Kaspersky Scan Engine сканирует только запрошенные URL-адреса.</p>
<p class="bodytext"><a id="h201202" class="englishcrossreferencetemplate" href="#200722" target="_self">ScanInRespMode</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Scan scope in Response mode</span>.</p>
<p class="bodytext">Рекомендуемое значение для <code class="programcharacter">ScanInRespMode</code> – <code class="programcharacter">Content</code>. Если указано это значение, Kaspersky Scan Engine сканирует только тело HTTP-сообщения.</p>
<p class="bodytext"><a id="h201209" class="englishcrossreferencetemplate" href="#201208" target="_self">TransferBeforeScanEnding</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span>, блок настроек <span class="guicharacter">Partial mode</span>.</p>
<p class="bodytext">Этот параметр не дает клиенту прервать соединение с прокси-сервером из-за тайм-аута. Это может произойти, когда клиент отправляет на сканирование большой объект и не может дождаться получения отсканированного объекта.</p>
<p class="bodytext">Рекомендуемое значение <code class="programcharacter">TransferBeforeScanEnding</code> – <code class="programcharacter">1</code> (включить). Также рекомендуется использовать атрибуты по умолчанию:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">Delay</code>: <code class="programcharacter">10</code></li><li class="listbullet1"><code class="programcharacter">ChunkSize</code>: <code class="programcharacter">4</code><p class="listcontinue1">Значение должно быть как минимум в несколько раз меньше <code class="programcharacter">ScanMaxFileSize</code> (см. выше).</p> </li><li class="listbullet1"><code class="programcharacter">BlockedUrlCacheEnabled</code>: <code class="programcharacter">1</code></li><li class="listbullet1"><code class="programcharacter">BlockedUrlCacheKb</code>: <code class="programcharacter">5000</code></li><li class="listbullet1"><code class="programcharacter">BlockedUrlCacheTtlSec</code>: <code class="programcharacter">1800</code></li></ul><p class="bodytext">См. также <a id="h201209_2" class="englishcrossreferencetemplate" href="#201208" target="_self">подробное описание этих атрибутов</a>.</p>
<p class="bodytext"><a id="h201177" class="englishcrossreferencetemplate" href="#200698" target="_self">UseKSN</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI: <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Scanning</span> &gt; <span class="guicharacter">Enable reputation checking</span>.</p>
<p class="bodytext">Рекомендуем включить использование данных из KSN (Kaspersky Security Network). Это обеспечивает более быстрое реагирование на угрозы, улучшает производительность некоторых компонентов защиты и уменьшает вероятность ложных срабатываний.</p>
<p class="bodytext">Чтобы включить KSN, установите <code class="programcharacter">UseKSN</code> на <code class="programcharacter">1</code>.</p>
<p class="bodytext">Если включен KSN, также рекомендуется включить <em class="emphasischaracter">защиту от фишинга</em> одним из следующих способов:</p>
<ul class="listbullet1"><li class="listbullet1">В элементе <a id="h201173_2" class="englishcrossreferencetemplate" href="#201123" target="_self">ScanningMode</a> файла конфигурации kavicapd.xml добавьте флаг <code class="programcharacter">KAV_O_M_PHISHING</code>.</li><li class="listbullet1">На странице <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">Settings &gt; Scanning</a> в Kaspersky Scan Engine GUI активируйте переключатель <span class="guicharacter">Enable Phishing Protection</span>.</li></ul><p class="bodytext">Защита от фишинга полезна, когда Kaspersky Scan Engine проверяет URL-адреса.</p>
<p class="bodytext"><a id="h207296" class="englishcrossreferencetemplate" href="#207291" target="_self">KeepAliveSettings</a></p>
<p class="bodytext">Этот параметр в Kaspersky Scan Engine GUI <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span> &gt; <span class="guicharacter">Keep-alive</span>.</p>
<p class="bodytext">Мы рекомендуем включить Keep-Alive. Когда включен Keep-Alive, Kaspersky Scan Engine поддерживает постоянное соединение даже после обработки запроса и истечения времени ожидания сеанса. Это дает следующие преимущества:</p>
<ul class="listbullet1"><li class="listbullet1">уменьшает сетевой трафик;</li><li class="listbullet1">уменьшает использование ресурсов сервера;</li><li class="listbullet1">уменьшает задержку при обработке запросов.</li></ul><p class="bodytext">Keep-Alive особенно полезен для HTTPS-соединений, которые требуют больше процессорного времени и больше взаимодействий клиент-сервер.</p>
<p class="bodytext">Чтобы включить Keep-Alive, установите для элемента <a id="h207297" class="englishcrossreferencetemplate" href="#207292" target="_self">Enabled</a> в <code class="programcharacter">KeepAliveSettings</code> значение <code class="programcharacter">1</code>.</p>
<p class="bodytext">Чтобы определить значения для <a id="h207304" class="englishcrossreferencetemplate" href="#207298" target="_self">TimeoutMs</a> и <a id="h207305" class="englishcrossreferencetemplate" href="#207303" target="_self">MaxRequests</a>, оцените количество клиентов и количество запросов от клиентов.</p>
<p class="bodytext">Например, вы рассчитали, что максимальное количество клиентов равно 50, поэтому устанавливаете <code class="programcharacter">MaxICAPSessionsCount</code> равным <code class="programcharacter">50</code>. Если <code class="programcharacter">TimeoutMs</code> и <code class="programcharacter">MaxRequests</code> не ограничены и все 50 клиентов отправляют запросы непрерывно, Kaspersky Scan Engine поддерживает соединения с этими 50 клиентами без ограничений. В результате невозможно установить новые соединения.</p>
<p class="bodytext">Другой пример. Вы рассчитали, что максимальное количество клиентов равно 50, поэтому устанавливаете <code class="programcharacter">MaxICAPSessionsCount</code> равным <code class="programcharacter">50</code>. Вы также подсчитали, что максимальное количество запросов от одного клиента составляет 15, поэтому вы устанавливаете <code class="programcharacter">MaxRequests</code> на <code class="programcharacter">15</code>. Если вы не установили ограничение для <code class="programcharacter">TimeoutMs</code> и клиенты не отправляют 15 запросов, Kaspersky Scan Engine поддерживает соединения с этими 50 клиентами без ограничений, поэтому новые соединения не могут быть установлены.</p>
<p class="introheading">Пример работы Kaspersky Scan Engine в режиме ICAP в зависимости от настроек ScannersCount, ThreadsCount, QueueLen и MaxIcapSessionsCount</p>
<p class="bodytext">Допустим, Kaspersky Scan Engine установлен на компьютере с четырьмя ядрами процессора и у этого компьютера 140 одновременных подключений, а Kaspersky Scan Engine настроен следующим образом:</p>
<ul class="listbullet1"><li class="listbullet1">ScannersCount = 4</li><li class="listbullet1">ThreadsCount = 8</li><li class="listbullet1">QueueLen = 200</li><li class="listbullet1">MaxIcapSessionsCount = 100</li></ul><p class="bodytext">В этом случае:</p>
<ol class="listnumber1"><li class="listnumber1">Kaspersky Scan Engine пытается открыть соединения для всех 140 клиентов. Как правило, открыто 100 сеансов. Оставшиеся 40 клиентов, вероятно, получат ошибку <code class="programcharacter">429: Too many requests</code>.</li><li class="listnumber1">Открытые сеансы сформируют очередь задач сканирования. В идеале очередь может содержать 200 задач.<p class="listcontinue1">Если значение <code class="programcharacter">QueueLen</code> ограничивает длину очереди менее чем 200 задачами, остальные клиенты получат ошибку <code class="programcharacter">500 - Internal Server Error</code>.</p> </li><li class="listnumber1">Kaspersky Scan Engine запускает четыре процесса сканирования.</li><li class="listnumber1">Четыре процесса сканирования создают восемь потоков для одновременной обработки восьми задач сканирования из очереди. Остальные 192 задачи проверки помещены в очередь.</li></ol><p class="bodytext">Если клиент получает ошибку <code class="programcharacter">500: Internal Server Error</code>, это может значить, что достигнут предел длины очереди, указанный в <code class="programcharacter">QueueLen</code>. В этом случае вы можете сделать одно из следующих действий:</p>
<ul class="listbullet1"><li class="listbullet1">Уменьшите <code class="programcharacter">MaxIcapSessionsCount</code>.<p class="listcontinue1">Перед уменьшением <code class="programcharacter">MaxIcapSessionsCount</code> оцените потребности вашего решения в масштабируемости. Если значение <code class="programcharacter">MaxIcapSessionsCount</code> уменьшено, все клиенты, число которых превышает значение, указанное в <code class="programcharacter">MaxIcapSessionsCount</code>, не смогут создать сеанс и получат ошибку <code class="programcharacter">429: Too many requests</code>.</p> </li><li class="listbullet1">Увеличьте <code class="programcharacter">QueueLen</code>.<p class="listcontinue1">Перед увеличением <code class="programcharacter">QueueLen</code> оцените потребности вашего решения в масштабируемости. Если значение <code class="programcharacter">QueueLen</code> слишком велико, а пропускная способность мала, время обработки запроса может увеличиться настолько, что клиент отключится до того, как Kaspersky Scan Engine завершит обработку запроса. </p> </li></ul><p class="bodytext">Если клиент получает ошибку <code class="programcharacter">503: Service overloaded</code>, это может значить, что во время обработки запроса был достигнут предел потребления системной памяти (журнал содержит запись <code class="programcharacter">Not enough memory</code>). В этом случае увеличьте значение <code class="programcharacter">RAMUsageLimit</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192988"><p><a name="192988" style="display: none;">[Topic 192988]</a></p>
	<h2 id="t234302" class="heading2">Настройка Kaspersky Scan Engine в режиме ICAP</h2>
<p class="bodytext">В этом разделе описано, как настроить Kaspersky Scan Engine в режиме ICAP вручную без использования Kaspersky Scan Engine GUI.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192989" target="_self">Файл конфигурации режима ICAP</a></p><p class="relateditem"><a href="#206590" target="_self">Настройка Format Recognizer для использования в режиме ICAP</a></p><p class="relateditem"><a href="#179893" target="_self">Настройка правил сервиса</a></p><p class="relateditem"><a href="#192475" target="_self">Изменение переменных в файле модуля режима ICAP</a></p><p class="relateditem"><a href="#179895" target="_self">Работа с шаблонами ответов и скриптами</a></p><p class="relateditem"><a href="#179897" target="_self">Указание путей к плагинам и библиотекам</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192989"><p><a name="192989" style="display: none;">[Topic 192989]</a></p>
	<h3 id="t234385" class="heading3">Файл конфигурации режима ICAP</h3>
<p class="bodytext">Файл конфигурации режима ICAP <code class="programcharacter">kavicapd.xml</code> состоит из нескольких секций, в которых перечислены основные настройки службы kavicapd и KAV SDK.</p>
<p class="introheading">Подготовка файла конфигурации режима ICAP после установки Kaspersky Scan Engine вручную</p>
<p class="bodytext">Если вы <a id="h181517" class="englishcrossreferencetemplate" href="#180652" target="_self">установили Kaspersky Scan Engine вручную</a>, вам нужно скопировать файл конфигурации туда, где служба kavicapd сможет его найти. По умолчанию файл конфигурации находится в директории <code class="programcharacter">%distr_kit%/etc/kavicapd.xml</code>.</p>
<p class="bodytext">После <a id="h181517_2" class="englishcrossreferencetemplate" href="#180652" target="_self">установки Kaspersky Scan Engine</a> скопируйте <code class="programcharacter">kavicapd.xml</code> в одну из директорий по вашему усмотрению:</p>
<ul class="listbullet1"><li class="listbullet1">Если вы скопируете <code class="programcharacter">kavicapd.xml</code> в директорию <code class="programcharacter">/etc/</code>, Kaspersky Scan Engine найдет и обработает файл автоматически.</li><li class="listbullet1">Если вы копируете <code class="programcharacter">kavicapd.xml</code> в другую директорию, вам нужно задать путь к ней во время запуска Kaspersky Scan Engine <a id="h193471" class="englishcrossreferencetemplate" href="#179900" target="_self">вручную</a>.</li></ul><p class="introheading">Параметры файла конфигурации режима ICAP</p>
<p class="bodytext">Ниже перечислены секции файла конфигурации kavicapd.xml. Пример файла конфигурации находится в конце раздела.</p>
<p class="bodytext">Файл конфигурации режима ICAP содержит следующие родительские элементы:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201223" class="englishcrossreferencetemplate" href="#201103" target="_self">SDKSettings</a></li><li class="listbullet1"><a id="h201224" class="englishcrossreferencetemplate" href="#200603" target="_self">KSNSettings</a></li><li class="listbullet1"><a id="h201226" class="englishcrossreferencetemplate" href="#200605" target="_self">UpdateSettings</a></li><li class="listbullet1"><a id="h201225" class="englishcrossreferencetemplate" href="#200604" target="_self">ProxySettings</a></li><li class="listbullet1"><a id="h206618" class="englishcrossreferencetemplate" href="#206616" target="_self">FormatRecognizerSettings</a></li><li class="listbullet1"><a id="h201227" class="englishcrossreferencetemplate" href="#201129" target="_self">ICAPSettings</a></li></ul><p class="warningbody">Некоторые секции файла конфигурации необязательны. Однако если секция присутствует в файле, все ее дочерние элементы должны находиться в файле. Элементы не должны содержать пустые значения.</p>
<p class="introheading">Структура файла конфигурации</p>
<p class="bodytext">Ниже приведен пример файла конфигурации режима ICAP.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Configuration&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;SDKSettings&gt;</p>
<p class="program3">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
<p class="program3">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
<p class="program3">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
<p class="program3">&lt;ScanTimeout&gt;10000&lt;/ScanTimeout&gt; &lt;!-- 0 = unlimited --&gt;</p>
<p class="program3">&lt;LicensePath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/bin&lt;/LicensePath&gt;</p>
<p class="program3">&lt;BasesPath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/bin/bases&lt;/BasesPath&gt;</p>
<p class="program3">&lt;TempPath&gt;/tmp/kavicapd&lt;/TempPath&gt;</p>
<p class="program3">&lt;LicensingMode&gt;1&lt;/LicensingMode&gt;&lt;!-- 1 = offline licensing mode; 2 - online licensing mode --&gt;</p>
<p class="program3">&lt;ScanningMode&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILPLAIN | KAV_O_M_MAILBASES | KAV_O_M_HEURISTIC_LEVEL_SHALLOW&lt;/ScanningMode&gt;</p>
<p class="program3">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
<p class="program2">&lt;/SDKSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;KSNSettings&gt;</p>
<p class="program3">&lt;UseKSN&gt;0&lt;/UseKSN&gt;</p>
<p class="program3">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
<p class="program3">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
<p class="program2">&lt;/KSNSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;UpdateSettings&gt;</p>
<p class="program3">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
<p class="program3">&lt;UpdatePeriodMinutes&gt;30&lt;/UpdatePeriodMinutes&gt; &lt;!-- 0 = turn update off --&gt;</p>
<p class="program3">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
<p class="program3">&lt;UpdateSources&gt;</p>
<p class="program4">&lt;!-- &lt;Source&gt;&lt;/Source&gt; --&gt;</p>
<p class="program3">&lt;/UpdateSources&gt;</p>
<p class="program3">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
<p class="program3">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
<p class="program3">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
<p class="program2">&lt;/UpdateSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;ProxySettings&gt;</p>
<p class="program3">&lt;UseProxy&gt;0&lt;/UseProxy&gt;</p>
<p class="program3">&lt;Host&gt;myproxy.mycompany.com&lt;/Host&gt;</p>
<p class="program3">&lt;port&gt;3128&lt;/port&gt;</p>
<p class="program3">&lt;User&gt;doOTrypDTxpVJxUHYeKQTw==&lt;/User&gt;</p>
<p class="program3">&lt;pass&gt;8mSHXFix3uL+RP9oNeKDZQ==&lt;/pass&gt;</p>
<p class="program2">&lt;/ProxySettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;FormatRecognizerSettings&gt;</p>
<p class="program3">&lt;FormatsToSkipScanning&gt;</p>
<p class="program4">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program4">&lt;KAV_FF_GENERAL_CSV/&gt;</p>
<p class="program4">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program3">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program2">&lt;/FormatRecognizerSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program2">&lt;ICAPSettings&gt;</p>
<p class="program3">&lt;port&gt;1344&lt;/port&gt;</p>
<p class="program3">&lt;ReqModeAddress&gt;req&lt;/ReqModeAddress&gt;</p>
<p class="program3">&lt;RespModeAddress&gt;resp&lt;/RespModeAddress&gt;</p>
<p class="program3">&lt;MaxIcapSessionsCount&gt;100&lt;/MaxIcapSessionsCount&gt;</p>
<p class="program3">&lt;ScanMaxFileSize&gt;0&lt;/ScanMaxFileSize&gt; &lt;!-- 0 = unlimited --&gt;</p>
<p class="program3">&lt;RAMUsageLimit&gt;0&lt;/RAMUsageLimit&gt; &lt;!-- 0 = unlimited --&gt;</p>
<p class="program3">&lt;Allow204&gt;0&lt;/Allow204&gt;</p>
<p class="program3">&lt;KeepAliveSettings&gt;&lt;!-- Support for processing multiple requests during one connection --&gt;</p>
<p class="program4">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program4">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program4">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program3">&lt;/KeepAliveSettings&gt;</p>
<p class="program3">&lt;RequestingICAPHeaders&gt;</p>
<p class="program4">&lt;ICAPHeader&gt;HTTPUserNameICAPHeader&lt;/ICAPHeader&gt;</p>
<p class="program4">&lt;ICAPHeader&gt;HTTPClientIpICAPHeader&lt;/ICAPHeader&gt;</p>
<p class="program3">&lt;/RequestingICAPHeaders&gt;</p>
<p class="program3">&lt;HTTPClientIpICAPHeader&gt;X-Client-IP&lt;/HTTPClientIpICAPHeader&gt;</p>
<p class="program3">&lt;HTTPUserNameICAPHeader&gt;X-Client-Username&lt;/HTTPUserNameICAPHeader&gt;</p>
<p class="program3">&lt;VirusNameICAPHeader&gt;&lt;/VirusNameICAPHeader&gt;</p>
<p class="program3">&lt;DatabaseVersionICAPHeader&gt;X-AV-Database-time&lt;/DatabaseVersionICAPHeader&gt;</p>
<p class="program3">&lt;SendInfectionFoundICAPHeader&gt;0&lt;/SendInfectionFoundICAPHeader&gt;</p>
<p class="program3">&lt;SendResponseInfoICAPHeader&gt;0&lt;/SendResponseInfoICAPHeader&gt;</p>
<p class="program3">&lt;SendResponseDescICAPHeader&gt;0&lt;/SendResponseDescICAPHeader&gt;</p>
<p class="program3">&lt;SendViolationsFoundICAPHeader&gt;0&lt;/SendViolationsFoundICAPHeader&gt;</p>
<p class="program3">&lt;ScanInReqMode&gt;All&lt;/ScanInReqMode&gt;</p>
<p class="program3">&lt;ScanInRespMode&gt;Content&lt;/ScanInRespMode&gt;</p>
<p class="program3">&lt;RulesFilePath&gt;/opt/kaspersky/ScanEngine/icap_data/kavicapd_gui_rules.conf&lt;/RulesFilePath&gt;</p>
<p class="program3">&lt;CmdPath&gt;/opt/kaspersky/ScanEngine/icap_data/scripts&lt;/CmdPath&gt;</p>
<p class="program3">&lt;ResponsesPath&gt;/opt/kaspersky/ScanEngine/icap_data/templates&lt;/ResponsesPath&gt;</p>
<p class="program3">&lt;TransferBeforeScanEnding Delay=&quot;10&quot; ChunkSize=&quot;4&quot; BlockedUrlCacheEnabled=&quot;1&quot; BlockedUrlCacheKb=&quot;5000&quot; BlockedUrlCacheTtlSec=&quot;1800&quot;&gt;0&lt;/TransferBeforeScanEnding&gt;</p>
<p class="program3">&lt;Exclusions&gt;</p>
<p class="program3">&lt;!-- Signs of highly likely uninfected resources. --&gt;</p>
<p class="program3">&lt;!-- Note: ContentSize - more or equal (use only once), ContentType - as is, RequestURL - masks can be used --&gt;</p>
<p class="program3">&lt;!--</p>
<p class="program4">&lt;ContentSize&gt;102400&lt;/ContentSize&gt;</p>
<p class="program4">&lt;ContentType&gt;audio/mpeg&lt;/ContentType&gt;</p>
<p class="program4">&lt;ContentType&gt;image/jpeg&lt;/ContentType&gt;</p>
<p class="program4">&lt;RequestURL&gt;*.kaspersky.com/.*&lt;/RequestURL&gt;</p>
<p class="program"> --&gt;</p>
<p class="program3">&lt;/Exclusions&gt;</p>
<p class="program3">&lt;!-- Possible values: update, reload, reopen-log (reopens syslog format log files) --&gt;</p>
<p class="program3">&lt;USR1SignalAction&gt;update&lt;/USR1SignalAction&gt; </p>
<p class="program3">&lt;USR2SignalAction&gt;reopen-log&lt;/USR2SignalAction&gt;</p>
<p class="program3">&lt;!-- The path to the logging configuration file. Only this file will be used as the ICAP logging configuration file. If the LoggingConfigFilePath element has the empty value, the icapdkavlog.conf file located in the kavicapd binary file directory is used. --&gt;</p>
<p class="program3">&lt;LoggingConfigFilePath&gt;&lt;/LoggingConfigFilePath&gt;</p>
<p class="program2">&lt;/ICAPSettings&gt;</p>
<p class="program">&nbsp;</p>
<p class="program">&lt;/Configuration&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201103"><p><a name="201103" style="display: none;">[Topic 201103]</a></p>
	<h4 id="t234504" class="heading4">SDKSettings</h4>
<p class="bodytext">Указывает параметры KAV SDK.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h200733" class="englishcrossreferencetemplate" href="#200690" target="_self">ScannersCount</a></li><li class="listbullet1"><a id="h201166" class="englishcrossreferencetemplate" href="#200691" target="_self">ThreadsCount</a></li><li class="listbullet1"><a id="h201167" class="englishcrossreferencetemplate" href="#200692" target="_self">QueueLen</a></li><li class="listbullet1"><a id="h201168" class="englishcrossreferencetemplate" href="#200693" target="_self">ScanTimeout</a></li><li class="listbullet1"><a id="h201169" class="englishcrossreferencetemplate" href="#201118" target="_self">LicensePath</a></li><li class="listbullet1"><a id="h201170" class="englishcrossreferencetemplate" href="#201120" target="_self">BasesPath</a></li><li class="listbullet1"><a id="h201171" class="englishcrossreferencetemplate" href="#200697" target="_self">TempPath</a></li><li class="listbullet1"><a id="h201173" class="englishcrossreferencetemplate" href="#201123" target="_self">ScanningMode</a></li><li class="listbullet1"><a id="h201174" class="englishcrossreferencetemplate" href="#201124" target="_self">LicensingMode</a></li><li class="listbullet1"><a id="h207137" class="englishcrossreferencetemplate" href="#207146" target="_self">MaxArchivesScanningDepth</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">SDKSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;SDKSettings&gt;</p>
<p class="program2">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
<p class="program2">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
<p class="program2">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
<p class="program2">&lt;ScanTimeout&gt;10000&lt;/ScanTimeout&gt; &lt;!-- 0 = unlimited --&gt;</p>
<p class="program2">&lt;Li<code class="programcharacter">censePath&gt;/</code>opt/kaspersky/ScanEngine/bin&lt;/LicensePath&gt;</p>
<p class="program2"><code class="programcharacter">&lt;BasesPath</code>&gt;/opt/kaspersky/ScanEngine/bin/bases&lt;/BasesPath&gt;</p>
<p class="program2">&lt;TempPath&gt;/tmp/kavicapd&lt;/TempPath&gt;</p>
<p class="program2">&lt;LicensingMode&gt;1&lt;/LicensingMode&gt;&lt;!-- 1 = offline licensing mode; 2 - online licensing mode --&gt; </p>
<p class="program2">&lt;ScanningMode&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILPLAIN | KAV_O_M_MAILBASES | KAV_O_M_HEURISTIC_LEVEL_SHALLOW&lt;/ScanningMode&gt;</p>
<p class="program2">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
<p class="program">&lt;/SDKSettings&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200690"><p><a name="200690" style="display: none;">[Topic 200690]</a></p>
	<h5 id="t234498" class="heading5">ScannersCount</h5>
<p class="bodytext">Указывает количество сканирующих процессов. Вы можете использовать до 256 таких процессов. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; ScannersCount</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">4</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScannersCount&gt;4&lt;/ScannersCount&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200691"><p><a name="200691" style="display: none;">[Topic 200691]</a></p>
	<h5 id="t234530" class="heading5">ThreadsCount</h5>
<p class="bodytext">Задает общее количество сканирующих потоков в каждом процессе. Вы можете использовать до 256 таких потоков.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; ThreadsCount</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым числом и не может равняться <code class="programcharacter">0</code>. Значение по умолчанию: <code class="programcharacter">8</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ThreadsCount&gt;8&lt;/ThreadsCount&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200692"><p><a name="200692" style="display: none;">[Topic 200692]</a></p>
	<h5 id="t234469" class="heading5">QueueLen</h5>
<p class="bodytext">Задает размер очереди сканирующей задачи.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; QueueLen</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">1024</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;QueueLen&gt;1024&lt;/QueueLen&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200693"><p><a name="200693" style="display: none;">[Topic 200693]</a></p>
	<h5 id="t234503" class="heading5">ScanTimeout</h5>
<p class="bodytext">Задает тайм-аут сканирования (в миллисекундах).</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; ScanTimeout</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">10000</code> (10 секунд).</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanTimeout&gt;10000&lt;/ScanTimeout&gt; &lt;!-- 0 = unlimited --&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201118"><p><a name="201118" style="display: none;">[Topic 201118]</a></p>
	<h5 id="t234425" class="heading5">LicensePath</h5>
<p class="bodytext">Указывает абсолютный путь к директории, где хранятся файлы с ID приложения, лицензией и ключом.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; LicensePath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть строкой. Kaspersky Scan Engine ищет эти файлы в следующих директориях:</p>
<ul class="listbullet1"><li class="listbullet1">Директория, указанная в <code class="programcharacter">LicensePath</code>.</li><li class="listbullet1">Директория, содержащая исполняемый файл <code class="programcharacter">kavicapd</code>.</li><li class="listbullet1">Директория <code class="programcharacter">%service_dir%/ppl</code>.</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;LicensePath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/bin&lt;/LicensePath&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201120"><p><a name="201120" style="display: none;">[Topic 201120]</a></p>
	<h5 id="t234284" class="heading5">BasesPath</h5>
<p class="bodytext">Указывает абсолютный путь к директории, в которой расположены антивирусные базы.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; BasesPath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">/opt/kaspersky/ScanEngine/bin/bases</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;BasesPath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/bin/bases&lt;/BasesPath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200697"><p><a name="200697" style="display: none;">[Topic 200697]</a></p>
	<h5 id="t234528" class="heading5">TempPath</h5>
<p class="bodytext">Указывает абсолютный путь к директории, где хранятся временные файлы, создаваемые во время работы продукта.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; TempPath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: /<code class="programcharacter">/tmp/kavicapd</code>.</p>
<p class="warningbody">Не удаляйте файлы из этой директории.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;TempPath&gt;/tmp/kavicapd&lt;/TempPath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201123"><p><a name="201123" style="display: none;">[Topic 201123]</a></p>
	<h5 id="t234501" class="heading5">ScanningMode</h5>
<p class="bodytext">Указывает режим сканирования файла.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; ScanningMode</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Режим сканирования определяется комбинацией флагов, разделенных вертикальными чертами (<code class="programcharacter">|</code>).</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента ScanningMode</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_PACKED</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Включает сканирование упакованных исполняемых файлов.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_ARCHIVED</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Включает сканирование архивов.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_MAILBASES</code></p>
<p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Сканирует файлы, которые содержат почтовые базы.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_MAILPLAIN</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Включает сканирование электронной почты.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_HEURISTIC_LEVEL_SHALLOW</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Устанавливает уровень сканирования расширенного эвристического анализатора в значение shallow (уровень Low в графическом интерфейсе пользователя).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_HEURISTIC_LEVEL_MEDIUM</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Устанавливает уровень сканирования расширенного эвристического анализатора в значение medium (уровень Medium в графическом интерфейсе пользователя).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_HEURISTIC_LEVEL_DETAIL</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Устанавливает уровень сканирования расширенного эвристического анализатора в значение detail (уровень High в графическом интерфейсе пользователя).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_MSOFFICE_MACRO</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Блокирует безопасные файлы документов Microsoft Office, содержащих макросы, и уведомляет пользователя.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">KAV_O_M_PHISHING</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Включает защиту от фишинга.</p>
</td>
</tr>

</table>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILPLAIN | KAV_O_M_MAILBASES | KAV_O_M_HEURISTIC_LEVEL_SHALLOW</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanningMode&gt;KAV_O_M_PACKED | KAV_O_M_ARCHIVED | KAV_O_M_MAILPLAIN | KAV_O_M_MAILBASES | KAV_O_M_HEURISTIC_LEVEL_SHALLOW&lt;/ScanningMode&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201124"><p><a name="201124" style="display: none;">[Topic 201124]</a></p>
	<h5 id="t234429" class="heading5">LicensingMode</h5>
<p class="bodytext">Указывает режим лицензирования, используемый в Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; LicensingMode</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Возможные значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">1 – </code><a id="h180864" class="englishcrossreferencetemplate" href="#179852" target="_self">Режим лицензирования офлайн</a>.</li><li class="listbullet1"><code class="programcharacter">2 – </code><a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">Режим лицензирования онлайн</a>.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">1</code>.</p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207146"><p><a name="207146" style="display: none;">[Topic 207146]</a></p>
	<h5 id="t234451" class="heading5">MaxArchivesScanningDepth</h5>
<p class="bodytext">Указывает максимальную глубину распаковки вложенных архивов при сканировании. Этот параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">SDKSettings &gt; MaxArchivesScanningDepth</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение этого элемента должно быть целым положительным числом. </p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">0</code>.</p>
<p class="bodytext">Рекомендуемое значение: <code class="programcharacter">5</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxArchivesScanningDepth&gt;0&lt;/MaxArchivesScanningDepth&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200603"><p><a name="200603" style="display: none;">[Topic 200603]</a></p>
	<h4 id="t234420" class="heading4">KSNSettings</h4>
<p class="bodytext">Задает настройки Kaspersky Security Network (KSN).</p>
<p class="bodytext">Эта секция необязательна. Если она отсутствует в файле конфигурации, KSN не используется.</p>
<p class="attentionbody">Используя KSN, вы выражаете согласие на передачу &quot;Лаборатории Касперского&quot; данных, которые описаны в файле About data provision.txt. Смотрите также подробную информацию <a id="h155880" class="englishcrossreferencetemplate" href="#185034" target="_self">о предоставлении данных</a>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201177" class="englishcrossreferencetemplate" href="#200698" target="_self">UseKSN</a></li><li class="listbullet1"><a id="h200775" class="englishcrossreferencetemplate" href="#200702" target="_self">ObjectCheckOnDemandTimeoutMs</a></li><li class="listbullet1"><a id="h200776" class="englishcrossreferencetemplate" href="#200703" target="_self">CacheSizeKb</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">KSNSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;KSNSettings&gt;</p>
<p class="program2">&lt;UseKSN&gt;0&lt;/UseKSN&gt;</p>
<p class="program2">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
<p class="program2">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
<p class="program">&lt;/KSNSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200698"><p><a name="200698" style="display: none;">[Topic 200698]</a></p>
	<h5 id="t234563" class="heading5">UseKSN</h5>
<p class="bodytext">Параметр, который содержит значение логического типа, определяющее доступность KSN.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings &gt; UseKSN</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseKSN</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">KSN выключен.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">KSN включен. Кроме того, флаг <code class="programcharacter">KAV_O_M_COMPOSITE_SCAN_KSN</code> используется автоматически.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseKSN&gt;0&lt;/UseKSN&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200702"><p><a name="200702" style="display: none;">[Topic 200702]</a></p>
	<h5 id="t234461" class="heading5">ObjectCheckOnDemandTimeoutMs</h5>
<p class="bodytext">Указывает тайм-аут в миллисекундах (мс) для проверки репутации файлов или URL-адресов в облаке KSN.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings &gt; ObjectCheckOnDemandTimeoutMs</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Недопустимое значение: <code class="programcharacter">0</code>.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">10000</code> (10 секунд).</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ObjectCheckOnDemandTimeoutMs&gt;10000&lt;/ObjectCheckOnDemandTimeoutMs&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200703"><p><a name="200703" style="display: none;">[Topic 200703]</a></p>
	<h5 id="t234290" class="heading5">CacheSizeKb</h5>
<p class="bodytext">Указывает максимальный объем кеша статуса KSN в килобайтах (КБ).</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">KSNSettings &gt; CacheSizeKb</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Kaspersky Scan Engine использует этот кеш, чтобы хранить информацию о репутации объектов, полученную от KSN.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">30720</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;CacheSizeKb&gt;30720&lt;/CacheSizeKb&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200604"><p><a name="200604" style="display: none;">[Topic 200604]</a></p>
	<h4 id="t234467" class="heading4">ProxySettings</h4>
<p class="bodytext">Ниже перечислены параметры настройки прокси-сервера для Kaspersky Scan Engine. Kaspersky Scan Engine использует эти настройки, если у вас есть доступ к интернету.</p>
<p class="bodytext">Эта секция необязательна. Если она отсутствует в файле конфигурации, Kaspersky Scan Engine не использует прокси-сервер при подключении к интернету.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ProxySettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h200781" class="englishcrossreferencetemplate" href="#200704" target="_self">UseProxy</a></li><li class="listbullet1"><a id="h200782" class="englishcrossreferencetemplate" href="#200705" target="_self">Host</a></li><li class="listbullet1"><a id="h200783" class="englishcrossreferencetemplate" href="#200706" target="_self">Port</a></li><li class="listbullet1"><a id="h200784" class="englishcrossreferencetemplate" href="#200707" target="_self">User</a></li><li class="listbullet1"><a id="h200785" class="englishcrossreferencetemplate" href="#200708" target="_self">Pass</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">ProxySettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ProxySettings&gt;</p>
<p class="program2">&lt;UseProxy&gt;0&lt;/UseProxy&gt;</p>
<p class="program2">&lt;Host&gt;myproxy.mycompany.com&lt;/Host&gt;</p>
<p class="program2">&lt;port&gt;3128&lt;/port&gt;</p>
<p class="program2">&lt;User&gt;doOTrypDTxpVJxUHYeKQTw==&lt;/User&gt;</p>
<p class="program2">&lt;pass&gt;8mSHXFix3uL+RP9oNeKDZQ==&lt;/pass&gt;</p>
<p class="program">&lt;/ProxySettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200704"><p><a name="200704" style="display: none;">[Topic 200704]</a></p>
	<h5 id="t234566" class="heading5">UseProxy</h5>
<p class="bodytext">Параметр, который содержит значение логического типа, определяющее, использует ли Kaspersky Scan Engine прокси-сервер при подключении к интернету.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ProxySettings &gt; UseProxy</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseProxy</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Прокси-сервер не используется.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Используется прокси-сервер.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseProxy&gt;0&lt;/UseProxy&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200705"><p><a name="200705" style="display: none;">[Topic 200705]</a></p>
	<h5 id="t234376" class="heading5">Host</h5>
<p class="bodytext">Указывает IP-адрес прокси-сервера (IPv4 или IPv6) или его доменное имя.</p>
<p class="bodytext">Если прокси-сервер используется, этот параметр обязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ProxySettings &gt; Host</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Не указывайте протокол (http:// или https://) в этом параметре.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Host&gt;myproxy.mycompany.com&lt;/Host&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200706"><p><a name="200706" style="display: none;">[Topic 200706]</a></p>
	<h5 id="t234463" class="heading5">Port</h5>
<p class="bodytext">Указывает номер порта прокси-сервера.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ProxySettings &gt; Port</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">3128</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;port&gt;3128&lt;/port&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200707"><p><a name="200707" style="display: none;">[Topic 200707]</a></p>
	<h5 id="t234568" class="heading5">User</h5>
<p class="bodytext">Зашифрованное имя пользователя, которое используется для аутентификации на прокси-сервере. Имя пользователя должно быть зашифровано с помощью утилиты <code class="programcharacter">kav_encrypt</code>.</p>
<p class="bodytext">Если прокси-сервер используется, этот параметр обязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ProxySettings &gt; User</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Если параметры <code class="programcharacter">User</code> и <code class="programcharacter">Pass</code> не заполнены, используется анонимный прокси-сервер.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;User&gt;doOTrypDTxpVJxUHYeKQTw==&lt;/User&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200708"><p><a name="200708" style="display: none;">[Topic 200708]</a></p>
	<h5 id="t234462" class="heading5">Pass</h5>
<p class="bodytext">Пароль, который используется при аутентификации на прокси-сервере. Значение должно быть зашифровано с помощью утилиты <code class="programcharacter">kav_encrypt</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ProxySettings &gt; Pass</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Если параметры <code class="programcharacter">User</code> и <code class="programcharacter">Pass</code> не заполнены, используется анонимный прокси-сервер.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;pass&gt;8mSHXFix3uL+RP9oNeKDZQ==&lt;/pass&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200605"><p><a name="200605" style="display: none;">[Topic 200605]</a></p>
	<h4 id="t234550" class="heading4">UpdateSettings</h4>
<p class="bodytext">Следующие параметры определяют настройки обновления Kaspersky Scan Engine.</p>
<p class="bodytext">Эта секция необязательна. Если она отсутствует в файле конфигурации, обновление недоступно.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201186" class="englishcrossreferencetemplate" href="#200709" target="_self">DisableBackup</a></li><li class="listbullet1"><a id="h200787" class="englishcrossreferencetemplate" href="#200710" target="_self">UpdatePeriodMinutes</a></li><li class="listbullet1"><a id="h201188" class="englishcrossreferencetemplate" href="#200711" target="_self">UseOnlyCustomSources</a></li><li class="listbullet1"><a id="h201189" class="englishcrossreferencetemplate" href="#200712" target="_self">UpdateSources</a></li><li class="listbullet1"><a id="h201190" class="englishcrossreferencetemplate" href="#200713" target="_self">UpdatesCertFile</a></li><li class="listbullet1"><a id="h201191" class="englishcrossreferencetemplate" href="#200714" target="_self">CertificateConfirmationAction</a></li><li class="listbullet1"><a id="h200792" class="englishcrossreferencetemplate" href="#200715" target="_self">UseReducedBases</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">UpdateSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdateSettings&gt;</p>
<p class="program2">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
<p class="program2">&lt;UpdatePeriodMinutes&gt;30&lt;/UpdatePeriodMinutes&gt; &lt;!-- 0 = turn update off --&gt;</p>
<p class="program2">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
<p class="program2">&lt;UpdateSources&gt;</p>
<p class="program3">&lt;!-- &lt;Source&gt;&lt;/Source&gt; --&gt;</p>
<p class="program2">&lt;/UpdateSources&gt;</p>
<p class="program2">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
<p class="program2">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
<p class="program2">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
<p class="program">&lt;/UpdateSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200709"><p><a name="200709" style="display: none;">[Topic 200709]</a></p>
	<h5 id="t234322" class="heading5">DisableBackup</h5>
<p class="bodytext">Параметр, который содержит значение логического типа, определяющее, включено ли резервное копирование антивирусных баз. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; DisableBackup</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента DisableBackup</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Резервное копирование антивирусной базы включено.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Резервное копирование антивирусной базы выключено.</p>
</td>
</tr>

</table>
<p class="bodytext">
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;DisableBackup&gt;0&lt;/DisableBackup&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200710"><p><a name="200710" style="display: none;">[Topic 200710]</a></p>
	<h5 id="t234546" class="heading5">UpdatePeriodMinutes</h5>
<p class="bodytext">Указывает интервал в минутах между автоматическими обновлениями. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UpdatePeriodMinutes</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Максимальное возможное значение: <code class="programcharacter">44640</code>.</p>
<p class="bodytext">Если этот параметр имеет значение <code class="programcharacter">0</code>, Kaspersky Scan Engine не выполняет автоматические обновления.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">30</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdatePeriodMinutes&gt;30&lt;/UpdatePeriodMinutes&gt; &lt;!-- 0 = turn update off --&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200711"><p><a name="200711" style="display: none;">[Topic 200711]</a></p>
	<h5 id="t234565" class="heading5">UseOnlyCustomSources</h5>
<p class="bodytext">Определяет, являются ли серверы обновлений &quot;Лаборатории Касперского&quot; источниками обновлений.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UseOnlyCustomSources</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseOnlyCustomSources</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Серверы обновлений &quot;Лаборатории Касперского&quot; используются вместе с пользовательскими источниками обновлений.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Используются только пользовательские источники обновлений.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseOnlyCustomSources&gt;0&lt;/UseOnlyCustomSources&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200712"><p><a name="200712" style="display: none;">[Topic 200712]</a></p>
	<h5 id="t234552" class="heading5">UpdateSources</h5>
<p class="bodytext">Содержит пользовательские источники обновлений.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UpdateSources</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">Source</em><p class="listcontinue1">Указывает пользовательский источник обновлений.</p>
<p class="listcontinue1">Если Kaspersky Scan Engine должен использовать TLS при подключении к пользовательскому источнику обновлений, вы должны указать протокол <code class="programcharacter">https://</code> в адресе этого пользовательского источника обновлений.</p>
</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdateSources&gt;</p>
<p class="program2">&lt;!-- &lt;Source&gt;&lt;/Source&gt; --&gt;</p>
<p class="program">&lt;/UpdateSources&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200713"><p><a name="200713" style="display: none;">[Topic 200713]</a></p>
	<h5 id="t234548" class="heading5">UpdatesCertFile</h5>
<p class="bodytext">Путь к корневому сертификату в формате PEM, который будет использоваться для загрузки обновлений с пользовательских HTTPS-серверов обновлений. </p>
<p class="bodytext">Параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UpdatesCertFile</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значения</p>
<p class="bodytext">Вы можете указать абсолютный или относительный путь. Относительный путь определяется относительно расположения исполняемого файла <code class="programcharacter">kavicapd</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UpdatesCertFile&gt;&lt;/UpdatesCertFile&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200714"><p><a name="200714" style="display: none;">[Topic 200714]</a></p>
	<h5 id="t234292" class="heading5">CertificateConfirmationAction</h5>
<p class="bodytext">Действие, которое необходимо предпринять, если сервер обновлений использует ненадежный сертификат.</p>
<p class="bodytext">Параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; CertificateConfirmationAction</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента CertificateConfirmationAction</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Сервер обновлений использовать нельзя.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Сервер обновлений по-прежнему должен использоваться.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;CertificateConfirmationAction&gt;0&lt;/CertificateConfirmationAction&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200715"><p><a name="200715" style="display: none;">[Topic 200715]</a></p>
	<h5 id="t234570" class="heading5">UseReducedBases</h5>
<p class="bodytext">Указывает параметр, который является одним из условий, определяющих, обновляется ли сокращенный набор баз.</p>
<p class="bodytext">Параметр необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">UpdateSettings &gt; UseReducedBases</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента UseReducedBases</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="276"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Полный набор баз всегда обновляется.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="276"><p class="tablebodytext">Встроенные функции KAV SDK обновляют сокращенный набор баз, если соблюдены все условия обновления сокращенного набора баз. При несоблюдении хотя бы одного из условий принятия обновляется полный набор баз.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseReducedBases&gt;0&lt;/UseReducedBases&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201129"><p><a name="201129" style="display: none;">[Topic 201129]</a></p>
	<h4 id="t234388" class="heading4">ICAPSettings</h4>
<p class="bodytext">Указывает параметры ICAP для Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h201195" class="englishcrossreferencetemplate" href="#200716" target="_self">Port</a></li><li class="listbullet1"><a id="h207258" class="englishcrossreferencetemplate" href="#207194" target="_self">ReqModeAddress</a></li><li class="listbullet1"><a id="h207259" class="englishcrossreferencetemplate" href="#207240" target="_self">RespModeAddress</a></li><li class="listbullet1"><a id="h201196" class="englishcrossreferencetemplate" href="#200717" target="_self">MaxIcapSessionsCount</a></li><li class="listbullet1"><a id="h201197" class="englishcrossreferencetemplate" href="#201149" target="_self">RAMUsageLimit</a></li><li class="listbullet1"><a id="h201198" class="englishcrossreferencetemplate" href="#200719" target="_self">ScanMaxFileSize</a></li><li class="listbullet1"><a id="h201199" class="englishcrossreferencetemplate" href="#200720" target="_self">Allow204</a></li><li class="listbullet1"><a id="h207296" class="englishcrossreferencetemplate" href="#207291" target="_self">KeepAliveSettings</a></li><li class="listbullet1"><a id="h225224" class="englishcrossreferencetemplate" href="#225221" target="_self">RequestingICAPHeaders</a></li><li class="listbullet1"><a id="h201206" class="englishcrossreferencetemplate" href="#200726" target="_self">HTTPClientIpICAPHeader</a></li><li class="listbullet1"><a id="h201207" class="englishcrossreferencetemplate" href="#200727" target="_self">HTTPUserNameICAPHeader</a></li><li class="listbullet1"><a id="h201215" class="englishcrossreferencetemplate" href="#201214" target="_self">VirusNameICAPHeader</a></li><li class="listbullet1"><a id="h225157" class="englishcrossreferencetemplate" href="#225156" target="_self">DatabaseVersionICAPHeader</a></li><li class="listbullet1"><a id="h224483" class="englishcrossreferencetemplate" href="#221147" target="_self">SendInfectionFoundICAPHeader</a></li><li class="listbullet1"><a id="h224486" class="englishcrossreferencetemplate" href="#221160" target="_self">SendResponseDescICAPHeader</a></li><li class="listbullet1"><a id="h224484" class="englishcrossreferencetemplate" href="#221161" target="_self">SendResponseInfoICAPHeader</a></li><li class="listbullet1"><a id="h224485" class="englishcrossreferencetemplate" href="#221162" target="_self">SendViolationsFoundICAPHeader</a></li><li class="listbullet1"><a id="h201200" class="englishcrossreferencetemplate" href="#200721" target="_self">ScanInReqMode</a></li><li class="listbullet1"><a id="h201202" class="englishcrossreferencetemplate" href="#200722" target="_self">ScanInRespMode</a></li><li class="listbullet1"><a id="h201203" class="englishcrossreferencetemplate" href="#201153" target="_self">RulesFilePath</a></li><li class="listbullet1"><a id="h201204" class="englishcrossreferencetemplate" href="#201154" target="_self">CmdPath</a></li><li class="listbullet1"><a id="h201205" class="englishcrossreferencetemplate" href="#201155" target="_self">ResponsesPath</a></li><li class="listbullet1"><a id="h201209" class="englishcrossreferencetemplate" href="#201208" target="_self">TransferBeforeScanEnding</a></li><li class="listbullet1"><a id="h201210" class="englishcrossreferencetemplate" href="#200729" target="_self">Exclusions</a></li><li class="listbullet1"><a id="h201212" class="englishcrossreferencetemplate" href="#201163" target="_self">USR1SignalAction</a></li><li class="listbullet1"><a id="h201213" class="englishcrossreferencetemplate" href="#201164" target="_self">USR2SignalAction</a></li><li class="listbullet1"><a id="h201211" class="englishcrossreferencetemplate" href="#200730" target="_self">LoggingConfigFilePath</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">ICAPSettings</em>.</p>
<table class="tableintopic" width="726" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="726"><p class="program">&lt;ICAPSettings&gt;</p>
<p class="program2">&lt;port&gt;1344&lt;/port&gt;</p>
<p class="program2">&lt;ReqModeAddress&gt;req&lt;/ReqModeAddress&gt;</p>
<p class="program2">&lt;RespModeAddress&gt;resp&lt;/RespModeAddress&gt;</p>
<p class="program2">&lt;MaxIcapSessionsCount&gt;100&lt;/MaxIcapSessionsCount&gt;</p>
<p class="program2">&lt;ScanMaxFileSize&gt;0&lt;/ScanMaxFileSize&gt; &lt;!-- 0 = unlimited --&gt;</p>
<p class="program2">&lt;RAMUsageLimit&gt;0&lt;/RAMUsageLimit&gt; &lt;!-- 0 = unlimited --&gt;</p>
<p class="program2">&lt;Allow204&gt;0&lt;/Allow204&gt;</p>
<p class="program2">&lt;KeepAliveSettings&gt;&lt;!-- Support for processing multiple requests during one connection --&gt;</p>
<p class="program3">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program3">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program3">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program2">&lt;/KeepAliveSettings&gt;</p>
<p class="program2">&lt;RequestingICAPHeaders&gt;</p>
<p class="program3">&lt;ICAPHeader&gt;HTTPUserNameICAPHeader&lt;/ICAPHeader&gt;</p>
<p class="program3">&lt;ICAPHeader&gt;HTTPClientIpICAPHeader&lt;/ICAPHeader&gt;</p>
<p class="program2">&lt;/RequestingICAPHeaders&gt;</p>
<p class="program2">&lt;HTTPClientIpICAPHeader&gt;X-Client-IP&lt;/HTTPClientIpICAPHeader&gt;</p>
<p class="program2">&lt;HTTPUserNameICAPHeader&gt;X-Client-Username&lt;/HTTPUserNameICAPHeader&gt;</p>
<p class="program2">&lt;VirusNameICAPHeader&gt;&lt;/VirusNameICAPHeader&gt;</p>
<p class="program2">&lt;DatabaseVersionICAPHeader&gt;X-AV-Database-time&lt;/DatabaseVersionICAPHeader&gt;</p>
<p class="program2">&lt;SendInfectionFoundICAPHeader&gt;0&lt;/SendInfectionFoundICAPHeader&gt;</p>
<p class="program2">&lt;SendResponseDescICAPHeader&gt;0&lt;/SendResponseDescICAPHeader&gt;</p>
<p class="program2">&lt;SendResponseInfoICAPHeader&gt;0&lt;/SendResponseInfoICAPHeader&gt;</p>
<p class="program2">&lt;SendViolationsFoundICAPHeader&gt;0&lt;/SendViolationsFoundICAPHeader&gt;</p>
<p class="program2">&lt;ScanInReqMode&gt;All&lt;/ScanInReqMode&gt;</p>
<p class="program2">&lt;ScanInRespMode&gt;Content&lt;/ScanInRespMode&gt;</p>
<p class="program2">&lt;RulesFilePath&gt;/opt/kaspersky/ScanEngine/icap_data/kavicapd_gui_rules.conf&lt;/RulesFilePath&gt;</p>
<p class="program2">&lt;CmdPath&gt;/opt/kaspersky/ScanEngine/icap_data/scripts&lt;/CmdPath&gt;</p>
<p class="program2">&lt;ResponsesPath&gt;/opt/kaspersky/ScanEngine/icap_data/templates&lt;/ResponsesPath&gt;</p>
<p class="program2">&lt;TransferBeforeScanEnding Delay=&quot;10&quot; ChunkSize=&quot;4&quot; BlockedUrlCacheEnabled=&quot;1&quot; BlockedUrlCacheKb=&quot;5000&quot; BlockedUrlCacheTtlSec=&quot;1800&quot;&gt;0&lt;/TransferBeforeScanEnding&gt;</p>
<p class="program2">&lt;Exclusions&gt;</p>
<p class="program2">&lt;!-- Signs of highly likely uninfected resources. --&gt;</p>
<p class="program2">&lt;!-- Note: ContentSize - more or equal (use only once), ContentType - as is, RequestURL - masks can be used --&gt;</p>
<p class="program2">&lt;!--</p>
<p class="program3">&lt;ContentSize&gt;102400&lt;/ContentSize&gt;</p>
<p class="program3">&lt;ContentType&gt;audio/mpeg&lt;/ContentType&gt;</p>
<p class="program3">&lt;ContentType&gt;image/jpeg&lt;/ContentType&gt;</p>
<p class="program3">&lt;RequestURL&gt;*.kaspersky.com/.*&lt;/RequestURL&gt;</p>
<p class="program"> --&gt;</p>
<p class="program2">&lt;/Exclusions&gt;</p>
<p class="program2">&lt;!-- Possible values: update, reload, reopen-log (reopens syslog format log files) --&gt;</p>
<p class="program2">&lt;USR1SignalAction&gt;update&lt;/USR1SignalAction&gt; </p>
<p class="program2">&lt;USR2SignalAction&gt;reopen-log&lt;/USR2SignalAction&gt;</p>
<p class="program2">&lt;!-- The path to the logging configuration file. Only this file will be used as the ICAP logging configuration file. If the LoggingConfigFilePath element has the empty value, the icapdkavlog.conf file located in the kavicapd binary file directory is used. --&gt;</p>
<p class="program2">&lt;LoggingConfigFilePath&gt;&lt;/LoggingConfigFilePath&gt;</p>
<p class="program">&lt;/ICAPSettings&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200716"><p><a name="200716" style="display: none;">[Topic 200716]</a></p>
	<h5 id="t234464" class="heading5">Port</h5>
<p class="bodytext">Указывает номер порта Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; Port</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">1344</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;port&gt;1344&lt;/port&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207194"><p><a name="207194" style="display: none;">[Topic 207194]</a></p>
	<h5 id="t234476" class="heading5">ReqModeAddress</h5>
<p class="bodytext">Адрес, используемый kavicapd для обработки запросов в режиме запроса. Этот адрес является частью полного URL-адреса, как показано в примере ниже:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">icap://icap-server.example.com:1344/req</p>
</td>
</tr>

</table>
<p class="bodytext">В приведенном выше примере используется значение по умолчанию <code class="programcharacter">req</code>. Вы можете указать другое значение в <code class="programcharacter">ReqModeAddress</code> (например, <code class="programcharacter">avscan</code>):</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">icap://icap-server.example.com:1344/avscan</p>
</td>
</tr>

</table>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; ReqModeAddress</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значения</p>
<p class="bodytext">Значение должно соответствовать следующим требованиям:</p>
<ul class="listbullet1"><li class="listbullet1">Длина от 1 до 16 символов.</li><li class="listbullet1">Допустимые символы:<ul class="listbullet2"><li class="listbullet2">Строчные и заглавные буквы латинского алфавита.</li><li class="listbullet2">Специальные символы: _ и -. </li></ul></li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">req</code>.</p>
<p class="attentionbody">Не используйте одно и то же значение для <code class="programcharacter">ReqModeAddress</code> и <code class="programcharacter">RespModeAddress</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ReqModeAddress&gt;req&lt;/ReqModeAddress&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207240"><p><a name="207240" style="display: none;">[Topic 207240]</a></p>
	<h5 id="t234480" class="heading5">RespModeAddress</h5>
<p class="bodytext">Адрес, используемый kavicapd для обработки ответов в режиме ответа. Этот адрес является частью полного URL-адреса, как показано в примере ниже:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">icap://icap-server.example.com:1344/resp</p>
</td>
</tr>

</table>
<p class="bodytext">В приведенном выше примере используется значение по умолчанию <code class="programcharacter">resp</code>. Вы можете указать другое значение в <code class="programcharacter">RespModeAddress</code> (например, <code class="programcharacter">avscan</code>):</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">icap://icap-server.example.com:1344/avscan</p>
</td>
</tr>

</table>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; RespModeAddress</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значения</p>
<p class="bodytext">Значение должно соответствовать следующим требованиям:</p>
<ul class="listbullet1"><li class="listbullet1">Длина от 1 до 16 символов.</li><li class="listbullet1">Допустимые символы:<ul class="listbullet2"><li class="listbullet2">Строчные и заглавные буквы латинского алфавита.</li><li class="listbullet2">Специальные символы: _ и -. </li></ul></li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">resp</code>.</p>
<p class="attentionbody">Не используйте одно и то же значение для <code class="programcharacter">ReqModeAddress</code> и <code class="programcharacter">RespModeAddress</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;RespModeAddress&gt;resp&lt;/RespModeAddress&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200717"><p><a name="200717" style="display: none;">[Topic 200717]</a></p>
	<h5 id="t234453" class="heading5">MaxIcapSessionsCount</h5>
<p class="bodytext">Указывает максимальное число одновременных подключений к Kaspersky Scan Engine.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; MaxIcapSessionsCount</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxIcapSessionsCount&gt;100&lt;/MaxIcapSessionsCount&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201149"><p><a name="201149" style="display: none;">[Topic 201149]</a></p>
	<h5 id="t234470" class="heading5">RAMUsageLimit</h5>
<p class="bodytext">Указывает максимальный объем системной памяти (в килобайтах), который выделен для Kaspersky Scan Engine.</p>
<p class="attentionbody">Не рекомендуется использовать настройку <code class="programcharacter">RAMUsageLimit</code> для машин с ограниченной производительностью процессора. Например, если Kaspersky Scan Engine запущен на виртуальной машине, а ресурсы процессора физического узла используются совместно с другими виртуальными машинами или процессами.</p>
<p class="bodytext">Эта величина позволяет контролировать использование памяти. Чрезмерное использование оперативной памяти может возникнуть, когда Kaspersky Scan Engine сканирует большие файлы или получает много результатов сканирования одновременно. Когда лимит <code class="programcharacter">RAMUsageLimit</code> достигнут, Kaspersky Scan Engine заканчивает обработку объекта, который вызвал чрезмерное потребление памяти.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; RAMUsageLimit</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="introheading">Значение</p>
<p class="bodytext">Рекомендуемое значение <code class="programcharacter">RAMUsageLimit</code>:</p>
<ul class="listbullet1"><li class="listbullet1">Не превышает размер ОЗУ.</li><li class="listbullet1">В два раза больше максимального размера файла для сканирования больших файлов. Например, для сканирования файла размером 1 ГБ требуется около 2 ГБ ОЗУ.</li><li class="listbullet1">Не менее 600 МБ, что в два раза больше размера антивирусных баз и библиотек Kaspersky Scan Engine (всего 300 МБ). Такой размер необходим из-за того, что объем системной памяти удваивается при перезагрузке базы данных.</li></ul><p class="bodytext">Kaspersky Scan Engine также требует ресурсы памяти для всех своих компонентов.</p>
<p class="attentionbody">Не устанавливайте значение параметра <code class="programcharacter">RAMUsageLimit</code> меньше 7 МБ. Это минимальный объем памяти, который обеспечивает правильное функционирование продукта.</p>
<p class="bodytext">Если значение параметра равно <code class="programcharacter">0</code>, объем системной памяти, который может быть выделен для Kaspersky Scan Engine, не ограничен.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">0</code>.</p>
<p class="attentionbody">Если значение параметра равно <code class="programcharacter">0</code>, памяти может не хватить. Если Kaspersky Scan Engine использует слишком много системной памяти, операционная система может остановить службу. </p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;RAMUsageLimit&gt;0&lt;/RAMUsageLimit&gt; &lt;!-- 0 = unlimited --&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200719"><p><a name="200719" style="display: none;">[Topic 200719]</a></p>
	<h5 id="t234496" class="heading5">ScanMaxFileSize</h5>
<p class="bodytext">Указывает максимальный размер файла в килобайтах, который Kaspersky Scan Engine может обработать.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; ScanMaxFileSize</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Если значение параметра равно 0, Kaspersky Scan Engine сканирует файлы любого размера.</p>
<p class="bodytext">Если указать значение параметра <code class="programcharacter"><a id="h200816" class="englishcrossreferencetemplate" href="#200813" target="_self">ContentSize</a></code>, Kaspersky Scan Engine будет использовать его вместо значения <code class="programcharacter">ScanMaxFileSize</code>. Это относится как к запросам, сделанным в режиме предварительной проверки, так и к обычным запросам.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">0</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanMaxFileSize&gt;0&lt;/ScanMaxFileSize&gt; &lt;!-- 0 = unlimited --&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200720"><p><a name="200720" style="display: none;">[Topic 200720]</a></p>
	<h5 id="t234276" class="heading5">Allow204</h5>
<p class="bodytext">Параметр, который содержит значение логического типа, устанавливающее, посылает ли Kaspersky Scan Engine код состояния HTTP 204 No Content вместо измененных данных на прокси-сервер.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; Allow204</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента Allow204</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine возвращает данные в неизменном виде.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine вместо измененных данных возвращает код состояния HTTP <code class="programcharacter">204 No Content</code>.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Allow204&gt;0&lt;/Allow204&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207291"><p><a name="207291" style="display: none;">[Topic 207291]</a></p>
	<h5 id="t234416" class="heading5">KeepAliveSettings</h5>
<p class="bodytext">По умолчанию Kaspersky Scan Engine поддерживает Keep-Alive (постоянные соединения), поэтому ICAP-клиент может использовать одно и то же соединение для отправки нескольких запросов. С помощью <code class="programcharacter">KeepAliveSettings</code> вы можете настроить поддержку Keep-Alive или даже отключить ее.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings</code> &gt; <code class="programcharacter">KeepAliveSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h207297" class="englishcrossreferencetemplate" href="#207292" target="_self">Enabled</a></li><li class="listbullet1"><a id="h207304" class="englishcrossreferencetemplate" href="#207298" target="_self">TimeoutMs</a></li><li class="listbullet1"><a id="h207305" class="englishcrossreferencetemplate" href="#207303" target="_self">MaxRequests</a></li><li class="listbullet1"><a id="h225388" class="englishcrossreferencetemplate" href="#221376" target="_self">UseAlways</a></li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;KeepAliveSettings&gt;</p>
<p class="program2">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
<p class="program2">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
<p class="program2">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
<p class="program">&lt;/KeepAliveSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207292"><p><a name="207292" style="display: none;">[Topic 207292]</a></p>
	<h6 id="t234340" class="heading6">Enabled</h6>
<p class="bodytext">Указывает, включена ли поддержка Keep-Alive.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; KeepAliveSettings &gt; Enabled</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимые значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code> – поддержка Keep-Alive выключена.</li><li class="listbullet1"><code class="programcharacter">1</code> – поддержка Keep-Alive включена.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">1</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Enabled&gt;1&lt;/Enabled&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207298"><p><a name="207298" style="display: none;">[Topic 207298]</a></p>
	<h6 id="t234533" class="heading6">TimeoutMs</h6>
<p class="bodytext">Время, в течение которого неактивное соединение должно оставаться открытым (в миллисекундах) в ожидании нового запроса от ICAP-клиента.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; KeepAliveSettings &gt; TimeoutMs</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимое значение – это целое число от <code class="programcharacter">0</code> до <code class="programcharacter">18000</code> <code class="programcharacter">(</code>миллисекунд).</p>
<p class="bodytext">Если для <code class="programcharacter">TimeoutMs</code> установлено значение <code class="programcharacter">0</code>, ограничение по времени для подключения отсутствует.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">5000</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;TimeoutMs&gt;5000&lt;/TimeoutMs&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="207303"><p><a name="207303" style="display: none;">[Topic 207303]</a></p>
	<h6 id="t234456" class="heading6">MaxRequests</h6>
<p class="bodytext">Максимальное количество запросов на одно подключение до его закрытия.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; KeepAliveSettings &gt; MaxRequests</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимое значение – это целое число от <code class="programcharacter">0</code> до <code class="programcharacter">1000</code>.</p>
<p class="bodytext">Если для <code class="programcharacter">MaxRequests</code> установлено значение <code class="programcharacter">0</code>, количество запросов на одно подключение не ограничено.</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">1000</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;MaxRequests&gt;1000&lt;/MaxRequests&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221376"><p><a name="221376" style="display: none;">[Topic 221376]</a></p>
	<h6 id="t234560" class="heading6">UseAlways</h6>
<p class="bodytext">Указывает, всегда ли Kaspersky Scan Engine использует постоянное соединение Keep-alive, даже если клиенты ICAP не запрашивают его. </p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; KeepAliveSettings &gt; UseAlways</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Допустимые значения:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code> – указывает, всегда ли Kaspersky Scan Engine использует постоянное соединение Keep-alive, даже если клиенты ICAP не запрашивают его.</li><li class="listbullet1"><code class="programcharacter">1</code> – Kaspersky Scan Engine всегда использует постоянное соединение Keep-alive.</li></ul><p class="bodytext">Значение по умолчанию: <code class="programcharacter">0</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;UseAlways&gt;0&lt;/UseAlways&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225221"><p><a name="225221" style="display: none;">[Topic 225221]</a></p>
	<h5 id="t234478" class="heading5">RequestingICAPHeaders</h5>
<p class="bodytext">Указывает, должен ли Kaspersky Scan Engine включать заголовок <code class="programcharacter">X-Include</code> в свой ответ на запрос OPTIONS от ICAP-клиента.</p>
<p class="bodytext">Этот элемент необязателен и может быть пустым. Если элемент пустой, Kaspersky Scan Engine не включает заголовок <code class="programcharacter">X-Include</code> в ответы.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings</code> &gt; <code class="programcharacter">RequestingICAPHeaders</code></p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для вложенных элементов <a id="h225223" class="englishcrossreferencetemplate" href="#225222" target="_self">ICAPHeader</a>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;RequestingICAPHeaders&gt;</p>
<p class="program2">&lt;ICAPHeader&gt;HTTPUserNameICAPHeader&lt;/ICAPHeader&gt;</p>
<p class="program2">&lt;ICAPHeader&gt;HTTPClientIpICAPHeader&lt;/ICAPHeader&gt;</p>
<p class="program">&lt;/RequestingICAPHeaders&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225222"><p><a name="225222" style="display: none;">[Topic 225222]</a></p>
	<h6 id="t234387" class="heading6">ICAPHeader</h6>
<p class="bodytext">Указывает, должен ли Kaspersky Scan Engine включать заголовки, указанные в <a id="h201207" class="englishcrossreferencetemplate" href="#200727" target="_self">HTTPUserNameICAPHeader</a> и <a id="h201206" class="englishcrossreferencetemplate" href="#200726" target="_self">HTTPClientIpICAPHeader,</a> в свой ответ на запрос OPTIONS от ICAP-клиента.</p>
<p class="bodytext">Этот элемент не может быть пустым.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; RequestingICAPHeaders &gt; ICAPHeader</code></p>
<p class="introheading">Значение</p>
<p class="tablename">Возможные значения элемента ICAPHeader</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="bodytext"><code class="programcharacter">HTTPUserNameICAPHeader</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine включает значение, указанное в <a id="h201207_2" class="englishcrossreferencetemplate" href="#200727" target="_self">HTTPUserNameICAPHeader</a>, в поле заголовка ответа <code class="programcharacter">X-Include</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="bodytext"><code class="programcharacter">HTTPClientIpICAPHeader</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine включает значение, указанное в <a id="h201206_2" class="englishcrossreferencetemplate" href="#200726" target="_self">HTTPClientIpICAPHeader</a>, в поле заголовка ответа <code class="programcharacter">X-Include</code>.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ICAPHeader&gt;HTTPUserNameICAPHeader&lt;/ICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200726"><p><a name="200726" style="display: none;">[Topic 200726]</a></p>
	<h5 id="t234380" class="heading5">HTTPClientIpICAPHeader</h5>
<p class="bodytext">Задает имя поля заголовка, в котором указан IP-адрес HTTP-клиента.</p>
<p class="bodytext">Имя поля должно состоять из символов, разрешенных для имен полей заголовков в соответствии с <a class="hyperlinktemplate" href="https://tools.ietf.org/html/rfc7230#section-3.2.6" target="_blank">RFC 7230</a>.</p>
<p class="bodytext">Этот элемент необязателен. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; HTTPClientIpICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Параметр может иметь пустое значение.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;HTTPClientIpICAPHeader&gt;X-Client-IP&lt;/HTTPClientIpICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200727"><p><a name="200727" style="display: none;">[Topic 200727]</a></p>
	<h5 id="t234383" class="heading5">HTTPUserNameICAPHeader</h5>
<p class="bodytext">Задает имя поля заголовка, в котором указано имя HTTP-клиента.</p>
<p class="bodytext">Имя поля должно состоять из символов, разрешенных для имен полей заголовка в соответствии с <a class="hyperlinktemplate" href="https://tools.ietf.org/html/rfc7230#section-3.2.6" target="_blank">RFC 7230</a>.</p>
<p class="bodytext">Этот элемент необязателен. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; HTTPUserNameICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Параметр может иметь пустое значение.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;HTTPUserNameICAPHeader&gt;X-Client-Username&lt;/HTTPUserNameICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201214"><p><a name="201214" style="display: none;">[Topic 201214]</a></p>
	<h5 id="t234593" class="heading5">VirusNameICAPHeader</h5>
<p class="bodytext">Задает имя поля заголовка, в котором содержится имя обнаруженной угрозы или тип легальной программы, которая может быть использована злоумышленниками.</p>
<p class="bodytext">Имя поля должно состоять из символов, разрешенных для имен полей заголовка в соответствии с <a class="hyperlinktemplate" href="https://tools.ietf.org/html/rfc7230#section-3.2.6" target="_blank">RFC 7230</a>.</p>
<p class="bodytext">Поле заголовка будет содержать несколько имен, если в запросе, прошедшем через прокси-сервер для проверки, будет обнаружено более одного объекта. Несколько имен указываются в любом порядке и разделяются запятой (&quot;,&quot;). </p>
<p class="bodytext">Максимальный размер значения, которое может содержаться в поле заголовка, составляет 10 КБ (килобайт). </p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; VirusNameICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значения</p>
<p class="bodytext">Параметр может иметь пустое значение. Если при проверке ничего не будет обнаружено, поле, указанное в элементе <code class="programcharacter">VirusNameICAPHeader</code>, будет отсутствовать в заголовке ответа. </p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;VirusNameICAPHeader&gt;X-Virus-ID&lt;/VirusNameICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="225156"><p><a name="225156" style="display: none;">[Topic 225156]</a></p>
	<h5 id="t234319" class="heading5">DatabaseVersionICAPHeader</h5>
<p class="bodytext">Указывает имя поля заголовка ответа, которое содержит информацию о версии антивирусных баз, используемых Kaspersky Scan Engine для проверки объектов.</p>
<p class="bodytext">Этот элемент необязателен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; DatabaseVersionICAPHeader</code></p>
<p class="introheading">Значение</p>
<p class="bodytext">Значение должно состоять из символов, разрешенных для имен полей заголовков в соответствии с <a class="hyperlinktemplate" href="https://tools.ietf.org/html/rfc7230#section-3.2.6" target="_blank">RFC 7230</a>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;DatabaseVersionICAPHeader&gt;X-AV-Database-time&lt;/DatabaseVersionICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221147"><p><a name="221147" style="display: none;">[Topic 221147]</a></p>
	<h5 id="t234508" class="heading5">SendInfectionFoundICAPHeader</h5>
<p class="bodytext">Указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter"><a id="h221163" class="englishcrossreferencetemplate" href="#221159" target="_self">X-Infection-Found</a></code> в свой ответ ICAP-клиенту. </p>
<p class="bodytext">Этот элемент необязателен. Если он отсутствует в файле конфигурации, используется значение <code class="programcharacter">0</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; SendInfectionFoundICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента SendInfectionFoundICAPHeader</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Включить заголовок <code class="programcharacter">X-Infection-Found</code> в ответы ICAP-клиенту.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Не включать заголовок <code class="programcharacter">X-Infection-Found</code> в ответы ICAP-клиенту.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;SendInfectionFoundICAPHeader&gt;1&lt;/SendInfectionFoundICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221160"><p><a name="221160" style="display: none;">[Topic 221160]</a></p>
	<h5 id="t234509" class="heading5">SendResponseDescICAPHeader</h5>
<p class="bodytext">Указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter"><a id="h221163" class="englishcrossreferencetemplate" href="#221159" target="_self">X-Response-Desc</a></code> в свой ответ ICAP-клиенту. </p>
<p class="bodytext">Этот элемент необязателен. Если он отсутствует в файле конфигурации, используется значение <code class="programcharacter">0</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; SendResponseDescICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента SendResponseDescICAPHeader</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Включить заголовок <code class="programcharacter">X-Response-Desc</code> в ответы ICAP-клиенту.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Не включать заголовок <code class="programcharacter">X-Response-Desc</code> в ответы ICAP-клиенту.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;SendResponseDescICAPHeader&gt;1&lt;/SendResponseDescICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221161"><p><a name="221161" style="display: none;">[Topic 221161]</a></p>
	<h5 id="t234510" class="heading5">SendResponseInfoICAPHeader</h5>
<p class="bodytext">Указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter"><a id="h221163" class="englishcrossreferencetemplate" href="#221159" target="_self">X-Response-Info</a></code> в свой ответ ICAP-клиенту. </p>
<p class="bodytext">Этот элемент необязателен. Если он отсутствует в файле конфигурации, используется значение <code class="programcharacter">0</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; SendResponseInfoICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента SendResponseInfoICAPHeader</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Включить заголовок <code class="programcharacter">X-Response-Info</code> в ответы ICAP-клиенту.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Не включать заголовок <code class="programcharacter">X-Response-Info</code> в ответы ICAP-клиенту.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;SendResponseInfoICAPHeader&gt;1&lt;/SendResponseInfoICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221162"><p><a name="221162" style="display: none;">[Topic 221162]</a></p>
	<h5 id="t234511" class="heading5">SendViolationsFoundICAPHeader</h5>
<p class="bodytext">Указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter"><a id="h221163" class="englishcrossreferencetemplate" href="#221159" target="_self">X-Violations-Found</a></code> в свой ответ ICAP-клиенту. </p>
<p class="bodytext">Этот элемент необязателен. Если он отсутствует в файле конфигурации, используется значение <code class="programcharacter">0</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; SendViolationsFoundICAPHeader</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента SendViolationsFoundICAPHeader</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Включить заголовок <code class="programcharacter">X-Violations-Found</code> в ответы ICAP-клиенту.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Не включать заголовок <code class="programcharacter">X-Violations-Found</code> в ответы ICAP-клиенту.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;SendViolationsFoundICAPHeader&gt;1&lt;/SendViolationsFoundICAPHeader&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">
<p class="bodytext">
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200721"><p><a name="200721" style="display: none;">[Topic 200721]</a></p>
	<h5 id="t234494" class="heading5">ScanInReqMode</h5>
<p class="bodytext">Задает типы содержимого, которые Kaspersky Scan Engine должен сканировать в режиме REQMOD.</p>
<p class="bodytext">Этот элемент необязателен. Если он отсутствует в файле конфигурации, используется значение <code class="programcharacter">All</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; ScanInReqMode</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента ScanInReqMode</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">Content</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine сканирует только тело HTTP-сообщения.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">URL</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine сканирует только запрошенный URL-адрес.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">All</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine сканирует и тело HTTP-сообщения, и запрошенный URL-адрес.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Пустое значение.</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine не сканирует HTTP-сообщения в режиме обработки исходящего трафика (REQMOD).</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanInReqMode&gt;All&lt;/ScanInReqMode&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200722"><p><a name="200722" style="display: none;">[Topic 200722]</a></p>
	<h5 id="t234495" class="heading5">ScanInRespMode</h5>
<p class="bodytext">Задает типы содержимого, которые Kaspersky Scan Engine должен сканировать в режиме модификации ответов (RESPMOD).</p>
<p class="bodytext">Этот элемент необязателен. Если он отсутствует в файле конфигурации, используется значение <code class="programcharacter">All</code>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; ScanInRespMode</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента ScanInRespMode</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">Content</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine сканирует только тело HTTP-сообщения.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">URL</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine сканирует только запрошенный URL-адрес.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">All</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine сканирует и тело HTTP-сообщения, и запрошенный URL-адрес.</p>
<p class="tablebodytext">Это значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Пустое значение.</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Kaspersky Scan Engine не сканирует HTTP-сообщения в режиме обработки входящего трафика (RESPMOD).</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ScanInRespMode&gt;All&lt;/ScanInRespMode&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201153"><p><a name="201153" style="display: none;">[Topic 201153]</a></p>
	<h5 id="t234483" class="heading5">RulesFilePath</h5>
<p class="bodytext">Задает абсолютный путь к файлу, который содержит <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">правила настройки службы</a>.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; RulesFilePath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data/kavicapd_gui_rules.conf</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;RulesFilePath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/icap_data/kavicapd_gui_rules.conf&lt;/RulesFilePath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201154"><p><a name="201154" style="display: none;">[Topic 201154]</a></p>
	<h5 id="t234297" class="heading5">CmdPath</h5>
<p class="bodytext">Указывает абсолютный путь к директории, содержащей сценарии, которые будут выполнены при срабатывании соответствующих правил.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; CmdPath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data/scripts</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;CmdPath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/icap_data/scripts&lt;/CmdPath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201155"><p><a name="201155" style="display: none;">[Topic 201155]</a></p>
	<h5 id="t234482" class="heading5">ResponsesPath</h5>
<p class="bodytext">Указывает абсолютный путь к директории, содержащей шаблоны ответов, которые будут получены при срабатывании соответствующих правил.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; ResponsesPath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Значение по умолчанию: <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data/templates</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ResponsesPath&gt;<code class="programcharacter">/opt/kasper</code>sky/ScanEngine/icap_data/templates&lt;/ResponsesPath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201208"><p><a name="201208" style="display: none;">[Topic 201208]</a></p>
	<h5 id="t234538" class="heading5">TransferBeforeScanEnding</h5>
<p class="bodytext">Задает режим отправки по частям (Data Trickling) для файлов, которые отправляются на прокси-сервер. Этот режим позволяет сканировать файлы целиком и отправлять их частями пользователю до завершения проверки. Передача объекта начинается через столько секунд после начала приема объекта, сколько указано в атрибуте <code class="programcharacter">Delay</code>, и выполняется по фрагментам. Обратите внимание, что в секунду передается не более одного фрагмента. Эта функция не дает браузеру пользователя прервать соединение с прокси-сервером из-за тайм-аута.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; TransferBeforeScanEnding</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент имеет следующие атрибуты.</p>
<p class="tablename">Атрибуты элемента TransferBeforeScanEnding</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Атрибут</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">Delay</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Интервал (в секундах) между началом приема объекта и началом отправки его первого фрагмента.</p>
<p class="tablebodytext">Необязательный атрибут. Диапазон возможных значений от 1 до 3600.</p>
<p class="tablebodytext">Значение по умолчанию: <code class="programcharacter">10</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">ChunkSize</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Размер фрагментов, передаваемых в период между началом приема объекта и окончанием проверки. Поскольку фрагменты передаются не чаще одного в секунду, атрибут <code class="programcharacter">ChunkSize</code> указывает максимальную скорость передачи (в килобайтах в секунду) до завершения сканирования. После этого, если объект безопасен, остальная часть объекта будет передаваться без ограничения скорости.</p>
<p class="tablebodytext">Необязательный атрибут. Диапазон возможных значений от 1 до 1024.</p>
<p class="tablebodytext">Значение по умолчанию: <code class="programcharacter">4</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">BlockedUrlCacheEnabled</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="bodytext">Определяет, как обрабатывать попытки повторного скачивания из браузера пользователя в режиме отправки по частям. Эта функция не дает браузеру пользователя автоматически повторно скачивать заблокированные файлы. Функция запрета повторного скачивания работает только при включенной опции <code class="programcharacter">TransferBeforeScanEnding</code>.</p>
<p class="bodytext">Вы можете указать одно из следующих значений для этого параметра:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">0</code><p class="listcontinue1">Функция запрета повторного скачивания выключена.</p>
</li><li class="listbullet1"><code class="programcharacter">1</code><p class="listcontinue1">Функция запрета повторного скачивания включена. Значение по умолчанию.</p>
</li></ul><p class="bodytext">Если этот атрибут не указан, функция запрета повторного скачивания будет включена.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">BlockedUrlCacheKb</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Максимальный размер кеша в КБ для заблокированных URL-адресов. Это максимальный объем ОЗУ, выделяемый для кеширования заблокированных URL-адресов.</p>
<p class="tablebodytext">Диапазон возможных значений от 1 до 100000.</p>
<p class="tablebodytext">Значение по умолчанию: <code class="programcharacter">5000</code>.</p>
<p class="tablebodytext">Если этот атрибут не указан, используется значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">BlockedUrlCacheTtlSec</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Время жизни заблокированных URL-адресов, сохраненных в кеше (в секундах).</p>
<p class="tablebodytext">Диапазон возможных значений от 1 до 604800 (неделя).</p>
<p class="tablebodytext">Значение по умолчанию: <code class="programcharacter">1800</code>.</p>
<p class="tablebodytext">Если этот атрибут не указан, используется значение по умолчанию.</p>
</td>
</tr>

</table>
<p class="bodytext">Выбирайте подходящие значения для <code class="programcharacter">атрибутов ChunkSize</code> и <code class="programcharacter">Delay</code>. Не рекомендуется указывать слишком большое значение <code class="programcharacter">ChunkSize</code> и слишком маленькое значение <code class="programcharacter">Delay</code>. Если не соблюдать эту рекомендацию, просканированный объект может быть отправлен почти целиком (без последнего фрагмента) задолго до окончания сканирования, и браузер пользователя прервет соединение.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента TransferBeforeScanEnding</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">0</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Объект может быть отправлен только после окончания сканирования.</p>
<p class="tablebodytext">Значение по умолчанию.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">1</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Объект может быть отправлен до окончания сканирования.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;TransferBeforeScanEnding Delay=&quot;10&quot; ChunkSize=&quot;4&quot; BlockedURLCacheEnabled=&quot;1&quot; BlockedURLCacheKb=&quot;5000&quot; BlockedURLCacheTtlSec=&quot;1800&quot;&gt;1&lt;/TransferBeforeScanEnding&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200729"><p><a name="200729" style="display: none;">[Topic 200729]</a></p>
	<h5 id="t234354" class="heading5">Exclusions</h5>
<p class="bodytext">Задает правила для режима предварительной проверки объекта. Эта функция позволяет ICAP-клиенту отправлять ICAP-серверу запросы на предварительный просмотр, после чего ICAP-сервер может не сканировать объекты, которые заведомо не являются вредоносными.</p>
<p class="bodytext">Если указан хотя бы один из этих параметров, ICAP-плагин будет обрабатывать запросы в режиме предварительной проверки. Чтобы разрешить прокси-серверу отправлять запросы в этом режиме, измените его параметры соответствующим образом. </p>
<p class="attentionbody">Обратите внимание, что, если включить режим предварительной проверки в плагине ICAP, но не на прокси-сервере, Kaspersky Scan Engine будет обрабатывать HTTP-запросы, как если бы режим предварительной проверки не был включен.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; Exclusions</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h200816" class="englishcrossreferencetemplate" href="#200813" target="_self">ContentSize</a></li><li class="listbullet1"><a id="h200817" class="englishcrossreferencetemplate" href="#200814" target="_self">ContentType</a></li><li class="listbullet1"><a id="h200818" class="englishcrossreferencetemplate" href="#200815" target="_self">RequestURL</a></li></ul><p class="bodytext">Если для объекта выполняется хотя бы одно из описанных правил, ICAP-плагин возвращает код <code class="programcharacter">204</code> независимо от значения параметра <code class="programcharacter">Allow204</code> файла kavicapd.xml. Если ни одно из правил не выполняется, ICAP-плагин возвращает код <code class="programcharacter">100</code> и ждет, когда ICAP-клиент отправит объект.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;Exclusions&gt;</p>
<p class="program2">&lt;ContentSize&gt;2048&lt;/ContentSize&gt;</p>
<p class="program2">&lt;ContentType&gt;video/mp4&lt;/ContentType&gt; </p>
<p class="program2">&lt;RequestURL&gt;example.com&lt;/RequestURL&gt;</p>
<p class="program">&lt;/Exclusions&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200813"><p><a name="200813" style="display: none;">[Topic 200813]</a></p>
	<h6 id="t234311" class="heading6">ContentSize</h6>
<p class="bodytext">Правило исключения для размера передаваемого объекта (КБ).</p>
<p class="bodytext">Вы можете установить этот параметр только один раз. Вы можете не указывать этот параметр.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; Exclusions &gt; ContentSize</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Если заголовок <code class="programcharacter">Content-Length</code> присутствует в HTTP-запросе, <code class="programcharacter">ContentSize</code> сравнивается с его значением. В противном случае <code class="programcharacter">ContentSize</code> сравнивается с реальным размером объекта. Если какое-либо из этих значений больше или равно значению <code class="programcharacter">ContentSize</code>, ICAP-плагин не проверяет этот объект. Это относится как к запросам, сделанным в режиме предварительной проверки, так и к обычным запросам.</p>
<p class="bodytext">Если указать значение параметра <code class="programcharacter">ContentSize</code>, Kaspersky Scan Engine будет использовать его вместо значения <code class="programcharacter"><a id="h201198" class="englishcrossreferencetemplate" href="#200719" target="_self">ScanMaxFileSize</a></code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ContentSize&gt;2048&lt;/ContentSize&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200814"><p><a name="200814" style="display: none;">[Topic 200814]</a></p>
	<h6 id="t234312" class="heading6">ContentType</h6>
<p class="bodytext">Правило исключения для типа объекта, который указан в поле <code class="programcharacter">Content-Type</code> заголовка HTTP.</p>
<p class="bodytext">Вы можете устанавливать этот параметр более одного раза. ICAP-плагин учтет все указанные элементы. Вы можете не указывать этот параметр.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; Exclusions &gt; ContentType</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Если поле <code class="programcharacter">Content-Type</code> содержит значение, которое указано в <code class="programcharacter">ContentType</code>, ICAP-плагин не сканирует объект. </p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;ContentType&gt;video/mp4&lt;/ContentType&gt; </p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200815"><p><a name="200815" style="display: none;">[Topic 200815]</a></p>
	<h6 id="t234479" class="heading6">RequestURL</h6>
<p class="bodytext">URL-адрес, который нужно пропустить.</p>
<p class="bodytext">Вы можете устанавливать этот параметр более одного раза. ICAP-плагин учтет все указанные элементы. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; Exclusions &gt; RequestURL</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Указанный URL-адрес не должен включать компоненты схемы, запроса и фрагмента. Если запрошенный URL-адрес совпадает хотя бы с одним из значений элемента <code class="programcharacter">RequestURL</code>, ICAP-плагин не проверяет этот URL-адрес. Перед сравнением запрошенного веб-адреса со значением правила исключения из параметра <code class="programcharacter">RequestURL</code>, ICAP-плагин применяет правила нормализации к этому веб-адресу.</p>
<p class="bodytext">Параметр <code class="programcharacter">RequestURL</code> может содержать маски.</p>
<p class="bodytext">Вы можете использовать подстановочный знак * для обозначения любой последовательности символов полного имени домена, начиная с третьего уровня и выше. Например, <code class="programcharacter">*.domain.com</code>. Это значение включает все поддомены <code class="programcharacter">domain.com</code>.</p>
<p class="bodytext">Подстановочные знаки звездочки (*) и вопросительного знака (?) можно использовать в компоненте пути URL-адреса для обозначения любой последовательности символов или одного символа соответственно. Например, <code class="programcharacter">domain.com/test/page/*</code>.</p>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;RequestURL&gt;example.com&lt;/RequestURL&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201163"><p><a name="201163" style="display: none;">[Topic 201163]</a></p>
	<h5 id="t234588" class="heading5">USR1SignalAction</h5>
<p class="bodytext">Указывает действие, которое должно быть выполнено при получении сигнала <code class="programcharacter">SIGUSR1</code>.</p>
<p class="bodytext">Если этот параметр не указан в файле конфигурации, ICAP-служба обновляет базы при получении сигнала.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; USR1SignalAction</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента USR1SignalAction</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">reload</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Перезагружает антивирусную базу без ее обновления. Предполагается, что файлы в папке с базами уже обновлены и должны быть перезагружены.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">update</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обновление и перезагрузка баз с помощью встроенного функционала Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">reopen-log</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Закрытие всех открытых файлов журналов в формате syslog и последующее их открытие для записи журналов в конец этих файлов. Если файлы пропущены, ICAP-плагин создаст их. Этот параметр позволяет выполнять ротацию журналов с помощью утилиты logrotate в режиме по умолчанию или с использованием директивы create.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;USR1SignalAction&gt;update&lt;/USR1SignalAction&gt; </p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201164"><p><a name="201164" style="display: none;">[Topic 201164]</a></p>
	<h5 id="t234589" class="heading5">USR2SignalAction</h5>
<p class="bodytext">Указывает действие, которое должно быть выполнено при получении сигнала <code class="programcharacter">SIGUSR2</code>.</p>
<p class="bodytext">Если этот параметр не указан в файле конфигурации, ICAP-служба обновляет базы при получении сигнала.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; USR2SignalAction</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Возможные значения</p>
<p class="bodytext">Этот элемент имеет следующие возможные значения.</p>
<p class="tablename">Возможные значения элемента USR2SignalAction</p>
<p class="spacerfortables">
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">reload</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Перезагружает антивирусную базу без ее обновления. Предполагается, что файлы в папке с базами уже обновлены и должны быть перезагружены.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">update</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обновление и перезагрузка баз с помощью встроенного функционала Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">reopen-log</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Закрытие всех открытых файлов журналов в формате syslog и последующее их открытие для записи журналов в конец этих файлов. Если файлы пропущены, ICAP-плагин создаст их. Этот параметр позволяет выполнять ротацию журналов с помощью утилиты logrotate в режиме по умолчанию или с использованием директивы create.</p>
</td>
</tr>

</table>
<p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;USR2SignalAction&gt;reopen-log&lt;/USR2SignalAction&gt; </p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="200730"><p><a name="200730" style="display: none;">[Topic 200730]</a></p>
	<h5 id="t234436" class="heading5">LoggingConfigFilePath</h5>
<p class="bodytext">Задает путь к файлу конфигурации логирования.</p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">ICAPSettings &gt; LoggingConfigFilePath</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Значение</p>
<p class="bodytext">Вы можете использовать файл конфигурации логирования, расположенный в директории бинарного файла kavicapd, или поместить этот файл в любую другую директорию:</p>
<ul class="listbullet1"><li class="listbullet1">Чтобы использовать файл логирования, расположенный в директории бинарного файла kavicapd, оставьте значение элемента <code class="programcharacter">LoggingConfigFilePath</code> пустым.</li><li class="listbullet1">Чтобы поместить файл конфигурации логирования в любую другую директорию, укажите путь к этому файлу. Обратите внимание, что служба интерпретирует это значение как путь к файлу, а не как путь к директории. Также вы можете указать относительный путь к директории, в которой находится исполняемый файл kavicapd.</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример этого элемента.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;!-- The path to the logging configuration file. Only this file will be used as the ICAP logging configuration file. If the LoggingConfigFilePath element has an empty value, the icapdkavlog.conf file located in the kavicapd binary file directory is used. --&gt;</p>
<p class="program">&lt;LoggingConfigFilePath&gt;&lt;/LoggingConfigFilePath&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="206616"><p><a name="206616" style="display: none;">[Topic 206616]</a></p>
	<h4 id="t234366" class="heading4">FormatRecognizerSettings</h4>
<p class="bodytext">Указывает настройки Format Recognizer. </p>
<p class="introheading">Путь</p>
<p class="bodytext"><code class="programcharacter">FormatRecognizerSettings</code></p>
<p class="introheading">Атрибуты</p>
<p class="bodytext">Этот элемент не имеет атрибутов.</p>
<p class="spacer">
<p class="spacer">
<p class="introheading">Вложенные элементы</p>
<p class="bodytext">Этот элемент является контейнером для следующих вложенных элементов:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">FormatsToSkipScanning</em><p class="listcontinue1">Указывает, какие <a id="h180224" class="englishcrossreferencetemplate" href="#180222" target="_self">форматы файлов</a> решение Kaspersky Scan Engine не должно сканировать в режиме ICAP.</p>
<p class="listcontinue1">Чтобы выключить функцию пропуска форматов, удалите элемент <code class="programcharacter">FormatRecognizerSettings</code> из файла конфигурации или оставьте список <code class="programcharacter">FormatsToSkipScanning</code> пустым.</p>
</li></ul><p class="introheading">Пример</p>
<p class="bodytext">Ниже приведен пример элемента <em class="emphasischaracter">FormatRecognizerSettings</em>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;FormatRecognizerSettings&gt;</p>
<p class="program2">&lt;FormatsToSkipScanning&gt;</p>
<p class="program3">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program3">&lt;KAV_FF_GENERAL_CSV/&gt;</p>
<p class="program3">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program2">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program">&lt;/FormatRecognizerSettings&gt;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="206590"><p><a name="206590" style="display: none;">[Topic 206590]</a></p>
	<h3 id="t234300" class="heading3">Настройка Format Recognizer для использования в режиме ICAP</h3>
<p class="bodytext">Format Recognizer – это компонент, который можно использовать в Kaspersky Scan Engine для распознавания и пропуска файлов определенных форматов в процессе сканирования. Пропуск файлов увеличивает скорость обработки Kaspersky Scan Engine.</p>
<p class="introheading">Включение Format Recognizer</p>
<p class="procedureheading">Чтобы включить Format Recognizer:</p>
<ol class="listnumber1"><li class="listnumber1">В <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файле конфигурации режима ICAP</a> найдите раздел <code class="programcharacter">FormatRecognizerSettings</code>.<p class="listcontinue1">Если этот раздел отсутствует, добавьте его вручную следующим образом:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;FormatRecognizerSettings&gt;</p>
<p class="program">...</p>
<p class="program">&lt;/FormatRecognizerSettings&gt; </p>
</td>
</tr>

</table> </li><li class="listnumber1">В этом разделе в списке <code class="programcharacter">FormatsToSkipScanning</code> укажите, какие <a id="h180224" class="englishcrossreferencetemplate" href="#180222" target="_self">форматы файлов</a> не должны проверяться Kaspersky Scan Engine:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;FormatRecognizerSettings&gt;</p>
<p class="program2">&lt;FormatsToSkipScanning&gt;</p>
<p class="program3">&lt;KAV_FF_GENERAL_TXT/&gt;</p>
<p class="program3">...</p>
<p class="program3">&lt;KAV_FF_AUDIO_WMA/&gt;</p>
<p class="program2">&lt;/FormatsToSkipScanning&gt;</p>
<p class="program">&lt;/FormatRecognizerSettings&gt;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Чтобы изменения вступили в силу, перезапустите службу <code class="programcharacter">kavicapd</code> с помощью следующей команды:<p class="listcontinue1"><code class="programcharacter">service kavicapd restart</code></p> </li></ol><p class="bodytext">Format Recognizer начнет распознавать и пропускать файлы форматов, указанных в списке <code class="programcharacter">FormatsToSkipScanning</code>. Kaspersky Scan Engine не сканирует пропущенные файлы, что увеличивает скорость их обработки.</p>
<p class="introheading">Выключение Format Recognizer</p>
<p class="procedureheading">Чтобы выключить Format Recognizer:</p>
<ol class="listnumber1"><li class="listnumber1">В <a id="h180154_2" class="englishcrossreferencetemplate" href="#192989" target="_self">файле конфигурации режима ICAP</a> удалите раздел <code class="programcharacter">FormatRecognizerSettings</code> или оставьте список <code class="programcharacter">FormatsToSkipScanning</code> пустым.</li><li class="listnumber1">Чтобы изменения вступили в силу, перезапустите службу <code class="programcharacter">kavicapd</code> с помощью следующей команды:<p class="listcontinue1"><code class="programcharacter">service kavicapd restart</code></p> </li></ol><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179893"><p><a name="179893" style="display: none;">[Topic 179893]</a></p>
	<h3 id="t234307" class="heading3">Настройка правил сервиса</h3>
<p class="bodytext">Эти правила определяют поведение Kaspersky Scan Engine в режиме ICAP. Они перечислены в файле конфигурации, расположенном в директории <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data/</code>. Расположение этого файла указывается в параметре <code class="programcharacter">RulesFilePath</code> <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации режима ICAP</a>. Пример файла конфигурации kavicapd_gui_rules.conf включен в пакет распространения.</p>
<p class="attentionbody">Каждое правило, указанное в файле конфигурации, должно быть помещено в отдельную строку.</p>
<p class="introheading">Синтаксис правила</p>
<p class="bodytext">Правило службы <code class="programcharacter">kavicapd</code> состоит из трех частей:</p>
<ul class="listbullet1"><li class="listbullet1">Режим ICAP<p class="listcontinue1">Возможные значения: </p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">REQ</code><p class="listcontinue2">Режим модификации запросов (REQMOD).</p>
</li><li class="listbullet2"><code class="programcharacter">RESP</code><p class="listcontinue2">Режим модификации ответов (RESPMOD).</p>
</li><li class="listbullet2"><code class="programcharacter">ANY</code><p class="listcontinue2">Любой из режимов, перечисленных выше.</p>
</li></ul></li><li class="listbullet1">Результат сканирования<p class="listcontinue1">Возможные значения перечислены ниже.</p> <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">NON_SCANNED</code><p class="listcontinue2">Объект не просканирован.</p>
</li><li class="listbullet2"><code class="programcharacter">FAILED</code><p class="listcontinue2">Ошибка сканирования.</p>
</li><li class="listbullet2"><code class="programcharacter">PHISHING</code><p class="listcontinue2">Обнаружен фишинговый веб-адрес.</p>
</li><li class="listbullet2"><code class="programcharacter">DETECT</code><p class="listcontinue2">Проверяемый объект или URL-адрес заражены.</p>
</li><li class="listbullet2"><code class="programcharacter">MACRO</code><p class="listcontinue2">Обнаружен документ Microsoft Office, содержащий макрос.</p>
</li><li class="listbullet2"><code class="programcharacter">CLEAN</code><p class="listcontinue2">Проверяемый объект безопасен (не заражен).</p>
</li></ul></li><li class="listbullet1">Ответ Kaspersky Scan Engine в режиме ICAP<p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">SET_RESP=&lt;response_template&gt;</code><p class="listcontinue2">Kaspersky Scan Engine отправляет <a id="h180188" class="englishcrossreferencetemplate" href="#179895" target="_self">HTML-шаблон ответа</a> с указанным именем на прокси-сервер.</p>
</li><li class="listbullet2"><code class="programcharacter">EXEC_CMD=&lt;script&gt;</code><p class="listcontinue2">Kaspersky Scan Engine запускает скрипт с указанным именем.</p>
</li><li class="listbullet2"><code class="programcharacter">NONE</code><p class="listcontinue2">Kaspersky Scan Engine не изменяет проверяемый объект.</p>
</li></ul><p class="listcontinue1">Если ответ Kaspersky Scan Engine не указан в правиле, используется значение по умолчанию <code class="programcharacter">NONE</code>. </p> </li></ul><p class="introheading">Чтение результатов сканирования</p>
<p class="bodytext">В режиме ICAP Kaspersky Scan Engine проверяет как HTTP-трафик, так и веб-адреса, запрашиваемые пользователями. Результаты проверки ранжируются по степени серьезности, причем наиболее серьезному результату присваивается рейтинг <code class="programcharacter">1</code>. В следующем списке показано ранжирование поддерживаемых результатов сканирования по степени серьезности:</p>
<ol class="listnumber1"><li class="listnumber1"><code class="programcharacter">PHISHING</code></li><li class="listnumber1"><code class="programcharacter">DETECT</code></li><li class="listnumber1"><code class="programcharacter">MACRO</code></li><li class="listnumber1"><code class="programcharacter">NON_SCANNED</code></li><li class="listnumber1"><code class="programcharacter">FAILED</code></li><li class="listnumber1"><code class="programcharacter">CLEAN</code></li></ol><p class="bodytext">Если сканирования трафика и URL-адресов дают разные результаты, в качестве итогового результата сканирования выбирается результат с наивысшим уровнем критичности. Если оба результата проверки – <code class="programcharacter">DETECT</code>, то итоговый результат проверки также будет <code class="programcharacter">DETECT</code>, а имя обнаруженного объекта, возвращаемое Kaspersky Scan Engine, берется из результата проверки URL-адреса. Результаты проверки, используемые в правилах службы, являются итоговыми результатами проверки.</p>
<p class="introheading">Примеры правил</p>
<p class="bodytext">Ниже приведены несколько примеров правил, которые вы можете указать:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">RESP DETECT SET_RESP=detect_resp EXEC_CMD=admin_notify</p>
<p class="program">RESP FAILED SET_RESP=err_resp</p>
<p class="program">REQ FAILED EXEC_CMD=admin_notify</p>
<p class="program">REQ CLEAN</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192475"><p><a name="192475" style="display: none;">[Topic 192475]</a></p>
	<h3 id="t234295" class="heading3">Изменение переменных в файле модуля режима ICAP</h3>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine, изменив одну или несколько переменных в файле модуля <code class="programcharacter">%distr_kit%/etc/kavicapd.service</code>.</p>
<p class="introheading">Изменение пути к PID-файлу Kaspersky Scan Engine</p>
<p class="bodytext">Вы можете изменить эту переменную, если хотите создать PID-файл Kaspersky Scan Engine в директории, отличной от <code class="programcharacter">/var/run/kavicapd.pid</code>.</p>
<p class="bodytext">В следующем примере показано, как эта переменная устанавливается в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">PIDFile=/var/run/kavicapd.pid</p>
</td>
</tr>

</table>
<p class="introheading">Изменение переменных среды</p>
<p class="bodytext">Вы должны изменить эти переменные среды, если Kaspersky Scan Engine находится не в директории <code class="programcharacter">/opt/kaspersky/ScanEngine</code>.</p>
<p class="bodytext">В файле модуля используются следующие переменные среды:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SDKPATH</code> – указывает директорию, в которой находится Kaspersky Scan Engine. В следующем примере показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=SDKPATH=/opt/kaspersky/ScanEngine</p>
</td>
</tr>

</table> </li><li class="listbullet1"><code class="programcharacter">KL_PLUGINS_PATH</code> – указывает путь к директории, в которой находятся файлы плагина PPL, используемые Kaspersky Scan Engine. В следующем примере показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=KL_PLUGINS_PATH=/ppl</p>
</td>
</tr>

</table> </li><li class="listbullet1"><code class="programcharacter">LD_LIBRARY_PATH</code> – указывает путь к директории, в которой находятся общие библиотеки, используемые Kaspersky Scan Engine. В следующем блоке показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=LD_LIBRARY_PATH=/lib:/ppl</p>
</td>
</tr>

</table> </li></ul><p class="introheading">Изменение путей в команде, выполняемой при запуске kavicapd</p>
<p class="bodytext">Вы должны изменить пути в команде, выполняемой при запуске kavicapd, если вы помещаете исполняемый файл <code class="programcharacter">kavicapd</code> или файл конфигурации режима ICAP в директории, отличные от указанных в файле модуля, или если вы хотите создать PID-файл Kaspersky Scan Engine в директории, отличной от <code class="programcharacter">/var/run/kavicapd.pid</code>.</p>
<p class="bodytext">В следующем примере показано, как эта команда устанавливается в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ExecStart=/bin/sh -c &#39;cd ${SDKPATH}/bin; ./kavicapd -c /etc/kavicapd.xml -p /var/run/kavicapd.pid&#39;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179895"><p><a name="179895" style="display: none;">[Topic 179895]</a></p>
	<h3 id="t234596" class="heading3">Работа с шаблонами ответов и скриптами</h3>
<p class="bodytext">Правила позволяют указать шаблоны ответов, которые будут возвращаться вместо заблокированных веб-страниц, а также скрипты, которые могут выполняться при обнаружении, например скрипт уведомления системного администратора. </p>
<p class="bodytext">Пакет распространения Kaspersky Scan Engine содержит образцы шаблонов ответов и пример скрипта, отправляющего информацию об инциденте в <code class="programcharacter">syslog</code>.</p>
<p class="introheading">Работа с шаблонами ответов</p>
<p class="bodytext">Kaspersky Scan Engine поставляется со следующими образцами шаблонов ответов, расположенными в директории <code class="programcharacter">/opt/kaspersky/ScanEngine/icap_data/templates</code>: </p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">detect_req</code> <p class="listcontinue1">Этот шаблон возвращается, когда в режиме изменения запроса (REQMOD) обнаруживается угроза или тип легальной программы, которая может быть использована злоумышленниками для повреждения компьютера или личных данных пользователя. </p>
</li><li class="listbullet1"><code class="programcharacter">detect_res</code> <p class="listcontinue1">Этот шаблон возвращается, когда в режиме изменения ответа (RESPMOD) обнаруживается угроза или тип легальной программы, которая может быть использована злоумышленниками для повреждения компьютера или личных данных пользователя.</p>
</li><li class="listbullet1"><code class="programcharacter">macro_req</code><p class="listcontinue1">Этот шаблон возвращается, когда в режиме REQMOD обнаруживается файл документа Microsoft Office, содержащий макрос.</p>
</li><li class="listbullet1"><code class="programcharacter">macro_resp</code><p class="listcontinue1">Этот шаблон возвращается, когда в режиме RESPMOD обнаруживается файл документа Microsoft Office, содержащий макрос.</p>
</li></ul><p class="bodytext">Вы можете создавать собственные шаблоны ответов и <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">настраивать Kaspersky Scan Engine возвращать их вместе с измененным сообщением</a>. Подобно образцам шаблонов ответов, пользовательские шаблоны ответов могут использовать контекст обнаружения, который предоставляет пользователю дополнительную информацию. Дополнительную информацию о контексте обнаружения см. в подразделе &quot;Использование контекста обнаружения в шаблонах ответов и скриптах&quot; ниже.</p>
<p class="attentionbody">Несмотря на то что Kaspersky Scan Engine возвращает шаблоны ответов вместо заблокированных веб-страниц, некоторые браузеры могут не отображать эти шаблоны, вместо этого возвращая код состояния HTTP <code class="programcharacter">403</code> <code class="programcharacter">Forbidden</code>.</p>
<p class="introheading">Работа со скриптами</p>
<p class="bodytext">Kaspersky Scan Engine поставляется со скриптом <code class="programcharacter">send_syslog</code>, расположенным в директории /opt/kaspersky/ScanEngine/icap_data/scripts.</p>
<p class="bodytext">Скрипт <code class="programcharacter">send_syslog</code> отображает сообщение об обнаруженном объекте и перенаправляет его в утилиту логирования <code class="programcharacter">logger</code>. </p>
<p class="bodytext">Вы можете создавать собственные скрипты оболочки и <a id="h180152_2" class="englishcrossreferencetemplate" href="#179893" target="_self">настраивать Kaspersky Scan Engine выполнять их при обнаружении</a>. Подобно примеру скрипта, пользовательские скрипты могут использовать контекст обнаружения, который предоставляет пользователю дополнительную информацию. Дополнительную информацию о контексте обнаружения см. в подразделе &quot;Использование контекста обнаружения в шаблонах ответов и скриптах&quot; ниже.</p>
<p class="bodytext">Пользовательские скрипты выполняются в параллельных потоках. Максимальное количество потоков сканирования – 100.</p>
<p class="introheading">Использование контекста обнаружения в шаблонах ответов и скриптах</p>
<p class="bodytext">Шаблоны ответов и скрипты поддерживают контекст обнаружения. При отображении шаблона ответа контекстные переменные заменяются значениями, возвращаемыми Kaspersky Scan Engine. Чтобы использовать контекст обнаружения в скрипте, используйте контекстные переменные как переменные среды.</p>
<p class="bodytext">В контексте обнаружения поддерживаются следующие переменные:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">_VirusName_</code> – имя обнаруженного объекта.</li><li class="listbullet1"><code class="programcharacter">_DateTime_</code> – дата и время инцидента (в <code class="programcharacter">формате YYYY-MM-DD HH:MM:MS</code>).</li><li class="listbullet1"><code class="programcharacter">_ICAPDVersion_</code> – версия плагина ICAP. </li><li class="listbullet1"><code class="programcharacter">_URL_</code> – запрошенный URL-адрес.</li></ul><p class="bodytext">Вы можете использовать контекст обнаружения в собственных шаблонах ответов и скриптах.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179897"><p><a name="179897" style="display: none;">[Topic 179897]</a></p>
	<h3 id="t234520" class="heading3">Указание путей к плагинам и библиотекам</h3>
<p class="bodytext">Прежде чем служба <code class="programcharacter">kavicapd</code> будет готова к запуску, необходимо указать следующие пути:</p>
<ul class="listbullet1"><li class="listbullet1">Путь к плагину<p class="listcontinue1">Путь к директории с файлами плагина PPL.</p> </li><li class="listbullet1">Путь к библиотеке<p class="listcontinue1">Путь к директории с общими библиотеками.</p> </li></ul><p class="bodytext">Пути к плагинам и общим библиотекам можно указать, экспортировав переменные среды <code class="programcharacter">KL_PLUGINS_PATH</code> и <code class="programcharacter">LD_LIBRARY_PATH</code> соответственно.</p>
<p class="bodytext"><code class="programcharacter">Переменные KL_PLUGINS_PATH</code> и <code class="programcharacter">LD_LIBRARY_PATH</code> можно экспортировать вручную или автоматически с помощью файла модуля ICAP systemd. Вы также можете использовать сценарий оболочки kavicapd.sh, который экспортирует <code class="programcharacter">KL_PLUGINS_PATH</code> и <code class="programcharacter">LD_LIBRARY_PATH</code> и запускает службу <code class="programcharacter">kavicapd</code>.</p>
<p class="introheading">Указание пути к плагинам и библиотекам вручную</p>
<p class="bodytext">Этот метод требует экспорта переменных каждый раз перед запуском службы <code class="programcharacter">kavicapd</code> в новом сеансе (переменные существуют только во время текущего сеанса оболочки). </p>
<p class="bodytext">В следующем примере показано, как экспортировать переменные вручную:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">[user@host ~]$ export KL_PLUGINS_PATH=&quot;/opt/kaspersky/ScanEngine/ppl&quot;</p>
<p class="program">[user@host ~]$ export LD_LIBRARY_PATH=&quot;/opt/kaspersky/ScanEngine/lib:${KL_PLUGINS_PATH}:${LD_LIBRARY_PATH}&quot;</p>
</td>
</tr>

</table>
<p class="spacer">
<p class="introheading">Указание пути к плагинам и библиотекам с помощью скрипта kavicapd.sh</p>
<p class="bodytext">Вы можете изменить kavicapd.sh так, чтобы он экспортировал переменные автоматически. </p>
<p class="procedureheading">Чтобы экспортировать переменные с помощью скрипта kavicapd.sh:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте kavicapd.sh для редактирования и найдите следующие строки:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">SDK_PATH=$PWD/../../../..</p>
<p class="program">KL_PLUGINS_PATH=$SDK_PATH/ppl</p>
<p class="program">LD_LIBRARY_PATH=$SDK_PATH/lib:$KL_PLUGINS_PATH:$LD_LIBRARY_PATH </p>
</td>
</tr>

</table> </li><li class="listnumber1">Измените значения <code class="programcharacter">SDKPATH</code>, <code class="programcharacter">KL_PLUGINS_PATH</code> и <code class="programcharacter">LD_LIBRARY_PATH</code>, чтобы они указывали на расположение директорий KAV SDK, плагина и библиотек соответственно.</li></ol><p class="bodytext">Скрипт kavicapd.sh при запуске экспортирует переменные.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192990"><p><a name="192990" style="display: none;">[Topic 192990]</a></p>
	<h2 id="t234489" class="heading2">Запуск Kaspersky Scan Engine в режиме ICAP</h2>
<p class="bodytext">В этом разделе описано, как запустить Kaspersky Scan Engine в режиме ICAP.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192397" target="_self">Запуск Kaspersky Scan Engine в режиме ICAP с помощью файла модуля systemd</a></p><p class="relateditem"><a href="#179900" target="_self">Запуск Kaspersky Scan Engine в режиме ICAP вручную</a></p><p class="relateditem"><a href="#179901" target="_self">Запуск Kaspersky Scan Engine в режиме ICAP с помощью сценария оболочки kavicapd </a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192397"><p><a name="192397" style="display: none;">[Topic 192397]</a></p>
	<h3 id="t234492" class="heading3">Запуск Kaspersky Scan Engine в режиме ICAP с помощью файла модуля systemd</h3>
<p class="bodytext">Вы можете запустить Kaspersky Scan Engine в режиме ICAP, используя файл модуля kavicapd.service для <code class="programcharacter">systemd</code>. Файл модуля позволяет вам добавить службу kavicapd в список запуска служб и управлять службой вручную из командной строки.</p>
<p class="attentionbody">В этом разделе предполагается, что вы хотите добавить службу kavicapd для всех пользователей. Для получения информации о том, как добавить службу и управлять ею от имени конкретного пользователя, обратитесь к официальной документации для <code class="programcharacter">systemd</code> и <code class="programcharacter">systemctl</code>.</p>
<p class="introheading">Автоматический запуск Kaspersky Scan Engine</p>
<p class="bodytext">Чтобы Kaspersky Scan Engine запускался автоматически, добавьте kavicapd в список запуска служб.</p>
<p class="procedureheading">Чтобы добавить kavicapd в список запуска служб:</p>
<ol class="listnumber1"><li class="listnumber1">Поместите файл модуля kavicapd.service в директорию <code class="programcharacter">/etc/systemd/system/</code>.</li><li class="listnumber1">При необходимости <a id="h192507" class="englishcrossreferencetemplate" href="#192475" target="_self">отредактируйте файл модуля</a>.</li><li class="listnumber1">Перезагрузите <code class="programcharacter">systemd</code>, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl daemon-reload</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что файл модуля kavicapd.service установлен, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl list-unit-files</p>
</td>
</tr>

</table> </li><li class="listnumber1">Включите запуск kavicapd при старте системы, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl enable kavicapd.service</p>
</td>
</tr>

</table> </li></ol><p class="introheading">Получение состояния службы kavicapd.</p>
<p class="bodytext">Чтобы получить статус службы kavicapd, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">service kavicapd status</p>
</td>
</tr>

</table>
<p class="introheading">Удаление Kaspersky Scan Engine из списка запуска служб</p>
<p class="bodytext">Чтобы удалить kavicapd из списка запуска служб, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl disable kavicapd.service</p>
</td>
</tr>

</table>
<p class="introheading">Управление Kaspersky Scan Engine с помощью systemd из терминала</p>
<p class="bodytext">Чтобы запустить kavicapd без перезагрузки компьютера, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl start kavicapd</p>
</td>
</tr>

</table>
<p class="bodytext">Чтобы остановить kavicapd без перезагрузки компьютера, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl stop kavicapd</p>
</td>
</tr>

</table>
<p class="bodytext">Чтобы обновить антивирусные базы, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl reload kavicapd</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179900"><p><a name="179900" style="display: none;">[Topic 179900]</a></p>
	<h3 id="t234490" class="heading3">Запуск Kaspersky Scan Engine в режиме ICAP вручную</h3>
<p class="bodytext">Вы можете запустить службу <code class="programcharacter">kavicapd</code>, запустив бинарный файл kavicapd вручную.</p>
<p class="bodytext">Перед запуском файла убедитесь, что пути к <a id="h180129" class="englishcrossreferencetemplate" href="#179897" target="_self">директориям, содержащим плагины и библиотеки</a>, указаны правильно.</p>
<p class="bodytext">При ручном запуске службы <code class="programcharacter">kavicapd</code> доступны следующие параметры:</p>
<p class="tablename">Варианты запуска бинарного файла kavicapd</p>
<p class="spacerfortables">
<table class="tableintopic" width="696" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="72"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="624"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-c &lt;path&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="624"><p class="tablebodytext">Обязательный параметр.</p>
<p class="tablebodytext">Задает путь к <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файлу конфигурации режима ICAP</a>.</p>
<p class="tablebodytext">Путь может быть абсолютным или относительным. Относительный путь указывается относительно текущей рабочей директории.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-p &lt;path&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="624"><p class="tablebodytext">Обязательный параметр.</p>
<p class="tablebodytext">Задает путь к PID-файлу. </p>
<p class="tablebodytext">Путь может быть абсолютным или относительным. Относительный путь указывается относительно текущей рабочей директории.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="72"><p class="tablebodytext"><code class="programcharacter">-w</code></p>
</td>
<td style="border:1px solid #010101;" width="624"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Запускает службу <code class="programcharacter">kavicapd</code> в сторожевом<code class="programcharacter"> </code>режиме.</p>
<p class="tablebodytext">В этом режиме служба <code class="programcharacter">kavicapd</code> автоматически перезапускается при зависании или сбое.</p>
</td>
</tr>

</table>
<p class="spacer">
<p class="bodytext">Если вы запустите бинарный файл kavicapd без указания каких-либо параметров, отобразится список поддерживаемых параметров.</p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179901"><p><a name="179901" style="display: none;">[Topic 179901]</a></p>
	<h3 id="t234491" class="heading3">Запуск Kaspersky Scan Engine в режиме ICAP с помощью сценария оболочки kavicapd </h3>
<p class="bodytext">Вы можете запустить службу <code class="programcharacter">kavicapd</code>, выполнив сценарий оболочки <code class="programcharacter">/opt/kaspersky/ScanEngine/bin/kavicapd.sh</code> вручную. Перед запуском сценария убедитесь, что пути к <a id="h180129" class="englishcrossreferencetemplate" href="#179897" target="_self">директориям, содержащим плагины и библиотеки</a>, указаны правильно.</p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221159"><p><a name="221159" style="display: none;">[Topic 221159]</a></p>
	<h2 id="t234481" class="heading2">Заголовки ответов</h2>
<p class="introheading">X-Include</p>
<p class="bodytext">Kaspersky Scan Engine включает этот заголовок в свой ответ на запрос OPTIONS от ICAP-клиента при выполнении следующих условий:</p>
<ul class="listbullet1"><li class="listbullet1">Существует по крайней мере один элемент <a id="h225223" class="englishcrossreferencetemplate" href="#225222" target="_self">ICAPHeader</a>, который содержит значение <code class="programcharacter">HTTPUserNameICAPHeader</code> или <code class="programcharacter">HTTPClientIpICAPHeader</code>:<ul class="listbullet2"><li class="listbullet2">Если <code class="programcharacter">HTTPUserNameICAPHeader</code> указан в <code class="programcharacter">ICAPHeader</code>, должен быть элемент <a id="h201207" class="englishcrossreferencetemplate" href="#200727" target="_self">HTTPUserNameICAPHeader</a>, и он не должен быть пустым.</li><li class="listbullet2">Если <code class="programcharacter">HTTPClientIpICAPHeader</code> указан в <code class="programcharacter">ICAPHeader</code>, должен быть элемент <a id="h201206" class="englishcrossreferencetemplate" href="#200726" target="_self">HTTPClientIpICAPHeader</a>, и он не должен быть пустым.</li></ul></li></ul><p class="bodytext">Заголовок <code class="programcharacter">X-Include</code> включает заголовки, указанные в <code class="programcharacter">HTTPUserNameICAPHeader</code> и <code class="programcharacter">HTTPClientIpICAPHeader</code> в виде списка, разделенного запятыми. Значения по умолчанию для этих заголовков – <code class="programcharacter">X-Client-Username</code> и <code class="programcharacter">X-Client-IP</code> соответственно. Ниже приведен пример заголовка <code class="programcharacter">X-Include</code>:</p>
<p class="bodytext"><code class="programcharacter">X-Include: X-Client-IP, X-Client-Username</code></p>
<p class="bodytext">Заголовок <code class="programcharacter">X-Include</code> также может включать только один из этих заголовков, например:</p>
<p class="bodytext"><code class="programcharacter">X-Include: X-Client-Username</code></p>
<p class="bodytext"><a id="h225224" class="englishcrossreferencetemplate" href="#225221" target="_self">RequestingICAPHeaders</a> указывает, какие заголовки включены в <code class="programcharacter">X-Include</code>.</p>
<p class="introheading">X-Infection-Found</p>
<p class="bodytext">Этот заголовок содержит типы обнаруженных угроз или легитимных объектов, которые могут быть использованы злоумышленниками. Вы можете указать, будет ли Kaspersky Scan Engine включать этот заголовок в свой ответ в элементе <code class="programcharacter"><a id="h224483" class="englishcrossreferencetemplate" href="#221147" target="_self">SendInfectionFoundICAPHeader</a></code>. Заголовок будет присутствовать только в том случае, если во время проверки обнаружена угроза или легитимный объект, который может быть использован злоумышленниками.</p>
<p class="bodytext">Заголовок имеет следующий формат:</p>
<p class="program"><code class="programcharacter">X-Infection-Found: Type=0; Resolution=0; Threat={Threat_type};</code></p>
<p class="bodytext">Здесь <code class="programcharacter">{Threat_type}</code> – это тип угрозы или легальной программы, которая может быть использована злоумышленниками. Если Kaspersky Scan Engine обнаруживает несколько объектов, все типы перечисляются через запятую (<code class="programcharacter">,</code>).</p>
<p class="attentionbody">В текущей версии Kaspersky Scan Engine значения <code class="programcharacter">Type</code> и <code class="programcharacter">Resolution</code> всегда равны <code class="programcharacter">0</code>.</p>
<p class="introheading">X-Response-Desc</p>
<p class="bodytext">Этот заголовок содержит описания обнаруженных угроз или легитимных объектов, которые могут быть использованы злоумышленниками. Вы можете указать, включает ли Kaspersky Scan Engine этот заголовок в свой ответ в элементе <code class="programcharacter"><a id="h224486" class="englishcrossreferencetemplate" href="#221160" target="_self">SendResponseDescICAPHeader</a></code>. Заголовок будет присутствовать только в том случае, если во время проверки обнаружена угроза или легитимный объект, который может быть использован злоумышленниками.</p>
<p class="bodytext">Заголовок имеет следующий формат:</p>
<p class="program">X-Response-Desc: {Text}</p>
<p class="bodytext">Здесь <code class="programcharacter">{Text}</code> может иметь следующие значения:</p>
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Trojan malicious object detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен троянец.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Malicious tool detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружено вредоносное ПО.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Highly dangerous malicious object detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен особо опасный вредоносный объект, который не классифицируется ни по одному из доступных классов вредоносных программ.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Medium dangerous malicious object detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен вредоносный объект средней опасности, который не классифицируется ни по одному из доступных классов вредоносных программ. </p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Virware malicious object detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружена программа, которая заражает другие файлы, добавляя к ним свой код, чтобы получить контроль над зараженными файлами при их открытии.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Malicious URL</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен вредоносный URL-адрес.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Phishing URL</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен фишинговый URL-адрес.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Malicious host</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен IP-адрес вредоносного хоста.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Adware URL</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен URL-адрес, ведущий к рекламному ПО.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Riskware URL</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен URL-адрес легальной программы, которая может быть использована злоумышленниками.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Adware host</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен IP-адрес рекламного ПО.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Riskware host</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен IP-адрес хоста, на котором хранится легальная программа, которая может быть использована злоумышленниками.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Detected legitimate software that can be used by intruders to damage your computer or personal data</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружена программа, которая не имеет вредоносных функций, но может быть частью среды разработки вредоносных программ.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Detected an attempt of unauthorized use of pay-per-use Internet services which are commonly pornographic websites (pornodialer), or pornotools, or a pornodownloader</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружена попытка несанкционированного использования платных интернет-сервисов (как правило, порнографических сайтов).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Adware detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен URL-адрес, ведущий к рекламному ПО.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Multiple threats detected</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружено несколько объектов.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Detected a highly dangerous malicious object that cannot be classified using either of available classes of malware</p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен особо опасный неклассифицированный объект.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">MS Office document containing a macro is detected </p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Обнаружен документ Microsoft Office, содержащий макрос.</p>
</td>
</tr>

</table>
<p class="introheading">X-Response-Info</p>
<p class="bodytext">Этот заголовок содержит статус проверяемого объекта или ответ на запросы <code class="programcharacter">OPTIONS</code>. Вы можете указать, включает ли Kaspersky Scan Engine этот заголовок в свой ответ в элементе <code class="programcharacter"><a id="h224484" class="englishcrossreferencetemplate" href="#221161" target="_self">SendResponseInfoICAPHeader</a></code>.</p>
<p class="bodytext">Заголовок имеет следующий формат:</p>
<p class="program">X-Response-Info: {Token}</p>
<p class="bodytext">Здесь <code class="programcharacter">{Token}</code> может иметь следующие значения:</p>
<table class="tableintopic" width="510" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Значение</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="336"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">Allowed</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Проверяемый файл или URL-адрес не являются вредоносными.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">Blocked</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Этот ответ может появиться по следующим причинам:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">Обнаружена угроза или легальная программа, которая может быть использована злоумышленниками.</li><li class="tablelistbullet">Обнаружен макрос.</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext"><code class="programcharacter">Options</code></p>
</td>
<td style="border:1px solid #010101;" width="336"><p class="tablebodytext">Ответ на запросы <code class="programcharacter">OPTIONS</code>.</p>
</td>
</tr>

</table>
<p class="introheading">X-Violations-Found</p>
<p class="bodytext">Этот заголовок содержит информацию о проверяемом файле и об угрозах или легальной программе, которая может быть использована злоумышленниками, обнаруженными в этом файле. Вы можете указать, будет ли Kaspersky Scan Engine включать этот заголовок в свой ответ в элементе <code class="programcharacter"><a id="h224485" class="englishcrossreferencetemplate" href="#221162" target="_self">SendViolationsFoundICAPHeader</a></code>. Заголовок будет присутствовать только в том случае, если во время проверки обнаружена угроза или легитимный объект, который может быть использован злоумышленниками.</p>
<p class="bodytext">Заголовок имеет следующий формат:</p>
<p class="program"><code class="programcharacter">X-Violations-Found: {Count}</code></p>
<p class="program"><code class="programcharacter"> {File_name}</code></p>
<p class="program"><code class="programcharacter"> {Description}</code></p>
<p class="program"><code class="programcharacter"> {Problem_ID}</code></p>
<p class="program"><code class="programcharacter"> {Resolution_ID}</code></p>
<p class="bodytext">Здесь <code class="programcharacter">{count}</code> – это количество объектов, которые были обнаружены в файле, <code class="programcharacter">{File_name}</code> – имя файла, <code class="programcharacter">{Description}</code> – имя первой обнаруженной угрозы или легитимного объекта, который может быть использован злоумышленниками в файле, <code class="programcharacter">{Problem_ID}</code> – идентификатор обнаруженной угрозы или легитимного объекта, который может быть использован злоумышленниками, <code class="programcharacter">{Resolution_ID}</code> – идентификатор действия над объектом, выполняемого Kaspersky Scan Engine.</p>
<p class="attentionbody">В текущей версии Kaspersky Scan Engine значение {<code class="programcharacter">Resolution_ID}</code> всегда равно <code class="programcharacter">0</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179902"><p><a name="179902" style="display: none;">[Topic 179902]</a></p>
	<h2 id="t234556" class="heading2">Обновление антивирусных баз в режиме ICAP</h2>
<p class="bodytext">В режиме ICAP Kaspersky Scan Engine поддерживает несколько способов обновления антивирусных баз.</p>
<p class="warningbody">При обновлении антивирусных баз KAV SDK передает в &quot;Лабораторию Касперского&quot; зашифрованную строку user agent. Вы также можете посмотреть полный список данных, которые <a id="h180101" class="englishcrossreferencetemplate" href="#180001" target="_self">передаются в &quot;Лабораторию Касперского&quot; при обновлении</a>.</p>
<p class="bodytext">Для обновления антивирусных баз выполните одно из следующих действий.</p>
<ul class="listbullet1"><li class="listbullet1">Настройте автоматическое обновление баз в разделе <code class="programcharacter">UpdateSettings</code> <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации режима ICAP</a>.</li><li class="listbullet1">Отправьте сигнал <code class="programcharacter">SIGUSR2</code> службе <code class="programcharacter">kavicapd</code>. <p class="listcontinue1">Kaspersky Scan Engine должен быть настроен на обновление баз по этому сигналу.</p> </li></ul><p class="bodytext">При использовании одного из этих методов Kaspersky Scan Engine автоматически загружает более новую версию баз.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="182615"><p><a name="182615" style="display: none;">[Topic 182615]</a></p>
	<h2 id="t234368" class="heading2">Получение накопленной статистики в режиме ICAP</h2>
<p class="bodytext">В режиме ICAP Kaspersky Scan Engine собирает информацию об использовании и формирует статистику на основе этих данных. Эта статистика хранится на вашем жестком диске. Вы можете просматривать статистику, чтобы отслеживать тенденции в данных, запрашиваемых из вашей сети. Например, вы можете проверить, не пытаются ли пользователи в вашей сети скачивать много вредоносных файлов.</p>
<p class="procedureheading">Чтобы просмотреть накопленную статистику:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте директорию, указанную в элементе <code class="programcharacter">TempPath</code> <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации</a>.</li><li class="listnumber1">Найдите файл <code class="programcharacter">report.json</code> и откройте его.</li></ol><p class="bodytext">Ниже приведен пример файла <code class="programcharacter">report.json</code>.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">{</p>
<p class="program2">&quot;statistics&quot;: {</p>
<p class="program3">&quot;total_requests&quot;: 3,</p>
<p class="program3">&quot;infected_requests&quot;: 3,</p>
<p class="program3">&quot;not_scanned_requests&quot;: 0,</p>
<p class="program3">&quot;error_requests&quot;: 0,</p>
<p class="program3">&quot;engine_errors&quot;: 1,</p>
<p class="program3">&quot;processed_data&quot;: 204,</p>
<p class="program3">&quot;infected_data&quot;: 0,</p>
<p class="program3">&quot;processed_urls&quot;: 1,</p>
<p class="program3">&quot;infected_urls&quot;: 1</p>
<p class="program2">}</p>
<p class="program">}</p>
</td>
</tr>

</table>
<p class="bodytext">Здесь <code class="programcharacter">statistics</code> – это объект, содержащий следующую накопленную статистику:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">total_requests</code> – общее количество полученных запросов в режимах RESPMOD и REQMOD.</li><li class="listbullet1"><code class="programcharacter">infected_requests</code> – количество запросов, на которые Kaspersky Scan Engine вернул результаты <code class="programcharacter">DETECT</code>, <code class="programcharacter">PHISHING</code> или <code class="programcharacter">MACRO</code>.</li><li class="listbullet1"><code class="programcharacter">not_scanned_requests</code> – количество допустимых запросов на сканирование, которые не были обработаны. <p class="listcontinue1">Возможные причины: </p> <ul class="listbullet2"><li class="listbullet2">Объект слишком большой или слишком маленький.</li><li class="listbullet2">Объект представляет собой зашифрованный архив.</li><li class="listbullet2">Kaspersky Scan Engine настроен пропускать объекты формата, к которому он принадлежит. </li></ul></li><li class="listbullet1"><code class="programcharacter">error_requests</code> – количество неверных ICAP-запросов, полученных Kaspersky Scan Engine.</li><li class="listbullet1"><code class="programcharacter">engine_errors</code> – количество запросов, на которые Kaspersky Scan Engine вернул результат <code class="programcharacter">FAILED</code>.</li><li class="listbullet1"><code class="programcharacter">processed_data</code> – размер всех просканированных файлов в байтах.<p class="listcontinue1">Сюда входят объекты, проверенные в режиме RESPMOD, и объекты в POST-запросах, которые были проверены в режиме REQMOD.</p> </li><li class="listbullet1"><code class="programcharacter">infected_data</code> – размер всех данных в байтах, на которые Kaspersky Scan Engine вернул результат <code class="programcharacter">DETECT,</code> <code class="programcharacter">PHISHING</code> или <code class="programcharacter">MACRO</code>.<p class="listcontinue1">Сюда входят объекты, проверенные в режиме RESPMOD, и объекты в POST-запросах, которые были проверены в режиме REQMOD. </p> </li><li class="listbullet1"><code class="programcharacter">processed_urls</code> – количество проверенных URL-адресов.</li><li class="listbullet1"><code class="programcharacter">infected_urls</code> – количество URL-адресов, на которые Kaspersky Scan Engine вернул результат <code class="programcharacter">DETECT</code> или <code class="programcharacter">PHISHING</code>.</li></ul><p class="introheading">Сброс статистики</p>
<p class="bodytext">Вы можете сбросить накопленную статистику в любой момент.</p>
<p class="procedureheading">Чтобы сбросить накопленную статистику:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте директорию, указанную в элементе <code class="programcharacter">TempPath</code> <a id="h180154_2" class="englishcrossreferencetemplate" href="#192989" target="_self">файла конфигурации</a>.</li><li class="listnumber1">Найдите файл <code class="programcharacter">report.json</code> и удалите его.</li></ol><p class="bodytext">Сервис kavicapd создаст новый файл <code class="programcharacter">report.json</code> со значением всей статистики <code class="programcharacter">0</code>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186630"><p><a name="186630" style="display: none;">[Topic 186630]</a></p>
	<h2 id="t234434" class="heading2">Логирование в режиме ICAP</h2>
<p class="bodytext">В этом разделе объясняется, как работать с журналами в режиме ICAP.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179896" target="_self">Настройка логирования в режиме ICAP</a></p><p class="relateditem"><a href="#186631" target="_self">Формат логов CEF в режиме ICAP</a></p><p class="relateditem"><a href="#186652" target="_self">Формат логов RAW в режиме ICAP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179896"><p><a name="179896" style="display: none;">[Topic 179896]</a></p>
	<h3 id="t234306" class="heading3">Настройка логирования в режиме ICAP</h3>
<p class="bodytext">В этом разделе описано, как настроить логирование в режиме ICAP вручную без использования Kaspersky Scan Engine GUI.</p>
<p class="bodytext">В режиме ICAP Kaspersky Scan Engine может записывать свою активность. Параметры логирования задаются в файле конфигурации icapdkavlog.conf (далее – файл конфигурации логирования), расположенном в директории <code class="programcharacter">/opt/kaspersky/ScanEngine/bin</code>. </p>
<p class="bodytext">Вы можете изменить параметры логирования после запуска службы <code class="programcharacter">kavicapd</code>. </p>
<p class="bodytext">См. также подробные инструкции, как <a id="h180103" class="englishcrossreferencetemplate" href="#179928" target="_self">включить логирование</a>.</p>
<p class="introheading">Элементы файла конфигурации логирования</p>
<p class="bodytext"><code class="programcharacter">Logging</code> – корневой элемент файла. Этот элемент имеет два дочерних элемента: <code class="programcharacter">DebugLogging</code> и <code class="programcharacter">SyslogLogging</code>.</p>
<p class="introheading">Раздел DebugLogging</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">DebugLogging</code> – это родительский элемент, который содержит параметры журналов, которые записываются непосредственно в файлы журналов и могут помочь идентифицировать сбои в работе службы.<p class="listcontinue1">Этот элемент имеет следующие дочерние элементы.</p> </li><li class="listbullet1"><code class="programcharacter">Level</code> – указывает уровень логирования. <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">none</code> или <code class="programcharacter">non</code> <p class="listcontinue2">Логирование выключено.</p> </li><li class="listbullet2"><code class="programcharacter">debug</code> или <code class="programcharacter">dbg</code><p class="listcontinue2">Уровень отладки. На этом уровне логирования Kaspersky Scan Engine регистрирует информацию, которая может помочь в выявлении проблем, например об изменении состояния соединения с прокси-сервером или возвращаемых значениях функций Kaspersky Scan Engine.</p> </li></ul><p class="warningcontinue1">Если вы включите уровень отладки журнала, учтите, что сообщения журнала будут содержать <a id="h206306" class="englishcrossreferencetemplate" href="#179925" target="_self">конфиденциальные данные</a>.</p> <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">none</code>.</p> </li><li class="listbullet1"><code class="programcharacter">Target</code> – родительский элемент для параметров, указывающих, куда должны записываться журналы.</li><li class="listbullet1"><code class="programcharacter">File</code> – указывает, что журналы записываются непосредственно в файлы журналов. Он также определяет свойства файлов журнала. <p class="listcontinue1">Этот элемент имеет следующие атрибуты:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">size_limit</code> – указывает максимально возможный размер файла журнала в мегабайтах (МБ).<p class="listcontinue2">Если значение этого атрибута равно <code class="programcharacter">0</code>, размер файла журнала не ограничен.</p> <p class="listcontinue2">Значение по умолчанию: <code class="programcharacter">0</code>.</p> </li><li class="listbullet2"><code class="programcharacter">folder</code> – указывает директорию, в которой хранятся файлы журнала.<p class="listcontinue2">Путь может быть абсолютным или относительным. Относительный путь определяется относительно директории, в которой расположен исполняемый файл kavicapd. </p> <p class="listcontinue2">Значение по умолчанию: <code class="programcharacter">./logs</code>.</p> </li><li class="listbullet2"><code class="programcharacter">clear_folder – указывает</code>, должен ли Kaspersky Scan Engine удалять старые журналы при инициализации.<p class="listcontinue2">Kaspersky Scan Engine удаляет старые файлы журналов, только если значение этого параметра равно <code class="programcharacter">1</code>, <code class="programcharacter">yes</code>, <code class="programcharacter">true</code>, <code class="programcharacter">on</code> или <code class="programcharacter">enabled</code>. Если значение этого параметра равно <code class="programcharacter">0</code>, <code class="programcharacter">no</code>, <code class="programcharacter">false</code>, <code class="programcharacter">off</code> или <code class="programcharacter">disabled</code>, Kaspersky Scan Engine не удаляет старые файлы журналов. Обратите внимание, что Kaspersky Scan Engine проверяет этот параметр и удаляет журналы при запуске службы. Если значение этого параметра равно <code class="programcharacter">1</code>, <code class="programcharacter">yes</code>, <code class="programcharacter">true</code>, <code class="programcharacter">on</code> или <code class="programcharacter">enabled</code>, когда служба уже запущена, файлы журнала не удаляются до перезапуска службы. </p> <p class="listcontinue2">Значение по умолчанию: <code class="programcharacter">0</code>.</p> </li></ul><p class="listcontinue1">Сгенерированные файлы журналов имеют следующие имена: icapdkav_&lt;pid&gt;_&lt;date_time&gt;_&lt;log_number&gt;.log, где &lt;pid&gt; – это PID процесса, &lt;date_time&gt; – локальная системная дата в формате <code class="programcharacter">YYYY-MM-DDhhmmss</code>, а &lt;log_number&gt; – номер журнала (этот параметр добавляется к имени файла, только если файл журнала icapdkav_&lt;pid&gt;_&lt;date_time&gt;.log уже существует).</p> </li></ul><p class="introheading">Раздел SyslogLogging</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SyslogLogging</code> – это родительский элемент, который содержит настройки для журналов, которые перенаправляются в <code class="programcharacter">syslogd</code>. <p class="listcontinue1">Этот элемент имеет следующие дочерние элементы:</p> <ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">SyslogEnabled</code> – указывает, отправляет ли Kaspersky Scan Engine сообщения системного журнала.<p class="listcontinue2">Возможные значения:</p> <ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">0</code>, <code class="programcharacter">false</code>, <code class="programcharacter">no</code>, <code class="programcharacter">off</code> или <code class="programcharacter">disabled</code><p class="listcontinue3">Выключает отправку сообщений системного журнала.</p> </li><li class="listbullet3">Любое другое значение<p class="listcontinue3">Включает отправку сообщений системного журнала.</p> </li></ul><p class="warningcontinue2">Если вы разрешаете отправку сообщений системного журнала, учтите, что эти сообщения будут содержать конфиденциальные данные, такие как личные данные, определенные GDPR, данные конфигурации продукта и информацию о лицензировании.</p> </li><li class="listbullet2"><code class="programcharacter">Syslog</code> определяет параметры, относящиеся к сообщениям системного журнала. <p class="listcontinue2">Этот элемент имеет следующие атрибуты:</p> <ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">destination</code> – задает адрес назначения для сообщений системного журнала.<p class="listcontinue3">Возможны следующие адреса назначения сканирования:</p> <ul class="listbullet4"><li class="listbullet4">IP-адрес. В этом случае укажите значение <code class="programcharacter">%PROTOCOL%%IP%:%PORT%</code>, где <code class="programcharacter">%PROTOCOL%</code> – это сетевой протокол (используйте <code class="programcharacter">tcp://</code> или <code class="programcharacter">udp://</code> для этого значения), <code class="programcharacter">%IP%</code> – это IPv4-адрес, на который приходят сообщения системного журнала, <code class="programcharacter">%PORT%</code> – это порт, который принимает сообщения системного журнала. Если вы не укажете протокол, как описано выше, KAV SDK будет использовать протокол UDP.</li><li class="listbullet4">Демон syslog. В этом случае укажите значение <code class="programcharacter">localhost</code> для перенаправления сообщения syslog демону syslog.</li><li class="listbullet4">Файл журнала. В этом случае укажите путь к директории, в которой будет создан файл журнала. Путь должен начинаться с <code class="programcharacter">/var/log/kaspersky</code>. Файл журнала с сообщениями системного журнала, созданный в ходе предыдущих сеансов, не удаляется, и ICAP-плагин добавляет в этот файл новую информацию.</li></ul><p class="listcontinue3">Если необходимо записывать журналы в разные места, вы можете указать несколько элементов <code class="programcharacter">Syslog</code>. В этом случае значения атрибута <code class="programcharacter">destination</code> этих элементов должны различаться.</p> </li><li class="listbullet3"><code class="programcharacter">format</code> – указывает формат сообщений системного журнала.<p class="listcontinue3">Возможные значения:</p> <ul class="listbullet4"><li class="listbullet4"><code class="programcharacter">cef</code> – указывает формат <a id="h193363" class="englishcrossreferencetemplate" href="#186631" target="_self">CEF</a> сообщений системного журнала.</li><li class="listbullet4"><code class="programcharacter">raw</code> – указывает формат <a id="h193364" class="englishcrossreferencetemplate" href="#186652" target="_self">RAW</a> сообщений системного журнала. Значение <code class="programcharacter">raw</code> используется, когда значение, указанное в этом элементе, не является <code class="programcharacter">cef</code> или <code class="programcharacter">raw</code>, или если в этом элементе не указано значение, или если файл конфигурации логирования не содержит параметр <code class="programcharacter">SyslogFormat</code>.</li></ul></li></ul><p class="listcontinue2"><code class="programcharacter">Syslog</code> может иметь следующий дочерний элемент:</p> <ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">LoggedEvent</code> – определяет события, которые необходимо зарегистрировать. <p class="listcontinue3">Допускается указывать несколько значений <code class="programcharacter">LoggedEvent</code>. Каждое из этих значений устанавливает тип события, которое будет зарегистрировано в местоположении, указанном в атрибуте <code class="programcharacter">destination</code>.</p> <p class="listcontinue3">Возможные значения:</p> <ul class="listbullet4"><li class="listbullet4"><code class="programcharacter">Audit</code> – указывает события аудита системы.</li><li class="listbullet4"><code class="programcharacter">Init</code> – указывает события инициализации службы. </li><li class="listbullet4"><code class="programcharacter">Deinit</code> – указывает события деинициализации службы и сторожевые события. </li><li class="listbullet4"><code class="programcharacter">Update</code> – указывает события обновления и перезагрузки антивирусных баз.</li><li class="listbullet4"><code class="programcharacter">License</code> – указывает события, связанные с лицензией.</li><li class="listbullet4"><code class="programcharacter">Engine</code> - указывает события антивирусного движка. Эти события могут часто публиковаться.</li><li class="listbullet4"><code class="programcharacter">ScanResultClean</code> – указывает события завершения сканирования, когда сканируемый объект считается безопасным.</li><li class="listbullet4"><code class="programcharacter">ScanResultDetect</code> – указывает события завершения сканирования при обнаружении угрозы.</li><li class="listbullet4"><code class="programcharacter">ScanResultOther</code> – указывает события завершения сканирования, когда объект не сканировался.</li></ul><p class="listcontinue3">Если элемент <code class="programcharacter">Syslog</code> не содержит дочернего элемента <code class="programcharacter">LoggedEvent</code>, регистрируются все события ICAP. </p> <p class="listcontinue3">Если настройки <code class="programcharacter">Syslog</code> неверны, логирование в указанное место назначения будет выключено.</p> <p class="listcontinue3">Когда логирование системного журнала включено, также включается аудит системы. Если ни один из элементов <code class="programcharacter">SyslogEvents</code> не содержит события <code class="programcharacter">Audit</code>, настройки аудита системы устанавливаются следующим образом: для <code class="programcharacter">SyslogFormat</code> задано значение <code class="programcharacter">raw</code>, для <code class="programcharacter">SyslogTarget</code> задано значение <code class="programcharacter">localhost</code>, а для <code class="programcharacter">SyslogEvents</code> задано значение <code class="programcharacter">audit</code>.</p> </li></ul></li></ul></li></ul><p class="attentionbody">Kaspersky Scan Engine может вести логи отладки и отправлять сообщения системного журнала одновременно или по отдельности.</p>
<p class="introheading">Структура файла конфигурации логирования</p>
<p class="bodytext">Ниже приведен пример файла конфигурации логирования:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">&lt;?xml version=&quot;1.0&quot;?&gt;</p>
<p class="program">&lt;Logging&gt;</p>
<p class="program2">&lt;DebugLogging&gt;</p>
<p class="program3">&lt;Level&gt;debug&lt;/Level&gt;</p>
<p class="program3">&lt;File size_limit=&quot;10&quot; folder=&quot;./logs/scanevents&quot; clear_folder=&quot;1&quot;/&gt;</p>
<p class="program2">&lt;/DebugLogging&gt;</p>
<p class="program2">&lt;SyslogLogging&gt;</p>
<p class="program3">&lt;SyslogEnabled&gt;1&lt;/SyslogEnabled&gt;</p>
<p class="program3">&lt;Syslog destination=&quot;udp://192.168.1.1&quot; format=&quot;cef&quot;&gt;</p>
<p class="program4">&lt;LoggedEvent&gt;ScanResultClean&lt;/LoggedEvent&gt;</p>
<p class="program4">&lt;LoggedEvent&gt;ScanResultDetect&lt;/LoggedEvent&gt;</p>
<p class="program3">&lt;/Syslog&gt;</p>
<p class="program3">&lt;Syslog destination=&quot;localhost&quot; format=&quot;raw&quot;&gt;</p>
<p class="program4">&lt;LoggedEvent&gt;ScanResultOther&lt;/LoggedEvent&gt;</p>
<p class="program3">&lt;/Syslog&gt;</p>
<p class="program3">&lt;Syslog destination=&quot;/opt/kav/sdk8l3/logs&quot; format=&quot;raw&quot;&gt;</p>
<p class="program4">&lt;LoggedEvent&gt;Audit&lt;/LoggedEvent&gt;</p>
<p class="program4">&lt;LoggedEvent&gt;Engine&lt;/LoggedEvent&gt;</p>
<p class="program3">&lt;/Syslog&gt;</p>
<p class="program2">&lt;/SyslogLogging&gt;</p>
<p class="program">&lt;/Logging&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186631"><p><a name="186631" style="display: none;">[Topic 186631]</a></p>
	<h3 id="t234362" class="heading3">Формат логов CEF в режиме ICAP</h3>
<p class="bodytext">Если Kaspersky Scan Engine настроен на запись сообщений системного журнала в формате CEF, записи журнала о событиях выглядят следующим образом:</p>
<p class="program">CEF:0|Kaspersky|Scan Engine ICAP Service|%VERSION%|%EVENT_CLASS_ID%|%EVENT_NAME%|%SEVERITY%| msg=%EVENT_MSG% src=%CLIENT_IP% dvcpid=%ICAP_SERVER_PID% dvc=%HTTP_SERVICE_IP% dvchost=%HOSTNAME% cs2=%HTTP_USER_NAME% cs2Label=X-Client-Username cs3=%HTTP_USER_IP% cs3Label=X-Client-IP start=%EVENT_TIME% fileHash=%SCANNED_FILE_HASH% request=%SCANNED_URL% cs1=%SCAN_RESULT% cs1Label=Scan result cs4=%VIRUS_NAME% cs4Label=Virus name cs5=%SCANNED_FILE_SHA256_HASH% cs5Label=SHA256 cs6=%ICAP_MODE% cs6Label=ICAP mode cn1=%REQUEST_LENGTH% cn1Label=Request size flexString1=%SDK_VERSION% flexString1Label=Anti-Virus Engine version</p>
<p class="bodytext">Запись имеет следующие поля:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">%VERSION%</code><p class="listcontinue1">Версия Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%EVENT_CLASS_ID%</code><p class="listcontinue1">Класс события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">1</code><p class="listcontinue2">Служебное событие (не связанное со сканированием).</p>
</li><li class="listbullet2"><code class="programcharacter">2</code><p class="listcontinue2">Событие, связанное с ошибками.</p>
</li><li class="listbullet2"><code class="programcharacter">3</code><p class="listcontinue2">Событие, связанное со сканированием (например, результат сканирования).</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%EVENT_NAME%</code><p class="listcontinue1">Название события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">Initializing</code> – инициализация Kaspersky Scan Engine.</li><li class="listbullet2"><code class="programcharacter">Deinitializing</code> – Kaspersky Scan Engine деинициализирован, произошло сторожевое событие или отсутствует процесс службы.</li><li class="listbullet2"><code class="programcharacter">Update event</code> — началось или завершилось обновление антивирусных баз.</li><li class="listbullet2"><code class="programcharacter">License event</code> – событие, связанное с лицензией.</li><li class="listbullet2"><code class="programcharacter">Engine event</code> — произошло событие антивирусного ядра.</li><li class="listbullet2"><code class="programcharacter">Scan result clean</code> – проверенный объект считается безопасным.</li><li class="listbullet2"><code class="programcharacter">Scan result detect</code> – обнаружена угроза.</li><li class="listbullet2"><code class="programcharacter">Scan result other</code> – объект не был просканирован.</li><li class="listbullet2"><code class="programcharacter">Audit</code> – произошло событие <a id="h221151" class="englishcrossreferencetemplate" href="#221141" target="_self">аудита системы</a>.</li></ul></li><li class="listbullet1"><code class="programcharacter">%SEVERITY%</code><p class="listcontinue1">Уровень важности события. Чем выше уровень, тем важнее событие. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">3</code><p class="listcontinue2">Это значение указывается для событий аудита системы, информационный уровень.</p>
</li><li class="listbullet2"><code class="programcharacter">5</code><p class="listcontinue2">Это значение указывается для служебных событий, когда начинается сканирование или если результат сканирования – <code class="programcharacter">CLEAN</code>.</p>
</li><li class="listbullet2"><code class="programcharacter">6</code><p class="listcontinue2">Это значение указывается для событий аудита системы, уровень предупреждения.</p>
</li><li class="listbullet2"><code class="programcharacter">7</code><p class="listcontinue2">Это значение указывается для инициализации, деинициализации и ошибок.</p>
</li><li class="listbullet2"><code class="programcharacter">8</code><p class="listcontinue2">Это значение указывается для событий аудита системы (критический уровень) и если результат сканирования отличен от <code class="programcharacter">CLEAN</code>. Эти события считаются опасными.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%EVENT_MSG%</code><p class="listcontinue1">Описание события. Например, текст сообщения об ошибке.</p>
</li><li class="listbullet1"><code class="programcharacter">%CLIENT_IP%</code><p class="listcontinue1">IP-адрес ICAP-клиента, отправившего запрос на сканирование в Kaspersky Scan Engine. Это поле отображается только в событиях результатов проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>).</p>
</li><li class="listbullet1"><code class="programcharacter">%ICAP_SERVER_PID%</code><p class="listcontinue1">PID Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_SERVICE_IP%</code><p class="listcontinue1">IP-адрес, который Kaspersky Scan Engine использует для получения запросов на сканирование от клиентов. Это поле появляется только в том случае, если включено логирование системного журнала в формате CEF.</p>
</li><li class="listbullet1"><code class="programcharacter">%HOSTNAME%</code><p class="listcontinue1">Имя хоста компьютера, на котором работает Kaspersky Scan Engine. Это поле появляется только в том случае, если включено логирование системного журнала в формате CEF.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_USER_NAME%</code><p class="listcontinue1">Имя HTTP-клиента, указанное в пользовательском поле заголовка запроса. Имя этого поля заголовка запроса указывается в элементе <code class="programcharacter"><a id="h201207" class="englishcrossreferencetemplate" href="#200727" target="_self">HTTPUserNameICAPHeader</a></code> файла конфигурации режима ICAP.</p>
<p class="listcontinue1"><code class="programcharacter">Поля cs2</code> (<code class="programcharacter">%HTTP_USER_NAME%</code>) и <code class="programcharacter">cs2Label</code> отображаются только в том случае, если значение <code class="programcharacter">%EVENT_CLASS_ID%</code> равно 3 и если в файле конфигурации режима ICAP существует не пустой элемент <code class="programcharacter">HTTPUserNameICAPHeader</code>. Если элемент <code class="programcharacter">HTTPUserNameICAPHeader</code> не существует или пуст, поля <code class="programcharacter">cs2</code> (<code class="programcharacter">%HTTP_USER_NAME%</code>) и <code class="programcharacter">cs2Label</code> отсутствуют в сообщении системного журнала.</p>
<p class="listcontinue1">Если значение поля пользовательского заголовка пусто (имя HTTP-клиента не указано в запросе), значение <code class="programcharacter">cs2</code> (<code class="programcharacter">%HTTP_USER_NAME%</code>) в сообщении системного журнала равно &quot;-&quot;.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_USER_IP%</code><p class="listcontinue1">IP-адрес HTTP-клиента, указанный в пользовательском поле заголовка запроса. Имя этого поля заголовка запроса указывается в элементе <code class="programcharacter"><a id="h201206" class="englishcrossreferencetemplate" href="#200726" target="_self">HTTPClientIpICAPHeader</a></code> файла конфигурации режима ICAP.</p>
<p class="listcontinue1"><code class="programcharacter">Поля cs3</code> (<code class="programcharacter">%HTTP_USER_IP%</code>) и <code class="programcharacter">cs3Label</code> отображаются только в том случае, если значение <code class="programcharacter">%EVENT_CLASS_ID%</code> равно 3 и если в файле конфигурации режима ICAP существует не пустой элемент <code class="programcharacter">HTTPClientIpICAPHeader</code>. Если элемент <code class="programcharacter">HTTPClientIpICAPHeader</code> не существует или пуст, поля <code class="programcharacter">cs3</code> (<code class="programcharacter">%HTTP_USER_IP%</code>) и <code class="programcharacter">cs3Label</code> отсутствуют в сообщении системного журнала.</p>
<p class="listcontinue1">Если значение поля пользовательского заголовка пусто (IP-адрес клиента HTTP не указан в запросе), значение <code class="programcharacter">cs3</code> (<code class="programcharacter">%HTTP_USER_IP%</code>) в сообщении системного журнала равно &quot;-&quot;.</p>
</li><li class="listbullet1"><code class="programcharacter">%EVENT_TIME%</code><p class="listcontinue1">Время и дата события. Время и дата берутся с компьютера, на котором работает Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_FILE_HASH%</code><p class="listcontinue1">Хеш объекта, переданного на сканирование в Kaspersky Scan Engine. Это поле отображается только в событиях результатов проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>).</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_URL%</code><p class="listcontinue1">URL-адрес, переданный на проверку в Kaspersky Scan Engine. Это поле отображается только в событиях результатов проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>).</p>
</li><li class="listbullet1"><code class="programcharacter">%SCAN_RESULT%</code><p class="listcontinue1">Результат сканирования. Это поле отображается только в событиях результатов проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>).</p>
</li><li class="listbullet1"><code class="programcharacter">cs1Label=Scan result</code><p class="listcontinue1">Это поле появляется, только если значение <code class="programcharacter">%EVENT_CLASS_ID%</code> равно <code class="programcharacter">3</code>.</p>
</li><li class="listbullet1"><code class="programcharacter">%VIRUS_NAME%</code><p class="listcontinue1">Название угрозы или легальной программы, которая может быть использована злоумышленниками. Это поле отображается только в событиях результатов проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>).</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_FILE_SHA256_HASH%</code><p class="listcontinue1">SHA256-хеш объекта, переданного на проверку в Kaspersky Scan Engine. Это поле появляется только тогда, когда Kaspersky Scan Engine возвращает результат проверки. </p>
</li><li class="listbullet1"><code class="programcharacter">%ICAP_MODE%</code><p class="listcontinue1">Указывает, в каком режиме Kaspersky Scan Engine проверял объект: REQMOD или RESPMOD. Это поле отображается только в событиях результатов проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>).</p>
</li><li class="listbullet1"><code class="programcharacter">%REQUEST_LENGTH%</code><p class="listcontinue1">Длина тела сообщения в байтах. Это поле отображается только в событиях результата проверки (типы событий <code class="programcharacter">ScanResultClean</code>, <code class="programcharacter">ScanResultDetect</code>, <code class="programcharacter">ScanResultOther</code>) и только если проверяемый объект не является URL-адресом.</p>
</li><li class="listbullet1"><code class="programcharacter">%SDK_VERSION%</code><p class="listcontinue1">Версия KAV SDK, на которой основан Kaspersky Scan Engine.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186652"><p><a name="186652" style="display: none;">[Topic 186652]</a></p>
	<h3 id="t234364" class="heading3">Формат логов RAW в режиме ICAP</h3>
<p class="bodytext">Если Kaspersky Scan Engine настроен на запись сообщений системного журнала в формате RAW, записи журнала о событиях выглядят следующим образом:</p>
<p class="program">&lt;%PRIORITY%&gt;1 %TIMESTAMP% %ICAP_SERVICE_IP% KasperskyICAPServer %ICAP_SERVICE_PID% %MESSAGE_ID% [KL_ICAP@23668 icapMode=&quot;%ICAP_MODE%&quot; requestLength=&quot;%REQUEST_LENGTH%&quot; httpUserName=&quot;%HTTP_USER_NAME%&quot; httpUserIP=&quot;%HTTP_USER_IP%&quot; sha2=&quot;%SCANNED_FILE_SHA256_HASH%&quot; md5=&quot;%SCANNED_FILE_MD5_HASH%&quot; request=&quot;%SCANNED_URL%&quot;] BOM %MESSAGE%</p>
<p class="bodytext">Запись имеет следующие поля:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">%PRIORITY%</code><p class="listcontinue1">Уровень важности события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">163</code><p class="listcontinue2">Это значение указывается для ошибок.</p>
</li><li class="listbullet2"><code class="programcharacter">165</code><p class="listcontinue2">Это значение указывается, если результат сканирования отличен от <code class="programcharacter">CLEAN</code>.</p>
</li><li class="listbullet2"><code class="programcharacter">166</code><p class="listcontinue2">Это значение указывается для служебных событий или если результат сканирования – <code class="programcharacter">CLEAN</code>.</p>
</li></ul></li><li class="listbullet1"><code class="programcharacter">%TIMESTAMP%</code><p class="listcontinue1">Дата и время события в часовом поясе всемирного координированного времени (UTC).</p>
</li><li class="listbullet1"><code class="programcharacter">%ICAP_SERVICE_IP%</code><p class="listcontinue1">IP-адрес компьютера, на котором работает Kaspersky Scan Engine.</p>
</li><li class="listbullet1"><code class="programcharacter">%ICAP_SERVICE_PID%</code><p class="listcontinue1">PID Kaspersky Scan Engine. </p>
</li><li class="listbullet1"><code class="programcharacter">%MESSAGE_ID%</code><p class="listcontinue1">Класс события. Возможные значения:</p>
<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">AUDIT_MESSAGE</code> – событие аудита.</li><li class="listbullet2"><code class="programcharacter">INIT_MESSAGE</code> – KAV SDK инициализирован.</li><li class="listbullet2"><code class="programcharacter">DEINIT_MESSAGE</code> – KAV SDK деинициализирован, произошло сторожевое событие или отсутствует процесс службы.</li><li class="listbullet2"><code class="programcharacter">UPDATE_MESSAGE</code> — началось или завершилось обновление антивирусных баз.</li><li class="listbullet2"><code class="programcharacter">LICENSE_MESSAGE</code> – событие, связанное с лицензированием.</li><li class="listbullet2"><code class="programcharacter">ENGINE_MESSAGE</code> — произошло событие антивирусного ядра.</li><li class="listbullet2"><code class="programcharacter">SCAN_RESULT_CLEAN_MESSAGE</code> – проверенный объект считается безопасным.</li><li class="listbullet2"><code class="programcharacter">SCAN_RESULT_DETECT_MESSAGE</code> – обнаружена угроза.</li><li class="listbullet2"><code class="programcharacter">SCAN_RESULT_OTHER_MESSAGE</code> – объект не просканирован.</li></ul></li><li class="listbullet1"><code class="programcharacter">%ICAP_MODE%</code><p class="listcontinue1">Указывает, в каком режиме Kaspersky Scan Engine проверял объект: REQMOD или RESPMOD. Это поле появляется, только если значение <code class="programcharacter">%MESSAGE_ID%</code> равно <code class="programcharacter">SCAN_RESULT_MESSAGE</code>.</p>
</li><li class="listbullet1"><code class="programcharacter">%REQUEST_LENGTH%</code><p class="listcontinue1">Длина тела HTTP-сообщения, сканируемого Kaspersky Scan Engine. Это поле появляется, только если значение <code class="programcharacter">%MESSAGE_ID%</code> равно <code class="programcharacter">SCAN_RESULT_MESSAGE</code> и проверяемый объект не является URL-адресом.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_USER_NAME%</code><p class="listcontinue1">Имя HTTP-клиента, указанное в параметре <code class="programcharacter">HTTPUserNameICAPHeader</code> файла конфигурации режима ICAP. Поле <code class="programcharacter">%HTTP_USER_NAME%</code> отображается, только если значение <code class="programcharacter">%MESSAGE_ID%</code> равно <code class="programcharacter">SCAN_RESULT_MESSAGE</code>.</p>
</li><li class="listbullet1"><code class="programcharacter">%HTTP_USER_IP%</code><p class="listcontinue1">IP-адрес HTTP-клиента, указанный в параметре <code class="programcharacter">HTTPClientIpICAPHeader</code> файла конфигурации режима ICAP. Поле <code class="programcharacter">%HTTP_USER_IP%</code> появляется, только если значение <code class="programcharacter">%MESSAGE_ID%</code> равно <code class="programcharacter">SCAN_RESULT_MESSAGE</code>.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_FILE_SHA256_HASH%</code><p class="listcontinue1">SHA256-хеш объекта, переданного на сканирование в Kaspersky Scan Engine. Это поле появляется только тогда, когда Kaspersky Scan Engine возвращает результат проверки.</p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_FILE_MD5_HASH%</code><p class="listcontinue1">MD5-хеш объекта, переданного на сканирование в Kaspersky Scan Engine. Это поле появляется только тогда, когда Kaspersky Scan Engine возвращает результат проверки. </p>
</li><li class="listbullet1"><code class="programcharacter">%SCANNED_URL%</code><p class="listcontinue1">URL-адрес, проверенный KAV SDK. Поле <code class="programcharacter">%SCANNED_URL%</code> отображается только в событиях результатов проверки (типы событий <code class="programcharacter">SCAN_RESULT_CLEAN_MESSAGE</code>, <code class="programcharacter">SCAN_RESULT_DETECT_MESSAGE</code>, <code class="programcharacter">SCAN_RESULT_OTHER_MESSAGE</code>). </p>
</li><li class="listbullet1"><code class="programcharacter">%MESSAGE%</code><p class="listcontinue1">Описание события. Например, текст сообщения об ошибке.</p>
</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="219958"><p><a name="219958" style="display: none;">[Topic 219958]</a></p>
	<h2 id="t234399" class="heading2">Интеграция Kaspersky Scan Engine с другими решениями</h2>
<p class="bodytext">Протокол ICAP дает возможность интегрировать Kaspersky Scan Engine с другими решениями. Поддержка большинства полей, описанных в спецификации ICAP, позволяет интегрировать Kaspersky Scan Engine практически с любым решением, поддерживающим обмен данными по протоколу ICAP. Например, вы можете интегрировать Kaspersky Scan Engine с решениями для управления передачей файлов (MFT), такими как Cleo EDI, Cleo MFT, прокси-серверами, решениями для сетевых хранилищ (NAS) и NextGen Web Firewall (NGWF).</p>
<p class="bodytext">В этом разделе документации описывается только небольшое количество интеграций. Для получения помощи по решениям, не описанным в документации, обратитесь к своему персональному техническому менеджеру.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179904" target="_self">Использование Kaspersky Scan Engine в режиме ICAP со Squid</a></p><p class="relateditem"><a href="#212974" target="_self">Использование Kaspersky Scan Engine в режиме ICAP с Oracle Solaris Vscan</a></p><p class="relateditem"><a href="#219959" target="_self">Использование Kaspersky Scan Engine в режиме ICAP с Dell EMC Isilon</a></p><p class="relateditem"><a href="#221109" target="_self">Использование Kaspersky Scan Engine с F5 BIG-IP Application Security Manager</a></p><p class="relateditem"><a href="#221715" target="_self">Использование Kaspersky Scan Engine в режиме ICAP с GoAnywhere MFT</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179904"><p><a name="179904" style="display: none;">[Topic 179904]</a></p>
	<h3 id="t234581" class="heading3">Использование Kaspersky Scan Engine в режиме ICAP со Squid</h3>
<p class="bodytext">Squid – это кеширующий и перенаправляющий прокси-сервер для Windows и UNIX-подобных систем. Вы можете использовать Kaspersky Scan Engine в режиме ICAP для проверки трафика, проходящего через прокси-сервер Squid.</p>
<p class="introheading">Требования к установленному ПО</p>
<ul class="listbullet1"><li class="listbullet1">Операционная система Ubuntu 18.04 или более поздней версии.</li><li class="listbullet1">Squid 4.5 или более поздняя версия.</li></ul><p class="introheading">Настройка Squid для работы с Kaspersky Scan Engine</p>
<p class="bodytext">Чтобы Kaspersky Scan Engine работал со Squid в режиме ICAP, вы должны указать Kaspersky Scan Engine как службу ICAP в файле конфигурации Squid (squid.conf). </p>
<p class="bodytext">В Squid ICAP-служба определяется в следующем формате: <code class="programcharacter">icap_service id vectoring_point [options] uri</code>.</p>
<p class="procedureheading">Чтобы указать Kaspersky Scan Engine как службу ICAP:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте squid.conf для редактирования.</li><li class="listnumber1">Определите обязательные параметры <code class="programcharacter">id</code>, <code class="programcharacter">vectoring_point</code> и <code class="programcharacter">uri</code>:<ol class="listalpha2"><li class="listalpha2">Установите <code class="programcharacter">id</code> равным любому подходящему идентификатору. Например, <code class="programcharacter">srv_kl_resp</code> для режима REQMOD и <code class="programcharacter">srv_kl_req</code> для режима RESPMOD.</li><li class="listalpha2">Установите для <code class="programcharacter">vectoring_point</code> соответствующее значение <code class="programcharacter">*_precache</code>: <ul class="listbullet3"><li class="listbullet3">Для режима REQMOD укажите <code class="programcharacter">reqmod_precache</code>.</li><li class="listbullet3">Для режима RESPMOD укажите <code class="programcharacter">respmod_precache</code>.</li></ul></li><li class="listalpha2">Укажите в качестве <code class="programcharacter">uri</code> расположение Kaspersky Scan Engine: <ul class="listbullet3"><li class="listbullet3">Для режима REQMOD URI должен иметь следующий формат: <code class="programcharacter">icap://servername:port/req</code>.</li><li class="listbullet3">Для режима RESPMOD URI должен иметь следующий формат: <code class="programcharacter">icap://servername:port/resp</code>.</li></ul></li></ol></li><li class="listnumber1">Добавьте следующие строки в конец файла конфигурации Squid:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">icap_enable on</p>
<p class="program">adaptation_send_username on</p>
<p class="program">adaptation_send_client_ip on</p>
<p class="program">icap_service srv_kl_resp respmod_precache 0 icap://localhost:1344/resp</p>
<p class="program">icap_service srv_kl_req reqmod_precache 0 icap://localhost:1344/req</p>
<p class="program">adaptation_access srv_kl_resp allow all</p>
<p class="program">adaptation_access srv_kl_req allow all</p>
<p class="program">icap_service_failure_limit -1</p>
<p class="program">icap_service_revival_delay 30</p>
<p class="program">icap_preview_enable off</p>
</td>
</tr>

</table> <p class="listcontinue1">В приведенном выше примере <code class="programcharacter">srv_kl_resp</code> и <code class="programcharacter">srv_kl_req</code> – примеры <code class="programcharacter">id</code>; <code class="programcharacter">respmod_precache</code> и <code class="programcharacter">reqmod_precache</code> – значения <code class="programcharacter">vectoring_point</code>; <code class="programcharacter">0</code> – значение параметра Squid <code class="programcharacter">bypass</code>, а <code class="programcharacter">vectoring_point</code> и <code class="programcharacter">icap://127.0.0.1:1344/req</code> – примеры <code class="programcharacter">uri</code>.</p> <p class="attentioncontinue1">Вы можете использовать <code class="programcharacter">127.0.0.1</code> в <code class="programcharacter">uri</code>, только если Kaspersky Scan Engine установлен на том же компьютере, что и Squid. </p> </li><li class="listnumber1">Сохраните и закройте squid.conf.</li><li class="listnumber1">Перезапустите <code class="programcharacter">службу squid</code>.<p class="listcontinue1"><code class="programcharacter">service squid restart</code></p> </li></ol><p class="introheading">Настройка Squid для работы с Kaspersky Scan Engine и включение сканирования SSL</p>
<p class="bodytext">По умолчанию Kaspersky Scan Engine не может проверять SSL/TLS-трафик, но вы можете настроить Squid расшифровывать его с помощью функции SSL Bumping.</p>
<p class="procedureheading">Чтобы настроить Squid для работы с Kaspersky Scan Engine и включить SSL Bumping:</p>
<ol class="listnumber1"><li class="listnumber1">Установите пакеты, необходимые для компиляции и настройки Squid:<p class="listcontinue1"><code class="programcharacter">apt-get install build-essential openssl libssl-dev pkg-config</code></p> </li><li class="listnumber1">Загрузите исходный код Squid 4.5 или более поздней версии.</li><li class="listnumber1">Распакуйте архив с исходным кодом Squid в требуемую директорию.</li><li class="listnumber1">Перейдите в эту директорию.</li><li class="listnumber1">Скомпилируйте Squid:<p class="listcontinue1"><code class="programcharacter">./configure --with-default-user=proxy --with-openssl --enable-ssl-crtd</code></p> <p class="listcontinue1"><code class="programcharacter">make all</code></p> <p class="listcontinue1"><code class="programcharacter">make install</code></p> <p class="listcontinue1">Параметры <code class="programcharacter">--with-openssl</code> и <code class="programcharacter">--enable-ssl-crtd</code> необходимы, чтобы включить SSL Bumping.</p> </li><li class="listnumber1">Установите правильное время и дату на сервере, на котором работает Squid. Время и дата проверяются каждый раз, когда клиент пытается проверить сертификат этого сервера.</li><li class="listnumber1">Настройте OpenSSL:<ol class="listalpha2"><li class="listalpha2">Найдите файл конфигурации OpenSSL по умолчанию <code class="programcharacter">openssl.cnf</code>. Расположение этого файла зависит от вашей операционной системы, но обычно это <code class="programcharacter">/etc/ssl/openssl.cnf</code>.</li><li class="listalpha2">Откройте <code class="programcharacter">openssl.cnf</code> для редактирования.</li><li class="listalpha2">Добавьте следующую строку в раздел <code class="programcharacter">[v3_ca]</code> файла конфигурации:<p class="listcontinue2"><code class="programcharacter">keyUsage = cRLSign, keyCertSign</code></p> </li><li class="listalpha2">Сохраните и закройте файл <code class="programcharacter">openssl.cnf</code>.</li></ol></li><li class="listnumber1">Подготовьте среду для хранения SSL-сертификатов:<ol class="listalpha2"><li class="listalpha2">Создайте директорию для хранения SSL-сертификатов:<p class="listcontinue2"><code class="programcharacter">mkdir /usr/local/squid/etc/ssl_cert -p</code></p> </li><li class="listalpha2">Измените пользователя и группу, которым принадлежит эта директория, на <code class="programcharacter">proxy</code>:<p class="listcontinue2"><code class="programcharacter">chown proxy:proxy /usr/local/squid/etc/ssl_cert -R</code></p> </li><li class="listalpha2">Измените разрешения для этой директории:<p class="listcontinue2"><code class="programcharacter">chmod 700 /usr/local/squid/etc/ssl_cert -R</code></p> </li></ol></li><li class="listnumber1">Перейдите во вновь созданную директорию:<p class="listcontinue1"><code class="programcharacter">cd /usr/local/squid/etc/ssl_cert</code></p> </li><li class="listnumber1">Сгенерируйте новый самозаверяющий SSL-сертификат и закрытый ключ для сервера Squid:<p class="listcontinue1"><code class="programcharacter">openssl req -new -newkey rsa:2048 -sha256 -days 365 -nodes -x509 -extensions v3_ca -keyout squid_ca.pem -out squid_ca.pem</code></p> </li><li class="listnumber1">Преобразуйте созданный сертификат в формат DER:<p class="listcontinue1"><code class="programcharacter">openssl x509 -in squid_ca.pem -outform DER -out squid_ca.der</code></p> </li><li class="listnumber1">Экспортируйте сгенерированный сертификат на клиентские компьютеры и установите его на них как сертификат центра сертификации. Способ выполнения этого действия зависит от браузера и операционной системы клиента.</li><li class="listnumber1">Создайте новую базу данных SSL для сервера Squid:<p class="listcontinue1"><code class="programcharacter">/usr/local/squid/libexec/security_file_certgen -c -s /usr/local/squid/var/logs/ssl_db -M 4MB</code></p> </li><li class="listnumber1">Измените пользователя и группу, которым принадлежит эта директория, на <code class="programcharacter">proxy</code>:<p class="listcontinue1"><code class="programcharacter">chown proxy:proxy /usr/local/squid/var/logs/ssl_db -R</code></p> </li><li class="listnumber1">Настройте Squid:<ol class="listalpha2"><li class="listalpha2">Найдите файл конфигурации Squid по умолчанию <code class="programcharacter">squid.conf</code>. Расположение этого файла зависит от вашей операционной системы, но обычно это<code class="programcharacter"> </code><code class="programcharacter">/usr/local/squid/etc/squid.conf</code>.</li><li class="listalpha2">Откройте <code class="programcharacter">squid.conf</code> и внесите следующие правки:</li><li class="listalpha2">Найдите следующую строку:<p class="listcontinue2"><code class="programcharacter">http_port 3128</code></p> </li><li class="listalpha2">Замените его строкой:<p class="listcontinue2"><code class="programcharacter">http_port 3128 ssl-bump cert=/usr/local/squid/etc/ssl_cert/squid_ca.pem generate-host-certificates=on dynamic_cert_mem_cache_size=4MB</code></p> <p class="listcontinue2">Эта строка включает SSL Bumping на порту 3128.</p> </li><li class="listalpha2">Добавьте следующий раздел:<p class="listcontinue2"><code class="programcharacter">acl step1 at_step SslBump1</code></p> <p class="listcontinue2"><code class="programcharacter">ssl_bump peek step1</code></p> <p class="listcontinue2"><code class="programcharacter">ssl_bump bump all</code></p> <p class="listcontinue2"><code class="programcharacter">sslcrtd_program /usr/local/squid/libexec/security_file_certgen -s /usr/local/squid/var/logs/ssl_db -M 4MB</code></p> </li><li class="listalpha2">Укажите Kaspersky Scan Engine в качестве службы ICAP в файле конфигурации Squid, как описано выше в подразделе &quot;Настройка Squid для работы с Kaspersky Scan Engine&quot;.</li><li class="listalpha2">Сохраните и закройте <code class="programcharacter">squid.conf</code>.</li></ol></li><li class="listnumber1">Измените пользователя и группу, которым принадлежит директория <code class="programcharacter">/usr/local/squid</code>, на <code class="programcharacter">proxy</code>:<p class="listcontinue1"><code class="programcharacter">chown -R proxy:proxy /usr/local/squid</code></p> </li><li class="listnumber1">Запустите Squid и инициализируйте кеш Squid:<p class="listcontinue1"><code class="programcharacter">/usr/local/squid/sbin/squid -z</code></p> </li></ol><p class="bodytext">Ниже приведен пример части файла конфигурации Squid: В этом примере Squid использует Kaspersky Scan Engine в режиме ICAP для проверки HTTP-сообщений как в режиме REQMOD, так и в режиме RESPMOD.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"># SSL bumping configuration</p>
<p class="program">&nbsp;</p>
<p class="program"><code class="programcharacter">acl step1 at_step SslBump1</code></p>
<p class="program"><code class="programcharacter">ssl_bump peek step1</code></p>
<p class="program"><code class="programcharacter">ssl_bump bump all</code></p>
<p class="program">http_port 3128 ssl-bump cert=/usr/local/squid/etc/ssl_cert/squid_ca.pem generate-hostcertificates=on dynamic_cert_mem_cache_size=4MB</p>
<p class="program"><code class="programcharacter">sslcrtd_program /usr/local/squid/libexec/security_file_certgen -s /usr/local/squid/var/logs/ssl_db -M 4MB</code></p>
<p class="program">&nbsp;</p>
<p class="program">&nbsp;</p>
<p class="program"># ICAP configuration</p>
<p class="program">&nbsp;</p>
<p class="program">icap_enable on</p>
<p class="program">adaptation_send_username on</p>
<p class="program">adaptation_send_client_ip on</p>
<p class="program">icap_service srv_kl_resp respmod_precache 0 icap://localhost:1344/resp</p>
<p class="program">icap_service srv_kl_req reqmod_precache 0 icap://localhost:1344/req</p>
<p class="program">adaptation_access srv_kl_resp allow all</p>
<p class="program">adaptation_access srv_kl_req allow all</p>
<p class="program">icap_service_failure_limit -1</p>
<p class="program">icap_service_revival_delay 30</p>
<p class="program">icap_preview_enable off</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="212974"><p><a name="212974" style="display: none;">[Topic 212974]</a></p>
	<h3 id="t234580" class="heading3">Использование Kaspersky Scan Engine в режиме ICAP с Oracle Solaris Vscan</h3>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine для работы с Oracle Solaris Vscan.</p>
<p class="procedureheading">Чтобы настроить Kaspersky Scan Engine для работы с Oracle Solaris Vscan с помощью Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите на страницу <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Service</span>.</li><li class="listnumber1">В поле <span class="guicharacter">Response mode address</span> укажите <code class="programcharacter">avscan</code>.</li><li class="listnumber1">Сохраните изменения.</li></ol><p class="procedureheading">Чтобы настроить Kaspersky Scan Engine для работы с Oracle Solaris Vscan с помощью файла конфигурации режима ICAP:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте <code class="programcharacter">kavicapd.xml</code> для редактирования.</li><li class="listnumber1">В элементе <code class="programcharacter">ICAPSettings</code> &gt; <code class="programcharacter">RespModeAddress</code> укажите <code class="programcharacter">avscan</code>.</li><li class="listnumber1">Сохраните и закройте <code class="programcharacter">kavicapd.xml</code>.</li><li class="listnumber1">Перезапустите Kaspersky Scan Engine, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">service kavicapd restart</code></p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="219959"><p><a name="219959" style="display: none;">[Topic 219959]</a></p>
	<h3 id="t234572" class="heading3">Использование Kaspersky Scan Engine в режиме ICAP с Dell EMC Isilon</h3>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine для работы с Dell EMC Isilon. Для удобства этот процесс разделен на несколько этапов.</p>
<p class="attentionbody">Приведенная ниже инструкция применима к Dell EMC Isilon 9.1. Информацию об интерфейсах других версий см. в документации Dell EMC Isilon.</p>
<p class="introheading">Шаг 1. Настройка Kaspersky Scan Engine</p>
<p class="procedureheading">Чтобы настроить Kaspersky Scan Engine: </p>
<ol class="listnumber1"><li class="listnumber1">Разрешите Kaspersky Scan Engine отправлять код состояния HTTP <code class="programcharacter">204 No Content</code>, выполнив одно из следующих действий:<ul class="listbullet2"><li class="listbullet2">Активируйте переключатель <span class="guicharacter">Send code 204</span> в <a id="h201467" class="englishcrossreferencetemplate" href="#179698" target="_self">Kaspersky Scan Engine GUI</a>.</li><li class="listbullet2">Задайте для элемента <code class="programcharacter">Allow204</code> значение <code class="programcharacter">1</code> в <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файле конфигурации режима ICAP</a>.</li></ul></li><li class="listnumber1"> Включите проверку файлов в режиме RESPMOD, выполнив одно из следующих действий:<ul class="listbullet2"><li class="listbullet2">Установите для объектов, которые необходимо проверить в RESPMOD, значение <span class="guicharacter">Files</span> в <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">Kaspersky Scan Engine GUI</a>.</li><li class="listbullet2">Задайте для элемента <code class="programcharacter">ScanInRespMode</code> значение <code class="programcharacter">Content</code> в <a id="h180154_2" class="englishcrossreferencetemplate" href="#192989" target="_self">файле конфигурации режима ICAP</a>.</li></ul></li><li class="listnumber1">Установите в качестве адреса, который Kaspersky Scan Engine будет использовать для обработки ответов в RESPMOD, значение <code class="programcharacter">avscan</code>, выполнив любое из следующих действий:<ul class="listbullet2"><li class="listbullet2">Установите для поля <span class="guicharacter">Response mode address</span> значение <code class="programcharacter">avscan</code> в <a id="h201467_2" class="englishcrossreferencetemplate" href="#179698" target="_self">Kaspersky Scan Engine GUI</a>.</li><li class="listbullet2">Задайте для элемента RespModeAddress значение <code class="programcharacter">avscan</code> в <a id="h180154_3" class="englishcrossreferencetemplate" href="#192989" target="_self">файле конфигурации режима ICAP</a>.</li></ul></li></ol><p class="introheading">Шаг 2. Настройка Dell EMC Isilon</p>
<p class="procedureheading">Чтобы настроить Dell EMC Isilon:</p>
<ol class="listnumber1"><li class="listnumber1">В интерфейсе веб-администрирования Dell OneFS перейдите в раздел <span class="boldcharacter">Data Protection</span> &gt; <span class="boldcharacter">Antivirus</span> &gt; <span class="boldcharacter">ICAP</span>.<p class="picture"><img id="f220098" src="onefs-the-icap-tab.png" class="linkedpngfiletemplate" alt="Вкладка &quot;ICAP&quot; и элементы: Policies, Detected threats, Servers, Settings." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Вкладка <span class="boldcharacter">ICAP</span></p> </li><li class="listnumber1">В области <span class="boldcharacter">Servers</span> нажмите <span class="boldcharacter">Add Server</span>.<p class="listcontinue1">Откроется диалоговое окно <span class="boldcharacter">Add ICAP antivirus server</span>.</p> </li><li class="listnumber1">В диалоговом окне <span class="boldcharacter">Add ICAP antivirus server</span> выполните следующие действия.<ol class="listalpha2"><li class="listalpha2">В поле <span class="boldcharacter">Server URL</span> введите адрес Kaspersky Scan Engine: <code class="programcharacter">icap://%KSE_IP%:1344/avscan</code>. Здесь <code class="programcharacter">%KSE_IP%</code> – это IPv4-адрес.</li><li class="listalpha2">В поле <span class="boldcharacter">Server name</span> введите имя сервера, например <code class="programcharacter">KasperskyScanEngine</code>.</li><li class="listalpha2">Нажмите <span class="boldcharacter">Add Server</span>.</li></ol><p class="picture"><img id="f220100" src="onefs-add-icap-antivirus-server.png" class="linkedpngfiletemplate" alt="Диалоговое окно &quot;Add ICAP antivirus server&quot;. URL сервера = icap://hidden IP:1344/avscan, имя сервера = KasperskyScanEngine, установлен флажок Enable this server." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Диалоговое окно <span class="boldcharacter">Add ICAP antivirus server</span>.</p> </li><li class="listnumber1">В области <span class="boldcharacter">Settings</span> укажите следующее:<ol class="listalpha2"><li class="listalpha2">Действие при обнаружении. Например, вы можете выбрать <span class="boldcharacter">Attempt to truncate file when threat is found</span>.</li><li class="listalpha2">При необходимости вы можете указать максимальный размер файлов для проверки. Значение по умолчанию: 2 ГБ.</li><li class="listalpha2">При необходимости вы можете указать префиксы путей. <em class="emphasischaracter">Префиксы путей</em> – это пути в файловой системе, которые запускают сканирование при добавлении к ним файлов.</li><li class="listalpha2">При необходимости вы можете указать фильтры для имен объектов. Фильтры для имен объектов определяют объекты, которые следует или не следует проверять в режиме On-Access.</li><li class="listalpha2">При необходимости вы можете включить настройки <span class="boldcharacter">Enable scan of files on open, Enable file access when scanning fails</span> и <span class="boldcharacter">Enable scan of files on closed</span>.</li><li class="listalpha2">При необходимости настройте хранение отчета о проверке.</li><li class="listalpha2">Нажмите <span class="boldcharacter">Submit</span>.</li></ol><p class="picture"><img id="f220101" src="onefs-all-scans.png" class="linkedpngfiletemplate" alt="All scans. Action on detection = Attempt to truncate file when a threat is found, Maximum filescan size = 2 GB. Выбранные настройки сканирования в режиме On-access: Enable scan of files on open, Enable file access when scanning fails, Enable scan of files on close." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Диалоговое окно <span class="boldcharacter">All scans</span></p> </li><li class="listnumber1">Нажмите <span class="boldcharacter">Switch antivirus service</span>.</li><li class="listnumber1">Включите <span class="boldcharacter">Switch ICAP antivirus</span>.</li><li class="listnumber1">Нажмите <span class="boldcharacter">Confirm</span>.</li></ol><p class="introheading">Расписание сканирования</p>
<p class="bodytext">Вы можете настроить расписание сканирования для регулярной проверки хранилища.</p>
<p class="procedureheading">Чтобы настроить расписание сканирования:</p>
<ol class="listnumber1"><li class="listnumber1">В интерфейсе веб-администрирования Dell OneFS перейдите в раздел <span class="boldcharacter">Data protection</span> &gt; <span class="boldcharacter">Antivirus</span> &gt; <span class="boldcharacter">ICAP</span> &gt; <span class="boldcharacter">Policies</span>.</li><li class="listnumber1">Нажмите на кнопку <span class="boldcharacter">Create an antivirus policy</span>.<p class="listcontinue1">Откроется диалоговое окно <span class="boldcharacter">Create a policy</span>.</p> <p class="picture"><img id="f220103" src="onefs-create-a-policy.png" class="linkedpngfiletemplate" alt="Диалоговое окно &quot;Create a policy&quot;. Антивирусная политика включена. Policy name = ScanEngineRegularScan, Paths = /ifs/home/ftp/incoming, Recursion depth = Full recursion. Impact Policy = DEFAULT, Scheduled daily at 12:00 AM." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Диалоговое окно <span class="boldcharacter">Create a policy</span>.</p> </li><li class="listnumber1">Установите флажок <span class="boldcharacter">Enable antivirus policy</span>.</li><li class="listnumber1">В текстовом поле <span class="boldcharacter">Policy name</span> укажите название политики.</li><li class="listnumber1">Введите описание политики в текстовое поле <span class="boldcharacter">Description</span>.</li><li class="listnumber1">Добавьте пути к директориям, которые вы хотите просканировать.</li><li class="listnumber1">При необходимости вы можете установить ограничение на глубину рекурсии в разделе <span class="boldcharacter">Recursion depth</span> (не рекомендуется).</li><li class="listnumber1">Укажите параметры политики воздействия:<ol class="listalpha2"><li class="listalpha2">При необходимости вы можете выбрать <span class="boldcharacter">Enable force run of policy regardless of impact policy</span> (не рекомендуется). </li><li class="listalpha2">Выберите политику воздействия <code class="programcharacter">DEFAULT</code> из раскрывающегося списка <span class="boldcharacter">Impact Policy</span>.</li></ol></li><li class="listnumber1">Выберите вариант <span class="boldcharacter">Scheduled</span>.</li><li class="listnumber1">Укажите параметры расписания:<ol class="listalpha2"><li class="listalpha2">Выберите интервал запуска политики.</li><li class="listalpha2">Настройте политику для запуска в ожидаемое время.</li></ol></li><li class="listnumber1">Нажмите <span class="boldcharacter">Submit</span>.</li></ol><p class="introheading">Просмотр обнаруженных объектов</p>
<p class="procedureheading">Чтобы просмотреть обнаруженные объекты, необходимо сделать следующее:</p>
<p class="bodytextindent">В интерфейсе веб-администрирования Dell OneFS перейдите в раздел <span class="boldcharacter">Data Protection</span> &gt; <span class="boldcharacter">Antivirus</span> &gt; <span class="boldcharacter">ICAP</span> &gt; <span class="boldcharacter">Detected Threats</span>.</p>
<p class="picture"><img id="f220102" src="onefs-detected-objects.png" class="linkedpngfiletemplate" alt="Таблица обнаруженных объектов. Столбцы: Name, Path, Remediation, Policy, Detected (date and time), Actions." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Список обнаруженных объектов</p>
<p class="bodytextindent">Это список файлов, которые были помещены в карантин или содержимое которых было удалено, а также имя обнаруженного объекта, путь к файлу, метод лечения, политика и метка времени.</p>
<p class="bodytextindent">Нажмите на кнопку <span class="boldcharacter">View details</span> рядом с обнаруженным объектом, чтобы просмотреть подробную информацию.</p>
<p class="procedureheading">Чтобы восстановить файл из списка и разрешить пользователю доступ к нему:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите на раскрывающийся список <span class="boldcharacter">More</span>. </li><li class="listnumber1">Выберите <span class="boldcharacter">Release file</span>.</li></ol><p class="introheading">Рекомендации</p>
<p class="bodytext">Необходимо настроить как минимум одну копию Kaspersky Scan Engine, чтобы обеспечить проверку на вирусы для каждого кластера Isilon. В стандартной среде для работы с NAS-сервером требуется как минимум два экземпляра Kaspersky Scan Engine. Наличие только одного экземпляра может вызвать отказ в доступе к файлу, и в этом случае экземпляр не отвечает. Кластеры Isilon автоматически балансируют нагрузку между несколькими экземплярами Kaspersky Scan Engine.</p>
<p class="warningbody">Все экземпляры Kaspersky Scan Engine, зарегистрированные в кластере Isilon, должны иметь одинаковую конфигурацию.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221109"><p><a name="221109" style="display: none;">[Topic 221109]</a></p>
	<h3 id="t234573" class="heading3">Использование Kaspersky Scan Engine с F5 BIG-IP Application Security Manager</h3>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine для работы с F5 BIG-IP® Application Security Manager ™ (далее ASM). Для удобства этот процесс разделен на несколько этапов.</p>
<p class="introheading">Шаг 1. Настройка Kaspersky Scan Engine</p>
<p class="procedureheading">Чтобы настроить Kaspersky Scan Engine, выполните любое из следующих действий:</p>
<ul class="listbullet1"><li class="listbullet1">В <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файле конфигурации режима ICAP</a> установите для элемента <code class="programcharacter">VirusNameICAPHeader</code> значение <code class="programcharacter">X-Virus-ID</code>.</li><li class="listbullet1">На странице <span class="guicharacter">Service</span> Kaspersky Scan Engine GUI установите значение поля <span class="guicharacter">Detected object name HTTP header</span> на <code class="programcharacter">X-Virus-ID</code>.</li></ul><p class="introheading">Шаг 2. Настройка ASM</p>
<p class="procedureheading">Чтобы настроить ASM:</p>
<ol class="listnumber1"><li class="listnumber1">Войдите в утилиту Configuration.</li><li class="listnumber1">Перейдите в <span class="boldcharacter">Security &gt; Options &gt; Application Security &gt; Integrated Services &gt; Anti-Virus Protection</span>.<p class="picture"><img id="f221132" src="f5_1.png" class="linkedpngfiletemplate" alt="Конфигурация антивирусной защиты: Server Host Name/IP Address, Server Port Number, Guarantee Enforcement." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Антивирусная защита</p> </li><li class="listnumber1">В поле <span class="boldcharacter">Server Host Name/IP Address</span> укажите IP-адрес ICAP-сервера Kaspersky Scan Engine.</li><li class="listnumber1">В поле <span class="boldcharacter">Server Port Number</span> укажите порт ICAP-сервера Kaspersky Scan Engine или оставьте значение по умолчанию <code class="programcharacter">1344</code>.</li><li class="listnumber1">Установите флажок <span class="boldcharacter">Guarantee Enforcement</span>, если вы хотите, чтобы система выполняла проверку на вирусы, даже если это может замедлить работу вашего веб-приложения.</li><li class="listnumber1">Нажмите <span class="boldcharacter">Save</span>.</li><li class="listnumber1">Чтобы сразу же применить изменения политики безопасности, нажмите <span class="boldcharacter">Apply Policy</span>.</li><li class="listnumber1">Перейдите в <span class="boldcharacter">Security &gt; Options &gt; Application Security &gt; Advanced Configuration &gt; System Variables</span>.</li><li class="listnumber1">Настройте внутренние переменные:<ul class="listbullet2"><li class="listbullet2">В ASM 13.1.X–16.X:<ol class="listalpha3"><li class="listalpha3">Для параметра <span class="boldcharacter">icap_uri</span> введите <code class="programcharacter">/req</code> в параметре <span class="boldcharacter">Parameter Value</span>. Это значение по умолчанию в <code class="programcharacter"><a id="h207258" class="englishcrossreferencetemplate" href="#207194" target="_self">ReqModeAddress</a></code>.</li><li class="listalpha3">Для параметра <span class="boldcharacter">virus_header_name</span> введите <code class="programcharacter">X-Virus-ID</code> в параметре <span class="boldcharacter">Parameter Value</span>.</li><li class="listalpha3">Выберите <span class="boldcharacter">Update</span>.</li></ol></li><li class="listbullet2">В ASM 11.X–13.0.X:<ol class="listalpha3"><li class="listalpha3">Для параметра <span class="boldcharacter">icap_uri</span> введите <code class="programcharacter">/req</code> в параметре <span class="boldcharacter">Parameter Value</span>. Это значение по умолчанию в <code class="programcharacter"><a id="h207258_2" class="englishcrossreferencetemplate" href="#207194" target="_self">ReqModeAddress</a></code>.</li><li class="listalpha3">Для параметра <span class="boldcharacter">virus_header_name</span> введите <code class="programcharacter">X-Virus-ID</code>.</li><li class="listalpha3">Выберите <span class="boldcharacter">Save</span>.</li></ol></li></ul></li></ol><p class="introheading">Настройка блокировки обнаруженных объектов</p>
<p class="procedureheading">Чтобы настроить блокировку обнаруженных объектов:</p>
<ul class="listbullet1"><li class="listbullet1">В ASM 13.1.X–16.X:<ol class="listalpha2"><li class="listalpha2">Войдите в утилиту Configuration.</li><li class="listalpha2">Перейдите в <span class="boldcharacter">Security &gt; Application Security &gt; Policy Building &gt; Learning and Blocking Settings</span>.</li><li class="listalpha2">Установите режим просмотра <span class="boldcharacter">Advanced</span>.</li><li class="listalpha2">Раскройте меню <span class="boldcharacter">Antivirus</span> (раскройте меню <span class="boldcharacter">Antivirus Protection</span> в версиях ниже 14.X) и установите флажки <span class="boldcharacter">Alarm</span> и <span class="boldcharacter">Block</span> для типа нарушения <span class="boldcharacter">Virus Detected</span> или оба.</li><li class="listalpha2">Нажмите <span class="boldcharacter">Save</span>.</li><li class="listalpha2">Чтобы сразу же активировать изменения политики безопасности, выберите <span class="boldcharacter">Apply Policy</span>.</li></ol></li><li class="listbullet1">В ASM 12.X:<ol class="listalpha2"><li class="listalpha2">Войдите в утилиту Configuration.</li><li class="listalpha2">Перейдите в <span class="boldcharacter">Security &gt; Application Security &gt; Policy Building &gt; Learning and Blocking Settings</span>.</li><li class="listalpha2">Установите режим просмотра <span class="boldcharacter">Advanced</span>.</li><li class="listalpha2">Раскройте меню <span class="boldcharacter">Policy General Features</span> и установите флажки <span class="boldcharacter">Alarm</span> и <span class="boldcharacter">Block</span> для типа нарушения <span class="boldcharacter">Virus Detected</span>.</li><li class="listalpha2">Нажмите <span class="boldcharacter">Save</span>.</li><li class="listalpha2">Чтобы сразу же применить изменения политики безопасности, нажмите <span class="boldcharacter">Apply Policy</span>.</li></ol></li><li class="listbullet1">В ASM 11.X:<ol class="listalpha2"><li class="listalpha2">Войдите в утилиту Configuration.</li><li class="listalpha2">Перейдите в <span class="boldcharacter">Security &gt; Application Security &gt; Blocking.</span></li><li class="listalpha2">В разделе <span class="boldcharacter">Violations List</span> для параметра <span class="boldcharacter">Negative Security Violations</span> установите флажки <span class="boldcharacter">Alarm</span> и <span class="boldcharacter">Block</span> для типа нарушения <span class="boldcharacter">Virus Detected</span>.</li><li class="listalpha2">Нажмите <span class="boldcharacter">Save</span>.</li><li class="listalpha2">Чтобы сразу же активировать изменения политики безопасности, нажмите <span class="boldcharacter">Apply Policy</span>.</li></ol></li></ul><p class="introheading">Настройка сканирования загружаемых файлов и вложений электронной почты</p>
<p class="procedureheading">Чтобы настроить сканирование загружаемых файлов и вложений электронной почты:</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в <span class="boldcharacter">Security &gt; Application Security &gt; Integrated Services &gt; Anti-Virus Protection</span>.</li><li class="listnumber1">Выберите соответствующую политику безопасности из списка.</li><li class="listnumber1">Установите флажок <span class="boldcharacter">Inspect file uploads within HTTP requests</span>.</li><li class="listnumber1">Чтобы проверить вложения SOAP, переместите соответствующие XML-профили из списка <span class="boldcharacter">Antivirus Protection Disabled</span> в список <span class="boldcharacter">Antivirus Protection Enabled</span>.</li><li class="listnumber1">Нажмите <span class="boldcharacter">Save</span>.</li><li class="listnumber1">Чтобы сразу же применить изменения политики безопасности, нажмите <span class="boldcharacter">Apply Policy</span>.<p class="picture"><img id="f221134" src="f5_3.png" class="linkedpngfiletemplate" alt="&quot;Inspect file uploads within HTTP requests&quot; включено. Список &quot;Antivirus Protection Disabled&quot; содержит элемент &quot;Default&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Применить политику</p> </li></ol><p class="introheading">Просмотр обнаруженных объектов</p>
<p class="procedureheading">Чтобы просмотреть отчеты об обнаруженных объектах:</p>
<ol class="listnumber1"><li class="listnumber1">Войдите в утилиту Configuration.</li><li class="listnumber1">Перейдите в <span class="boldcharacter">Security &gt; Reporting &gt; Application &gt; Charts</span>.</li><li class="listnumber1">В списке диаграмм выберите <span class="boldcharacter">Top Viruses Detected</span>.<p class="listcontinue1">Система будет отображать обнаруженные вирусы с течением времени.</p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221715"><p><a name="221715" style="display: none;">[Topic 221715]</a></p>
	<h3 id="t234579" class="heading3">Использование Kaspersky Scan Engine в режиме ICAP с GoAnywhere MFT</h3>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine для работы с GoAnywhere MFT. Для удобства этот процесс разделен на несколько этапов.</p>
<p class="introheading">Настройка Kaspersky Scan Engine</p>
<p class="bodytext">Для интеграции с GoAnywhere MFT Kaspersky Scan Engine должен работать в режиме ICAP.</p>
<p class="procedureheading">Чтобы настроить Kaspersky Scan Engine:</p>
<p class="bodytextindent">Включите отправку кода состояния <code class="programcharacter">HTTP 204 No Content</code>. Сделать это можно следующими способами:</p>
<ul class="listbullet2"><li class="listbullet2">В Kaspersky Scan Engine GUI активируйте переключатель <span class="guicharacter">Send code 204</span> на <a id="h201467" class="englishcrossreferencetemplate" href="#179698" target="_self">странице настроек службы</a>.</li><li class="listbullet2">В файле конфигурации режима ICAP укажите <code class="programcharacter">1</code> в элементе <code class="programcharacter"><a id="h201199" class="englishcrossreferencetemplate" href="#200720" target="_self">Allow204</a></code>.</li></ul><p class="introheading">Настройка GoAnywhere MFT для работы с Kaspersky Scan Engine</p>
<p class="procedureheading">Чтобы добавить Kaspersky Scan Engine в GoAnywhere MFT:</p>
<ol class="listnumber1"><li class="listnumber1">В веб-консоли GoAnywhere MFT откройте страницу <span class="boldcharacter">Resources</span>.</li><li class="listnumber1">В списке <span class="boldcharacter">Resource Types</span> выберите <span class="boldcharacter">ICAP Servers</span>.<p class="picture"><img id="f221716" src="goanywhere_icap_servers.png" class="linkedpngfiletemplate" alt="Выбрано &quot;ICAP servers&quot; в списке &quot;Resource Types&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. ICAP-серверы</p> </li><li class="listnumber1">Нажмите на кнопку <span class="boldcharacter">Add ICAP Server</span>.</li><li class="listnumber1">Заполните открывшуюся форму:<ul class="listbullet2"><li class="listbullet2"><span class="boldcharacter">Name</span>. Укажите любое имя для сервера Kaspersky Scan Engine. Например, <em class="emphasischaracter">Kaspersky Scan Engine ICAP</em>.</li><li class="listbullet2"><span class="boldcharacter">URL</span>. Укажите URL-адрес, который Kaspersky Scan Engine использует в режиме ответа. То есть URL-адрес должен содержать часть, определяющую метод RESP. Например, <em class="emphasischaracter">icap://{KSE_ICAP}:1344/resp</em>.</li></ul><p class="picture"><img id="f221717" src="goanywhere_kse_server_settings.png" class="linkedpngfiletemplate" alt="Параметры ICAP-сервера: Name = Kaspersky Scan Engine ICAP, URL = icap://IP_address:1344/resp." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Настройки ICAP-сервера Kaspersky Scan Engine</p> </li><li class="listnumber1">Нажмите на кнопку <span class="boldcharacter">Test</span>.<p class="listcontinue1">GoAnywhere MFT проверяет соединение с недавно добавленным сервером Kaspersky Scan Engine. Пример успешного тестирования показан на картинке ниже.</p> <p class="picture"><img id="f221718" src="goanywhere_resource_test_successful.png" class="linkedpngfiletemplate" alt="Результаты тестирования: проверка ресурсов прошла успешно." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Успешное подключение к ICAP-серверу Kaspersky Scan Engine</p> </li><li class="listnumber1">Нажмите <span class="boldcharacter">Save</span>.</li></ol><p class="bodytext">Теперь вы можете использовать Kaspersky Scan Engine для сканирования объектов из GoAnywhere MFT.</p>
<p class="picture"><img id="f221719" src="goanywhere_configuration_result.png" class="linkedpngfiletemplate" alt="Ресурс &quot;Kaspersky Scan Engine ICAP&quot; успешно добавлен." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Настройка GoAnywhere MFT завершена</p>
<p class="introheading">Создание регулярной задачи проверки</p>
<p class="bodytext">Вы можете создать задачу регулярной проверки объектов в Kaspersky Scan Engine.</p>
<p class="procedureheading">Чтобы создать регулярную задачу проверки:</p>
<ol class="listnumber1"><li class="listnumber1">В веб-консоли GoAnywhere MFT откройте страницу <span class="boldcharacter">Workflow/Projects</span>.</li><li class="listnumber1">Нажмите на кнопку <span class="boldcharacter">Create a Project</span>.</li><li class="listnumber1">В открывшейся форме заполните поле <span class="boldcharacter">Project Name</span> (например, <em class="emphasischaracter">регулярная проверка Kaspersky Scan Engine</em>).</li><li class="listnumber1">Нажмите <span class="boldcharacter">Save</span>.<p class="listcontinue1">Откроется страница со списком <span class="boldcharacter">Component Library</span>.</p> <p class="picture"><img id="f221746" src="goanywhere_component_library.png" class="linkedpngfiletemplate" alt="Выбрано &quot;Create File List&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Библиотека компонентов</p> </li><li class="listnumber1">В списке <span class="boldcharacter">Component Library</span>:<p class="listcontinue1">а. Дважды нажмите на элемент <span class="boldcharacter">File System/Create File List</span>, а затем заполните открывшуюся форму:</p> <ul class="listbullet3"><li class="listbullet3"><span class="boldcharacter">File List Variable</span>. Укажите <em class="emphasischaracter">files</em>.</li><li class="listbullet3"><span class="boldcharacter">Base Directory</span>. Укажите путь к директории, в которой находятся объекты, отправляемые на сканирование в Kaspersky Scan Engine.</li></ul><p class="picture"><img id="f221745" src="goanywhere_file_list_settings.png" class="linkedpngfiletemplate" alt="File List Variable =  files, Base Directory = /opt/kaspersky/temp." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Параметры списка файлов</p> <p class="listcontinue1">б. Дважды нажмите на элемент <span class="boldcharacter">Loops/For-Each Loop</span>, а затем заполните открывшуюся форму:</p> <ul class="listbullet3"><li class="listbullet3"><span class="boldcharacter">Items Variable</span>. Укажите <em class="emphasischaracter">${files}</em>.</li><li class="listbullet3"><span class="boldcharacter">Current Item Variable</span>. Укажите <em class="emphasischaracter">file</em>.</li></ul><p class="listcontinue1">в. Дважды нажмите на элемент <span class="boldcharacter">Integration/ICAP</span>, а затем заполните открывшуюся форму:</p> <ul class="listbullet3"><li class="listbullet3"><span class="boldcharacter">ICAP Server</span>. Укажите <em class="emphasischaracter">ICAP Kaspersky Scan Engine</em>.</li><li class="listbullet3"><span class="boldcharacter">Source File</span>. Укажите <em class="emphasischaracter">${file}</em>.</li><li class="listbullet3"><span class="boldcharacter">Output Variables/ICAP Status Code Variable</span>. Укажите <em class="emphasischaracter">icap_resp_code</em>.</li></ul><p class="picture"><img id="f221750" src="goanywhere_integration_icap_settings.png" class="linkedpngfiletemplate" alt="Интеграция ICAP-сервера. Label = SendtoScanEngine, ICAP Server = Kaspersky Scan Engine ICAP, Source File = ${file}, ICAP Status Code Variable = icap_resp_code." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Параметры интеграции с ICAP-сервером</p> <p class="listcontinue1">г. Дважды нажмите на элемент <span class="boldcharacter">Job Control/If</span>, а затем заполните открывшуюся форму:</p> <ul class="listbullet3"><li class="listbullet3"><span class="boldcharacter">Condition</span>. Укажите <em class="emphasischaracter">${icap_resp_code == 200}</em>.</li></ul><p class="picture"><img id="f221751" src="goanywhere_job_control_if_settings.png" class="linkedpngfiletemplate" alt="Элемент &quot;If&quot;. Label = IfMalicious, Condition = ${icap_resp_code == 200}." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Условие if</p> <p class="listcontinue1">д. Дважды нажмите на элемент <span class="boldcharacter">File System/Delete</span>, а затем заполните открывшуюся форму:</p> <ul class="listbullet3"><li class="listbullet3"><span class="boldcharacter">Input Files Variable</span>. Укажите <em class="emphasischaracter">${file}</em>.</li></ul><p class="picture"><img id="f221752" src="goanywhere_remove_malware.png" class="linkedpngfiletemplate" alt="Элемент &quot;Delete&quot;. Input Files Variable = ${file}." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Переменная файлов input file</p> <p class="attentioncontinue2">Специалисты &quot;Лаборатории Касперского&quot; рекомендуют сразу же удалять вредоносное ПО, но вы можете указать другое действие, например переместить вредоносное ПО в другую директорию, переименовать вредоносное ПО или настроить GoAnywhere MFT на отправку уведомления специалисту по безопасности.</p> </li><li class="listnumber1">После создания этих элементов расположите их в следующем иерархическом порядке:<ul class="listbullet2"><li class="listbullet2"><span class="boldcharacter">File System/Create File List</span></li><li class="listbullet2"><span class="boldcharacter">Loops/For-Each Loop </span><ul class="listbullet3"><li class="listbullet3"><span class="boldcharacter">Integration/ICAP </span></li><li class="listbullet3"><span class="boldcharacter">Job Control/If</span><ul class="listbullet4"><li class="listbullet4"><span class="boldcharacter"> File System/Delete</span></li></ul></li></ul></li></ul><p class="picture"><img id="f221753" src="goanywhere_settings_hierarchy.png" class="linkedpngfiletemplate" alt="TestProj, Main, CreateFileList, TestLoop, SendToScanEngine, IfMalicious, RemoveMalware." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Иерархия настроек</p> </li><li class="listnumber1">Откройте страницу <span class="boldcharacter">Workflow/Schedule</span> и заполните форму:<p class="listcontinue1">а. В поле <span class="boldcharacter">Project</span> укажите <em class="emphasischaracter">регулярную проверку Kaspersky Scan Engine</em>.</p> <p class="picture"><img id="f221754" src="goanywhere_kse_regular_scan_project.png" class="linkedpngfiletemplate" alt="Настройки проекта. Name = KSE regular scan, Project = /Kaspersky Scan Engine regular scan, Admin User = admin, Password hidden." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Обычный проект сканирования</p> <p class="listcontinue1">б. На вкладке <span class="boldcharacter">Schedule</span> укажите необходимую частоту сканирования.</p> <p class="picture"><img id="f221755" src="goanywhere_kse_regular_scan_schedule.png" class="linkedpngfiletemplate" alt="Расписание сканирования. Schedule Frequency = Daily." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">GoAnywhere MFT. Регулярное расписание сканирования</p> <p class="listcontinue1">в. Нажмите <span class="boldcharacter">Save</span>.</p> <p class="spacer"> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179905"><p><a name="179905" style="display: none;">[Topic 179905]</a></p>
	<h2 id="t234287" class="heading2">Сборка исполняемых файлов Kaspersky Scan Engine, используемых в режиме ICAP</h2>
<p class="bodytext">Вы можете скомпилировать службу kavicapd из исходного кода, расположенного в директории <code class="programcharacter">%service_dir%/samples/kavicap/</code>.</p>
<p class="introheading">Требования к установленному ПО</p>
<p class="bodytext">Чтобы скомпилировать службу kavicapd, вы должны установить на свой компьютер следующее программное обеспечение:</p>
<ul class="listbullet1"><li class="listbullet1">Boost 1.72.0 или более поздней версии. Исходные файлы службы kavicapd статически связываются с Boost, для чего требуется пакет boost-static.x86_64.</li><li class="listbullet1">Библиотека GNU C и стандартная библиотека GNU C++ со статическими библиотеками.</li><li class="listbullet1">Библиотека OpenSSL (последняя версия) Рекомендуется установить пакет openssl-devel.</li><li class="listbullet1">Библиотеки PostgreSQL с 6.4.4 по 7 (не включительно). Рекомендуется установить пакет libpqxx-devel.</li><li class="listbullet1">Динамическая библиотека Brotli.</li></ul><p class="bodytext">Вам также понадобится набор компиляторов GNU (GCC) 7.3.0 или более поздней версии. Используйте одну и ту же версию GCC для компиляции Boost и службы kavicapd.</p>
<p class="procedureheading">Чтобы скомпилировать Kaspersky Scan Engine для работы в режиме ICAP:</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в директорию <code class="programcharacter">%service_dir%/samples/kavicap/</code>.</li><li class="listnumber1">Запустите <code class="programcharacter">gmake</code>.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179683"><p><a name="179683" style="display: none;">[Topic 179683]</a></p>
	<h1 id="t234576" class="heading1">Использование Kaspersky Scan Engine GUI</h1>
<p class="bodytext">В этом разделе описан пользовательский графический интерфейс (GUI), предоставляемый Kaspersky Scan Engine.</p>
<p class="listheading">В зависимости от <a id="h219851" class="englishcrossreferencetemplate" href="#219850" target="_self">роли</a> пользователь Kaspersky Scan Engine GUI может выполнять следующие действия:</p>
<ul class="listbullet1"><li class="listbullet1">Изменять настройки Kaspersky Scan Engine.</li><li class="listbullet1">Следить за работой Kaspersky Scan Engine.</li><li class="listbullet1">Просматривать служебные события и события с результатами сканирования.</li><li class="listbullet1">Сохранять служебные события и события с результатами сканирования в файл.</li></ul><table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#219850" target="_self">Роли пользователей</a></p><p class="relateditem"><a href="#179694" target="_self">Вход в Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#179706" target="_self">Использование нижней панели</a></p><p class="relateditem"><a href="#179695" target="_self">Панель управления Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#179696" target="_self">Страница результатов сканирования Kaspersky Scan Engine (Scan results)</a></p><p class="relateditem"><a href="#201264" target="_self">Настройки кластеров Kaspersky Scan Engine</a></p><p class="relateditem"><a href="#179697" target="_self">Страницы настроек Kaspersky Scan Engine (Settings)</a></p><p class="relateditem"><a href="#179705" target="_self">Смена пароля</a></p><p class="relateditem"><a href="#185278" target="_self">Работа с бинарным файлом klScanEngineUI</a></p><p class="relateditem"><a href="#192471" target="_self">Запуск службы klScanEngineUI с файловым модулем systemd (Linux)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="219850"><p><a name="219850" style="display: none;">[Topic 219850]</a></p>
	<h2 id="t234567" class="heading2">Роли пользователей</h2>
<p class="bodytext">Функционал Kaspersky Scan Engine включает разграничение прав доступа для пользователей. Права доступа определяются <em class="emphasischaracter">ролями пользователей</em>, назначенными каждому пользователю Kaspersky Scan Engine. Назначение роли пользователя с ограниченными правами доступа рядовым сотрудникам службы информационной безопасности позволяет им отслеживать и анализировать инциденты, но они не могут изменять конфигурацию Kaspersky Scan Engine.</p>
<p class="bodytext">В Kaspersky Scan Engine есть две роли пользователей:</p>
<ul class="listbullet1"><li class="listbullet1"><em class="emphasischaracter">Администратор</em> имеет полный доступ к функциональности Kaspersky Scan Engine.</li><li class="listbullet1"><em class="emphasischaracter">Оператор</em> имеет ограниченный доступ к функциональности Kaspersky Scan Engine.</li></ul><p class="bodytext">См. таблицу ниже для получения дополнительной информации о функциях, доступных для каждой роли пользователя.</p>
<p class="tablename">Доступность функциональности Kaspersky Scan Engine для разных ролей пользователей</p>
<p class="spacerfortables">
<table class="tableintopic" width="656" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Kaspersky Scan Engine GUI</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Администратор</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Оператор</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext"><a id="h180278" class="englishcrossreferencetemplate" href="#179695" target="_self">Мониторинг</a></p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Доступно</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Доступно с ограничениями:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">Следующие функции недоступны:<ul class="listbullet2"><li class="listbullet2">Перезапуск Kaspersky Scan Engine (кнопка <span class="guicharacter">Restart</span>).</li><li class="listbullet2">Обновление антивирусных баз (кнопка <span class="guicharacter">Update</span>).</li><li class="listbullet2">Удаление всех данных из антивирусных баз и получение новых данных (кнопка <span class="guicharacter">Update from scratch</span>).</li><li class="listbullet2">Смена файла ключа или кода активации (кнопка <span class="guicharacter">Change</span>).</li></ul></li><li class="tablelistbullet">Ограниченный набор данных в таблице событий. Оператор может просматривать только события, связанные со сканированием, и события, инициированные им самим. </li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext"><a id="h180597" class="englishcrossreferencetemplate" href="#179696" target="_self">Результаты проверки</a></p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Доступно</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Доступно с ограничениями.</p>
<p class="tablebodytext">Оператор не может сбросить результаты проверки (кнопка <span class="guicharacter">Reset statistics</span> недоступна).</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext"><a id="h180271" class="englishcrossreferencetemplate" href="#179697" target="_self">Настройки</a></p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Доступно</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Недоступно</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext"><a id="h201478" class="englishcrossreferencetemplate" href="#201264" target="_self">Кластер</a></p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Доступно</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Недоступно</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179694"><p><a name="179694" style="display: none;">[Topic 179694]</a></p>
	<h2 id="t234519" class="heading2">Вход в Kaspersky Scan Engine</h2>
<p class="bodytext">При попытке получить доступ к Kaspersky Scan Engine GUI отображается страница аутентификации. Вы не можете пользоваться Kaspersky Scan Engine GUI без авторизации.</p>
<p class="bodytext">Внизу страницы вы можете найти текущую версию Kaspersky Scan Engine. </p>
<p class="picture"><img id="f182806" src="auth.png" class="linkedpngfiletemplate" alt="Форма входа." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Страница аутентификации</p>
<p class="bodytext">На странице аутентификации вам необходимо указать имя пользователя и пароль и нажать <span class="boldcharacter">Sign in</span>. После авторизации откроется <a id="h180278" class="englishcrossreferencetemplate" href="#179695" target="_self">панель управления Kaspersky Scan Engine</a>.</p>
<p class="bodytext">После установки Kaspersky Scan Engine создается предварительно заданная учетная запись <code class="programcharacter">admin</code>. Пароль по умолчанию для этой учетной записи – <code class="programcharacter">KAVAdmin!1</code>. Мы рекомендуем вам сменить пароль после первого входа в систему. Если вы изменили исходный пароль и забыли его, вы можете <a id="h180277" class="englishcrossreferencetemplate" href="#179831" target="_self">сбросить его до пароля по умолчанию</a>.</p>
<p class="bodytext">После неактивности в течение 2 часов сессия закрывается, и вам нужно снова войти в систему, чтобы продолжить пользоваться Kaspersky Scan Engine GUI.</p>
<p class="attentionbody">После нескольких неудачных попыток входа в учетную запись Kaspersky Scan Engine временно блокирует ее. Чтобы получить доступ к заблокированной учетной записи, обратитесь к администратору и попросите сбросить пароль.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179706"><p><a name="179706" style="display: none;">[Topic 179706]</a></p>
	<h2 id="t234584" class="heading2">Использование нижней панели</h2>
<p class="bodytext">В этом разделе описана <em class="emphasischaracter">нижняя панель</em> Kaspersky Scan Engine GUI. Нижняя панель находится в нижнем левом углу каждой страницы Kaspersky Scan Engine GUI.</p>
<p class="bodytext">На нижней панели есть кнопка с настройками текущего пользователя (<img id="f183233" src="login.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">). Нажав на нее, вы можете выбрать одно из следующих действий:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h180236" class="englishcrossreferencetemplate" href="#179705" target="_self">Изменить пароль</a> и другие параметры текущего профиля пользователя.</li><li class="listbullet1">Выйти.</li><li class="listbullet1">Открыть страницу документации Kaspersky Scan Engine, на которой описывается текущая страница Kaspersky Scan Engine GUI.</li><li class="listbullet1">Посмотреть текущую версию Kaspersky Scan Engine.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179695"><p><a name="179695" style="display: none;">[Topic 179695]</a></p>
	<h2 id="t234408" class="heading2">Панель управления Kaspersky Scan Engine</h2>
<p class="bodytext">В этом разделе описана панель управления Kaspersky Scan Engine. Она открывается, когда вы нажимаете <span class="guicharacter">Dashboard</span> в Kaspersky Scan Engine GUI.</p>
<p class="attentionbody">Вся информация отображается в часовом формате UTC. Вы можете переключиться на местное время на странице <span class="guicharacter"><a id="h221158" class="englishcrossreferencetemplate" href="#219610" target="_self">User</a></span>.</p>
<p class="picture"><img id="f182807" src="dashboard.png" class="linkedpngfiletemplate" alt="Панель инструментов, отображающая состояние Kaspersky Scan Engine и антивирусных баз, информацию о KSN, лицензии и таблицу событий Kaspersky Scan Engine." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Панель управления Kaspersky Scan Engine</p>
<p class="bodytext">На панели управления Kaspersky Scan Engine отображается следующая информация.</p>
<ul class="listbullet1"><li class="listbullet1">Информация о Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Текущее состояние Kaspersky Scan Engine.<p class="listcontinue2">Отображается, работает ли Kaspersky Anti-Virus Engine.</p> </li><li class="listbullet2">Результат инициализации Kaspersky Anti-Virus Engine.<p class="listcontinue2">Этот результат отображается, если инициализация Kaspersky Anti-Virus Engine завершилась неудачно.</p> </li><li class="listbullet2">Версия KAV SDK.</li><li class="listbullet2">Имя хоста компьютера, на котором был инициализирован Kaspersky Scan Engine.</li></ul></li><li class="listbullet1">Информация о лицензии:<ul class="listbullet2"><li class="listbullet2">Информация об используемом лицензионном ключе или коде активации:<ul class="listbullet3"><li class="listbullet3">Лицензионный ключ или код активации действителен.</li><li class="listbullet3">Срок действия лицензионного ключа или кода активации скоро истечет. Обратитесь к своему техническому специалисту по работе с клиентами, чтобы приобрести новый лицензионный ключ или получить новый код активации.</li><li class="listbullet3">Срок действия лицензионного ключа или кода активации истек. <a id="h180245" class="englishcrossreferencetemplate" href="#179702" target="_self">Замените текущий лицензионный ключ или код активации</a> новым.</li></ul></li><li class="listbullet2">Срок действия лицензии.</li></ul></li><li class="listbullet1">Информация об антивирусных базах:<ul class="listbullet2"><li class="listbullet2">Дата последнего обновления антивирусных баз.</li><li class="listbullet2">Результат последней попытки обновления антивирусных баз.</li><li class="listbullet2">Версия антивирусных баз.</li><li class="listbullet2">Текущее состояние антивирусных баз.<p class="listcontinue2">Отображается одно из следующих состояний антивирусных баз:</p> <ul class="listbullet3"><li class="listbullet3">Базы обновлены.</li><li class="listbullet3">Устарели. Необходимо запустить обновление баз.</li><li class="listbullet3">Базы критически устарели. Необходимо как можно скорее проверить интернет-подключение и запустить обновление антивирусных баз.</li></ul></li></ul></li><li class="listbullet1">Информация о KSN:<ul class="listbullet2"><li class="listbullet2">Текущий статус KSN (доступен ли KSN-сервер, на который Kaspersky Scan Engine передает данные).</li><li class="listbullet2">Дата последнего обновления KSN.</li></ul><p class="listcontinue1">Эта информация отображается, только если включен KSN.</p> </li></ul><p class="bodytext">Эта информация обновляется каждые несколько секунд.</p>
<p class="bodytext">На панели управления Kaspersky Scan Engine также есть таблица со служебными событиями. В таблицу включена следующая информация о каждом событии:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Date</span> — дата и время события.</li><li class="listbullet1"><span class="guicharacter">Hostname</span> — имя хоста компьютера, на котором работает Kaspersky Scan Engine.</li><li class="listbullet1"><span class="guicharacter">Initiator</span> — инициатор события.<p class="attentioncontinue1">Если вы обновили Kaspersky Scan Engine с версии 2.0 до более новой, в столбце <span class="guicharacter">Initiator</span> не будет отображаться информация об инициаторе событий, произошедших до обновления.</p> </li><li class="listbullet1"><span class="guicharacter">Module</span> — модуль Kaspersky Scan Engine, обработавший событие.</li><li class="listbullet1"><span class="guicharacter">Severity</span> — уровень критичности события. Чем выше уровень, тем важнее событие. </li><li class="listbullet1"><span class="guicharacter">Details</span> — дополнительная информация о событии.</li></ul><p class="bodytext">Первоначальный вид таблицы содержит до 50 последних служебных событий. Вы можете прокрутить ее вниз, чтобы просмотреть другие служебные события. В таблице вы можете сделать следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Выбрать период времени, в течение которого будут собираться результаты сканирования и отображаться в таблице.<p class="listcontinue1">Выбранный вами период времени будет сохраняться после обновления веб-страницы.</p> </li><li class="listbullet1">Задать фильтр для отображения данных.<ul class="listbullet2"><li class="listbullet2">Вы можете выбрать один или несколько модулей для передачи событий:<ul class="listbullet3"><li class="listbullet3">Updater<p class="listcontinue3">События этого модуля связаны с обновлением антивирусных баз.</p> </li><li class="listbullet3">Licensing<p class="listcontinue3">События из этого модуля связаны с лицензированием.</p> </li><li class="listbullet3">Scan engine<p class="listcontinue3">События из этого модуля связаны с ошибками, возникшими при сканировании объектов.</p> </li><li class="listbullet3">Service<p class="listcontinue3">События из этого модуля могут поступать либо от HTTP Daemon, либо от плагина ICAP.</p> </li><li class="listbullet3">Audit<p class="listcontinue3">События из этого модуля связаны с функционалом аудита системы.</p> </li></ul></li><li class="listbullet2">Вы можете выбрать одно или несколько имен хостов компьютеров, на которых экземпляры Kaspersky Scan Engine собирают служебные события.</li></ul><p class="listcontinue1">Вы также можете указать критичность отображаемых событий.</p> <p class="listcontinue1">Установленный вами фильтр будет сохраняться после обновления веб-страницы.</p> </li><li class="listbullet1">Сохраните содержимое таблицы в файл, нажав кнопку <span class="guicharacter">Export</span>.</li><li class="listbullet1">Обновите содержимое таблицы вручную, нажав кнопку <span class="guicharacter">Refresh</span>.</li></ul><p class="bodytext">На панели управления Kaspersky Scan Engine также есть несколько кнопок, с помощью которых вы можете сделать следующее:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Restart</span> — перезапустить Kaspersky Scan Engine.</li><li class="listbullet1"><span class="guicharacter">Update</span> — запустить обновление антивирусных баз.</li><li class="listbullet1"><span class="guicharacter">Update from scratch</span> – загрузка антивирусных баз с нуля.<p class="listcontinue1">Это происходит следующим образом:</p> <ol class="listnumber2"><li class="listnumber2">Kaspersky Scan Engine останавливает работу.</li><li class="listnumber2">Антивирусные базы удаляются.</li><li class="listnumber2">Антивирусные базы загружаются с сервера обновлений.</li><li class="listnumber2">Kaspersky Scan Engine возобновляет работу.</li></ol></li><li class="listbullet1"><span class="guicharacter">Change</span> — перейти к форме, позволяющей <a id="h180245_2" class="englishcrossreferencetemplate" href="#179702" target="_self">изменить файл ключа или код активации</a> (кнопка появляется, когда срок действия лицензии истек).</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179696"><p><a name="179696" style="display: none;">[Topic 179696]</a></p>
	<h2 id="t234411" class="heading2">Страница результатов сканирования Kaspersky Scan Engine (Scan results)</h2>
<p class="bodytext">На странице <span class="boldcharacter">Scan results</span> отображается информация о событиях с результатами проверки, сгенерированными Kaspersky Scan Engine.</p>
<p class="attentionbody">Вся информация отображается в часовом формате UTC. Вы можете переключиться на местное время на странице <span class="guicharacter"><a id="h221158" class="englishcrossreferencetemplate" href="#219610" target="_self">User</a></span>.</p>
<p class="bodytext">На странице <span class="boldcharacter">Scan results</span> есть следующие таблицы:</p>
<ul class="listbullet1"><li class="listbullet1">Таблица со статистикой об объектах, проверенных всеми экземплярами Kaspersky Scan Engine в кластере.</li><li class="listbullet1">Таблица со статистикой об объектах, проверенных текущим экземпляром Kaspersky Scan Engine.<p class="listcontinue1">В обеих таблицах отображается следующая информация:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Total</span> — количество объектов, просканированных Kaspersky Scan Engine.</li><li class="listbullet2"><span class="guicharacter">Detections / Total</span> — соотношение между обнаруженными объектами и всеми проверенными объектами.</li><li class="listbullet2"><span class="guicharacter">Malware</span> — количество объектов, определенных как вредоносные.</li><li class="listbullet2"><span class="guicharacter">Adware, etc.</span> — количество объектов, определенных как легальная программа, которая может быть использована злоумышленниками для повреждения компьютеров или данных</li><li class="listbullet2"><span class="guicharacter">Clean</span> — количество безопасных объектов.</li></ul></li><li class="listbullet1">Таблица с результатами сканирования для каждого объекта, проверенного Kaspersky Anti-Virus Engine.<p class="listcontinue1">Будет отображаться следующая информация:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Date</span> — дата и время получения результата сканирования.</li><li class="listbullet2"><span class="guicharacter">Hostname</span> — имя хоста компьютера, на котором Kaspersky Scan Engine выполнял сканирование.</li><li class="listbullet2"><span class="guicharacter">Client</span> — IP-адрес клиента HTTP или ICAP, отправившего объект на проверку.</li><li class="listbullet2"><span class="guicharacter">Danger level</span> (<img id="f184069" src="dangerlevel.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">) — уровень опасности проверяемого объекта.</li><li class="listbullet2"><span class="guicharacter">Info</span> — имя отсканированного файла или URL-адрес.</li><li class="listbullet2"><span class="guicharacter">Scan result</span> — категория проверяемого объекта:<ul class="listbullet3"><li class="listbullet3">Название угрозы или легальной программы, которая может быть использована злоумышленниками.</li><li class="listbullet3">Action — обнаружено действие, выполненное после обнаружения угрозы или легальной программы, которая может быть использована злоумышленниками:<ul class="listbullet4"><li class="listbullet4">Disinfected — проверенный объект вылечен.</li><li class="listbullet4">Deleted — проверенный объект удален.</li><li class="listbullet4">Skipped — проверенный объект пропущен.</li></ul></li></ul><p class="listcontinue2">Эта информация отображается, если Kaspersky Scan Engine работает в режиме HTTP, проверяемый объект не является URL-адресом и вы не выбрали &quot;Skip&quot; в параметре &quot;Action on detected objects setting&quot; на странице настроек сканирования.</p> </li><li class="listbullet2"><span class="guicharacter">Details</span> — дополнительная информация о проверяемом объекте:<ul class="listbullet3"><li class="listbullet3">Версия антивирусных баз Kaspersky Scan Engine. </li><li class="listbullet3">MD5-хеш проверяемого объекта (если файл проверялся).</li><li class="listbullet3">SHA256-хеш проверяемого объекта (если файл проверялся).</li></ul></li></ul><p class="listcontinue1">Вы можете сделать следующее:</p> <ul class="listbullet2"><li class="listbullet2">Выбрать период времени, в течение которого будут собираться результаты сканирования и отображаться в таблице.<p class="listcontinue2">Для этого нажмите на ссылку <span class="guicharacter">Date</span>.</p> <p class="listcontinue2">Этот параметр сохраняется и не сбрасывается до значения по умолчанию при обновлении страницы.</p> </li><li class="listbullet2">Задать фильтр для отображения данных.<p class="listcontinue2">Для этого нажмите на значок <span class="guicharacter">Danger level</span> (<img id="f184069_1" src="dangerlevel.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">).</p> <p class="listcontinue2">Выберите типы объектов, которые вы хотите отобразить, установив соответствующие флажки:</p> <ul class="listbullet3"><li class="listbullet3">Безопасные объекты (Clean).</li><li class="listbullet3">Объекты высокого уровня опасности (High).</li><li class="listbullet3">Объекты среднего уровня опасности (Medium).</li><li class="listbullet3">Объекты низкого уровня опасности (Low).</li></ul><p class="listcontinue2">Этот параметр сохраняется и не сбрасывается до значения по умолчанию при обновлении страницы.</p> </li><li class="listbullet2">Выберите, какие имена хостов будут отображаться.<p class="listcontinue2">Для этого нажмите на ссылку <span class="guicharacter">Hostname</span>.</p> </li><li class="listbullet2">Нажмите кнопку <span class="guicharacter">Export</span>, чтобы сохранить содержимое таблицы в файл.</li><li class="listbullet2">Нажмите кнопку <span class="guicharacter">Refresh</span>, чтобы обновить содержимое таблицы вручную.</li></ul><p class="listcontinue1">Первоначальный вид таблицы содержит до 50 последних результатов сканирования. Вы можете прокрутить ее вниз, чтобы просмотреть другие результаты сканирования.</p> </li></ul><p class="bodytext">В правом верхнем углу страницы <span class="boldcharacter">Scan results</span> вы можете нажать кнопку <span class="boldcharacter">Reset statistics</span>, чтобы очистить статистику служебных событий и событий с результатами проверки.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="201264"><p><a name="201264" style="display: none;">[Topic 201264]</a></p>
	<h2 id="t234440" class="heading2">Настройки кластеров Kaspersky Scan Engine</h2>
<p class="bodytext">На странице <span class="boldcharacter">Cluster</span> вы можете управлять экземплярами Kaspersky Scan Engine, входящими в состав кластера.</p>
<p class="introheading">Добавление экземпляра Kaspersky Scan Engine в кластер</p>
<p class="bodytext">Вы можете добавить новый или ранее удаленный экземпляр Kaspersky Scan Engine в кластер одним из следующих способов:</p>
<ul class="listbullet1"><li class="listbullet1">Во время <a id="h193036" class="englishcrossreferencetemplate" href="#192977" target="_self">автоматической установки</a>.</li><li class="listbullet1">Во время <a id="h181517" class="englishcrossreferencetemplate" href="#180652" target="_self">установки вручную</a>.</li><li class="listbullet1">После установки, указав соответствующие параметры в элементах <code class="programcharacter">DatabaseSettings &gt; ConnectionString</code>, <code class="programcharacter">DatabaseSettings &gt; User</code> и <code class="programcharacter">DatabaseSettings &gt; Password</code> файла klScanEngineUI.xml. Изменения вступят в силу после перезапуска службы.</li></ul><p class="introheading">Содержимое страницы кластера</p>
<p class="bodytext">Страница <span class="guicharacter">Cluster</span> содержит следующие вкладки:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Hosts</span></li><li class="listbullet1"><span class="guicharacter">Settings profiles</span></li><li class="listbullet1"><span class="guicharacter">Cluster settings</span></li></ul><p class="introheading">Hosts</p>
<p class="bodytext">На вкладке <span class="guicharacter">Hosts</span> отображается постоянно обновляемая (каждые пять секунд) таблица кластерных экземпляров Kaspersky Scan Engine. В ней есть следующие столбцы:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Hostname</span> — имя хоста компьютера, на котором инициализирован Kaspersky Scan Engine.</li><li class="listbullet1"><span class="guicharacter">Status</span> — результат инициализации.</li><li class="listbullet1"><span class="guicharacter">Integration mode</span> – режим работы экземпляра Kaspersky Scan Engine: <a id="h193041" class="englishcrossreferencetemplate" href="#192979" target="_self">HTTP</a> или <a id="h180141" class="englishcrossreferencetemplate" href="#184798" target="_self">ICAP</a>.</li><li class="listbullet1"><span class="guicharacter">Anti-virus database version</span> — версия антивирусных баз Kaspersky Scan Engine.<p class="listcontinue1">Также этот столбец может содержать статус обновления со следующей информацией:</p> <ul class="listbullet2"><li class="listbullet2">Обновление выполняется в данный момент.</li><li class="listbullet2">Во время обновления произошла ошибка.</li></ul></li><li class="listbullet1"><span class="guicharacter">Settings profile</span> – имя профиля настроек, который используется в экземпляре Kaspersky Scan Engine.<p class="listcontinue1">Если имя профиля настроек – <em class="emphasischaracter">Default</em>, Kaspersky Scan Engine использует заданные настройки. Если указано имя <em class="emphasischaracter">Custom</em>, Kaspersky Scan Engine использует собственные настройки пользователя и не использует никаких профилей настроек.</p> </li></ul><p class="bodytext">На этой вкладке нажмите на значок <span class="boldcharacter">Options</span> (<img id="f209074" src="cluster_button_small.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">) слева от нужного вам экземпляра, а затем выберите любое из следующих действий:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Change profile settings</span> – указывает, какой профиль настроек необходимо использовать.</li><li class="listbullet1"><span class="guicharacter">Launch database update</span> — обновление антивирусных баз Kaspersky Scan Engine.<p class="listcontinue1">Вы не можете запустить обновление, если оно уже запущено и если экземпляр Kaspersky Scan Engine деинициализирован.</p> </li><li class="listbullet1"><span class="guicharacter">Enable logging</span> — включает ведение журнала отладки в экземпляре Kaspersky Scan Engine.<p class="listcontinue1">Также вы можете отключить ведение журнала отладки.</p> <p class="listcontinue1">Вы не сможете включить ведение журнала отладки, если экземпляр Kaspersky Scan Engine деинициализирован.</p> </li><li class="listbullet1"><span class="guicharacter">Remove from cluster</span> — удаляет экземпляр из кластера. Если экземпляр кластера не существует, может пройти до 5 минут, прежде чем он будет удален.<p class="listcontinue1">Вы не можете удалить экземпляр Kaspersky Scan Engine, который используется в данный момент.</p> </li></ul><p class="introheading">Settings profiles</p>
<p class="bodytext">На этой вкладке отображается список профилей настроек Kaspersky Scan Engine, созданных пользователем Kaspersky Scan Engine. Вы можете просмотреть следующую информацию для каждого профиля настроек:</p>
<ul class="listbullet1"><li class="listbullet1">Название профиля настроек.</li><li class="listbullet1">Описание профиля настроек. <p class="listcontinue1">Описания может не быть, если вы его не указали.</p> </li><li class="listbullet1">Режим<p class="listcontinue1">Режим Kaspersky Scan Engine (ICAP или HTTP), для которого создан профиль настроек.</p> </li><li class="listbullet1">Список имен хостов экземпляров Kaspersky Scan Engine, использующих выбранный профиль настроек.<p class="listcontinue1">Допускается, чтобы профиль не использовался ни одним из экземпляров Kaspersky Scan Engine.</p> </li></ul><p class="bodytext">Вы можете добавить новый профиль настроек, а также отредактировать или удалить существующий.</p>
<p class="procedureheading">Чтобы добавить новый профиль настроек:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите кнопку <span class="guicharacter">Add</span> над списком всех профилей настроек.<p class="listcontinue1">Откроется мастер добавления нового профиля настроек.</p> </li><li class="listnumber1">На вкладке <span class="guicharacter">Profile info</span> укажите следующие параметры:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Name</span> — имя профиля настроек.<p class="listcontinue2">Этот параметр является обязательным. Имя должно отличаться от ранее созданных профилей и профилей, зарезервированных Kaspersky Scan Engine (<em class="emphasischaracter">Default</em> и <em class="emphasischaracter">Custom</em>), и должно содержать до 16 символов.</p> </li><li class="listbullet2"><span class="guicharacter">Description</span> — описание профиля настроек.<p class="listcontinue2">Эта настройка необязательна. Описание должно содержать не более 256 символов.</p> </li><li class="listbullet2"><span class="guicharacter">Service mode</span> — режим работы экземпляра Kaspersky Scan Engine: <a id="h193041_2" class="englishcrossreferencetemplate" href="#192979" target="_self">HTTP</a> или <a id="h180141_2" class="englishcrossreferencetemplate" href="#184798" target="_self">ICAP</a>.<p class="listcontinue2">Этот параметр является обязательным.</p> </li><li class="listbullet2">При необходимости установите флажок <span class="guicharacter">Use these host settings as base</span>, чтобы настроить профиль с использованием параметров запущенного экземпляра Kaspersky Scan Engine.<p class="listcontinue2">Если этот флажок не установлен, будут использоваться настройки по умолчанию в зависимости от режима работы (HTTP или ICAP).</p> </li></ul></li><li class="listnumber1">Нажмите <span class="guicharacter">Next</span>.</li><li class="listnumber1">В дальнейшем укажите параметры Kaspersky Scan Engine разных типов в зависимости от режима работы (HTTP или ICAP). Вы можете настроить большинство параметров, расположенных на странице <span class="guicharacter"><a id="h180271" class="englishcrossreferencetemplate" href="#179697" target="_self">Settings</a></span>, за исключением параметров из разделов <span class="guicharacter">License</span> и <span class="guicharacter">Password</span>, а также параметров подключения в разделе <span class="guicharacter">Service</span>:<ul class="listbullet2"><li class="listbullet2">На вкладке <span class="guicharacter">Service</span> укажите <a id="h201467" class="englishcrossreferencetemplate" href="#179698" target="_self">параметры службы</a>.</li><li class="listbullet2">На вкладке <span class="guicharacter">Scanning</span> укажите <a id="h182505" class="englishcrossreferencetemplate" href="#179699" target="_self">параметры проверки</a>.</li><li class="listbullet2">На вкладке <span class="guicharacter">Update</span> укажите <a id="h201469" class="englishcrossreferencetemplate" href="#179701" target="_self">параметры обновления</a>.</li><li class="listbullet2">На вкладке <span class="guicharacter">ICAP rules</span> укажите <a id="h180831" class="englishcrossreferencetemplate" href="#180283" target="_self">правила ICAP</a></li><li class="listbullet2">На вкладке <span class="guicharacter">Logging</span> укажите <a id="h180220" class="englishcrossreferencetemplate" href="#179703" target="_self">параметры логирования</a>.</li><li class="listbullet2">На вкладке <span class="guicharacter">Proxy</span> укажите <a id="h201470" class="englishcrossreferencetemplate" href="#179704" target="_self">настройки прокси</a>.</li></ul></li><li class="listnumber1">На вкладке <span class="guicharacter">Summary</span> проверьте сводную информацию о профиле настроек.</li><li class="listnumber1">Нажмите <span class="guicharacter">Save</span>.<p class="listcontinue1">Вы также можете сохранять текущие изменения на каждом этапе процедуры.</p> </li></ol><p class="procedureheading">Чтобы изменить существующий профиль настроек:</p>
<ol class="listnumber1"><li class="listnumber1">Найдите профиль настроек, который вы хотите отредактировать, а затем нажмите кнопку <span class="guicharacter">Edit</span> над разделом с кратким описанием профиля.<p class="listcontinue1">Откроется мастер редактирования профиля настроек.</p> </li><li class="listnumber1">Отредактируйте нужные вам параметры.<p class="listcontinue1">Вы можете редактировать все те же параметры, что описаны выше в процедуре добавления нового профиля.</p> </li></ol><p class="procedureheading">Чтобы удалить существующий профиль настроек:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите на кнопку <span class="guicharacter">Delete</span> (<img id="f201473" src="delete_settings_profile.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">) рядом с профилем настроек, который нужно удалить.</li><li class="listnumber1">Нажмите <span class="guicharacter">Confirm</span>, чтобы подтвердить действие.</li></ol><p class="bodytext">После завершения процедуры удаления экземпляры, использующие настройки удаленного профиля, продолжат использовать их.</p>
<p class="introheading">Cluster settings</p>
<p class="bodytext">На этой вкладке вы можете настроить Kaspersky Scan Engine на автоматическое удаление из кластера экземпляров, неактивных в течение определенного периода времени. </p>
<p class="bodytext">Экземпляр считается неактивным, если от него не было зарегистрировано никаких событий службы. После удаления экземпляра из кластера Kaspersky Scan Engine также удаляет все служебные события, связанные с ним. Kaspersky Scan Engine не удаляет события с результатами сканирования.</p>
<p class="procedureheading">Чтобы настроить автоматическое удаление неактивных экземпляров кластера:</p>
<ol class="listnumber1"><li class="listnumber1">Активируйте переключатель <span class="guicharacter">Enable automatic removal</span>.</li><li class="listnumber1">Укажите период бездействия в часах.<p class="warningcontinue1">Чтобы не допустить случайного удаления экземпляра кластера, не устанавливайте период бездействия менее 24 часов.</p> </li><li class="listnumber1">Нажмите <span class="guicharacter">Save</span>.</li></ol><p class="bodytext">Если ранее удаленный экземпляр становится активным, он может повторно подключиться к кластеру. </p>
<p class="procedureheading">Чтобы повторно подключить экземпляр к кластеру:</p>
<ol class="listnumber1"><li class="listnumber1">Измените имя хоста экземпляра.</li><li class="listnumber1">Перезагрузите службы Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">Для режима HTTP перезапустите службу kavhttpd: <p class="listcontinue2"><code class="programcharacter">systemctl restart kavhttpd</code></p> </li><li class="listbullet2">Для режима ICAP перезапустите службу kavicapd: <p class="listcontinue2"><code class="programcharacter">systemctl restart kavicapd</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine GUI, перезапустите службу klScanEngineUI: <p class="listcontinue2"><code class="programcharacter">systemctl restart klScanEngineUI</code></p> </li></ul></li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179697"><p><a name="179697" style="display: none;">[Topic 179697]</a></p>
	<h2 id="t234412" class="heading2">Страницы настроек Kaspersky Scan Engine (Settings)</h2>
<p class="bodytext">В этом разделе описаны веб-страницы, содержащие параметры Kaspersky Scan Engine разных типов.</p>
<p class="attentionbody">Если вы измените какие-либо настройки на странице <span class="guicharacter">Settings</span> при использовании определенного <a id="h201478" class="englishcrossreferencetemplate" href="#201264" target="_self">профиля настроек</a> в текущем экземпляре Kaspersky Scan Engine, вам будет предложено прекратить использование этого профиля настроек для этого экземпляра. Если вы согласны, экземпляр будет использовать свои собственные пользовательские настройки, а имя профиля настроек или настроек для этого экземпляра будет отображаться как <em class="emphasischaracter">Custom</em><span class="guicharacter"> </span>в таблице <span class="guicharacter"><a id="h201478_2" class="englishcrossreferencetemplate" href="#201264" target="_self">Hosts</a></span>. Это касается большинства изменений на странице <span class="guicharacter">Settings</span>, за исключением изменений в разделах <span class="guicharacter">License</span> и <span class="guicharacter">Password</span>, а также в настройках подключения в разделе <span class="guicharacter">Service</span>.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179698" target="_self">Настройки службы (Service)</a></p><p class="relateditem"><a href="#179699" target="_self">Настройки сканирования (Scanning)</a></p><p class="relateditem"><a href="#224195" target="_self">Настройки авторизации (Authorization)</a></p><p class="relateditem"><a href="#180283" target="_self">Правила ICAP (ICAP rules)</a></p><p class="relateditem"><a href="#179701" target="_self">Настройки обновления (Update)</a></p><p class="relateditem"><a href="#179702" target="_self">Настройки лицензирования (License)</a></p><p class="relateditem"><a href="#179703" target="_self">Настройки логирования (Logging)</a></p><p class="relateditem"><a href="#179704" target="_self">Настройки прокси (Proxy)</a></p><p class="relateditem"><a href="#219610" target="_self">Настройки пользователей (Users)</a></p><p class="relateditem"><a href="#221467" target="_self">Экспорт настроек</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179698"><p><a name="179698" style="display: none;">[Topic 179698]</a></p>
	<h3 id="t234515" class="heading3">Настройки службы (Service)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="guicharacter">Service</span> на странице <span class="guicharacter">Settings</span><span class="boldcharacter"></span>.</p>
<p class="picture"><img id="f182810" src="settings_service.png" class="linkedpngfiletemplate" alt="Несколько настроек службы для режима HTTP: протокол, IP-адрес и порт, постоянное соединение Keep-alive." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Настройки службы (Service)</p>
<p class="bodytext">Если Kaspersky Scan Engine инициализируется в режиме HTTP, вы можете указать следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Protocol</span> — выберите HTTP, HTTPS или сокет домена UNIX.</li><li class="listbullet1">Адрес, который Kaspersky Anti-Virus Engine будет использовать для получения объектов для проверки.<p class="listcontinue1">Это может быть либо UNIX-сокет, либо IP-адрес и порт.</p> </li><li class="listbullet1"><span class="guicharacter">Private key path</span> — путь к файлу закрытого ключа для подключения по протоколу HTTPS (TLS).<p class="listcontinue1">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла kavhttpd.</p> <p class="listcontinue1">Вы должны указать этот параметр, если выбран протокол HTTPS.</p> <p class="attentioncontinue1">При настройке этого параметра в таблице со служебными событиями Kaspersky Scan Engine может появиться следующее сообщение: &quot;our private key has a low security level. Please check the permissions for the file &lt;path&gt;.&quot; В этом случае вы должны настроить доступ к файлу закрытого ключа, чтобы только пользователь root и учетная запись пользователя, под которой запущена служба, могли иметь разрешение на чтение.</p> </li><li class="listbullet1"><span class="guicharacter">Certificate</span> — путь к файлу сертификата для подключения по протоколу HTTPS (TLS).<p class="listcontinue1">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла kavhttpd.</p> <p class="listcontinue1">Вы должны указать этот параметр, если выбран протокол HTTPS.</p> </li><li class="listbullet1"><span class="guicharacter">Keep-alive connection</span> — указывает, нужно ли использовать <a id="h207358" class="englishcrossreferencetemplate" href="#207348" target="_self">Keep-Alive</a>.</li><li class="listbullet1"><span class="guicharacter">Connection timeout</span> — время, в течение которого неактивное соединение должно оставаться открытым (в миллисекундах) в ожидании нового запроса от HTTP-клиента.<p class="listcontinue1">Диапазон возможных значений от 0 до 18000. Если для этого параметра установлено значение 0, ограничение по времени для подключения отсутствует.</p> </li><li class="listbullet1"><span class="guicharacter">Maximum requests per connection</span> — максимальное количество запросов на одно подключение до его закрытия.<p class="listcontinue1">Диапазон возможных значений от 0 до 1000. Если для этого параметра установлено значение 0, количество запросов на одно подключение не ограничено.</p> </li><li class="listbullet1">В разделе <span class="guicharacter">Locations where remote scanning is allowed</span>, вы можете указать пути к местам, в которых разрешено сканирование, когда HTTP-клиент отправляет запросы на сканирование через TCP-сокет с удаленного компьютера. Сканирование в других местах расположения запрещено. Эти пути находятся в файловой системе компьютера, на котором установлен сервер Kaspersky Scan Engine. Ограничение области сканирования предотвращает проверку всей файловой системы сервера Kaspersky Scan Engine по команде извне.<p class="listcontinue1">Не рекомендуется использовать ссылки в качестве путей из соображений безопасности. Вместо этого используйте абсолютные пути.</p> <p class="attentioncontinue1">Kaspersky Scan Engine не добавляет и не удаляет объекты в директориях, указанных в разделе <span class="guicharacter">Locations where remote scanning is allowed</span>. HTTP-клиент должен отправить объекты для сканирования, а затем удалить их после сканирования.</p> <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2">Абсолютный путь до директории.<p class="listcontinue2">Это значение позволяет сканировать файлы, расположенные внутри этой директории и всех ее поддиректорий.</p> <p class="listcontinue2">Директория должна быть расположена на том же компьютере, что и Kaspersky Scan Engine, или на удаленном жестком диске, который смонтирован на этом компьютере. </p> <p class="listcontinue2">Путь должен начинаться с корневой директории файловой системы компьютера, на котором установлен Kaspersky Scan Engine.</p> <p class="listcontinue2">Служба kavhttpd должна иметь права на чтение файлов в этой директории и всех ее поддиректориях.</p> </li><li class="listbullet2">Абсолютный путь до файла.<p class="listcontinue2">Позволяет сканировать определенный файл.</p> <p class="listcontinue2">Файл должен быть расположен на том же компьютере, что и Kaspersky Scan Engine, или на удаленном жестком диске, который смонтирован на этом компьютере. </p> <p class="listcontinue2">Путь должен начинаться с корневой директории файловой системы компьютера, на котором установлен Kaspersky Scan Engine.</p> <p class="listcontinue2">Служба kavhttpd должна иметь права на чтение этого файла.</p> </li><li class="listbullet2"><code class="programcharacter">/</code> (косая черта с наклоном вправо).<p class="listcontinue2">Позволяет сканировать все файлы файловой системы.</p> </li></ul></li><li class="listbullet1"><span class="guicharacter">Cross-origin resource sharing</span> — указывает список источников (IP-адреса или имена хостов с протоколом), которым должен быть предоставлен доступ к службе kavhttpd.<p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2">IP-адрес или имя хоста с указанием протокола. </li><li class="listbullet2"><code class="programcharacter">*</code><p class="listcontinue2">Это значение позволяет любому источнику получить доступ к службе kavhttpd.</p>
</li><li class="listbullet2">Пустое значение.</li></ul><p class="listcontinue1">Этот параметр хранится в элементе <code class="programcharacter"><a id="h201539" class="englishcrossreferencetemplate" href="#201900" target="_self">CORS</a></code> файла конфигурации режима HTTP.</p> </li></ul><p class="attentionbody">В Windows рекомендуется указывать полный путь к файлу. В частности, настоятельно рекомендуется указывать полные пути к сертификату (<span class="guicharacter">Certificate</span>) и файлу ключа (<span class="guicharacter">Private key path</span>).</p>
<p class="bodytext">Если Kaspersky Scan Engine инициализируется в режиме ICAP, вы можете установить следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Port number</span> — указывает порт, который Kaspersky Scan Engine будет использовать, чтобы получать ICAP-запросы с содержимым для проверки.</li><li class="listbullet1"><span class="guicharacter">Send code 204</span> — указывает, должен ли Kaspersky Anti-Virus Engine отправлять код 204.</li><li class="listbullet1"><span class="guicharacter">Request mode address</span> — адрес, который kavicapd использует для обработки запросов в режиме запроса. <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">req</code>.</p> <p class="listcontinue1">Kaspersky Scan Engine включает в URL-адрес значение параметра <span class="guicharacter">Request mode address</span>, например:</p> <p class="listcontinue1"><code class="programcharacter">icap://icap-server.example.com:1344/req</code></p> <p class="attentioncontinue1">Не используйте одно и то же значение для параметров <span class="guicharacter">Request mode address</span> и <span class="guicharacter">Response mode address</span>.</p> </li><li class="listbullet1"><span class="guicharacter">Response mode address</span> — адрес, который kavicapd использует для обработки запросов в режиме ответа.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">resp</code>.</p> <p class="listcontinue1">Kaspersky Scan Engine включает в URL-адрес значение параметра <span class="guicharacter">Response mode address</span>, например:</p> <p class="listcontinue1"><code class="programcharacter">icap://icap-server.example.com:1344/resp</code></p> </li><li class="listbullet1"><span class="guicharacter">Keep-alive connection</span> — указывает, нужно ли использовать <a id="h207296" class="englishcrossreferencetemplate" href="#207291" target="_self">Keep-Alive</a>.</li><li class="listbullet1"><span class="guicharacter">Use Keep-alive unconditionally</span> — указывает, всегда ли Kaspersky Scan Engine использует постоянное соединение Keep-Alive, даже если клиенты ICAP не запрашивают его.</li><li class="listbullet1"><span class="guicharacter">Connection timeout</span> — время, в течение которого неактивное соединение должно оставаться открытым (в миллисекундах) в ожидании нового запроса от ICAP-клиента.<p class="listcontinue1">Диапазон возможных значений от 1 до 10000.</p> </li><li class="listbullet1"><span class="guicharacter">Maximum requests per connection</span> — максимальное количество запросов на одно подключение до его закрытия.<p class="listcontinue1">Диапазон возможных значений от 1 до 1000.</p> </li><li class="listbullet1"><span class="guicharacter">Partial mode</span> — позволяет сканировать файлы целиком, но отправлять их пользователю по частям до завершения проверки.<p class="listcontinue1">Возможные настройки для режима отправки по частям:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Delay</span> — указывает интервал (в секундах) между началом приема объекта и началом отправки его первого фрагмента.</li><li class="listbullet2"><span class="guicharacter">Chunk size</span> — определяет размер фрагментов объекта, передаваемых в период между началом приема объекта и окончанием проверки.</li><li class="listbullet2"><span class="guicharacter">Prevent re-downloading</span> — запрещает повторное скачивание заблокированных файлов браузером после разрыва соединения.</li><li class="listbullet2"><span class="guicharacter">Maximum cache size</span> — максимальный размер кеша в КБ для заблокированных URL-адресов.<p class="listcontinue2">Это максимальный объем ОЗУ, выделяемый для кеширования заблокированных URL-адресов.</p> <p class="listcontinue2">Диапазон возможных значений от 1 до 100000.</p> <p class="listcontinue2">Значение по умолчанию: 5000.</p> </li><li class="listbullet2"><span class="guicharacter">Lifetime for blocked URLs</span> — время жизни заблокированных URL-адресов, сохраненных в кеше (в секундах).<p class="listcontinue2">Диапазон возможных значений от 1 до 604800 (неделя).</p> <p class="listcontinue2">Значение по умолчанию: 1800.</p> </li></ul></li><li class="listbullet1">Дополнительные заголовки:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">User name HTTP header</span> — имя HTTP-заголовка, в котором имя пользователя HTTP-клиента передается в службу ICAP.<p class="listcontinue2">ICAP-служба запишет это значение в журналы.</p> <p class="listcontinue2">По умолчанию задано значение <code class="programcharacter">X-Client-Username</code>.</p> </li><li class="listbullet2"><span class="guicharacter">IP address HTTP header</span> — имя HTTP-заголовка, в котором IP-адрес HTTP-клиента передается в службу ICAP.<p class="listcontinue2">ICAP-служба запишет это значение в журналы.</p> <p class="listcontinue2">По умолчанию задано значение <code class="programcharacter">X-Client-IP</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Detected object name HTTP header</span> — имя поля заголовка, содержащего название обнаруженной угрозы.<p class="listcontinue2">ICAP-служба запишет это значение в журналы.</p> <p class="listcontinue2">По умолчанию значение этого параметра пустое.</p> </li><li class="listbullet2"><span class="guicharacter">Database version name HTTP header</span> — название поля заголовка, содержащего информацию о версии антивирусных баз, используемых Kaspersky Scan Engine для проверки объектов.</li><li class="listbullet2"><span class="guicharacter">Send X-Include</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Include</code> в свой ответ на запрос OPTIONS от ICAP-клиента. Чтобы включить отправку заголовка <code class="programcharacter">X-Include</code>, установите один или оба следующих флажка:<ul class="listbullet3"><li class="listbullet3"><span class="guicharacter">Request user name HTTP header</span> — значение, указанное в параметре <span class="guicharacter">User name HTTP header</span>. Если параметр <span class="guicharacter">User name HTTP header</span> пуст, флажок <span class="guicharacter">Request user name HTTP header</span> будет снят.</li><li class="listbullet3"><span class="guicharacter">Request IP address HTTP header</span> — значение, указанное в параметре <span class="guicharacter">IP address HTTP header</span>. Если параметр <span class="guicharacter">IP address HTTP header</span> пуст, флажок <span class="guicharacter">Request IP address HTTP header</span> будет снят.</li></ul><p class="listcontinue2">Если ни один из этих элементов не выбран, Kaspersky Scan Engine не будет включать заголовок <code class="programcharacter">X-Include</code> в ответы.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Infection-Found header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Infection-Found</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Infection-Found</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Violations-Found header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Violations-Found</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Violations-Found</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Response-Info header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Response-Info</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Response-Info</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Response-Desc header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Response-Desc</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Response-Desc</code>.</p> </li></ul></li><li class="listbullet1"><span class="guicharacter">Action on signal</span> – действие, которое должно выполняться при получении сигналов <code class="programcharacter">SIGUSR1</code> и <code class="programcharacter">SIGUSR2</code>.<p class="listcontinue1">В раскрывающихся списках <span class="guicharacter">SIGUSR1 signal</span> и <span class="guicharacter">SIGUSR2 signal</span> вы можете выбрать следующие действия для обоих сигналов:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Update and reload the anti-virus database</span> — обновление и перезагрузка баз с помощью встроенного функционала Kaspersky Scan Engine.<span class="guicharacter"> </span></li><li class="listbullet2"><span class="guicharacter">Reload the anti-virus database without updating</span> — перезагрузка баз без обновления.<p class="listcontinue2">Предполагается, что файлы в папке с базами уже обновлены и должны быть перезагружены.</p> </li><li class="listbullet2"><span class="guicharacter">Close log files in syslog format, then reopen them</span> — закрытие всех открытых файлов журналов в формате syslog и последующее их открытие для записи журналов в конец этих файлов.<p class="listcontinue2">Если файлы отсутствуют, плагин ICAP создаст их. Этот параметр позволяет выполнять ротацию журналов с помощью утилиты logrotate в режиме по умолчанию или с использованием директивы create.</p> </li></ul></li></ul><p class="bodytext">Для любого режима вы можете указать следующие параметры в разделе <span class="guicharacter">Maximum values</span>:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Sessions</span> — максимальное количество сеансов.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">10</code>.</p> <p class="attentioncontinue1">Не рекомендуется указывать значение, превышающее количество TCP-соединений, которые ваш HTTP-клиент может одновременно поддерживать с Kaspersky Scan Engine.</p> </li><li class="listbullet1"><span class="guicharacter">Connections</span> — максимальное количество активных TCP-соединений, которые KAV HTTP может поддерживать одновременно.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">100</code>.</p> </li><li class="listbullet1"><span class="guicharacter">Threads</span> — максимальное количество потоков сканирования. Вы можете использовать до 256 таких потоков. <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">8</code>.</p> </li><li class="listbullet1"><span class="guicharacter">Processes</span> — максимальное количество процессов проверки. Вы можете использовать до 256 таких процессов. <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">4</code>.</p> </li></ul><p class="bodytext">При применении новых настроек службы Kaspersky Anti-Virus Engine перезагружается.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179699"><p><a name="179699" style="display: none;">[Topic 179699]</a></p>
	<h3 id="t234500" class="heading3">Настройки сканирования (Scanning)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="boldcharacter">Scanning</span> на странице <span class="boldcharacter">Settings</span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="bodytext">Раздел <span class="boldcharacter">Scanning</span> содержит следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Enable reputation checking</span> — указывает, нужно ли использовать Kaspersky Security Network (KSN).<p class="listcontinue1">Если этот переключатель находится в положении <span class="guicharacter">Вкл.</span> и Пользовательское соглашение с конечным пользователем (EULA) для KSN не принято, оно будет отображаться, и вы должны принять его, чтобы использовать KSN.</p> </li><li class="listbullet1"><span class="guicharacter">Enable Phishing Protection</span> — указывает, <span class="guicharacter">включена</span> или <span class="guicharacter">выключена</span> защита от фишинга.</li><li class="listbullet1"><span class="guicharacter">Object scan timeout</span> — время ожидания в миллисекундах, необходимое для проверки отдельного объекта.</li><li class="listbullet1"><span class="guicharacter">Heuristic analysis level</span> — раскрывающийся список содержит уровни эвристического анализа.<p class="listcontinue1">Уровень может быть одним из следующих:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Disabled</span></li><li class="listbullet2"><span class="guicharacter">Low</span></li><li class="listbullet2"><span class="guicharacter">Medium</span></li><li class="listbullet2"><span class="guicharacter">High</span></li></ul></li><li class="listbullet1"><span class="guicharacter">Actions on detected objects</span> — выполняются после обнаружения угрозы или легальной программы, которая может быть использована злоумышленниками.<p class="listcontinue1">Этот параметр доступен, если Kaspersky Anti-Virus Engine инициализирован в режиме HTTP. Вы можете выбрать одно из следующих действий:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Disinfect and delete if cannot be disinfected (Вылечить или удалить, если вылечить невозможно).</span></li><li class="listbullet2"><span class="guicharacter">Disinfect and skip if cannot be disinfected (Вылечить или пропустить, если вылечить невозможно).</span></li><li class="listbullet2"><span class="guicharacter">Delete (Удалить).</span></li></ul><p class="attentioncontinue1">Вышеуказанные действия будут выполнены только в том случае, если Kaspersky Anti-Virus Engine обнаружит угрозу при обработке запроса <code class="programcharacter">scanfile</code>. Во всех остальных случаях Kaspersky Scan Engine отправляет уведомление только в том случае, если указанные действия могут быть применены к обнаруженному объекту.</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Skip (Пропустить).</span></li></ul></li><li class="listbullet1"><span class="guicharacter">Size limit for the received file</span> — определяет максимальный размер (в килобайтах) файла, который Kaspersky Scan Engine может проверить. Если для этого параметра установлено значение 0, Kaspersky Scan Engine сканирует файлы любого размера. Максимальное значение этого параметра 1073741824.</li><li class="listbullet1"><span class="guicharacter">Maximum depth</span> — указывает максимальную глубину распаковки вложенных архивов при сканировании.<p class="listcontinue1">Этот параметр доступен только в том случае, если в блоке <span class="guicharacter">Types of files to scan</span> установлен флажок <span class="guicharacter">Archives</span>.</p> </li><li class="listbullet1">В разделе <span class="guicharacter">Types of files to scan</span> вы найдете флажки для следующих параметров:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Packed objects</span> — указывает, нужно ли проверять упакованные объекты.</li><li class="listbullet2"><span class="guicharacter">Archives</span> — указывает, нужно ли проверять архивы.</li><li class="listbullet2"><span class="guicharacter">Email databases</span> — указывает, нужно ли проверять базы данных почтовых клиентов.</li><li class="listbullet2"><span class="guicharacter">Emails</span> — указывает, нужно ли проверять сообщения электронной почты.</li><li class="listbullet2"><span class="guicharacter">Macros in Microsoft Office documents</span> — указывает, нужно ли сканировать макросы и документы Microsoft Office.</li></ul></li><li class="listbullet1">Типы объектов, которые необходимо проверить в режиме REQMOD.<p class="listcontinue1">Этот параметр доступен, если Kaspersky Anti-Virus Engine инициализирован в режиме ICAP. Вы можете выбрать один из следующих типов объектов:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">URLs</span></li><li class="listbullet2"><span class="guicharacter">Files</span></li></ul></li><li class="listbullet1">Типы объектов, которые необходимо проверить в режиме RESPMOD.<p class="listcontinue1">Этот параметр доступен, если Kaspersky Anti-Virus Engine инициализирован в режиме ICAP. Вы можете выбрать один из следующих типов объектов:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">URLs</span></li><li class="listbullet2"><span class="guicharacter">Files</span></li></ul></li><li class="listbullet1">Форматы объектов, которые не нужно проверять.<p class="listcontinue1">По ссылке <span class="guicharacter">Exclusions by file formats</span> открывается окно <span class="guicharacter">File formats to exclude</span>.</p> </li><li class="listbullet1">Типы объектов, которые не нужно проверять.<p class="listcontinue1">Этот параметр доступен, если Kaspersky Anti-Virus Engine инициализирован в режиме ICAP. Чтобы указать исключения по типу объекта:</p> <ol class="listnumber2"><li class="listnumber2">Нажмите на ссылку <span class="guicharacter">Exclusions by Content-Type</span>.<p class="listcontinue2">Откроется окно <span class="guicharacter">Object types to exclude</span>.</p> </li><li class="listnumber2">Установите типы объектов, которые не нужно проверять.<p class="listcontinue2">Kaspersky Scan Engine сопоставляет HTTP-заголовок Content-Type со значениями этого правила исключения. Если HTTP-заголовок Content-Type содержит указанное значение, ICAP-плагин не проверяет этот объект.</p> </li><li class="listnumber2">Нажмите <span class="guicharacter">Add</span>, если вам нужно добавить еще одно правило исключения.</li><li class="listnumber2">Нажмите <span class="guicharacter">Apply</span>, чтобы применить этот параметр.</li></ol><p class="listcontinue1">Чтобы применить этот параметр, включите функцию предварительного просмотра на прокси-сервере.</p> </li><li class="listbullet1">URL-адреса, которые нельзя сканировать<p class="listcontinue1">Этот параметр доступен, если Kaspersky Anti-Virus Engine инициализирован в режиме ICAP. Чтобы указать исключения по URL-адресу:</p> <ol class="listnumber2"><li class="listnumber2">Нажмите на ссылку <span class="guicharacter">Exclusions by URL</span>.<p class="listcontinue2">Откроется окно <span class="guicharacter">Exclusion rules for URLs</span>.</p> </li><li class="listnumber2">Установите URL-адреса, которые нужно пропустить.<p class="listcontinue2">Kaspersky Scan Engine пропустит эти URL-адреса. Указанные URL-адреса не должны включать компоненты схемы, запроса и фрагмента. </p> <p class="listcontinue2">Допускается использование масок. Вы можете использовать подстановочный знак * для обозначения любой последовательности символов полного имени домена, начиная с третьего уровня и выше. Например, <code class="programcharacter">*.domain.com</code>. Это значение включает все поддомены <code class="programcharacter">domain.com</code>. Подстановочные знаки звездочки (*) и вопросительного знака (?) можно использовать в компоненте пути URL-адреса для обозначения любой последовательности символов или одного символа соответственно. Например, <code class="programcharacter">domain.com/test/page/*</code>. </p> </li><li class="listnumber2">Нажмите <span class="guicharacter">Add</span>, если вам нужно добавить еще одно правило исключения.</li><li class="listnumber2">Нажмите <span class="guicharacter">Apply</span>, чтобы применить этот параметр.</li></ol><p class="listcontinue1">Чтобы применить этот параметр, включите функцию предварительного просмотра на прокси-сервере.</p> </li><li class="listbullet1">Максимальный размер объекта, который можно просканировать<p class="listcontinue1">Этот параметр доступен, если Kaspersky Anti-Virus Engine инициализирован в режиме ICAP. Чтобы указать исключения по размеру объекта:</p> <ol class="listnumber2"><li class="listnumber2">Нажмите на переключатель <span class="guicharacter">Skip large objects</span>.</li><li class="listnumber2">Установите максимальный размер объекта, который можно просканировать, в килобайтах (КБ).<p class="listcontinue2">Если задан этот параметр, Kaspersky Scan Engine ожидает получения превью и сравнивает значение Content-Length HTTP-заголовка со значением этого параметра, а также проверяет фактический размер объекта. Если значение заголовка или фактический размер объекта больше указанного, ICAP-плагин не проверяет объект. Это относится как к запросам, сделанным в режиме предварительной проверки, так и к обычным запросам.</p> </li></ol><p class="listcontinue1">Чтобы применить этот параметр, включите функцию предварительного просмотра на прокси-сервере.</p> </li></ul><p class="bodytext">При применении новых настроек сканирования Kaspersky Scan Engine перезагружается.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="224195"><p><a name="224195" style="display: none;">[Topic 224195]</a></p>
	<h3 id="t234277" class="heading3">Настройки авторизации (Authorization)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="boldcharacter">Authorization</span> на странице <span class="boldcharacter">Settings</span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки недоступны, перезагрузите страницу.</p>
<p class="bodytext">Раздел <span class="boldcharacter">Authorization</span> содержит следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Enable HTTP clients authorization</span>. Указывает, следует ли Kaspersky Scan Engine использовать авторизацию по токену API.<p class="attentioncontinue1">Для авторизации токена API требуется <a id="h211898" class="englishcrossreferencetemplate" href="#210245" target="_self">HTTPS-соединение</a>.</p> </li><li class="listbullet1"><span class="guicharacter">Authorization header field</span>. Имя поля заголовка запроса, содержащего токен API. Значение, которое вы указываете здесь, должно соответствовать следующим требованиям:<ul class="listbullet2"><li class="listbullet2">Длина от 3 до 40 символов.</li><li class="listbullet2">Состоит из символов, разрешенных для имен полей заголовков в соответствии с <a class="hyperlinktemplate" href="https://tools.ietf.org/html/rfc7230#section-3.2.6" target="_blank">RFC 7230</a>.</li></ul><p class="listcontinue1">Значение по умолчанию: <span class="guicharacter">Authorization</span>.</p> </li><li class="listbullet1"><span class="guicharacter">Add bearer prefix</span>. Указывает, поддерживает ли Kaspersky Scan Engine схему аутентификации Bearer. Если этот переключатель активирован, Kaspersky Scan Engine ожидает, что поле заголовка запроса, имя которого указано в <span class="guicharacter">Authorization header field</span>, начинается с префикса <code class="programcharacter">Bearer</code>.</li></ul><p class="introheading">Управление токенами</p>
<p class="bodytext">Таблица <span class="guicharacter">API Tokens</span> содержит следующую информацию о токенах API:</p>
<ul class="listbullet1"><li class="listbullet1">Имя токена. Каждый токен имеет уникальное имя.</li><li class="listbullet1">Описание. Некоторые описания могут отсутствовать. Это свойство необязательно.</li><li class="listbullet1">Состояние. Kaspersky Scan Engine авторизует HTTP-клиент, только если его токен включен.</li></ul><p class="bodytext"> Из таблицы вы можете редактировать (<img id="f219908" src="edit_settings_profile.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">) или удалить (<img id="f201473" src="delete_settings_profile.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">) существующий токен. Редактирование токена аналогично добавлению токена (см. инструкцию ниже).</p>
<p class="procedureheading">Чтобы добавить новый токен:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите кнопку <span class="guicharacter">Add token</span>.</li><li class="listnumber1">Укажите параметры нового токена:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Name</span>. Уникальное имя токена. Имя должно содержать от 1 до 40 символов Unicode.</li><li class="listbullet2"><span class="guicharacter">Description</span>. Дополнительная информация о токене. Например, имя владельца токена. Описание может содержать до 1000 символов Unicode.</li><li class="listbullet2"><span class="guicharacter">Token</span>. Токен, который клиент должен отправить в Kaspersky Scan Engine API для авторизации. Значение должно быть уникальным и содержать от 4 до 100 символов ASCII. Должна быть как минимум одна заглавная и одна строчная буква латинского алфавита, одна цифра и один из следующих специальных символов: <code class="programcharacter">-._ ~ + /).</code><p class="listcontinue2">Чтобы Kaspersky Scan Engine сгенерировал для вас уникальный токен, нажмите кнопку <span class="guicharacter">Generate token</span>. Сгенерированный токен появится в поле <span class="guicharacter">Token</span>. Вы можете изменить это значение, если хотите.</p> <p class="attentioncontinue2">Скопируйте токен куда-нибудь, чтобы найти его позже. После нажатия кнопки <span class="guicharacter">Save</span> токен не будет доступен в Kaspersky Scan Engine GUI. В файле конфигурации <code class="programcharacter">kavhttpd.xml</code> значение токена зашифровано. Если вы забыли или потеряли токен, вы можете создать новый.</p> </li><li class="listbullet2"><span class="guicharacter">Enable token</span>. Активируйте этот переключатель, если вы хотите, чтобы Kaspersky Scan Engine авторизовал клиентов, указавших токен в заголовке запроса. Если переключатель деактивирован, Kaspersky Scan Engine не авторизует клиентов, указавших токен в заголовке запроса.<p class="attentioncontinue2">Если вы включили авторизацию по токену API и служба kavhttpd не запущена, запуск klScanEngineUI также инициирует запуск службы kavhttpd.</p> </li></ul></li><li class="listnumber1">Нажмите <span class="guicharacter">Save</span>.</li></ol><p class="bodytext">Новый токен появится в таблице <span class="guicharacter">API Tokens</span>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180283"><p><a name="180283" style="display: none;">[Topic 180283]</a></p>
	<h3 id="t234386" class="heading3">Правила ICAP (ICAP rules)</h3>
<p class="bodytext">В этом разделе описана страница <span class="boldcharacter">ICAP rules</span> Kaspersky Scan Engine GUI. На странице <span class="boldcharacter">ICAP rules</span> вы можете добавлять, удалять и редактировать правила ICAP. Вы можете создать столько правил ICAP, сколько захотите.</p>
<p class="bodytext">Эта страница доступна, если Kaspersky Scan Engine инициализирован в режиме ICAP.</p>
<p class="picture"><img id="f182816" src="settings_icap_rules.png" class="linkedpngfiletemplate" alt="Несколько строк правил ICAP. Каждая строка содержит параметры: режим ICAP, результат сканирования, шаблон ответа, сценарий для выполнения." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Страница правил ICAP</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="bodytext">Когда вы открываете страницу <span class="boldcharacter">ICAP rules</span>, Kaspersky Scan Engine считывает следующие данные, которые необходимо использовать при редактировании правил ICAP:</p>
<ul class="listbullet1"><li class="listbullet1">Имена шаблонов ответов, которые хранятся в директории, указанной в элементе <code class="programcharacter">ResponsesPath</code> файла конфигурации плагина ICAP.</li><li class="listbullet1">Имена скриптов, которые хранятся в директории, указанной в элементе <code class="programcharacter">CmdPath</code> файла конфигурации плагина ICAP.</li></ul><p class="bodytext">Одно правило ICAP содержит следующие поля:</p>
<ul class="listbullet1"><li class="listbullet1">Режим ICAP, соответствующий правилу.<p class="listcontinue1">Вы можете выбрать один из следующих режимов ICAP:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Request mode</span></li><li class="listbullet2"><span class="guicharacter">Response mode</span></li><li class="listbullet2"><span class="guicharacter">Any</span></li></ul></li><li class="listbullet1">Результат сканирования, после которого активируется правило.<p class="listcontinue1">Вы можете выбрать один из следующих <a id="h180152" class="englishcrossreferencetemplate" href="#179893" target="_self">результатов сканирования</a>:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Detected</span></li><li class="listbullet2"><span class="guicharacter">Not scanned</span></li><li class="listbullet2"><span class="guicharacter">Failed</span></li><li class="listbullet2"><span class="guicharacter">Macro</span></li><li class="listbullet2"><span class="guicharacter">Phishing</span></li><li class="listbullet2"><span class="guicharacter">Any</span></li><li class="listbullet2"><span class="guicharacter">Clean</span></li></ul></li><li class="listbullet1">Шаблон ответа.<p class="listcontinue1">Этот шаблон ответа используется на заблокированной веб-странице после активации правила.</p> <p class="listcontinue1">После загрузки веб-страницы <span class="boldcharacter">ICAP rules</span> вы можете выбрать один из шаблонов ответов, которые будет получать Kaspersky Scan Engine. В правиле ICAP вы можете указать либо шаблон ответа, либо скрипт для выполнения, но не то и другое вместе.</p> <p class="listcontinue1">Вы можете оставить это поле пустым.</p> </li><li class="listbullet1">Скрипт для выполнения.<p class="listcontinue1">Выполняется после активации правила.</p> <p class="listcontinue1">После загрузки веб-страницы <span class="boldcharacter">ICAP rules</span> вы можете выбрать один из скриптов, которые будет получать Kaspersky Scan Engine. В правиле ICAP вы можете указать либо шаблон ответа, либо скрипт для выполнения, но не то и другое вместе.</p> <p class="listcontinue1">Вы можете оставить это поле пустым.</p> </li></ul><p class="bodytext">Kaspersky Scan Engine не обрабатывает правила, в которых для параметра <span class="guicharacter">Scan result</span> задано значение <span class="guicharacter">Any</span>, а для <span class="guicharacter">Action</span> — <span class="guicharacter">None</span>. Вы должны избегать использовать эти правила (см. таблицу ниже).</p>
<p class="tablename">Недопустимые правила ICAP</p>
<p class="spacerfortables">
<table class="tableintopic" width="656" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Режим ICAP</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Результат сканирования</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="219"><p class="tableheading">Действие</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Response mode</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Any</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">None</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Request mode</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Any</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">None</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Any</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">Any</p>
</td>
<td style="border:1px solid #010101;" width="219"><p class="tablebodytext">None</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179701"><p><a name="179701" style="display: none;">[Topic 179701]</a></p>
	<h3 id="t234544" class="heading3">Настройки обновления (Update)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="guicharacter">Update</span> на странице <span class="boldcharacter">Settings</span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="bodytext">Раздел <span class="boldcharacter">Update</span> содержит следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Enable automatic updates</span> — указывает, должен ли Kaspersky Anti-Virus Engine периодически обновлять антивирусные базы.</li><li class="listbullet1"><span class="guicharacter">Automatic update period</span> — продолжительность (в минутах) автоматического обновления антивирусных баз.<p class="listcontinue1">Вы можете установить этот интервал, только если антивирусные базы обновляются автоматически.</p> <p class="listcontinue1">Мы рекомендуем установить этот интервал на 30 минут. Мы не рекомендуем указывать меньшее значение: оно не приведет к увеличению коэффициента обнаружения, но может стать причиной нестабильности работы Kaspersky Scan Engine.</p> </li><li class="listbullet1"><span class="guicharacter">Update from Kaspersky servers</span> — указывает, должен ли KAV Engine использовать только серверы &quot;Лаборатории Касперского&quot;.</li><li class="listbullet1"><span class="guicharacter">Custom sources</span> — веб-адреса пользовательского источника обновлений.<p class="listcontinue1">Настройка этих веб-адресов (и нажатие на кнопку <span class="guicharacter">Add source</span>) является обязательной, если KAV Engine должен использовать только пользовательские источники обновлений.</p> <p class="listcontinue1">Если Kaspersky Scan Engine должен использовать TLS при подключении к пользовательскому источнику обновлений, вы должны указать протокол <code class="programcharacter">https://</code> в адресе этого пользовательского источника обновлений.</p> </li><li class="listbullet1"><span class="guicharacter">Use Kaspersky servers if custom sources are unavailable</span> — установите этот флажок, если вы хотите, чтобы Kaspersky Scan Engine использовал этот параметр.</li><li class="listbullet1">Переключатель <span class="guicharacter">Back up the anti-virus database</span> в положении <span class="guicharacter">On</span> указывает на то, что KAV Engine будет выполнять резервное копирование антивирусных баз. По умолчанию этот параметр включен.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179702"><p><a name="179702" style="display: none;">[Topic 179702]</a></p>
	<h3 id="t234423" class="heading3">Настройки лицензирования (License)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="guicharacter">License</span> на странице <span class="guicharacter">Settings</span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="attentionbody">Когда Kaspersky Scan Engine работает в кластере, состоящем из нескольких экземпляров, импортированная лицензия будет применена ко всем экземплярам этого кластера.</p>
<p class="bodytext">В разделе <span class="boldcharacter">License</span> отображается следующая информация:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Key file</span>:<ul class="listbullet2"><li class="listbullet2">Имя файла ключа.<p class="listcontinue2">Это имя доступно в режиме простого лицензирования, т. е. если Kaspersky Scan Engine использует файл ключа.</p> </li><li class="listbullet2">Код активации.<p class="listcontinue2">Доступен в режиме лицензирования онлайн, то есть если Kaspersky Scan Engine использует код активации.</p> </li></ul></li><li class="listbullet1"><span class="guicharacter">Expiration date.</span><p class="listcontinue1">Дата истечения срока действия лицензии.</p>
<p class="picture"><img id="f182809" src="settings_license_status.png" class="linkedpngfiletemplate" alt="Информация о лицензировании: статус активации, имя файла ключа, дата окончания срока действия. Кнопка &quot;Change&quot;." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Веб-страница лицензирования</p>
</li></ul><p class="procedureheading">Чтобы заменить текущий файл ключа или код активации на новый:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите кнопку <span class="guicharacter">Change</span>.<p class="listcontinue1">Запустится мастер замены лицензии.</p> </li><li class="listnumber1">Укажите новый режим лицензирования.<ul class="listbullet2"><li class="listbullet2">Чтобы указать простой режим лицензирования, выберите параметр <span class="guicharacter">Key file</span>.</li><li class="listbullet2">Чтобы указать режим лицензирования онлайн, выберите параметр <span class="guicharacter">Activation code</span>.</li></ul></li><li class="listnumber1">Укажите новый файл ключа или код активации в зависимости от выбранного вами режима лицензирования.</li><li class="listnumber1">Нажмите <span class="boldcharacter">Activate</span>.<p class="picture"><img id="f182808" src="settings_license_change.png" class="linkedpngfiletemplate" alt="Форма для выбора файла ключа или ввода кода активации." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Страница замены лицензии</p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179703"><p><a name="179703" style="display: none;">[Topic 179703]</a></p>
	<h3 id="t234435" class="heading3">Настройки логирования (Logging)</h3>
<p class="bodytext">В этом разделе описывается раздел <span class="boldcharacter">Logging</span> на странице <span class="boldcharacter">Settings </span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="bodytext">Раздел <span class="boldcharacter">Logging</span> состоит из двух подразделов: <span class="guicharacter">Syslog</span> и <span class="guicharacter">Log files</span>.</p>
<p class="bodytext">В разделе <span class="guicharacter">Syslog</span> можно сделать следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Запустить или остановить логирование системного журнала.<p class="warningcontinue1">Если вы разрешаете отправку сообщений системного журнала, учтите, что эти сообщения будут содержать конфиденциальные данные, такие как личные данные, определенные GDPR, данные конфигурации продукта и информацию о лицензировании.</p> </li><li class="listbullet1">Указать параметры логирования системного журнала.<p class="listcontinue1">Настройки для режимов HTTP и ICAP различаются.</p> </li></ul><p class="procedureheading">Чтобы добавить и настроить адрес назначения для сообщений системного журнала в режиме HTTP или ICAP:</p>
<ol class="listnumber1"><li class="listnumber1">Выберите типы событий, которые будут регистрироваться в указанное место назначения.<p class="attentioncontinue1">Когда включено логирование системного журнала, события аудита не могут быть полностью исключены из сообщений системного журнала.</p> </li><li class="listnumber1">Укажите формат сообщений системного журнала.<ul class="listbullet2"><li class="listbullet2">CEF<p class="listcontinue2">Формат журналов CEF различается в режимах <a id="h194736" class="englishcrossreferencetemplate" href="#186767" target="_self">HTTP</a> и <a id="h193363" class="englishcrossreferencetemplate" href="#186631" target="_self">ICAP</a>.</p> </li><li class="listbullet2">RAW<p class="listcontinue2">Формат журналов RAW различается в режимах <a id="h194737" class="englishcrossreferencetemplate" href="#186769" target="_self">HTTP</a> и <a id="h193364" class="englishcrossreferencetemplate" href="#186652" target="_self">ICAP</a>.</p> </li></ul></li><li class="listnumber1">Выберите место назначения, которое будет использоваться для логирования журналов:<ul class="listbullet2"><li class="listbullet2">демон syslog</li><li class="listbullet2">файл<p class="listcontinue2">Укажите путь к директории, в которой будет создан файл журнала. Это может быть абсолютный или относительный путь к директории, в которой находится исполняемый файл службы (<code class="programcharacter">kavhttpd</code> для режима HTTP и <code class="programcharacter">kavicapd</code> для режима ICAP).</p> </li><li class="listbullet2">удаленный системный журнал<p class="listcontinue2">Укажите значение <code class="programcharacter">%PROTOCOL%%IP%:%PORT%</code>, где <code class="programcharacter">%PROTOCOL%</code> – это сетевой протокол (используйте tcp:// или udp:// для этого значения), <code class="programcharacter">%IP%</code> – это IPv4-адрес, на который приходят сообщения системного журнала, а <code class="programcharacter">%PORT%</code> – это порт, который принимает сообщения системного журнала.</p> </li></ul></li></ol><p class="bodytext">В разделе <span class="guicharacter">Log files</span> можно сделать следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Запустить или остановить отладочное логирование.<p class="warningcontinue1">Если вы включаете отладочное логирование, учтите, что сообщения журналов будут содержать конфиденциальные данные, такие как личные данные, определенные GDPR, данные конфигурации продукта и информацию о лицензировании.</p> </li><li class="listbullet1">Экспортировать журналы.<p class="listcontinue1">Это действие доступно, если остановлено отладочное логирование.</p> </li><li class="listbullet1">Удалить журналы.<p class="listcontinue1">Кнопка доступна, если остановлено отладочное логирование.</p> </li></ul><p class="bodytext">В разделе <span class="guicharacter">Log files</span> также есть:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Log directory</span> — путь к директории, в которой будут храниться файлы журнала.</li></ul><p class="bodytext">Вы не можете изменить этот параметр с помощью Kaspersky Scan Engine GUI. Вы должны отредактировать соответствующий файл конфигурации. В зависимости от режима, который вы выбрали в <a id="h183008" class="englishcrossreferencetemplate" href="#179825" target="_self">файле конфигурации Kaspersky Scan Engine</a>, укажите путь в httpdkavlog.ini или icapdkavlog.conf для режимов <a id="h180157" class="englishcrossreferencetemplate" href="#179879" target="_self">HTTP</a> и <a id="h190568" class="englishcrossreferencetemplate" href="#179896" target="_self">ICAP</a> соответственно.</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Log size (MB)</span> — текущий размер журнала в мегабайтах.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179704"><p><a name="179704" style="display: none;">[Topic 179704]</a></p>
	<h3 id="t234466" class="heading3">Настройки прокси (Proxy)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="guicharacter">Proxy</span> на странице <span class="guicharacter">Settings</span><span class="boldcharacter"></span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="bodytext">Раздел <span class="guicharacter">Proxy</span> содержит следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Use proxy server</span> — указывает, должен ли Kaspersky Anti-Virus Engine использовать прокси-сервер.</li><li class="listbullet1"><span class="guicharacter">Proxy address</span> — IP-адрес или хост прокси-сервера.<p class="listcontinue1">Этот параметр доступен, если используется прокси-сервер.</p> </li><li class="listbullet1"><span class="guicharacter">Port</span> — порт прокси-сервера.<p class="listcontinue1">Этот параметр доступен, если используется прокси-сервер.</p> </li><li class="listbullet1"><span class="guicharacter">User name (optional)</span> — логин для прокси-сервера.<p class="listcontinue1">Этот параметр доступен, если используется прокси-сервер. Логин скрыт, а вместо символов отображаются звездочки. Логин прокси-сервера хранится в зашифрованном виде.</p> </li><li class="listbullet1"><span class="guicharacter">Password (optional)</span> — пароль для прокси-сервера.<p class="listcontinue1">Этот параметр доступен, если используется прокси-сервер. Пароль скрыт, а вместо символов отображаются звездочки. Пароль прокси-сервера хранится в зашифрованном виде.</p> </li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="219610"><p><a name="219610" style="display: none;">[Topic 219610]</a></p>
	<h3 id="t234571" class="heading3">Настройки пользователей (Users)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="guicharacter">Users</span> на странице <span class="guicharacter">Settings</span>.</p>
<p class="bodytext">Если при загрузке веб-страницы произошла ошибка и настройки стали недоступны, перезагрузите страницу.</p>
<p class="bodytext">В разделе <span class="guicharacter">Users</span> отображается следующая информация:</p>
<ul class="listbullet1"><li class="listbullet1">Список существующих профилей пользователей.<p class="listcontinue1">Для каждого профиля пользователя отображается следующая информация:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Login</span> — уникальное имя пользователя.</li><li class="listbullet2"><span class="guicharacter">Full name</span> — полное имя пользователя. Оно не обязательно должно быть уникальным.</li><li class="listbullet2"><span class="guicharacter">Role</span> — роль пользователя.<p class="listcontinue2">Возможные значения:</p> <ul class="listbullet3"><li class="listbullet3"><span class="guicharacter">Администратор</span></li><li class="listbullet3"><span class="guicharacter">Оператор</span></li></ul></li><li class="listbullet2"><span class="guicharacter">Last login</span> — время и дата последнего входа в систему.</li></ul></li></ul><p class="bodytext">Вы можете добавить новый профиль пользователя, а также отредактировать или удалить существующий.</p>
<p class="introheading">Добавление нового профиля пользователя</p>
<p class="procedureheading">Чтобы добавить новый профиль пользователя:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите на кнопку <span class="guicharacter">Add new user</span> в правом верхнем углу списка пользователей.<p class="listcontinue1">Справа появится боковая панель <span class="guicharacter">User</span>.<span class="guicharacter"> </span></p> </li><li class="listnumber1">Заполните обязательные поля:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Login</span><p class="listcontinue2">Уникальное имя пользователя. Обязательное поле.</p>
</li><li class="listbullet2"><span class="guicharacter">Full name</span><p class="listcontinue2">Полное имя пользователя. Это поле необязательное.</p>
</li><li class="listbullet2"><span class="guicharacter">Password</span><p class="listcontinue2">Пароль. Обязательное поле. Значение должно соответствовать <a id="h180236" class="englishcrossreferencetemplate" href="#179705" target="_self">требованиям к паролю</a>.</p>
</li><li class="listbullet2"><span class="guicharacter">Confirm password</span><p class="listcontinue2">То же, что и выше. Обязательное поле.</p>
</li><li class="listbullet2"><span class="guicharacter">Role</span><p class="listcontinue2">Роль пользователя. Обязательное поле.</p>
</li></ul></li><li class="listnumber1">Если вы хотите, чтобы Kaspersky Scan Engine отображал местную дату и время вместо даты и времени в формате UTC, активируйте переключатель <span class="guicharacter">Use local timezone</span>. Это изменение повлияет только на пользователя, которого вы редактируете.</li><li class="listnumber1">Нажмите <span class="guicharacter">Save</span>.</li></ol><p class="introheading">Редактирование профиля пользователя</p>
<p class="attentionbody">Вы не можете изменить роль пользователя для профиля, с которым вы работаете в данный момент.</p>
<p class="procedureheading">Чтобы изменить профиль пользователя:</p>
<ol class="listnumber1"><li class="listnumber1">В строке с профилем пользователя, который вы хотите изменить, нажмите кнопку <span class="guicharacter">Edit</span> (<img id="f219908" src="edit_settings_profile.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">).<p class="listcontinue1"> Справа появится боковая панель <span class="guicharacter">User</span>.</p> </li><li class="listnumber1">Отредактируйте нужные вам параметры.<p class="attentioncontinue1">Когда вы меняете логин или пароль профиля пользователя, Kaspersky Scan Engine GUI выходит из этого профиля. Когда вы меняете роль профиля пользователя, изменения вступают в силу при следующем входе в систему с этим профилем.</p> </li><li class="listnumber1">Нажмите <span class="guicharacter">Save</span>.</li></ol><p class="introheading">Удаление профиля пользователя</p>
<p class="attentionbody">Вы не можете удалить профиль пользователя, с которым вы работаете в данный момент.</p>
<p class="procedureheading">Чтобы удалить профиль пользователя:</p>
<ol class="listnumber1"><li class="listnumber1">В строке с профилем пользователя, который вы хотите изменить, нажмите кнопку <span class="guicharacter">Delete</span> (<img id="f201473" src="delete_settings_profile.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">).<p class="listcontinue1">Справа появится боковая панель <span class="guicharacter">Delete user</span>.</p> </li><li class="listnumber1">Нажмите <span class="guicharacter">Confirm</span>.<p class="attentioncontinue1">Когда вы удаляете профиль пользователя, Kaspersky Scan Engine GUI выходит из этого профиля.</p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221467"><p><a name="221467" style="display: none;">[Topic 221467]</a></p>
	<h3 id="t234355" class="heading3">Экспорт настроек</h3>
<p class="bodytext">Вы можете экспортировать параметры Kaspersky Scan Engine в виде ZIP-архива с набором файлов конфигурации. </p>
<p class="bodytext">В архиве находятся следующие файлы конфигурации:</p>
<ul class="listbullet1"><li class="listbullet1"><a id="h183008" class="englishcrossreferencetemplate" href="#179825" target="_self">klScanEngineUI.xml</a></li><li class="listbullet1">Для режима HTTP:<ul class="listbullet2"><li class="listbullet2"><a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">kavhttpd.xml</a></li><li class="listbullet2"><a id="h180157" class="englishcrossreferencetemplate" href="#179879" target="_self">httpdkavlog.ini</a></li></ul></li><li class="listbullet1">Для режима ICAP:<ul class="listbullet2"><li class="listbullet2"><a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">kavicapd.xml</a></li><li class="listbullet2"><a id="h190568" class="englishcrossreferencetemplate" href="#179896" target="_self">icapdkavlog.conf</a></li></ul></li></ul><p class="procedureheading">Чтобы экспортировать настройки,</p>
<p class="bodytextindent">Нажмите кнопку<span class="guicharacter">Export configuration files</span> в левом нижнем углу любой страницы параметров Kaspersky Scan Engine. </p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179705"><p><a name="179705" style="display: none;">[Topic 179705]</a></p>
	<h2 id="t234293" class="heading2">Смена пароля </h2>
<p class="procedureheading">Чтобы изменить пароль для доступа к Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Нажмите кнопку с настройками текущего пользователя (<img id="f183233" src="login.png" class="linkedpngfiletemplate" alt="" vspace="0" hspace="0" align="bottom" border="0">) на нижней панели, а затем нажмите <span class="guicharacter">Profile</span>.<p class="listcontinue1"> Ваш профиль откроется справа.</p> </li><li class="listnumber1">Заполните поля:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Current password</span> — укажите текущий пароль.</li><li class="listbullet2"><span class="guicharacter">New password</span> — укажите новый пароль.</li><li class="listbullet2"><span class="guicharacter">Confirm new password</span> — подтвердите новый пароль.</li></ul><p class="listcontinue1">Все пароли скрыты, а вместо символов отображаются звездочки.</p> </li><li class="listnumber1">Нажмите <span class="guicharacter">Save</span>.</li></ol><p class="bodytext">После смены пароля все сеансы активной учетной записи, кроме текущего, будут закрыты.</p>
<p class="introheading">Требования к паролю</p>
<p class="bodytext">Пароль для доступа к Kaspersky Scan Engine GUI должен соответствовать следующим требованиям:</p>
<ul class="listbullet1"><li class="listbullet1">Пароль должен содержать только символы ASCII: буквы, цифры и следующие специальные символы:<p class="listcontinue1"><code class="programcharacter">! &quot; # $ % &amp; &#39; ( ) * + , - . / : ; &lt; = &gt; ? @ [ \ ] ^ _ ` { | } ~</code></p> </li><li class="listbullet1">Пароль должен содержать хотя бы одну строчную букву латинского алфавита.</li><li class="listbullet1">Пароль должен содержать хотя бы одну заглавную букву латинского алфавита.</li><li class="listbullet1">Пароль должен содержать хотя бы одну цифру.</li><li class="listbullet1">Пароль должен содержать хотя бы один специальный символ (<code class="programcharacter">!</code>, <code class="programcharacter">#</code>, <code class="programcharacter">@</code> и другие).</li><li class="listbullet1">Длина пароля должна быть от 6 до 16 символов включительно.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="185278"><p><a name="185278" style="display: none;">[Topic 185278]</a></p>
	<h2 id="t234597" class="heading2">Работа с бинарным файлом klScanEngineUI</h2>
<p class="bodytext">Вы можете запустить бинарный файл klScanEngineUI.exe вручную.</p>
<p class="introheading">Работа с бинарным файлом klScanEngineUI в Linux</p>
<p class="bodytext">Синтаксис Linux:</p>
<p class="bodytext"><code class="programcharacter">./klScanEngineUI [[-c &lt;path&gt;] [-p &lt;path&gt;] | [-w] | [-n] | [-v] | [-h]]</code></p>
<p class="bodytext">В таблице ниже описаны параметры klScanEngineUI в Linux.</p>
<p class="tablename">Параметры klScanEngineUI в Linux</p>
<table class="tableintopic" width="624" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="390"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="bodytext"><code class="programcharacter">-c &lt;path&gt;</code></p>
<p class="bodytext"><code class="programcharacter">--config &lt;path&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Задает путь к файлу конфигурации службы klScanEngineUI.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="bodytext"><code class="programcharacter">-p &lt;path&gt;</code></p>
<p class="bodytext"><code class="programcharacter">--pidfile &lt;path&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Задает путь к PID-файлу.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-w</code></p>
<p class="tablebodytext"><code class="programcharacter">--watchdog</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Запускает службу klScanEngineUI в сторожевом режиме.</p>
<p class="tablebodytext">В этом режиме klScanEngineUI перезагружается автоматически, если зависает или дает сбой.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-n</code></p>
<p class="tablebodytext"><code class="programcharacter">--no-daemon</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Включает режим nodaemon для службы klScanEngineUI.</p>
<p class="tablebodytext">При указании этого параметра служба klScanEngineUI запускается с высоким приоритетом.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-v</code></p>
<p class="tablebodytext"><code class="programcharacter">--version</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Показывает версию Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-h</code></p>
<p class="tablebodytext"><code class="programcharacter">--help</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Показывает справочную информацию.</p>
</td>
</tr>

</table>
<p class="introheading">Работа с бинарным файлом klScanEngineUI в Windows</p>
<p class="bodytext">Синтаксис в Windows:</p>
<p class="bodytext"><code class="programcharacter">klScanEngineUI.exe [[--svc] | [--reg] | [--del] | [-v] | [-h]]</code></p>
<p class="bodytext">В таблице ниже описаны параметры klScanEngineUI в Windows.</p>
<p class="tablename">Параметры klScanEngineUI в Windows</p>
<table class="tableintopic" width="624" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="390"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="bodytext"><code class="programcharacter">--svc</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Запускает службу.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="bodytext"><code class="programcharacter">--рег</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Добавляет службу klScanEngineUI в список служб Windows.</p>
<p class="tablebodytext">Название сервиса и его отображаемое имя – <code class="programcharacter">Kaspersky ScanEngine UI</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">--del</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Удаляет службу klScanEngineUI из списка служб Windows.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-v</code></p>
<p class="tablebodytext"><code class="programcharacter">--version </code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Показывает версию Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-h</code></p>
<p class="tablebodytext"><code class="programcharacter">--help</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Необязательный параметр.</p>
<p class="tablebodytext">Показывает справочную информацию.</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192471"><p><a name="192471" style="display: none;">[Topic 192471]</a></p>
	<h2 id="t234602" class="heading2">Запуск службы klScanEngineUI с файловым модулем systemd (Linux)</h2>
<p class="attentionbody">Только для систем Linux.</p>
<p class="bodytext">Вы можете запустить Kaspersky Scan Engine GUI, используя файл модуля klScanEngineUI.service для <code class="programcharacter">systemd</code>. Файл модуля позволяет вам добавить службу klScanEngineUI в список запуска служб и управлять службой вручную из командной строки.</p>
<p class="attentionbody">В этом разделе предполагается, что вы хотите добавить службу klScanEngineUI для всех пользователей. Для получения информации о том, как добавить службу и управлять ею от имени конкретного пользователя, обратитесь к официальной документации для <code class="programcharacter">systemd</code> и <code class="programcharacter">systemctl</code>.</p>
<p class="introheading">Автоматический запуск Kaspersky Scan Engine</p>
<p class="bodytext">Чтобы Kaspersky Scan Engine запускался автоматически, добавьте klScanEngineUI в список запуска служб.</p>
<p class="procedureheading">Чтобы добавить klScanEngineUI в список запуска служб:</p>
<ol class="listnumber1"><li class="listnumber1">Поместите файл модуля klScanEngineUI.service в директорию <code class="programcharacter">/etc/systemd/system/</code>.</li><li class="listnumber1">При необходимости <a id="h192506" class="englishcrossreferencetemplate" href="#192481" target="_self">отредактируйте файл модуля</a>.</li><li class="listnumber1">Перезагрузите <code class="programcharacter">systemd</code>, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl daemon-reload</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что файл модуля klScanEngineUI.service установлен, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl list-unit-files</p>
</td>
</tr>

</table> </li><li class="listnumber1">Включите запуск klScanEngineUI при старте системы, выполнив следующую команду:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl enable klScanEngineUI.service</p>
</td>
</tr>

</table> </li></ol><p class="introheading">Удаление Kaspersky Scan Engine из списка запуска служб</p>
<p class="bodytext">Чтобы удалить klScanEngineUI из списка запуска служб, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl disable klScanEngineUI.service</p>
</td>
</tr>

</table>
<p class="introheading">Управление Kaspersky Scan Engine с помощью systemd из терминала</p>
<p class="bodytext">Чтобы запустить klScanEngineUI без перезагрузки компьютера, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl start klScanEngineUI</p>
</td>
</tr>

</table>
<p class="attentionbody">После выполнения этой команды сценарий печатает сообщение <code class="programcharacter">[OK]</code> и немедленно возвращает управление терминалу, но для запуска службы <code class="programcharacter">klScanEngineUI</code> потребуется некоторое время.</p>
<p class="bodytext">Чтобы остановить klScanEngineUI без перезагрузки компьютера, выполните следующую команду:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl stop klScanEngineUI</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192481"><p><a name="192481" style="display: none;">[Topic 192481]</a></p>
	<h3 id="t234296" class="heading3">Изменение переменных в файле модуля klScanEngineUI (Linux)</h3>
<p class="attentionbody">Только для систем Linux.</p>
<p class="bodytext">Вы можете настроить Kaspersky Scan Engine, изменив одну или несколько переменных в файле модуля <code class="programcharacter">%distr_kit%/etc/klScanEngineUI.service</code>.</p>
<p class="introheading">Изменение пути к PID-файлу Kaspersky Scan Engine</p>
<p class="bodytext">Вы можете изменить эту переменную, если хотите создать PID-файл Kaspersky Scan Engine в директории, отличной от <code class="programcharacter">/var/run/klScanEngineUI.pid</code>.</p>
<p class="bodytext">В следующем примере показано, как эта переменная устанавливается в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">PIDFile=/var/run/klScanEngineUI.pid</p>
</td>
</tr>

</table>
<p class="introheading">Изменение переменных среды</p>
<p class="bodytext">Вы должны изменить эти переменные среды, если Kaspersky Scan Engine находится не в директории <code class="programcharacter">/opt/kaspersky/ScanEngine</code>.</p>
<p class="bodytext">В файле модуля используются следующие переменные среды:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SDKPATH</code> – указывает директорию, в которой находится Kaspersky Scan Engine. В следующем примере показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=SDKPATH=/opt/kaspersky/ScanEngine</p>
</td>
</tr>

</table> </li><li class="listbullet1"><code class="programcharacter">KL_PLUGINS_PATH</code> – указывает путь к директории, в которой находятся файлы плагина PPL, используемые Kaspersky Scan Engine. В следующем примере показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=KL_PLUGINS_PATH=/ppl</p>
</td>
</tr>

</table> </li><li class="listbullet1"><code class="programcharacter">LD_LIBRARY_PATH</code> – задает путь к директории, в которой находятся общие библиотеки, используемые Kaspersky Scan Engine. В следующем блоке показано, как эта переменная устанавливается в файле модуля:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Environment=LD_LIBRARY_PATH=/lib:/ppl</p>
</td>
</tr>

</table> </li></ul><p class="introheading">Изменение путей в команде, выполняемой при запуске klScanEngineUI</p>
<p class="bodytext">Вы должны изменить пути в команде, выполняемой при запуске klScanEngineUI, если вы поместили исполняемый файл <code class="programcharacter">klScanEngineUI</code> или файл конфигурации klScanEngineUI в директории, отличные от указанных в модульном файле, или если вы хотите создать PID-файл Kaspersky Scan Engine в директории, отличной от <code class="programcharacter">/var/run/klScanEngineUI.pid</code>.</p>
<p class="bodytext">В следующем примере показано, как эта команда устанавливается в файле модуля:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">ExecStart=/bin/sh -c &#39;cd ${SDKPATH}/bin; ./klScanEngineUI -c /etc/klScanEngineUI.xml -p /var/run/klScanEngineUI.pid&#39;</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="206592"><p><a name="206592" style="display: none;">[Topic 206592]</a></p>
	<h1 id="t234407" class="heading1">Настройка Kaspersky Scan Engine</h1>
<p class="bodytext">В этом разделе описаны общие настройки Kaspersky Scan Engine.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179825" target="_self">Редактирование файла конфигурации Kaspersky Scan Engine вручную</a></p><p class="relateditem"><a href="#180222" target="_self">Распознаваемые форматы файлов</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179825"><p><a name="179825" style="display: none;">[Topic 179825]</a></p>
	<h2 id="t234446" class="heading2">Редактирование файла конфигурации Kaspersky Scan Engine вручную</h2>
<p class="bodytext">В этом разделе описан файл конфигурации Kaspersky Scan Engine.</p>
<p class="bodytext">Файл конфигурации Kaspersky Scan Engine представляет собой XML-файл с именем klScanEngineUI.xml. Он находится в поддиректории <code class="programcharacter">etc</code> директории установки Kaspersky Scan Engine.</p>
<p class="bodytext">В таблице ниже описаны элементы файла конфигурации Kaspersky Scan Engine.</p>
<p class="tablename">Элементы файла конфигурации Scan Engine</p>
<p class="spacerfortables">
<table class="tableintopic" width="672" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="264"><p class="tableheading">Элемент</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="408"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">EULA/Common</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Указывает, принято ли Пользовательское соглашение с конечным пользователем (EULA) для Kaspersky Scan Engine:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">accepted</code><p class="tablelistcontinue">Пользовательское соглашение для Kaspersky Scan Engine принято.</p>
</li><li class="tablelistbullet"><code class="programcharacter">rejected</code><p class="tablelistcontinue">Пользовательское соглашение для Kaspersky Scan Engine не принято.</p>
</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">EULA/KSN</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Указывает, принято ли Пользовательское соглашение с конечным пользователем для Kaspersky Scan Network (KSN):</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">accepted</code><p class="tablelistcontinue">Пользовательское соглашение для KSN принято.</p>
</li><li class="tablelistbullet"><code class="programcharacter">rejected</code><p class="tablelistcontinue">Пользовательское соглашение для KSN не принято.</p>
</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">ServerSettings/EnableUI</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Указывает, должна ли быть включена веб-служба, реализующая Kaspersky Scan Engine GUI:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">0</code> (или <code class="programcharacter">false</code>)<p class="tablelistcontinue">Веб-служба не будет инициализирована.</p> <p class="tablelistcontinue">В этом случае все параметры в <code class="programcharacter">элементах ServerSettings</code> и <code class="programcharacter">DatabaseSettings</code> ни на что не влияют.</p> </li><li class="tablelistbullet"><code class="programcharacter">1</code> (или <code class="programcharacter">true</code>)<p class="tablelistcontinue">Будет сделана попытка инициализировать веб-службу.</p> </li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">ServerSettings/Mode</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Режим Kaspersky Scan Engine:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">httpd</code><p class="tablelistcontinue">Kaspersky Anti-Virus Engine будет инициализирован как HTTPD.</p>
</li><li class="tablelistbullet"><code class="programcharacter">icap</code><p class="tablelistcontinue">Kaspersky Anti-Virus Engine будет инициализирован как ICAP-плагин.</p>
</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">ServerSettings/ConnectionString</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">IP-адрес (или хост) и порт, на котором будет доступен Kaspersky Scan Engine GUI.</p>
<p class="tablebodytext">Вы должны получить доступ к Kaspersky Scan Engine GUI с компьютера, на котором установлен Kaspersky Scan Engine. В этом случае вам также будет доступна документация Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">ServerSettings/SSLCertificatePath</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Путь к сертификату Kaspersky Scan Engine в формате PEM.</p>
<p class="tablebodytext">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">ServerSettings/SSLPrivatePath</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Путь к закрытому ключу Kaspersky Scan Engine в формате PEM.</p>
<p class="tablebodytext">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">ServerSettings/TemplatesPath</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Путь к директории, в которой хранятся шаблоны Kaspersky Scan Engine GUI.</p>
<p class="tablebodytext">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла Kaspersky Scan Engine.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">DatabaseSettings/ConnectionString</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">IP-адрес и порт, по которому доступна база данных, используемая Kaspersky Scan Engine для хранения данных.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">DatabaseSettings/User</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Зашифрованное имя пользователя для аутентификации в базе данных, которую Kaspersky Scan Engine использует для хранения данных. Имя пользователя должно быть зашифровано с помощью утилиты kav_encrypt.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="264"><p class="tablebodytext"><code class="programcharacter">DatabaseSettings/Password</code></p>
</td>
<td style="border:1px solid #010101;" width="408"><p class="tablebodytext">Зашифрованный пароль для аутентификации в базе данных, которую Kaspersky Scan Engine использует для хранения данных. Пароль должен быть зашифрован с помощью утилиты kav_encrypt.</p>
</td>
</tr>

</table>
<p class="bodytext">Ниже приведен пример файла конфигурации Kaspersky Scan Engine.</p>
<table class="tableintopic" width="636" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="636"><p class="program">&lt;Settings&gt;</p>
<p class="program2">&lt;EULA&gt;</p>
<p class="program3">&lt;Common&gt;rejected&lt;/Common&gt;</p>
<p class="program3">&lt;KSN&gt;rejected&lt;/KSN&gt;</p>
<p class="program2">&lt;/EULA&gt;</p>
<p class="program2">&lt;ServerSettings&gt;</p>
<p class="program3">&lt;EnableUI&gt;true&lt;/EnableUI&gt;</p>
<p class="program3">&lt;Mode&gt;httpd&lt;/Mode&gt;</p>
<p class="program3">&lt;ConnectionString&gt;127.0.0.1:9443&lt;/ConnectionString&gt;</p>
<p class="program3">&lt;SSLCertificatePath&gt;../ssl/cert.pem&lt;/SSLCertificatePath&gt;</p>
<p class="program3">&lt;SSLPrivatePath&gt;../ssl/priv.pem&lt;/SSLPrivatePath&gt;</p>
<p class="program3">&lt;TemplatesPath&gt;../httpsrv/templates/&lt;/TemplatesPath&gt;</p>
<p class="program2">&lt;/ServerSettings&gt;</p>
<p class="program2">&lt;DatabaseSettings&gt; </p>
<p class="program3">&lt;ConnectionString&gt;10.65.81.3:8443&lt;/ConnectionString&gt;</p>
<p class="program3">&lt;User&gt;=a3Afasd+&lt;/User&gt;</p>
<p class="program3">&lt;Password&gt;=df2AfBB1&lt;/Password&gt;</p>
<p class="program2">&lt;/DatabaseSettings&gt;</p>
<p class="program">&lt;/Settings&gt;</p>
</td>
</tr>

</table>
<p class="spacer">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180222"><p><a name="180222" style="display: none;">[Topic 180222]</a></p>
	<h2 id="t234471" class="heading2">Распознаваемые форматы файлов</h2>
<p class="bodytext">Эта группа констант определяет форматы файлов, распознаваемые программой Format Recognizer. Вы можете настроить Format Recognizer для использования <a id="h180155" class="englishcrossreferencetemplate" href="#179868" target="_self">в режиме HTTP</a>, а также <a id="h180156" class="englishcrossreferencetemplate" href="#206590" target="_self">в режиме ICAP</a>.</p>
<p class="introheading">Текстовые форматы</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_GENERAL_TXT</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_GENERAL_CSV</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_GENERAL_HTML</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_GENERAL_HTML_STRICT</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_TEXT_REG</code></li></ul><p class="introheading">Форматы мультимедиа</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_FLV</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_F4V</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_AVI</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_3GPP</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_DIVX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_MKV</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_MOV</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_ASF</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_RM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_VOB</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_BIK</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_VIDEO_RTMP</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_MP3</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_FLAC</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_APE</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_OGG</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_AAC</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_WMA</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_AC3</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_WAV</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_MKA</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_RA</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_MIDI</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_AUDIO_CDA</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_JPEG</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_GIF</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_PNG</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_BMP</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_TIFF</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_EMF</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_EPS</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_PSD</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_IMAGE_CDR</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MULTIMEDIA_SWF</code></li></ul><p class="introheading">Форматы исполняемых файлов</p>
<table class="tableintopic" width="894" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="468"><p class="tableheading">Формат</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="174"><p class="tableheading">Описание</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="156"><p class="tableheading">Операционная система</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="96"><p class="tableheading">Расширения</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_EXE</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">32-разрядные исполняемые файлы (только exe)</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_EXEUI</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Исполняемые файлы программ с пользовательским интерфейсом и исполняемые файлы для подсистемы Microsoft POSIX</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_DLL</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Динамические библиотеки</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">dll, ocx, scr</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_RESOURCE</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Библиотеки ресурсов</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">dll</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_NET</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_ILONLY</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Исполняемые файлы, содержащие только Common Intermediate Language (CIL)</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe, dll, ocx, scr</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_ILLIBRARY</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Библиотеки Common Intermediate Language</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe, dll, ocx, scr</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">32-разрядные исполняемые файлы</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe, dll, ocx, scr</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_SYS</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Системные файлы</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">sys</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WIN32PE_NET_RESOURCE_WITH_POSSIBLE_TRIVIAL_CODE</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Библиотеки ресурсов .NET (могут содержать тривиальный код)</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">32-разрядные системы Windows</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">dll</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_DOS</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Исполняемые файлы, не основанные на Win32 или Win64 API</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">16-разрядные системы Windows, DOS, OS/2</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe, dll</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_DOS_NE_RESOURCE</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">Библиотеки ресурсов NE</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">16-разрядные системы Windows, DOS, OS/2</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">exe, dll</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_COM</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_JAVA</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_ELF</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_JS</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_VBS</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_BAT</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_MSI</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_DEB</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_RPM</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_SCRIPTS</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_MACHO</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_DEX</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_APK</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_PYC</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_APPLE_SCRIPT</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="468"><p class="tablebodytext"><code class="programcharacter">KAV_FF_EXECUTABLE_WINDOWS_SHELLLINK</code></p>
</td>
<td style="border:1px solid #010101;" width="174"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="156"><p class="tablebodytext">&nbsp;</p>
</td>
<td style="border:1px solid #010101;" width="96"><p class="tablebodytext">&nbsp;</p>
</td>
</tr>

</table>
<p class="introheading">Форматы офисных приложений</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_OPENXML</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_MSOFFICE_MACRO</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_MSOFFICE</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_RTF</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_PDF</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_MSG</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_EML</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_VSD</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_VDX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_XPS</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_ONE</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_ONEPKG</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_XSN</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_ODT</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_ODS</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_ODP</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_OFFICE_SXW</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_DOC</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_DOT</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_DOCX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_DOTX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_DOCM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_DOTM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLS</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLSX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLTX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLSM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLTM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLAM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_XLSB</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_PPT</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_PPTX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_POTX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_PPTM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_POTM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_PPSX</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_PPSM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_PUB</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_MSOFFICE_SCRAP</code></li></ul><p class="introheading">Файлы баз данных</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_DATABASE_MDB</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_DATABASE_ACCDB</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_DATABASE_ACCDC</code></li></ul><p class="introheading">Файлы архивов</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_ZIP</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_7Z</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_RAR</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_ISO</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_CAB</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_JAR</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_BZIP2</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_GZIP</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_ARJ</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_DMG</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_XAR</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_TAR</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_ARCHIVE_ACE</code></li></ul><p class="introheading">Файлы веб-архивов</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_TEXT_CHM</code></li><li class="listbullet1"><code class="programcharacter">KAV_FF_TEXT_MHT</code></li></ul><p class="introheading">Прочее</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">KAV_FF_CRYPTO_CAT</code></li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179826"><p><a name="179826" style="display: none;">[Topic 179826]</a></p>
	<h1 id="t234592" class="heading1">Проверка возможностей обнаружения вирусов</h1>
<p class="bodytext">В этом разделе объясняется, как проверить правильность обнаружения вредоносных объектов Kaspersky Scan Engine. </p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#180178" target="_self">О стандартном тестовом файле антивируса EICAR</a></p><p class="relateditem"><a href="#180193" target="_self">Проверка возможностей обнаружения в режиме HTTP</a></p><p class="relateditem"><a href="#179903" target="_self">Проверка возможностей обнаружения в режиме ICAP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180178"><p><a name="180178" style="display: none;">[Topic 180178]</a></p>
	<h2 id="t234267" class="heading2">О стандартном тестовом файле антивируса EICAR</h2>
<p class="bodytext">Поскольку использование реальных вредоносных программ в тестовых целях недопустимо, необходим файл, который не содержит вредоносного кода и может быть безопасно передан, но должен быть обнаружен антивирусным программным обеспечением как вредоносный объект или, более конкретно, как тестовый файл.</p>
<p class="bodytext">Европейский институт компьютерных антивирусных исследований (EICAR) распространяет такой файл для проверки работы антивируса. Он известен как &quot;Стандартный файл для тестирования антивируса (EICAR)&quot; и может быть загружен с официального сайта EICAR.</p>
<p class="bodytext">Чтобы загрузить тестовый файл или прочитать о нем подробнее, перейдите по этой ссылке: <a class="directhyperlinktemplate" href="https://www.eicar.org/?page_id=3950" target="_blank">https://www.eicar.org/?page_id=3950</a>.</p>
<p class="warningbody">Если на вашем компьютере уже установлено антивирусное программное обеспечение, отключите его перед загрузкой тестового файла.</p>
<p class="bodytext">Стандартный файл для тестирования антивируса (EICAR) содержит строку ASCII, которая при интерпретации командным процессором выводит текстовое сообщение и возвращает в командную строку.</p>
<p class="bodytext">Kaspersky Scan Engine обнаружит этот тестовый файл, пометит его как зараженный и выполнит действие, указанное в параметрах проверки.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180193"><p><a name="180193" style="display: none;">[Topic 180193]</a></p>
	<h2 id="t234590" class="heading2">Проверка возможностей обнаружения в режиме HTTP</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как проверить работу Kaspersky Scan Engine в режиме HTTP.</p>
<p class="introheading">Проверка корректности обнаружения вредоносных файлов Kaspersky Scan Engine</p>
<p class="procedureheading">Чтобы убедиться, что Kaspersky Scan Engine обнаруживает вредоносный файл корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Запустите kavhttpd.</li><li class="listnumber1">Запустите свой HTTP-клиент.</li><li class="listnumber1">Отсканируйте <a id="h180192" class="englishcrossreferencetemplate" href="#180178" target="_self">тестовый файл EICAR</a> с помощью вашего HTTP-клиента в <a id="h180274" class="englishcrossreferencetemplate" href="#179884" target="_self">режиме сканирования файлов</a>.<p class="listcontinue1">В следующем примере показано, как это сделать с помощью примера HTTP-клиента:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client -f eicar.txt</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что тестовый файл EICAR обнаружен.</li></ol><p class="introheading">Проверка корректности обнаружения Kaspersky Scan Engine вредоносных файлов в системной памяти</p>
<p class="procedureheading">Чтобы убедиться, что Kaspersky Scan Engine обнаруживает вредоносные файлы в системной памяти корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Запустите kavhttpd.</li><li class="listnumber1">Запустите свой HTTP-клиент.</li><li class="listnumber1">Просканируйте содержимое <a id="h180192_2" class="englishcrossreferencetemplate" href="#180178" target="_self">тестового файла EICAR</a> с помощью вашего HTTP-клиента в <a id="h180274_2" class="englishcrossreferencetemplate" href="#179884" target="_self">режиме сканирования памяти</a>.<p class="listcontinue1">В следующем примере показано, как это сделать с помощью примера HTTP-клиента:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client eicar.txt</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что тестовый файл EICAR обнаружен.</li></ol><p class="introheading">Проверка корректности обнаружения Kaspersky Scan Engine вредоносных и фишинговых URL-адресов</p>
<p class="procedureheading">Чтобы убедиться, что Kaspersky Scan Engine обнаруживает вредоносные и фишинговые URL-адреса корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Запустите kavhttpd.</li><li class="listnumber1">Запустите свой HTTP-клиент.</li><li class="listnumber1">Чтобы убедиться, что Kaspersky Scan Engine корректно определяет вредоносные URL-адреса, просканируйте <code class="programcharacter">http://bug.qainfo.ru/TesT/Wmuf_w</code> с помощью своего HTTP-клиента.<p class="listcontinue1">Этот URL-адрес не является вредоносным. &quot;Лаборатория Касперского&quot; использует этот URL-адрес для проверки возможностей обнаружения антивирусных программ.</p> <p class="listcontinue1">В следующем примере показано, как это сделать с помощью примера HTTP-клиента:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client -u <code class="programcharacter">http://bug.qainfo.ru/TesT/Wmuf_w</code></p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что URL-адрес обнаружен.</li><li class="listnumber1">Чтобы убедиться, что Kaspersky Scan Engine корректно определяет фишинговые URL-адреса, просканируйте <code class="programcharacter">http://bug.qainfo.ru/TesT/Aphish_w</code> с помощью своего HTTP-клиента.<p class="listcontinue1">Этот URL-адрес не является фишинговым. &quot;Лаборатория Касперского&quot; использует этот URL-адрес для проверки возможностей обнаружения антивирусных программ.</p> <p class="listcontinue1">В следующем примере показано, как это сделать с помощью примера HTTP-клиента:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">./kavhttp_client -u <code class="programcharacter">http://bug.qainfo.ru/TesT/Aphish_w</code></p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что URL-адрес обнаружен.</li></ol><p class="introheading">Тестирование корректности проверки репутации файлов и URL</p>
<p class="procedureheading">Чтобы убедиться, что проверка репутации файлов и URL-адресов выполняется корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Запросите тестовый файл KSN у своего персонального технического менеджера. Этот файл не является вредоносным и используется только для тестирования корректности проверки репутации файлов и URL-адресов.</li><li class="listnumber1">Убедитесь, что флаг <code class="programcharacter">KAV_SHT_ENGINE_KSN</code> не указан в элементе <code class="programcharacter">Flags</code> <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файла конфигурации режима HTTP</a>.</li><li class="listnumber1">Запустите kavhttpd.</li><li class="listnumber1">Запустите свой HTTP-клиент.</li><li class="listnumber1">Просканируйте тестовый файл KSN с помощью своего HTTP-клиента в <a id="h180274_3" class="englishcrossreferencetemplate" href="#179884" target="_self">режиме сканирования файлов</a>.</li><li class="listnumber1">Убедитесь, что тестовый файл KSN не обнаружен.</li><li class="listnumber1">Укажите флаг KAV_SHT_ENGINE_KSN в элементе <code class="programcharacter">Flags</code> файла конфигурации режима HTTP.</li><li class="listnumber1">Перезапустите службу kavhttpd.</li><li class="listnumber1">Повторно просканируйте тестовый файл KSN с помощью своего HTTP-клиента в режиме сканирования файлов.</li><li class="listnumber1">Убедитесь, что тестовый файл KSN обнаружен.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179903"><p><a name="179903" style="display: none;">[Topic 179903]</a></p>
	<h2 id="t234591" class="heading2">Проверка возможностей обнаружения в режиме ICAP</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как проверить работу Kaspersky Scan Engine в режиме ICAP.</p>
<p class="introheading">Проверка корректности обнаружения Kaspersky Scan Engine вредоносных и фишинговых URL-адресов</p>
<p class="procedureheading">Чтобы убедиться, что Kaspersky Scan Engine обнаруживает вредоносные URL-адреса корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что директория с шаблонами ответов содержит <a id="h180188" class="englishcrossreferencetemplate" href="#179895" target="_self">шаблон по умолчанию detect_req</a>.</li><li class="listnumber1"><a id="h193107" class="englishcrossreferencetemplate" href="#192988" target="_self">Настройте Kaspersky Scan Engine</a>. Задайте значение параметра <code class="programcharacter">RulesFilePath</code> для директории, которая содержит kavicapd_gui_rules.conf, образец файла правил службы, включенный в пакет распространения. </li><li class="listnumber1"><a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">Запустите службу kavicapd</a>.</li><li class="listnumber1">Создайте файл .txt со следующим содержимым:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">REQMOD icap://icap-server.example.com/req ICAP/1.0</p>
<p class="program">Host: icap-server.example.com</p>
<p class="program">Encapsulated: req-hdr=0, null-body=110</p>
<p class="program">&nbsp;</p>
<p class="program">GET /TesT/Wmuf_w HTTP/1.1</p>
<p class="program">Host: www.bug.qainfo.ru</p>
<p class="program">Accept: text/html, text/plain</p>
<p class="program">Accept-Encoding: compress</p>
<p class="program">&nbsp;</p>
</td>
</tr>

</table> <p class="listcontinue1">Убедитесь, что каждая строка заканчивается на CRLF, как того требует RFC 2616. Также убедитесь, что файл заканчивается пустой строкой (строкой, состоящей из символов CRLF).</p> <p class="listcontinue1">Это сообщение запроса REQMOD GET ICAP. </p> <p class="listcontinue1">В сообщении запрашивается тестовая страница без реального вредоносного контента.</p> </li><li class="listnumber1">Сохраните файл с соответствующим именем. В следующем примере этот файл называется icap_reqmod_malicious_detect.txt.</li><li class="listnumber1">Отправьте сообщение на порт, который использует служба kavicapd (по умолчанию порт 1344).<p class="listcontinue1">Конкретный способ отправки зависит от операционной системы, которую вы используете. В этом примере показано, как отправить сообщение, используя netcat:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program"> cat icap_reqmod_malicious_detect_.txt | nc localhost 1344</p>
</td>
</tr>

</table> <p class="listcontinue1">Служба kavicapd ответит измененными заголовками сообщений и сообщением с информацией о заблокированном URL-адресе.</p> </li><li class="listnumber1">Убедитесь, что тестовая веб-страница была заблокирована.<p class="listcontinue1">Когда веб-страница заблокирована, служба kavicapd возвращает <a id="h180188_2" class="englishcrossreferencetemplate" href="#179895" target="_self">HTML-шаблон ответа detect_req</a>. Шаблон ответа содержит следующую информацию о заблокированной веб-странице:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Mode: REQMOD</p>
<p class="program">Object name:</p>
<p class="program">Date: 2017-May-31 14:13:29.295710</p>
<p class="program">ICAPD version: KL ICAP Service v1.0 (KAV SDK v8.5.1.83)</p>
<p class="program">KAV SDK Version: KAV SDK v8.5.1.83</p>
<p class="program">URL: <code class="programcharacter">http://bug.qainfo.ru/TesT/Wmuf_w</code></p>
</td>
</tr>

</table> <p class="spacer"> <p class="spacer"> </li><li class="listnumber1">Создайте файл .txt со следующим содержимым:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">REQMOD icap://icap-server.example.com/req ICAP/1.0</p>
<p class="program">Host: icap-server.example.com</p>
<p class="program">Encapsulated: req-hdr=0, null-body=110</p>
<p class="program">&nbsp;</p>
<p class="program">GET <code class="programcharacter">/TesT/Aphish_w</code> HTTP/1.1</p>
<p class="program">Host: <code class="programcharacter">www.bug.qainfo.ru</code></p>
<p class="program">Accept: text/html, text/plain</p>
<p class="program">Accept-Encoding: compress</p>
</td>
</tr>

</table> </li><li class="listnumber1">Сохраните файл с соответствующим именем. В следующем примере этот файл называется icap_reqmod_phishing_detect.txt.</li><li class="listnumber1">Отправьте сообщение на порт, который использует служба kavicapd.<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">cat icap_reqmod_phishing_detect_.txt | nc localhost 1344</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что тестовая веб-страница была заблокирована.<p class="listcontinue1">Когда веб-страница заблокирована, служба kavicapd возвращает <a id="h180188_3" class="englishcrossreferencetemplate" href="#179895" target="_self">HTML-шаблон ответа detect_req</a>. Шаблон ответа содержит следующую информацию о заблокированной веб-странице:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Mode: REQMOD</p>
<p class="program">Object name:</p>
<p class="program">Date: 2017-May-31 14:13:29.295710</p>
<p class="program">ICAPD version: KL ICAP Service v1.0 (KAV SDK v8.5.1.83)</p>
<p class="program">KAV SDK Version: KAV SDK v8.5.1.83</p>
<p class="program">URL: <code class="programcharacter">http://bug.qainfo.ru/TesT/Aphish_w</code></p>
</td>
</tr>

</table> </li></ol><p class="introheading">Проверка корректности обнаружения Kaspersky Scan Engine вредоносного содержимого в HTTP-трафике</p>
<p class="procedureheading">Чтобы убедиться, что Kaspersky Scan Engine обнаруживает вредоносный контент в HTTP-трафике корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что директория с шаблонами ответов содержит <a id="h180188_4" class="englishcrossreferencetemplate" href="#179895" target="_self">шаблон по умолчанию detect_req</a>.</li><li class="listnumber1"><a id="h193107_2" class="englishcrossreferencetemplate" href="#192988" target="_self">Настройте Kaspersky Scan Engine</a>. Задайте значение параметра <code class="programcharacter">RulesFilePath</code> для директории, которая содержит kavicapd_gui_rules.conf, образец файла правил службы, включенный в пакет распространения. </li><li class="listnumber1"><a id="h193044_2" class="englishcrossreferencetemplate" href="#192990" target="_self">Запустите службу kavicapd</a>.</li><li class="listnumber1">Создайте файл .txt со следующим содержимым:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">REQMOD icap://icap-server.example.com/req?arg=87 ICAP/1.0</p>
<p class="program">Host: icap-server.example.com</p>
<p class="program">Encapsulated: req-hdr=0, req-body=155</p>
<p class="program">&nbsp;</p>
<p class="program">POST /origin-resource/form.pl HTTP/1.1</p>
<p class="program">Host: www.origin-server.example.com</p>
<p class="program">Accept: text/html, text/plain</p>
<p class="program">Accept-Encoding: compress</p>
<p class="program">Pragma: no-cache</p>
<p class="program">&nbsp;</p>
<p class="program">44</p>
<p class="program">X5O!P%@AP[4\PZX54(P^)7CC)7}$EICAR-STANDARD-ANTIVIRUS-TEST-FILE!$H+H*</p>
<p class="program">0</p>
</td>
</tr>

</table> <p class="listcontinue1">Убедитесь, что каждая строка заканчивается на CRLF, как того требует RFC 2616.</p> <p class="listcontinue1">Это сообщение запроса REQMOD POST ICAP. </p> <p class="listcontinue1">Оно содержит <a id="h180192" class="englishcrossreferencetemplate" href="#180178" target="_self">стандартный файл для тестирования антивируса (EICAR)</a>. Стандартный файл для тестирования антивируса (EICAR) не является вирусом и часто используется для тестирования антивирусного программного обеспечения.</p> </li><li class="listnumber1">Сохраните файл с соответствующим именем. В следующем примере этот файл называется icap_reqmod_detect.txt.</li><li class="listnumber1">Отправьте сообщение на порт, который использует служба kavicapd (по умолчанию порт 1344).<p class="listcontinue1">Конкретный способ отправки зависит от операционной системы, которую вы используете. В этом примере показано, как отправить сообщение, используя netcat:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">cat icap_reqmod_detect.txt | nc localhost 1344</p>
</td>
</tr>

</table> <p class="listcontinue1">Служба kavicapd ответит измененными заголовками сообщений и сообщением с информацией об обнаруженном объекте.</p> </li><li class="listnumber1">Убедитесь, что стандартный файл для тестирования антивируса (EICAR) был обнаружен.<p class="listcontinue1">При обнаружении файла EICAR служба kavicapd возвращает HTML-шаблон ответа detect_req. Шаблон ответа содержит следующую информацию об обнаруженном объекте:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">Mode: REQMOD</p>
<p class="program">Object name: EICAR-Test-File</p>
<p class="program">Date: 2017-May-31 14:17:12.077704</p>
<p class="program">ICAPD version: KL ICAP Service v1.0 (KAV SDK v8.5.1.83)</p>
<p class="program">KAV SDK Version: KAV SDK v8.5.1.83</p>
<p class="program">URL: www.origin-server.example.com/origin-resource/form.pl</p>
</td>
</tr>

</table> <p class="spacer"> </li></ol><p class="introheading">Тестирование корректности проверки репутации файлов и URL</p>
<p class="procedureheading">Чтобы убедиться, что проверка репутации файлов и URL-адресов выполняется корректно:</p>
<ol class="listnumber1"><li class="listnumber1">Запросите тестовый файл KSN у своего персонального технического менеджера. Этот файл не является вредоносным и используется только для тестирования корректности проверки репутации файлов и URL-адресов.</li><li class="listnumber1">Убедитесь, что директория с шаблонами ответов содержит <a id="h180188_5" class="englishcrossreferencetemplate" href="#179895" target="_self">шаблон по умолчанию detect_req</a>.</li><li class="listnumber1"><a id="h193107_3" class="englishcrossreferencetemplate" href="#192988" target="_self">Настройте Kaspersky Scan Engine</a>. <ul class="listbullet2"><li class="listbullet2">Задайте значение параметра <code class="programcharacter">RulesFilePath</code> для директории, которая содержит kavicapd_gui_rules.conf, образец файла правил службы, включенный в пакет распространения.</li><li class="listbullet2">Убедитесь, что для параметра <code class="programcharacter">UseKSN</code> установлено значение <code class="programcharacter">0</code>.</li></ul></li><li class="listnumber1"><a id="h193044_3" class="englishcrossreferencetemplate" href="#192990" target="_self">Запустите службу kavicapd</a>.</li><li class="listnumber1">Создайте файл .txt со следующим содержимым:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">REQMOD icap://icap-server.example.com/req?arg=87 ICAP/1.0</p>
<p class="program">Host: icap-server.example.com</p>
<p class="program">Encapsulated: req-hdr=0, req-body=155</p>
<p class="program">&nbsp;</p>
<p class="program">POST /origin-resource/form.pl HTTP/1.1</p>
<p class="program">Host: www.origin-server.example.com</p>
<p class="program">Accept: text/html, text/plain</p>
<p class="program">Accept-Encoding: compress</p>
<p class="program">Pragma: no-cache</p>
</td>
</tr>

</table> </li><li class="listnumber1">Под содержимым, которое вы добавили в файл .txt, вставьте новую строку.</li><li class="listnumber1">Под этой строкой вставьте содержимое тестового файла KSN.<p class="listcontinue1">Убедитесь, что каждая строка заканчивается на CRLF, как того требует RFC 2616.</p> </li><li class="listnumber1">Сохраните файл с соответствующим именем. В следующем примере этот файл называется icap_reqmod_detect_ksn.txt.</li><li class="listnumber1">Отправьте сообщение на порт, который использует служба kavicapd (по умолчанию порт 1344).<p class="listcontinue1">Конкретный способ отправки зависит от операционной системы, которую вы используете. В этом примере показано, как отправить сообщение, используя утилиту netcat:</p> <table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">cat icap_reqmod_detect_ksn.txt | nc localhost 1344</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что тестовый файл KSN не обнаружен.</li><li class="listnumber1">Установите значение параметра <code class="programcharacter">UseKSN</code> в файле конфигурации режима ICAP равным <code class="programcharacter">1</code>.</li><li class="listnumber1">Перезапустите службу kavicapd.</li><li class="listnumber1">Снова отправьте icap_reqmod_detect_ksn.txt службе kavicapd.</li><li class="listnumber1">Убедитесь, что тестовый файл KSN обнаружен.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221141"><p><a name="221141" style="display: none;">[Topic 221141]</a></p>
	<h1 id="t234526" class="heading1">Аудит системы</h1>
<p class="attentionbody">Только для систем Linux.</p>
<p class="bodytext">Kaspersky Scan Engine включает функцию аудита системы. Если используется Kaspersky Scan Engine GUI, аудит системы включен по умолчанию и его нельзя выключить. Кроме того, когда вы включаете логирование системного журнала, Kaspersky Scan Engine также предлагает вам включить аудит системы.</p>
<p class="bodytext">С помощью аудита системы намного проще контролировать работу Kaspersky Scan Engine и анализировать инциденты безопасности, когда они происходят.</p>
<p class="bodytext">Для анализа инцидентов может потребоваться следующая информация:</p>
<ul class="listbullet1"><li class="listbullet1">Кто или что является инициатором события, связанного с инцидентом.</li><li class="listbullet1">Какие действия предпринял инициатор и были ли они успешными.</li><li class="listbullet1">Если инициатором является пользователь Kaspersky Scan Engine, то кто предоставил пользователю права доступа.</li><li class="listbullet1">Как изменились параметры Kaspersky Scan Engine.</li></ul><p class="bodytext">На панели управления Kaspersky Scan Engine вы можете найти информацию об <a id="h221187" class="englishcrossreferencetemplate" href="#221146" target="_self">инициаторах событий</a> и <a id="h221188" class="englishcrossreferencetemplate" href="#221150" target="_self">детали событий</a>. </p>
<p class="attentionbody">Пользователи с ролью <em class="emphasischaracter">Оператор</em> могут просматривать только события, связанные со сканированием, и события, инициированные ими самими. Пользователи с ролью <em class="emphasischaracter">Администратор</em> могут просматривать информацию без ограничений. См. также подробную информацию о <a id="h219851" class="englishcrossreferencetemplate" href="#219850" target="_self">ролях пользователей</a>.</p>
<p class="bodytext">Если вы не используете Kaspersky Scan Engine GUI, можно найти информацию о событиях в <a id="h221488" class="englishcrossreferencetemplate" href="#221189" target="_self">сообщениях системного журнала</a>. </p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#221146" target="_self">Идентификация инициатора события</a></p><p class="relateditem"><a href="#221150" target="_self">Получение подробной информации о событиях на панели управления</a></p><p class="relateditem"><a href="#221189" target="_self">Получение подробной информации о событиях из системного журнала</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221146"><p><a name="221146" style="display: none;">[Topic 221146]</a></p>
	<h2 id="t234389" class="heading2">Идентификация инициатора события</h2>
<p class="bodytext">У каждого события в Kaspersky Scan Engine есть <em class="emphasischaracter">Initiator</em> – кто-то или что-то, что явилось причиной события. </p>
<p class="bodytext">Вы можете найти информацию об инициаторе на <a id="h180278" class="englishcrossreferencetemplate" href="#179695" target="_self">панели управления Kaspersky Scan Engine</a> в столбце <span class="guicharacter">Initiator</span> таблицы событий. Если вы хотите отобразить события, вызванные определенным инициатором, можно использовать фильтр <span class="guicharacter">Initiator</span>. </p>
<p class="bodytext">В столбце <span class="guicharacter">Initiator</span> возможны следующие значения:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="boldcharacter">Имя пользователя (логин)</span>. Это значение означает, что пользователь инициировал событие через Kaspersky Scan Engine GUI. Например, вошел в систему или перезапустил Kaspersky Scan Engine, нажав на кнопку <span class="guicharacter">Restart</span>.</li><li class="listbullet1"><span class="boldcharacter">Service Scan Engine</span>. Это значение указывает, что Kaspersky Scan Engine инициировал событие самостоятельно или по команде пользователя. Например, Kaspersky Scan Engine может запускать обновление по расписанию или запускать обновление после нажатия пользователем кнопки <span class="guicharacter">Update</span>. Нажатие на кнопку <span class="guicharacter">Update</span> здесь – это событие, инициированное пользователем, а запуск обновления – это отдельное событие, инициированное Kaspersky Scan Engine.</li><li class="listbullet1"><span class="boldcharacter">IP address</span>. Это значение указывает, что HTTP- или ICAP-клиент отправил запрос к Kaspersky Scan Engine API. Например, отправил файл на проверку.<p class="attentioncontinue1">IP-адрес инициатора запроса на сканирование также отображается в столбце <span class="guicharacter">Client</span> таблицы результатов сканирования. Вы можете найти эту таблицу на странице <span class="guicharacter"><a id="h180597" class="englishcrossreferencetemplate" href="#179696" target="_self">Scan results</a></span> в Kaspersky Scan Engine GUI.</p> </li></ul><p class="bodytext">Вы также можете найти информацию об инициаторе в <a id="h221488" class="englishcrossreferencetemplate" href="#221189" target="_self">сообщениях системного журнала</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221150"><p><a name="221150" style="display: none;">[Topic 221150]</a></p>
	<h2 id="t234370" class="heading2">Получение подробной информации о событиях на панели управления</h2>
<p class="bodytext">Вы можете найти подробную информацию о любом событии на <a id="h180278" class="englishcrossreferencetemplate" href="#179695" target="_self">панели управления Kaspersky Scan Engine</a> в столбце <span class="guicharacter">Details</span> таблицы событий.</p>
<p class="listheading">Подробная информация включает в себя следующие данные:</p>
<ul class="listbullet1"><li class="listbullet1">Какие действия были предприняты.</li><li class="listbullet1">Было ли действие успешным или нет.</li><li class="listbullet1">Дополнительная информация, если есть.</li></ul><p class="listheading">С точки зрения безопасности наиболее важными являются события, содержащие информацию о следующих действиях:</p>
<ul class="listbullet1"><li class="listbullet1">Вход пользователя в Kaspersky Scan Engine GUI.</li><li class="listbullet1">Попытка войти с неверными учетными данными.</li><li class="listbullet1">Включение или выключение модуля сканирования.</li><li class="listbullet1">Создание, изменение или удаление учетной записи пользователя.</li><li class="listbullet1">Изменение настроек Kaspersky Scan Engine.</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="221189"><p><a name="221189" style="display: none;">[Topic 221189]</a></p>
	<h2 id="t234369" class="heading2">Получение подробной информации о событиях из системного журнала</h2>
<p class="bodytext">Если <a id="h179951" class="englishcrossreferencetemplate" href="#179926" target="_self">логирование системного журнала включено</a>, Kaspersky Scan Engine отправляет информацию о событиях демону syslog в формате CEF или RAW. </p>
<p class="bodytext">В формате CEF информация включает:</p>
<ul class="listbullet1"><li class="listbullet1">Название события.</li><li class="listbullet1">Уровень важности события. Чем выше уровень, тем важнее событие.</li><li class="listbullet1">IP-адрес компьютера, на котором запущен Kaspersky Scan Engine, в формате IPv4.</li><li class="listbullet1">Имя хоста компьютера, на котором запущен Kaspersky Scan Engine.</li><li class="listbullet1">Описание события.</li></ul><p class="bodytext">В формате RAW информация включает описание события.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">Смотрите также:</p><p class="relateditem"><a href="#179879" target="_self">Настройка логирования в режиме HTTP</a></p><p class="relateditem"><a href="#186767" target="_self">Формат логов CEF в режиме HTTP</a></p><p class="relateditem"><a href="#186769" target="_self">Формат логов RAW в режиме HTTP</a></p><p class="relateditem"><a href="#179896" target="_self">Настройка логирования в режиме ICAP</a></p><p class="relateditem"><a href="#186631" target="_self">Формат логов CEF в режиме ICAP</a></p><p class="relateditem"><a href="#186652" target="_self">Формат логов RAW в режиме ICAP</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179684"><p><a name="179684" style="display: none;">[Topic 179684]</a></p>
	<h1 id="t234431" class="heading1">Логирование</h1>
<p class="bodytext">Этот раздел содержит информацию о том, как настроить и включить логирование Kaspersky Scan Engine. </p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179928" target="_self">Включение логирования вручную</a></p><p class="relateditem"><a href="#179926" target="_self">Файл конфигурации логирования</a></p><p class="relateditem"><a href="#179925" target="_self">Пользовательские данные, записываемые в лог</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179928"><p><a name="179928" style="display: none;">[Topic 179928]</a></p>
	<h2 id="t234447" class="heading2">Включение логирования вручную</h2>
<p class="bodytext">В этом разделе описывается, как включить логирование вручную.</p>
<p class="bodytext">Вы можете отдельно включить логирование для Kaspersky Anti-Virus Engine</p>
<p class="attentionbody">Логирование значительно снижает производительность Kaspersky Scan Engine. Рекомендуется использовать логирование только для отладки.</p>
<p class="introheading">Включение логирования Kaspersky Anti-Virus Engine</p>
<p class="bodytext">По умолчанию Kaspersky Scan Engine не логирует события KAV Engine.</p>
<p class="procedureheading">Чтобы включить логирование в Kaspersky Anti-Virus Engine:</p>
<ol class="listnumber1"><li class="listnumber1">Создайте файл с именем kave.ini в поддиректории ppl директории установки.</li><li class="listnumber1">Добавьте в kave.ini следующие строки:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">[LOGGING]</p>
<p class="program">WriteLog=9 </p>
</td>
</tr>

</table> </li><li class="listnumber1">При необходимости укажите другие <a id="h179951" class="englishcrossreferencetemplate" href="#179926" target="_self">параметры</a>.</li><li class="listnumber1">Сохраните и закройте kave.ini.</li><li class="listnumber1">Перезагрузите службу Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">В режиме HTTP <a id="h193043" class="englishcrossreferencetemplate" href="#192981" target="_self">перезапустите службу kavhttpd</a>.</li><li class="listbullet2">В режиме ICAP <a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">перезапустите службу kavicapd</a>.</li></ul></li></ol><p class="attentionbody">Параметры логирования для служб kavicapd/kavhttpd и Kaspersky Anti-Virus Engine синхронизируются при запуске и перезапуске службы klScanEngineUI. Kaspersky Scan Engine устанавливает уровень логирования (<code class="programcharacter">WriteLog</code>) и директорию журнала (<code class="programcharacter">LogsFolder</code>) в kave.ini такими же, как указано в разделе <code class="programcharacter">DebugLogging</code> файла icapdkavlog.conf (для режима ICAP) или httpdkavlog.ini (для режима HTTP).</p>
<p class="introheading">Включение логирования в режиме HTTP</p>
<p class="bodytext">По умолчанию логирование в режиме HTTP выключено. Kaspersky Scan Engine проверяет наличие файла конфигурации логирования httpdkavlog.ini при запуске службы kavhttpd. Если этот файл существует, Kaspersky Scan Engine считывает из него параметры.</p>
<p class="procedureheading">Чтобы включить логирование для службы kavhttpd:</p>
<ol class="listnumber1"><li class="listnumber1">Создайте файл с именем httpdkavlog.ini в директории, где находится бинарный файл kavhttpd.</li><li class="listnumber1">Установите значение элемента <code class="programcharacter">&lt;LogLevel&gt;</code> равным <code class="programcharacter">1</code>.</li><li class="listnumber1">При необходимости укажите остальные <a id="h180157" class="englishcrossreferencetemplate" href="#179879" target="_self">параметры</a>.</li><li class="listnumber1">Сохраните и закройте httpdkavlog.ini.</li><li class="listnumber1">Перезапустите службу kavhttpd.</li></ol><p class="introheading">Включение логирования в режиме ICAP</p>
<p class="bodytext">По умолчанию логирование в режиме ICAP выключено. Kaspersky Scan Engine проверяет файл конфигурации логирования icapdkavlog.conf при запуске службы kavicapd.</p>
<p class="procedureheading">Чтобы включить логирование для службы kavicapd:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте файл конфигурации логирования icapdkavlog.conf.</li><li class="listnumber1">Укажите <code class="programcharacter">debug</code> или <code class="programcharacter">dbg</code> в элементе <code class="programcharacter">&lt;Level&gt;</code>.</li><li class="listnumber1">При необходимости укажите другие <a id="h190568" class="englishcrossreferencetemplate" href="#179896" target="_self">параметры</a>.</li><li class="listnumber1">Сохраните и закройте icapdkavlog.conf.</li><li class="listnumber1">Перезапустите службу kavicapd.</li></ol><p class="introheading">Включение логирования в Kaspersky Scan Engine GUI</p>
<p class="procedureheading">Чтобы включить логирование Kaspersky Scan Engine GUI:</p>
<ol class="listnumber1"><li class="listnumber1">Включите логирование в файле конфигурации, соответствующем выбранному режиму Kaspersky Scan Engine (HTTP или ICAP).<ul class="listbullet2"><li class="listbullet2">Если используется режим HTTP, включите логирование в файле конфигурации логирования <a id="h180157_2" class="englishcrossreferencetemplate" href="#179879" target="_self">httpdkavlog.ini</a>.</li><li class="listbullet2">Если используется режим ICAP, включите логирование в файле конфигурации логирования <a id="h190568_2" class="englishcrossreferencetemplate" href="#179896" target="_self">icapdkavlog.conf</a>.</li></ul></li><li class="listnumber1">В Kaspersky Scan Engine GUI перейдите в раздел <span class="guicharacter">Settings</span> → <span class="guicharacter">Logging</span> и включите логирование.<p class="attentioncontinue1">Вы можете включить или выключить логирование в Kaspersky Scan Engine GUI без перезапуска службы kavicapd или kavhttpd.</p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179926"><p><a name="179926" style="display: none;">[Topic 179926]</a></p>
	<h2 id="t234432" class="heading2">Файл конфигурации логирования</h2>
<p class="bodytext">В этом разделе описаны свойства файла конфигурации логирования kave.ini. Файл конфигурации логирования kave.ini определяет параметры логирования Kaspersky Anti-Virus Engine. Логирование настраивается отдельно для служб <a id="h180157" class="englishcrossreferencetemplate" href="#179879" target="_self">kavhttpd</a> и <a id="h190568" class="englishcrossreferencetemplate" href="#179896" target="_self">kavicapd</a>.</p>
<p class="attentionbody">Параметры логирования для служб kavicapd/kavhttpd и Kaspersky Anti-Virus Engine синхронизируются при запуске и перезапуске службы klScanEngineUI. Kaspersky Scan Engine устанавливает уровень логирования (<code class="programcharacter">WriteLog</code>) и директорию журнала (<code class="programcharacter">LogsFolder</code>) в kave.ini такими же, как указано в разделе <code class="programcharacter">DebugLogging</code> файла icapdkavlog.conf (для режима ICAP) или httpdkavlog.ini (для режима HTTP).</p>
<p class="bodytext">В следующей таблице описаны свойства файла конфигурации логирования kave.ini.</p>
<p class="tablename">Свойства файла конфигурации логирования</p>
<p class="spacerfortables">
<table class="tableintopic" width="642" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="114"><p class="tableheading">Свойство</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="528"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="114"><p class="tablebodytext"><code class="programcharacter">Append</code></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Указывает, будут ли предыдущие файлы журналов сохраняться или удаляться при каждой инициализации Kaspersky Scan Engine.</p>
<p class="tablebodytext">Возможные значения:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">0</code><p class="tablelistcontinue">Автоматически удалять существующие файлы журналов.</p>
<p class="tablelistcontinue">Существующие файлы журналов в директории журналов автоматически удаляются при инициализации Kaspersky Scan Engine.</p>
</li><li class="tablelistbullet"><code class="programcharacter">1</code><p class="tablelistcontinue">Сохранять существующие файлы журналов.</p>
<p class="tablelistcontinue">Kaspersky Scan Engine записывает данные логирования в новые файлы журнала, каждый из которых соответствует определенному процессу. При выборе этого параметра Kaspersky Scan Engine не добавляет информацию в существующий журнал.</p>
</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="114"><p class="tablebodytext"><code class="programcharacter">SizeLimit</code></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="attentionbody">Только для платформ Windows. На Unix-подобных платформах этот параметр игнорируется, даже если он указан в kave.ini.</p>
<p class="tablebodytext">Устанавливает максимально возможный размер файла журнала в мегабайтах.</p>
<p class="tablebodytext">Возможные значения:</p>
<p class="tablebodytext">Любое положительное целое число в диапазоне от 0 до 4095.</p>
<p class="tablebodytext">Особые случаи:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">0<p class="tablelistcontinue">Нет ограничений на размер файла журнала. Файлы журнала могут расти бесконечно.</p> </li></ul><p class="attentionbody">Установка лимита на ненулевое значение автоматически включает режим добавления независимо от значения, указанного для свойства <code class="programcharacter">Append</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="114"><p class="tablebodytext"><code class="programcharacter">WriteLog</code></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Уровень логирования.</p>
<p class="tablebodytext">Рекомендуемые значения:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">0<p class="tablelistcontinue">Логирование выключено.</p> </li><li class="tablelistbullet">9<p class="tablelistcontinue">Уровень отладки.</p> </li></ul><p class="bodytext">Не рекомендуется использовать другие значения.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="114"><p class="tablebodytext"><code class="programcharacter">LogsFolder</code></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Путь к директории журналов.</p>
<p class="tablebodytext">Не заключайте путь в кавычки и не используйте escape-последовательность для пробелов.</p>
<p class="tablebodytext">Возможные значения:</p>
<p class="introheading">Относительный путь</p>
<p class="tablebodytext">Путь рассчитывается относительно директории, в которой находится файл конфигурации логирования kave.ini.</p>
<p class="tablebodytext">Если вы укажете несуществующую директорию, файлы журнала будут созданы в директории, содержащей двоичный файл используемой службы (<code class="programcharacter">kavhttpd</code> в режиме HTTP и <code class="programcharacter">kavicapd</code> в режиме ICAP).</p>
<p class="introheading">Абсолютный путь</p>
<p class="tablebodytext">Если вы укажете несуществующую директорию, файлы журнала будут созданы в директории, содержащей двоичный файл используемой службы (<code class="programcharacter">kavhttpd</code> в режиме HTTP и <code class="programcharacter">kavicapd</code> в режиме ICAP).</p>
<p class="introheading">Локальный путь</p>
<p class="tablebodytext">Директория, содержащая kave.ini. Локальный путь можно указать, установив для параметра <code class="programcharacter">LogsFolder</code> значение <code class="programcharacter">&quot;.&quot;</code> (без кавычек) или оставив его пустым.</p>
<p class="attentionbody">Полный пользовательский путь для файлов журнала не должен превышать ограничение в 260 символов, применяемое макросом <code class="programcharacter">MAX_PATH</code>.<br> Это целое число не включает дополнительные ограничения длины, такие как символ конца строки, используемый в C-строках, и другие ограничения, налагаемые платформами: например, когда файловая система сохраняет дополнительное короткое имя в формате 8.3 с исходным именем файла, чтобы поддерживать совместимость с предыдущими версиями.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="114"><p class="tablebodytext"><code class="programcharacter">Syslog</code></p>
</td>
<td style="border:1px solid #010101;" width="528"><p class="tablebodytext">Это свойство указывает, отправляет ли Kaspersky Scan Engine данные журнала демону syslog.</p>
<p class="tablebodytext">При использовании демона syslog вы можете записывать данные логирования в файлы журнала, другие программы или перенаправлять их на другой хост в соответствии с настройками файла конфигурации для демона syslog.</p>
<p class="tablebodytext">Возможные значения:</p>
<ul class="tablelistbullet"><li class="tablelistbullet">0<p class="tablelistcontinue">Не отправлять сообщения системного журнала демону syslog. Данные журнала записываются непосредственно в место, указанное в параметре <code class="programcharacter">LogsFolder</code>.</p> </li><li class="tablelistbullet">1<p class="tablelistcontinue">Перенаправить данные логирования демону syslog. В этом случае данные журнала хранятся в месте, указанном в файле конфигурации демона syslog. Значение параметра <code class="programcharacter">LogsFolder</code> игнорируется.</p> </li></ul><p class="attentionbody">Перед перенаправлением данных логирования демону syslog убедитесь, что демон syslog настроен для логирования отладки. Добавьте следующую строку в файл конфигурации <code class="programcharacter">syslog.conf</code>:<br><code class="programcharacter">*.=debug -/var/log/debug</code><br>Файл конфигурации syslog обычно находится в <code class="programcharacter">/etc/syslog.conf</code> и управляет выводом демона syslogd.</p>
</td>
</tr>

</table>
<p class="spacer">
<p class="introheading">Замечания</p>
<p class="bodytext">В некоторых случаях персональный технический менеджер (ПТМ) может попросить вас включить расширенное логирование. Расширенное логирование может помочь специалистам &quot;Лаборатории Касперского&quot; исследовать сложные проблемы.</p>
<p class="procedureheading">Чтобы включить расширенное логирование:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте файл <code class="programcharacter">kave.ini</code> (при необходимости создайте новый в папке с бинарным файлом <code class="programcharacter">kavehost</code>).</li><li class="listnumber1">В разделе <code class="programcharacter">Logging</code> добавьте параметр <code class="programcharacter">BssLogsFolder</code> и укажите место для хранения файлов с расширенными данными журнала.<p class="listcontinue1">Это местоположение должно отличаться от вашего стандартного местоположения данных логирования, указанного в <code class="programcharacter">LogsFolder</code>.</p> </li></ol><p class="introheading">Примеры</p>
<p class="bodytext">В следующем примере приводится пример файла конфигурации для каждой из целевых платформ. </p>
<p class="bodytext">Следующий пример файла конфигурации может использоваться на UNIX-подобной платформе.</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">[LOGGING]</p>
<p class="program">WriteLog=9</p>
<p class="program">Append=0</p>
<p class="program">LogsFolder=./logs</p>
<p class="program">Syslog=0</p>
</td>
</tr>

</table>
<p class="spacer">
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179925"><p><a name="179925" style="display: none;">[Topic 179925]</a></p>
	<h2 id="t234430" class="heading2">Пользовательские данные, записываемые в лог</h2>
<p class="bodytext">Когда Kaspersky Scan Engine запускает диагностическое логирование, некоторые пользовательские данные могут храниться локально в файлах журнала, созданных Kaspersky Scan Engine. Данные добавляются в файлы журнала без каких-либо изменений. Kaspersky Scan Engine не редактирует и не изменяет эти данные и не отправляет их куда-либо иным образом. Регистрируемые данные хранятся локально на вашем компьютере с запущенной копией Kaspersky Scan Engine в месте, указанном в <a id="h179951" class="englishcrossreferencetemplate" href="#179926" target="_self">файле kave.ini</a>.</p>
<p class="bodytext">Если для вас важна защита регистрируемых данных, вы должны реализовать метод защиты самостоятельно. Например, вы можете разрешить доступ к регистрируемым данным только определенным учетным записям пользователей.</p>
<p class="bodytext">Следующие типы пользовательских данных записываются в текстовом формате в файлы журнала:</p>
<ul class="listbullet1"><li class="listbullet1">Пути к сканируемым объектам.</li><li class="listbullet1">Проверенные URL-адреса.</li><li class="listbullet1">Адреса проверяемых модулей памяти.</li><li class="listbullet1">Содержание строки user agent Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Версия формата строки user agent.</li><li class="listbullet2">Идентификатор Kaspersky Scan Engine.</li><li class="listbullet2">Режим лицензирования.</li><li class="listbullet2">Идентификатор лицензии.</li><li class="listbullet2">Обновление идентификатора сеанса.</li><li class="listbullet2">Полная версия Kaspersky Scan Engine: мажорная версия, минорная версия, сборка, редакция и пакет исправлений.</li></ul></li></ul><p class="bodytext">Если Kaspersky Scan Engine использует прокси-сервер для подключения к интернету, он также может регистрировать следующую информацию:</p>
<ul class="listbullet1"><li class="listbullet1">IP-адрес прокси-сервера (IPv4 или IPv6) или имя хоста.</li><li class="listbullet1">Порт прокси-сервера.</li><li class="listbullet1">Имя пользователя для аутентификации прокси.</li></ul><p class="bodytext">Kaspersky Scan Engine не регистрирует пароли для аутентификации прокси.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220775"><p><a name="220775" style="display: none;">[Topic 220775]</a></p>
	<h1 id="t234402" class="heading1">Интеграция с SIEM-решениями</h1>
<p class="bodytext">В этом разделе объясняется, как интегрировать Kaspersky Scan Engine с SIEM-решениями, такими как Splunk, KUMA или ArcSight ESM. </p>
<p class="bodytext">Для интеграции с SIEM-решением Kaspersky Scan Engine должен отправлять в SIEM-решение события системного журнала в формате CEF или SYSLOG. </p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#220777" target="_self">Интеграция со Splunk</a></p><p class="relateditem"><a href="#220779" target="_self">Интеграция с ArcSight ESM</a></p><p class="relateditem"><a href="#220778" target="_self">Интеграция с KUMA</a></p><p class="relateditem"><a href="#220786" target="_self">Настройка Kaspersky Scan Engine для взаимодействия с SIEM</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220777"><p><a name="220777" style="display: none;">[Topic 220777]</a></p>
	<h2 id="t234403" class="heading2">Интеграция со Splunk</h2>
<p class="procedureheading">Чтобы интегрировать Kaspersky Scan Engine со Splunk:</p>
<ol class="listnumber1"><li class="listnumber1"><a id="h220989" class="englishcrossreferencetemplate" href="#220780" target="_self">Настройте Splunk</a>.</li><li class="listnumber1"><a id="h220794" class="englishcrossreferencetemplate" href="#220786" target="_self">Настройте Kaspersky Scan Engine</a>.</li></ol><p class="bodytext">После интеграции Kaspersky Scan Engine со Splunk вы можете <a id="h220990" class="englishcrossreferencetemplate" href="#220782" target="_self">искать информацию о событиях, которые Kaspersky Scan Engine отправлял в Splunk</a>.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#220780" target="_self">Настройка Splunk</a></p><p class="relateditem"><a href="#220782" target="_self">Поиск событий Kaspersky Scan Engine в Splunk</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220780"><p><a name="220780" style="display: none;">[Topic 220780]</a></p>
	<h3 id="t234308" class="heading3">Настройка Splunk</h3>
<p class="bodytext">Для лучшего парсинга событий Kaspersky Scan Engine в формате CEF установите <a class="hyperlinktemplate" href="https://splunkbase.splunk.com/app/487/" target="_blank">компонент CEF Extraction</a> на свой экземпляр Splunk.</p>
<p class="procedureheading">Чтобы настроить Splunk:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте веб-интерфейс Splunk.</li><li class="listnumber1">Перейдите в <span class="boldcharacter">Settings</span> &gt; <span class="boldcharacter">Data inputs</span>.<p class="picture"><img id="f220992" src="splunk_menu.png" class="linkedpngfiletemplate" alt="Меню &quot;Settings&quot; Splunk." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выберите <span class="boldcharacter">Settings</span> &gt; <span class="boldcharacter">Data inputs</span>.</p> </li><li class="listnumber1">В разделе <span class="boldcharacter">Local inputs</span> найдите в списке элемент <span class="boldcharacter">TCP</span> и нажмите <span class="boldcharacter">Add new</span>.</li><li class="listnumber1">Заполните открывшуюся форму:<ul class="listbullet2"><li class="listbullet2"><span class="boldcharacter">Port</span>. Укажите порт, на который Kaspersky Scan Engine должен отправлять журналы. Например, <span class="boldcharacter">9998</span>.</li><li class="listbullet2"><span class="boldcharacter">Source name override</span>. Укажите <span class="boldcharacter">scanengine</span>.</li></ul><p class="picture"><img id="f220993" src="splunk_port_and_source_name.png" class="linkedpngfiletemplate" alt="Port = 9998, Source name override = scanengine." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Добавление нового входа TCP</p> <p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">В следующем окне в разделе <span class="boldcharacter">Select Source Type</span> укажите тип источника:<ul class="listbullet2"><li class="listbullet2">Укажите <span class="boldcharacter">cefevents</span>, если вы установили <a class="hyperlinktemplate" href="https://splunkbase.splunk.com/app/487/" target="_blank">компонент CEF Extraction</a> для Splunk.</li></ul><p class="picture"><img id="f220994" src="splunk_cefevents.png" class="linkedpngfiletemplate" alt="Выбрано &quot;cefevents&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор <span class="boldcharacter">cefevents</span></p> <ul class="listbullet2"><li class="listbullet2">Укажите <span class="boldcharacter">syslog</span>, если вы не установили компонент CEF Extraction для Splunk.</li></ul><p class="listcontinue1">Вы можете указать поля <span class="boldcharacter">App Context</span> и <span class="boldcharacter">Index</span> в соответствии с вашими потребностями. Например, вы можете указать индекс событий, отправляемых Kaspersky Scan Engine.</p> </li><li class="listnumber1">Нажмите <span class="boldcharacter">Review</span>, чтобы проверить параметры, а затем <span class="boldcharacter">Submit</span>.</li></ol><p class="bodytext">После <a id="h220794" class="englishcrossreferencetemplate" href="#220786" target="_self">настройки Kaspersky Scan Engine</a> вы можете проверить правильность конфигурации Splunk.</p>
<p class="procedureheading">Чтобы проверить, правильно ли настроен Splunk:</p>
<ol class="listnumber1"><li class="listnumber1">В веб-интерфейсе Splunk откройте <span class="boldcharacter">Search &amp; Reporting</span>.</li><li class="listnumber1">Задайте параметры поиска следующим образом:<ul class="listbullet2"><li class="listbullet2">Если вы ранее указали <span class="boldcharacter">cefevents</span> в <span class="boldcharacter">Source Type</span>, введите следующую строку поиска:<p class="listcontinue2"><code class="programcharacter">source=&quot;scanengine&quot; sourcetype=&quot;cefevents&quot; </code></p> </li><li class="listbullet2">Если вы ранее указали <span class="boldcharacter">syslog</span> в <span class="boldcharacter">Source Type</span>, введите следующую строку поиска:<p class="listcontinue2"><code class="programcharacter">source=&quot;scanengine&quot; sourcetype=&quot;syslog&quot; </code></p> </li><li class="listbullet2"><span class="boldcharacter">Time filter</span>: укажите <span class="boldcharacter">All time (real-time)</span></li></ul></li><li class="listnumber1"> Запустите поиск.</li></ol><p class="bodytextindent">Если Splunk настроен правильно, он будет отображать события, отправленные решением Kaspersky Scan Engine, в режиме реального времени.</p>
<p class="picture"><img id="f221003" src="splunk_search_results.png" class="linkedpngfiletemplate" alt="Форма поиска событий Kaspersky Scan Engine и результаты поиска." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">События, отправленные решением Kaspersky Scan Engine</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220782"><p><a name="220782" style="display: none;">[Topic 220782]</a></p>
	<h3 id="t234507" class="heading3">Поиск событий Kaspersky Scan Engine в Splunk</h3>
<p class="introheading">Поиск результатов сканирования объекта</p>
<p class="procedureheading">Чтобы отобразить события, содержащие результаты сканирования объекта, </p>
<p class="bodytextindent">используйте следующий поисковый запрос:</p>
<p class="bodytextindent"><code class="programcharacter">source=&quot;scanengine&quot; &quot;Scan result&quot; msg=*scan* | eval cs2=coalesce(cs2,&quot;-&quot;) | rename cs1 as &quot;Scan Result&quot;, cs2 as &quot;Virus Name&quot;, fname as &quot;Object&quot;, src as &quot;Source Address&quot;, fileHash as &quot;Object Hashsum&quot; |table _time, &quot;Object Hashsum&quot;,Object,&quot;Scan Result&quot;,&quot;Virus Name&quot;,&quot;Source Address&quot;</code></p>
<p class="picture"><img id="f221029" src="splunk_object_scan_results.png" class="linkedpngfiletemplate" alt="Объекты Kaspersky Scan Engine сканируют форму и результаты поиска." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Поиск результатов сканирования объекта</p>
<p class="introheading">Поиск результатов сканирования URL-адресов</p>
<p class="procedureheading">Чтобы отобразить события, содержащие результаты проверки URL-адреса, </p>
<p class="bodytextindent">используйте следующий поисковый запрос:</p>
<p class="bodytextindent"><code class="programcharacter">source=&quot;scanengine&quot; &quot;Scan result&quot; msg=URL* | rename cs1 as &quot;Scan Result&quot;, request as &quot;Scanned URL&quot;, src as &quot;Source Address&quot; | table _time, &quot;Scanned URL&quot;, &quot;Scan Result&quot;, &quot;Source Address&quot;</code></p>
<p class="picture"><img id="f221030" src="splunk_url_check_results.png" class="linkedpngfiletemplate" alt="URL-адрес Kaspersky Scan Engine проверяет форму и результаты поиска." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Поиск результатов сканирования URL-адресов</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220779"><p><a name="220779" style="display: none;">[Topic 220779]</a></p>
	<h2 id="t234400" class="heading2">Интеграция с ArcSight ESM</h2>
<p class="procedureheading">Чтобы интегрировать Kaspersky Scan Engine с ArcSight ESM:</p>
<ol class="listnumber1"><li class="listnumber1"><a id="h220899" class="englishcrossreferencetemplate" href="#220896" target="_self">Настройте ArcSight ESM</a>.</li><li class="listnumber1"><a id="h220794" class="englishcrossreferencetemplate" href="#220786" target="_self">Настройте Kaspersky Scan Engine</a>.</li></ol><p class="bodytext">После интеграции Kaspersky Scan Engine с ArcSight ESM вы можете <a id="h220901" class="englishcrossreferencetemplate" href="#220898" target="_self">искать информацию о событиях, которые Kaspersky Scan Engine отправлял в ArcSight ESM</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220896"><p><a name="220896" style="display: none;">[Topic 220896]</a></p>
	<h3 id="t234298" class="heading3">Настройка ArcSight ESM</h3>
<p class="bodytext">Чтобы ArcSight ESM мог получать события от Kaspersky Scan Engine, должен быть установлен ArcSight SmartConnector типа Syslog Daemon. Вы можете установить ArcSight SmartConnector на любой компьютер, который может подключаться к Kaspersky Scan Engine и ArcSight ESM.</p>
<p class="procedureheading">Чтобы установить ArcSight SmartConnector:</p>
<ol class="listnumber1"><li class="listnumber1">Запустите программу установки ArcSight SmartConnector.<p class="attentioncontinue1">Эта программа является компонентом HP ArcSight и не входит в состав Kaspersky Scan Engine.</p> </li><li class="listnumber1">Укажите директорию установки ArcSight SmartConnector (далее <code class="programcharacter">%ARCSIGHT_HOME%</code>).</li><li class="listnumber1">Выберите <span class="boldcharacter">Don&#39;t create links</span>.</li><li class="listnumber1">После распаковки содержимого двоичного файла выберите <span class="boldcharacter">Add a Connector</span>.<p class="picture"><img id="f220907" src="arcsight_add_connector.png" class="linkedpngfiletemplate" alt="Окно &quot;Connector Setup&quot;. Выбран вариант &quot;Add a Connector&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор <span class="boldcharacter">Add a Connector</span></p> <p class="listcontinue2">Если это окно не отображается, выполните следующую команду:</p> <p class="listcontinue2"><code class="programcharacter">%ARCSIGHT_HOME%/current/bin/runagentsetup.sh</code></p> </li><li class="listnumber1">Выберите <span class="boldcharacter">Syslog Daemon</span> в качестве типа коннектора.</li><li class="listnumber1">Укажите параметры коннектора в форме <span class="boldcharacter">Enter the parameter details</span> следующим образом:<ul class="listbullet2"><li class="listbullet2"><span class="boldcharacter">Network port</span>. Укажите порт, на который Kaspersky Scan Engine должен отправлять события обнаружения.<p class="listcontinue2">Укажите этот же порт в параметрах <a id="h220794" class="englishcrossreferencetemplate" href="#220786" target="_self">Kaspersky Scan Engine Syslog</a>.</p> </li><li class="listbullet2"><span class="boldcharacter">IP address</span>. Укажите IP-адрес, на который Kaspersky Scan Engine должен отправлять события обнаружения.<p class="listcontinue2">Укажите тот же IP-адрес в параметрах <a id="h220794_2" class="englishcrossreferencetemplate" href="#220786" target="_self">Kaspersky Scan Engine Syslog</a>.</p> <p class="attentioncontinue2">Вы можете указать <span class="boldcharacter">(ALL)</span>, если хотите, чтобы Arcsight SmartConnector получал события со всех сетевых интерфейсов компьютера, на котором он работает. Обратите внимание, что вы не можете указать (ALL) в файле конфигурации Kaspersky Scan Engine.</p> </li><li class="listbullet2"><span class="boldcharacter">Protocol</span>. Укажите <span class="boldcharacter">Raw TCP</span>.</li><li class="listbullet2"><span class="boldcharacter">Forwarder</span>. Укажите <span class="boldcharacter">false</span>.</li></ul><p class="picture"><img id="f220912" src="arcsight_connector_details.png" class="linkedpngfiletemplate" alt="Окно &quot;Connector Setup&quot;. Network port = 9998, IP Address = (ALL), Protocol = Raw TCP, Forwarder = false." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Определение параметров коннектора</p> <p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">Укажите <span class="boldcharacter">ArcSight Manager (encrypted)</span> в качестве типа назначения.<p class="picture"><img id="f220950" src="arcsight_destination_type.png" class="linkedpngfiletemplate" alt="Окно &quot;Connector Setup&quot;. Тип назначения. Выбран вариант &quot;ArcSight Manager (encrypted)&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор типа назначения</p> <p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">Укажите параметры назначения:<ul class="listbullet2"><li class="listbullet2"><span class="boldcharacter">Manager Hostname</span>. Укажите хост, на котором запущен ArcSight Manager.</li><li class="listbullet2"><span class="boldcharacter">Manager Port</span>. Укажите хост, на котором доступен ArcSight Manager. Значение по умолчанию: 8443.</li><li class="listbullet2"><span class="boldcharacter">User</span>. Укажите имя пользователя ArcSight ESM, у которого есть права на регистрацию коннектора.</li><li class="listbullet2"><span class="boldcharacter">Password</span>. Укажите пароль пользователя ArcSight ESM.</li><li class="listbullet2"><span class="boldcharacter">AUP Master Destination</span>. Укажите <span class="boldcharacter">false</span>.</li><li class="listbullet2"><span class="boldcharacter">Filter Out All Events</span>. Укажите <span class="boldcharacter">false</span>.</li><li class="listbullet2"><span class="boldcharacter">Enable Demo CA</span>. Укажите <span class="boldcharacter">false</span>.</li></ul><p class="picture"><img id="f220984" src="arcsight_destination_parameters.png" class="linkedpngfiletemplate" alt="Окно &quot;Connector Setup&quot;. Manager Hostname = 127.0.0.1, Manager Port = 8443, User = admin, Password is hidden, AUP Master Destination = false, Filter Out All Events = false, Enable Demo CA = false." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Определение параметров назначения</p> <p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">Укажите детали коннектора:<ul class="listbullet2"><li class="listbullet2">Имя (можно указать произвольное значение).</li><li class="listbullet2">Местоположение (можно указать произвольное значение).</li><li class="listbullet2">Расположение устройства, которое должно отправлять события на коннектор (можно указать произвольное значение или оставить его пустым).</li><li class="listbullet2">Комментарий к коннектору (можно указать произвольное значение или оставить его пустым).</li></ul><p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">Если параметры ArcSight Manager действительны, примите импорт сертификата из места назначения.</li><li class="listnumber1">Если сертификат импортирован успешно, установите сервис ArcSight SmartConnector. <p class="listcontinue1">Если вы не запустите установку от имени пользователя root, отобразится следующее предупреждение:</p> <p class="picture"><img id="f220985" src="arcsight_root_needed.png" class="linkedpngfiletemplate" alt="Окно &quot;Connector Setup&quot;. Требуются права root." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Если вы не запускаете установку от имени пользователя root</p> <p class="listcontinue1">Файл <code class="programcharacter">%ARCSIGHT_HOME%/current/logs/agent.log</code> содержит сообщения о процессе установки.</p> <p class="listcontinue1">Вы можете пропустить следующий шаг, описывающий, как указать параметры службы.</p> <p class="listcontinue1">Если вы запускаете установку от имени пользователя root, выберите <span class="boldcharacter">Install as a service</span>.</p> <p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">Укажите параметры службы.<p class="listcontinue1">Рекомендуется установить имя службы, указанное в <span class="boldcharacter">Service Internal Name</span>, таким же, как имя коннектора.</p> <p class="picture"><img id="f220986" src="arcsight_service_parameters.png" class="linkedpngfiletemplate" alt="Окно &quot;Connector Setup&quot;. Service Internal Name = smartConnector, Service Display Name = KL Smart Connector, Start the service automatically = Yes." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Определение параметров службы</p> <p class="listcontinue1">Нажмите <span class="boldcharacter">Next</span>.</p> </li><li class="listnumber1">Чтобы запустить ArcSight SmartConnector, выполните следующую команду:<p class="listcontinue1"><code class="programcharacter">/etc/init.d/arc_$service_name start</code></p> <p class="listcontinue1">В этой команде <code class="programcharacter">$service_name</code> – это внутреннее имя службы.</p> </li></ol><p class="bodytext">После завершения настройки ArcSight ESM вы можете <a id="h220794_3" class="englishcrossreferencetemplate" href="#220786" target="_self">настроить Kaspersky Scan Engine</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220898"><p><a name="220898" style="display: none;">[Topic 220898]</a></p>
	<h3 id="t234505" class="heading3">Поиск событий Kaspersky Scan Engine в ArcSight ESM </h3>
<p class="introheading">Поиск событий из Kaspersky Scan Engine версии 2.0</p>
<p class="procedureheading">Чтобы найти в ArcSight ESM события, отправленные решением Kaspersky Scan Engine версии 2.0,</p>
<p class="bodytextindent">Укажите параметры поискового запроса следующим образом.</p>
<ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме ICAP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky Lab</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Kaspersky ICAP Server</span></p> </li></ul><p class="picture"><img id="f220988" src="arcsight_events_filter.png" class="linkedpngfiletemplate" alt="Условия событий. DeviceProduct = Kaspersky ICAP Server AND DeviceVendor = Kaspersky Lab." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Определение параметров поискового запроса</p>
<ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работает в режиме HTTP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky Lab</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Kaspersky HTTP Service</span></p> </li></ul><p class="introheading">Поиск событий из Kaspersky Scan Engine версии 2.1</p>
<p class="procedureheading">Чтобы найти в ArcSight ESM события, отправленные решением Kaspersky Scan Engine версии 2.1,</p>
<p class="bodytextindent">Укажите параметры поискового запроса следующим образом.</p>
<ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме ICAP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Scan Engine ICAP Service</span></p> </li><li class="listbullet2">Если Kaspersky Scan Engine работает в режиме HTTP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Scan Engine HTTP Service</span></p> </li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220778"><p><a name="220778" style="display: none;">[Topic 220778]</a></p>
	<h2 id="t234401" class="heading2">Интеграция с KUMA</h2>
<p class="bodytext">Чтобы интегрировать Kaspersky Scan Engine с KUMA:</p>
<ol class="listnumber1"><li class="listnumber1"><a id="h220793" class="englishcrossreferencetemplate" href="#220785" target="_self">Настройте KUMA.</a></li><li class="listnumber1"><a id="h220794" class="englishcrossreferencetemplate" href="#220786" target="_self">Настройте Kaspersky Scan Engine.</a></li></ol><p class="bodytext">После интеграции Kaspersky Scan Engine с KUMA вы можете <a id="h220795" class="englishcrossreferencetemplate" href="#220787" target="_self">искать информацию о событиях, которые Kaspersky Scan Engine отправлял в KUMA</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220785"><p><a name="220785" style="display: none;">[Topic 220785]</a></p>
	<h3 id="t234304" class="heading3">Настройка KUMA</h3>
<p class="bodytext">Чтобы KUMA получал события от Kaspersky Scan Engine, <a class="hyperlinktemplate" href="https://support.kaspersky.com/KUMA/1.0/en-US/194370.htm" target="_blank">добавьте в KUMA новый Коллектор</a>.</p>
<p class="bodytext">Настройте новый Коллектор следующим образом:</p>
<ul class="listbullet1"><li class="listbullet1">В настройках вкладки <span class="boldcharacter">Transport</span> установите для параметра <span class="boldcharacter">Kind</span> значение <span class="boldcharacter">tcp</span>.<p class="picture"><img id="f220789" src="kuma_transport.png" class="linkedpngfiletemplate" alt="Основные параметры транспорта: Connector - ScanEngine, Kind = tcp, Tenant = General, URL = :9991." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Настройки транспорта</p> </li><li class="listbullet1">В настройках <span class="boldcharacter">Event parsing</span> установите для параметра <span class="boldcharacter">Parsing method</span> значение <span class="boldcharacter">cef</span>.<p class="picture"><img id="f220790" src="kuma_event_parsing.png" class="linkedpngfiletemplate" alt="Настройки парсинга событий. Схема нормализации: Normalizer = [Example] CEF, Name = [Example] CEF, Tenant = General, Parsing method = cef, Store extra fields = Only errors." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Настройки парсинга событий</p> </li></ul><p class="bodytext">Указанные выше параметры необходимы для интеграции Kaspersky Scan Engine и KUMA. Остальные параметры настройте согласно документации KUMA.</p>
<p class="bodytext">После завершения настройки KUMA вы можете <a id="h220794" class="englishcrossreferencetemplate" href="#220786" target="_self">настроить Kaspersky Scan Engine</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220787"><p><a name="220787" style="display: none;">[Topic 220787]</a></p>
	<h3 id="t234506" class="heading3">Поиск событий Kaspersky Scan Engine в KUMA</h3>
<p class="introheading">Поиск событий из Kaspersky Scan Engine версии 2.1</p>
<p class="procedureheading">Чтобы найти в KUMA события, отправленные решением Kaspersky Scan Engine версии 2.1,</p>
<ol class="listnumber1"><li class="listnumber1">В KUMA перейдите на страницу <span class="boldcharacter">Events</span>.</li><li class="listnumber1">Укажите параметры поискового запроса следующим образом.<ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме ICAP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Scan Engine ICAP Service</span></p> </li></ul><p class="picture"><img id="f220797" src="kuma_kse_events_search_for_icap.png" class="linkedpngfiletemplate" alt="Поисковый запрос: DeviceVendor = Kaspersky и DeviceProduct = Scan Engine ICAP Service." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Поисковый запрос KUMA для Kaspersky Scan Engine в режиме ICAP</p> <ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работает в режиме HTTP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Scan Engine HTTP Service</span></p> </li></ul><p class="picture"><img id="f220798" src="kuma_kse_events_search_for_http.png" class="linkedpngfiletemplate" alt="Поисковый запрос: DeviceVendor = Kaspersky и DeviceProduct = Scan Engine HTTP Service." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Поисковый запрос KUMA для Kaspersky Scan Engine в режиме HTTP</p> </li></ol><p class="introheading">Поиск событий из Kaspersky Scan Engine версии 2.0</p>
<p class="procedureheading">Чтобы найти в KUMA события, отправленные решением Kaspersky Scan Engine версии 2.0,</p>
<ol class="listnumber1"><li class="listnumber1">В KUMA перейдите на страницу <span class="boldcharacter">Events</span>.</li><li class="listnumber1">Укажите параметры поискового запроса следующим образом.<ul class="listbullet2"><li class="listbullet2">Если Kaspersky Scan Engine работал в режиме ICAP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky Lab</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Kaspersky ICAP Server</span></p> </li><li class="listbullet2">Если Kaspersky Scan Engine работает в режиме HTTP:<p class="listcontinue2"><span class="boldcharacter">DeviceVendor = Kaspersky Lab</span></p> <p class="listcontinue2"><span class="boldcharacter">AND</span></p> <p class="listcontinue2"><span class="boldcharacter">DeviceProduct = Kaspersky HTTP Service</span></p> </li></ul></li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="220786"><p><a name="220786" style="display: none;">[Topic 220786]</a></p>
	<h2 id="t234303" class="heading2">Настройка Kaspersky Scan Engine для взаимодействия с SIEM</h2>
<p class="procedureheading">Чтобы настроить взаимодействие Kaspersky Scan Engine с SIEM-решением:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте Kaspersky Scan Engine GUI.</li><li class="listnumber1">Перейдите в <span class="guicharacter">Settings</span> &gt; <span class="guicharacter">Logging</span>.</li><li class="listnumber1">Включите <span class="guicharacter">Syslog</span> и установите следующие параметры:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Format</span>: <span class="boldcharacter">CEF</span>.</li><li class="listbullet2"><span class="guicharacter">Target</span>: <span class="boldcharacter">Remote host</span>.</li><li class="listbullet2"><span class="guicharacter">Events</span>: укажите типы событий, которые Kaspersky Scan Engine должен отправлять в SIEM-решение. Подробнее о типах событий см. в описании элемента <code class="programcharacter">LoggedEvent</code> в разделе <a id="h190568" class="englishcrossreferencetemplate" href="#179896" target="_self">Настройка логирования в режиме ICAP</a>.</li><li class="listbullet2">IP-адрес и порт SIEM-решения.</li></ul><p class="picture"><img id="f220792" src="kse_syslog_settings.png" class="linkedpngfiletemplate" alt="Запись событий по протоколу syslog включена. Параметры: События = ScanResultClean, ScanResultDetect, ScanResultOther; Формат = CEF; Конечный объект = Удаленный хост; IP-адрес и порт SIEM-решения." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Настройки системного журнала Kaspersky Scan Engine</p> </li><li class="listnumber1">Сохраните настройки.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="235568"><p><a name="235568" style="display: none;">[Topic 235568]</a></p>
	<h1 id="t235569" class="heading1">Интеграция с Docker и Kubernetes</h1>
<p class="bodytext">Чтобы развернуть и использовать Kaspersky Scan Engine с Docker и Kubernetes, обратитесь к документации по <a class="hyperlinktemplate" href="https://support.kaspersky.com/ScanEngine/docker_2.1/en-US/" target="_blank">интеграции Kaspersky Scan Engine с облачными сервисами Kubernetes</a> .</p>
<p class="bodytext">В документации также описана интеграция с Amazon ™ Elastic Kubernetes Service и Microsoft® Azure Kubernetes Service.</p>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179827"><p><a name="179827" style="display: none;">[Topic 179827]</a></p>
	<h1 id="t234286" class="heading1">Повышение производительности Kaspersky Scan Engine</h1>
<p class="bodytext">Kaspersky Scan Engine поддерживает многопоточность. Эта функция позволяет использовать Kaspersky Scan Engine в высоконагруженных системах. </p>
<p class="bodytext">В этом разделе описаны рекомендации по повышению производительности Kaspersky Scan Engine.</p>
<p class="introheading">Общие рекомендации по повышению производительности</p>
<p class="bodytext">Для достижения оптимальной производительности:</p>
<ul class="listbullet1"><li class="listbullet1">Используйте количество процессов сканирования, равное количеству ядер ЦП и двум потокам на процесс.</li><li class="listbullet1">Включите Keep-Alive для соединений <a id="h207296" class="englishcrossreferencetemplate" href="#207291" target="_self">ICAP</a> и <a id="h207358" class="englishcrossreferencetemplate" href="#207348" target="_self">HTTP</a>.</li></ul><p class="introheading">Рекомендации по повышению производительности Kaspersky Scan Engine в режиме HTTP</p>
<p class="bodytext">В следующем списке представлен рекомендуемый порядок настройки Kaspersky Scan Engine для максимальной производительности:</p>
<ol class="listnumber1"><li class="listnumber1">Укажите необходимое количество процессов и потоков сканирования в параметрах <code class="programcharacter">ScannersCount</code> и <code class="programcharacter">ThreadsCount</code> соответственно.<p class="listcontinue1"> Потоки обрабатывают задачи сканирования из очереди сканирования. Длина очереди сканирования указывается в параметре <code class="programcharacter">QueueLen</code> <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файла конфигурации режима HTTP</a>.</p> </li><li class="listnumber1">В параметре <code class="programcharacter">MaxHTTPSessionsNum</code> укажите максимальное количество активных TCP-соединений с Kaspersky Scan Engine.<p class="listcontinue1">При работе Kaspersky Scan Engine в среде с высокой нагрузкой рекомендуется устанавливать значение этого параметра больше, чем значение <code class="programcharacter">ThreadsCount</code>, чтобы очередь сканирования заполнялась быстрее и потоки сканирования не простаивали. Обратите внимание, что Kaspersky Scan Engine загружает файлы в системную память во время проверки. Чем больше активных сеансов у Kaspersky Scan Engine, тем больше памяти он потребляет. Вы можете ограничить максимально допустимый размер заголовков и тел HTTP-сообщений, отправляемых в KAV HTTPD, указав их максимальный размер в параметре <code class="programcharacter">MaxTCPFileSize</code>.</p> </li><li class="listnumber1">В параметре <code class="programcharacter">MaxIncomingConnectionsNum</code> укажите предполагаемое количество ожидающих TCP-соединений с Kaspersky Scan Engine. Обратите внимание, что это значение передается в системную функцию <code class="programcharacter">listen(2)</code> и может быть изменено в зависимости от операционной системы.</li></ol><p class="bodytext">Рекомендуется установить значение <code class="programcharacter">MaxIncomingConnectionsNum</code> в несколько раз больше, чем значение <code class="programcharacter">MaxHTTPSessionsNum</code>. Таким образом, ожидающие соединения будут помещены в очередь соединений, и задачи сканирования от этих клиентов не будут потеряны.</p>
<p class="attentionbody">Использование TLS значительно снижает производительность Kaspersky Scan Engine. Для достижения наилучших результатов используйте TLS 1.3, так как он является наиболее производительным.</p>
<p class="introheading">Рекомендации по повышению производительности Kaspersky Scan Engine в режиме ICAP</p>
<p class="bodytext">Укажите необходимое количество процессов и потоков сканирования в параметрах <code class="programcharacter">ScannersCount</code> и <code class="programcharacter">ThreadsCount</code> соответственно.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192993"><p><a name="192993" style="display: none;">[Topic 192993]</a></p>
	<h1 id="t234541" class="heading1">Удаление Kaspersky Scan Engine</h1>
<p class="bodytext">В этом разделе описано, как удалить Kaspersky Scan Engine.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#192994" target="_self">Удаление с помощью деинсталлятора (Linux и Windows)</a></p><p class="relateditem"><a href="#199825" target="_self">Удаление Kaspersky Scan Engine на Linux</a></p><p class="relateditem"><a href="#199826" target="_self">Удаление Kaspersky Scan Engine на Windows</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192994"><p><a name="192994" style="display: none;">[Topic 192994]</a></p>
	<h2 id="t234540" class="heading2">Удаление с помощью деинсталлятора (Linux и Windows)</h2>
<p class="bodytext">В этом разделе описано, как удалить Kaspersky Scan Engine с помощью исполняемого файла <code class="programcharacter">uninstall</code> (Linux) или <code class="programcharacter">uninstall.exe</code> (Windows).</p>
<p class="bodytext">Перед удалением Kaspersky Scan Engine убедитесь, что файлы из директории <code class="programcharacter">%service_dir%</code> не задействованы ни в одном процессе.</p>
<p class="procedureheading">Чтобы удалить Kaspersky Scan Engine:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Перейдите в директорию, отличную от <code class="programcharacter">%service_dir%</code>, и запустите <code class="programcharacter">uninstall</code> оттуда, например с помощью командной строки.<p class="listcontinue1">Если на компьютере запущен экземпляр Kaspersky Scan Engine, деинсталлятор остановит его.</p> </li><li class="listnumber1">Выберите, удалить базу с данными Kaspersky Scan Engine или нет.<p class="attentioncontinue1">Деинсталлятор пропускает этот шаг, если удаляемый экземпляр Kaspersky Scan Engine входит в состав кластера, содержащего другие экземпляры. Вы можете удалить базу данных при удалении последнего экземпляра Kaspersky Scan Engine в кластере.</p> </li></ol><p class="bodytext">Если вы выбрали удаление, <code class="programcharacter">uninstall</code> удалит следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Базу, которая содержит данные Kaspersky Scan Engine.<p class="attentioncontinue1">Установка PostgreSQL не будет удалена, как и учетная запись пользователя базы данных PostgreSQL, созданная вами во время установки. Будет удалена только база данных Kaspersky Scan Engine <code class="programcharacter">kavebase</code>. Если вы хотите переустановить Kaspersky Scan Engine, удалите учетную запись пользователя базы данных.</p> <p class="listcontinue1">Чтобы удалить учетную запись пользователя базы данных, выполните следующую команду:</p> <p class="listcontinue1"><code class="programcharacter">DROP ROLE &quot;%account_name%&quot;;</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%account_name%</code> – это имя учетной записи пользователя базы данных, которую вы создали во время установки.</p> </li><li class="listbullet1">Директорию, в которую был установлен Kaspersky Scan Engine.</li><li class="listbullet1">Директорию с временными файлами Kaspersky Scan Engine.</li><li class="listbullet1">Службу Kaspersky Scan Engine (из списка служб).</li></ul>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="199825"><p><a name="199825" style="display: none;">[Topic 199825]</a></p>
	<h2 id="t234542" class="heading2">Удаление Kaspersky Scan Engine на Linux </h2>
<p class="bodytext">Этот раздел содержит информацию о том, как удалить Kaspersky Scan Engine на операционных системах Linux.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#180699" target="_self">Удаление вручную (Linux)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180699"><p><a name="180699" style="display: none;">[Topic 180699]</a></p>
	<h3 id="t234443" class="heading3">Удаление вручную (Linux)</h3>
<p class="bodytext">В этом разделе описано, как удалить Kaspersky Scan Engine вручную.</p>
<p class="introheading">Удаление Kaspersky Scan Engine 2.1 и более поздней версии вручную</p>
<p class="procedureheading">Чтобы вручную удалить Kaspersky Scan Engine 2.1 и более поздней версии:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavicapd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service kavhttpd stop</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">service klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1">Удалитье Kaspersky Scan Engine из списка служб.<ul class="listbullet2"><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">systemctl disable kavicapd</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">systemctl disable kavhttpd</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">systemctl disable klScanEngineUI</code></p> </li></ul></li><li class="listnumber1">Удалите символьные ссылки на файлы конфигурации Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">rm /etc/kavicapd.xml</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">rm /etc/kavhttpd.xml</code></p> </li><li class="listbullet2">Если вы использовали Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">rm /etc/klScanEngineUI.xml</code></p> </li></ul></li><li class="listnumber1">Если вы использовали Kaspersky Scan Engine GUI, откройте базу данных PostgreSQL, а затем удалите базу данных <code class="programcharacter">kavebase</code> и пользователя базы данных.<p class="attentioncontinue1">Пропустите этот шаг, если хотите использовать базу данных позже или если удаляемый экземпляр Kaspersky Scan Engine входит в состав кластера, содержащего другие экземпляры.</p> <p class="listcontinue1">Чтобы удалить базу данных <code class="programcharacter">kavebase</code>, выполните следующую команду:</p> <p class="listcontinue1"><code class="programcharacter">DROP DATABASE kavebase;</code></p> <p class="listcontinue1">Чтобы удалить пользователя базы данных, выполните следующую команду: </p> <p class="listcontinue1"><code class="programcharacter">DROP ROLE %user_name%;</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%user_name%</code> – имя пользователя базы данных, созданного при установке Kaspersky Scan Engine.</p> <p class="listcontinue1">Например, чтобы удалить пользователя базы данных <code class="programcharacter">scanengine</code> по умолчанию, выполните следующую команду: </p> <p class="listcontinue1"><code class="programcharacter">DROP ROLE scanengine;</code></p> <p class="attentioncontinue1">Только суперпользователь может удалить базу данных и ее пользователя.</p> </li><li class="listnumber1">Удалите директорию <code class="programcharacter">/opt/kaspersky/ScanEngine</code>:<p class="listcontinue1"><code class="programcharacter">rm –rf /opt/kaspersky/ScanEngine</code></p> </li><li class="listnumber1">Удалите директорию с временными файлами Kaspersky Scan Engine.<p class="listcontinue1"><code class="programcharacter">rm –rf %temp_dir%</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%temp_dir%</code> – временная директория.</p> </li></ol><p class="introheading">Удаление Kaspersky Scan Engine 2.0 вручную</p>
<p class="procedureheading">Чтобы удалить Kaspersky Scan Engine 2.0 вручную:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Остановите Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">/etc/init.d/kavicapd stop</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">/etc/init.d/kavhttpd stop</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"> <code class="programcharacter">/etc/init.d/klScanEngineUI stop</code></p> </li></ul></li><li class="listnumber1">Удалите исполняемый файл и файл конфигурации.<ul class="listbullet2"><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме ICAP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">rm /etc/init.d/kavicapd /etc/kavicapd.xml</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме HTTP, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">rm /etc/init.d/kavhttpd /etc/kavhttpd.xml</code></p> </li><li class="listbullet2">Если вы используете Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue2"><code class="programcharacter">rm /etc/init.d/klScanEngineUI /etc/klScanEngineUI.xml</code></p> </li></ul></li><li class="listnumber1">Если вы использовали Kaspersky Scan Engine GUI, откройте базу данных PostgreSQL и удалите базу данных <code class="programcharacter">kavebase</code> и пользователя базы данных.<p class="attentioncontinue1">Пропустите этот шаг, если хотите использовать базу данных позже или если удаляемый экземпляр Kaspersky Scan Engine входит в состав кластера, содержащего другие экземпляры.</p> <p class="listcontinue1">Чтобы удалить базу данных <code class="programcharacter">kavebase</code>, выполните следующую команду:</p> <p class="listcontinue1"><code class="programcharacter">DROP DATABASE kavebase;</code></p> <p class="listcontinue1">Чтобы удалить пользователя <code class="programcharacter">scanengine</code>, выполните следующую команду: </p> <p class="listcontinue1"><code class="programcharacter">DROP ROLE scanengine;</code></p> </li><li class="listnumber1">Удалите директорию <code class="programcharacter">/opt/kaspersky/ScanEngine</code>:<p class="listcontinue1"><code class="programcharacter">rm –rf /opt/kaspersky/ScanEngine</code></p> </li><li class="listnumber1">Удалите директорию с временными файлами Kaspersky Scan Engine.<p class="listcontinue1"><code class="programcharacter">rm –rf %temp_dir%</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%temp_dir%</code> – временная директория.</p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="199826"><p><a name="199826" style="display: none;">[Topic 199826]</a></p>
	<h2 id="t234543" class="heading2">Удаление Kaspersky Scan Engine на Windows</h2>
<p class="bodytext">Этот раздел содержит информацию о том, как удалить Kaspersky Scan Engine на операционных системах Windows.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td>
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#184741" target="_self">Удаление вручную (Windows)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="184741"><p><a name="184741" style="display: none;">[Topic 184741]</a></p>
	<h3 id="t234444" class="heading3">Удаление вручную (Windows)</h3>
<p class="bodytext">В этом разделе описано, как удалить Kaspersky Scan Engine вручную.</p>
<p class="procedureheading">Чтобы удалить Kaspersky Scan Engine вручную:</p>
<ol class="listnumber1"><li class="listnumber1">Убедитесь, что у вас есть права администратора.</li><li class="listnumber1">Остановите Kaspersky Scan Engine, выполните следующую команду:<p class="listcontinue1"><code class="programcharacter">sc stop &quot;Kaspersky ScanEngine&quot;</code></p> </li><li class="listnumber1">Если вы используете Kaspersky Scan Engine GUI, выполните следующую команду:<p class="listcontinue1"><code class="programcharacter">sc stop &quot;Kaspersky ScanEngine UI&quot;</code></p> </li><li class="listnumber1">Если вы добавили Kaspersky Scan Engine в список служб Windows, удалите его, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">sc delete &quot;Kaspersky ScanEngine&quot;</code></p> </li><li class="listnumber1">Если вы использовали Kaspersky Scan Engine GUI и добавили его в список служб Windows, удалите его, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">sc delete &quot;Kaspersky ScanEngine UI&quot;</code></p> </li><li class="listnumber1">Если вы используете Kaspersky Scan Engine GUI, откройте базу данных PostgreSQL и выполните следующий запрос:<p class="listcontinue1"><code class="programcharacter">DROP DATABASE kavebase;</code></p> <p class="listcontinue1">Чтобы удалить пользователя <code class="programcharacter">scanengine</code>, выполните следующую команду: </p> <p class="listcontinue1"><code class="programcharacter">DROP ROLE scanengine;</code></p> </li><li class="listnumber1">Удалите директорию <code class="programcharacter">%service_dir%</code>. Можно сделать это либо с помощью проводника Windows, либо выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">del /F %service_dir%</code></p> </li><li class="listnumber1">Удалите директорию с временными файлами Kaspersky Scan Engine. Можно сделать это либо с помощью проводника Windows, либо выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">del /F %temp_dir%</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%temp_dir%</code> – временная директория.</p> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179831"><p><a name="179831" style="display: none;">[Topic 179831]</a></p>
	<h1 id="t234586" class="heading1">Использование утилиты управления паролями</h1>
<p class="bodytext">В этом разделе описано, как использовать утилиту kl_access_util. С помощью этой утилиты можно делать следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Сбросить пароль учетной записи <code class="programcharacter">admin</code>. После сброса вы можете изменить пароль в <a id="h180236" class="englishcrossreferencetemplate" href="#179705" target="_self">Kaspersky Scan Engine GUI</a>.</li><li class="listbullet1">Установить токен API, используемый для аутентификации.</li></ul><p class="bodytext">Утилита kl_access_util запускается из командной строки следующим образом:</p>
<p class="program">./kl_access_util [-r] | [<code class="programcharacter">-n</code> &lt;token-name&gt; <code class="programcharacter">-t &lt;token-value&gt;</code>] | [-v] | [-h]</p>
<p class="bodytext">В таблице ниже описаны параметры kl_access_util.</p>
<p class="tablename">Параметры kl_access_util</p>
<p class="spacerfortables">
<table class="tableintopic" width="624" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="282"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="342"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext"><code class="programcharacter">-r</code></p>
<p class="tablebodytext">или</p>
<p class="tablebodytext"><code class="programcharacter">--reset_default_user</code></p>
</td>
<td style="border:1px solid #010101;" width="342"><p class="tablebodytext">Устанавливает пароль для учетной записи <code class="programcharacter">администратора</code> по умолчанию <code class="programcharacter">KAVAdmin!1</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext"><code class="programcharacter">-n &lt;token-name&gt; </code></p>
<p class="tablebodytext">или</p>
<p class="tablebodytext"><code class="programcharacter">--access-token-name &lt;token-name&gt; </code></p>
</td>
<td style="border:1px solid #010101;" width="342"><p class="tablebodytext">Задает имя токена API, используемого для аутентификации.</p>
<p class="tablebodytext">Если токен с указанным именем уже существует, Kaspersky Scan Engine обновляет этот токен (заменяет старое значение на новое, указанное в параметрах <code class="programcharacter">-t</code> или <code class="programcharacter">--access-token</code>).</p>
<p class="tablebodytext">Если токена с указанным именем нет, Kaspersky Scan Engine создает новый токен с указанным именем и значением.</p>
<p class="tablebodytext">Объедините этот параметр только с <code class="programcharacter">-t</code> или <code class="programcharacter">--access-token</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext"><code class="programcharacter">-t &lt;token-value&gt;</code></p>
<p class="tablebodytext">или</p>
<p class="tablebodytext"><code class="programcharacter">--access-token &lt;token-value&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="342"><p class="tablebodytext">Указывает значение токена API, используемого для аутентификации. Значение присваивается токену с именем, указанным в <code class="programcharacter">-n</code> или <code class="programcharacter">--access-token-name</code>. Это может быть как существующий токен, который обновляет утилита, так и новый токен (см. описание параметра <code class="programcharacter">-n</code>).</p>
<p class="bodytext">Значение должно быть уникальным и содержать от 4 до 100 символов ASCII. Должна быть как минимум одна заглавная и одна строчная буква латинского алфавита, одна цифра и один из следующих специальных символов: <code class="programcharacter">-._ ~ + /).</code></p>
<p class="tablebodytext">При создании или обновлении токена утилита шифрует значение токена.</p>
<p class="tablebodytext">Объединяйте этот параметр только с <code class="programcharacter">-n</code> или <code class="programcharacter">--access-token-name</code>.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext"><code class="programcharacter">-v</code></p>
<p class="tablebodytext">или</p>
<p class="tablebodytext"><code class="programcharacter">--version</code></p>
</td>
<td style="border:1px solid #010101;" width="342"><p class="tablebodytext">Выводит версию Kaspersky Scan Engine в командной строке.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="282"><p class="tablebodytext"><code class="programcharacter">-h</code></p>
<p class="tablebodytext">или</p>
<p class="tablebodytext"><code class="programcharacter">--help</code></p>
</td>
<td style="border:1px solid #010101;" width="342"><p class="tablebodytext">Выводит справочную информацию об утилите kl_access_util в командной строке.</p>
</td>
</tr>

</table>
<p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="181814"><p><a name="181814" style="display: none;">[Topic 181814]</a></p>
	<h1 id="t234582" class="heading1">Использование утилиты шифрования</h1>
<p class="bodytext">Утилита kav_encrypt позволяет зашифровать имена пользователей и пароли, хранящиеся в kavhttpd.xml, kavicapd.xml и klScanEngineUI.xml.</p>
<p class="bodytext">Утилита запускается из командной строки следующим образом:</p>
<p class="program">./kav_encrypt [-m <code class="programcharacter">&lt;httpd | icap&gt;</code> -p &lt;user_name:password&gt;] | [-d &lt;user_name:password&gt;] | [-h]</p>
<p class="bodytext">В таблице ниже описаны параметры kav_encrypt.</p>
<p class="tablename">Параметры kav_encrypt</p>
<table class="tableintopic" width="624" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #010101">
<tr align="left" valign="top">
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="234"><p class="tableheading">Параметр</p>
</th>
<th bgcolor="#C0C0C0" style="border:1px solid #010101;" width="390"><p class="tableheading">Описание</p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-m &lt;httpd | icap&gt;</code></p>
<p class="tablebodytext"><code class="programcharacter">--mode &lt;httpd | icap&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="bodytext">Указывает режим работы Kaspersky Scan Engine.</p>
<p class="bodytext">Возможные значения:</p>
<ul class="tablelistbullet"><li class="tablelistbullet"><code class="programcharacter">httpd</code><p class="tablelistcontinue">Режим HTTP </p>
</li><li class="tablelistbullet"><code class="programcharacter">icap</code><p class="tablelistcontinue">Режим ICAP</p>
<p class="tablelistcontinue">Только для систем Linux.</p>
</li></ul></td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-p &lt;user_name:password&gt;</code></p>
<p class="tablebodytext"><code class="programcharacter">--proxy &lt;user_name:password&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="bodytext">Указывает имя пользователя и пароль прокси-сервера, который Kaspersky Scan Engine использует для доступа в интернет.</p>
<p class="bodytext">Этот параметр необходимо использовать вместе с параметром <code class="programcharacter">-m</code>. </p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-d &lt;user_name:password&gt;</code></p>
<p class="tablebodytext"><code class="programcharacter">--database &lt;user_name:password&gt;</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Указывает имя и пароль пользователя, владеющего базой данных kavebase.</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #010101;" width="234"><p class="tablebodytext"><code class="programcharacter">-h</code></p>
<p class="tablebodytext"><code class="programcharacter">--help</code></p>
</td>
<td style="border:1px solid #010101;" width="390"><p class="tablebodytext">Печатает справочную информацию об утилите kav_encrypt в командной строке.</p>
</td>
</tr>

</table>
<p class="tablebodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="209025"><p><a name="209025" style="display: none;">[Topic 209025]</a></p>
	<h1 id="t234585" class="heading1">Использование инструмента проверки целостности</h1>
<p class="bodytext">Kaspersky Scan Engine содержит различные бинарные модули в виде динамически подключаемых библиотек, исполняемых файлов, файлов конфигурации и файлов интерфейса. Хакер может заменить один или несколько исполняемых модулей или файлов другими файлами, содержащими вредоносный код. Чтобы предотвратить замену модулей и файлов, Kaspersky Scan Engine может проверять целостность компонентов программы.</p>
<p class="bodytext">Приложение проверяет модули и файлы на наличие несанкционированных изменений или повреждений. Если модуль или файл приложения имеют неверную хеш-сумму, они считаются поврежденными.</p>
<p class="bodytext">Приложение также проверяет целостность <em class="emphasischaracter">файла манифеста</em>, содержащего список файлов программы, целостность которых имеет решающее значение для корректной работы компонентов программы.</p>
<p class="bodytext">Начиная с версии Kaspersky Scan Engine 2.1, объекты KAV SDK поставляются в виде отдельного пакета. По этой причине у Kaspersky Scan Engine есть два файла манифеста:</p>
<ul class="listbullet1"><li class="listbullet1">integrity_check.xml используется для проверки целостности файлов Kaspersky Scan Engine.</li><li class="listbullet1">integrity_check_sdk.xml используется для проверки целостности файлов KAV SDK. Этот файл поставляется в пакете KAV SDK.</li></ul><p class="bodytext">Целостность компонентов программы проверяется с помощью инструмента проверки целостности, расположенного в каталоге %service_dir%, где %service_dir% — это каталог Kaspersky Scan Engine. </p>
<p class="bodytext">Файлы манифеста integrity_check.xml и integrity_check_sdk.xml (начиная с версии Kaspersky Scan Engine 2.1) защищены криптографической подписью &quot;Лаборатории Касперского&quot;. Файлы манифеста находятся в каталоге %service_dir%.</p>
<p class="attentionbody">Для запуска утилиты проверки целостности требуются права учетной записи пользователя root.</p>
<p class="procedureheading">Чтобы проверить целостность компонентов программы, выполните следующую команду:</p>
<p class="program2"><code class="programcharacter">integrity_checker [options]</code></p>
<p class="bodytextindent">По умолчанию инструмент использует файл integration_check.xml, расположенный в каталоге %service_dir%.</p>
<p class="procedureheading">Чтобы проверить целостность компонентов программы с помощью файла манифеста, расположенного в каталоге, отличном от каталога по умолчанию, выполните следующую команду:</p>
<p class="program2"><code class="programcharacter">integrity_checker [options] %path%</code></p>
<p class="bodytextindent">Здесь <code class="programcharacter">%path%</code> — это путь к файлу манифеста.</p>
<p class="bodytext">Вы можете запустить инструмент проверки целостности со следующими дополнительными параметрами:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">--help</code> — отобразить справку по настройкам инструмента.</li><li class="listbullet1"><code class="programcharacter">--version</code> — вывести версию инструмента.</li><li class="listbullet1"><code class="programcharacter">--verbose</code> — расширенный вывод выполненных действий и результатов. Если вы укажете этот параметр, вывод будет содержать как успешные, так и неуспешные результаты сканирования объектов, перечисленных в файле манифеста. Если вы не укажете этот параметр, будут предоставлены только те объекты, которые не прошли проверку.</li><li class="listbullet1"><code class="programcharacter">--trace &lt;filename&gt;</code> , где <code class="programcharacter">&lt;filename&gt;</code> — это имя файла, используемого для регистрации событий, происходящих во время проверки. События будут регистрироваться на уровне DEBUG.</li></ul><p class="bodytext">Результат проверки каждого файла манифеста отображается рядом с именем файла манифеста в следующем формате:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">SUCCEEDED</code> — целостность файлов подтверждена (код возврата <code class="programcharacter">0</code>).</li><li class="listbullet1"><code class="programcharacter">FAILED</code> — целостность файлов не подтверждена (код возврата не равен <code class="programcharacter">0</code>).</li></ul><p class="warningbody">Если вы создаете исполняемые файлы для режима <a id="h210511" class="englishcrossreferencetemplate" href="#179888" target="_self">HTTP</a> или <a id="h210512" class="englishcrossreferencetemplate" href="#179905" target="_self">ICAP</a> из исходного кода, утилита проверки целостности всегда возвращает <code class="programcharacter">FAILED</code> при проверке %service_dir%/bin/kavhttpd и %service_dir%/bin/kavhttp_client (режим HTTP) или %service_dir%/bin/kavicapd (режим ICAP).</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179686"><p><a name="179686" style="display: none;">[Topic 179686]</a></p>
	<h1 id="t234426" class="heading1">Лицензирование</h1>
<p class="bodytext">Этот раздел содержит информацию о том, как активировать Kaspersky Scan Engine.</p>
<p class="introheading">Режимы лицензирования</p>
<p class="bodytext">Kaspersky Scan Engine поддерживает следующие режимы лицензирования:</p>
<ul class="listbullet1"><li class="listbullet1">Режим лицензирования оффлайн<p class="listcontinue1">В этом режиме система лицензирования Kaspersky Scan Engine использует файл ключа для активации Kaspersky Scan Engine.</p> <p class="listcontinue1">Вам не нужно подключение к интернету, чтобы использовать этот режим. Однако необходимо регулярно обновлять файл ключа, чтобы избежать <a id="h179861" class="englishcrossreferencetemplate" href="#179860" target="_self">лицензионных ограничений</a>.</p> </li><li class="listbullet1">Режим лицензирования онлайн<p class="listcontinue1">В этом режиме система лицензирования Kaspersky Scan Engine использует код активации.</p> <p class="listcontinue1">Для использования этого режима у вас должно быть стабильное подключение к интернету. При необходимости Kaspersky Scan Engine подключится к серверам &quot;Лаборатории Касперского&quot; и автоматически обновит код активации. </p> </li></ul><table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#179852" target="_self">Активация Kaspersky Scan Engine в режиме лицензирования оффлайн</a></p><p class="relateditem"><a href="#179855" target="_self">Активация Kaspersky Scan Engine в режиме лицензирования онлайн</a></p><p class="relateditem"><a href="#179860" target="_self">Лицензионные ограничения</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179852"><p><a name="179852" style="display: none;">[Topic 179852]</a></p>
	<h2 id="t234272" class="heading2">Активация Kaspersky Scan Engine в режиме лицензирования оффлайн</h2>
<p class="bodytext">В этом разделе описано, как активировать Kaspersky Scan Engine в режиме оффлайн после установки Kaspersky Scan Engine.</p>
<p class="bodytext">Вы можете активировать Kaspersky Scan Engine на странице <a id="h180245" class="englishcrossreferencetemplate" href="#179702" target="_self">настроек лицензирования</a> в Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Для активации Kaspersky Scan Engine в режиме лицензирования оффлайн вам потребуется файл ключа. Файл ключа предоставляет ваш персональный технический менеджер (ПТМ).</p>
<p class="procedureheading">Чтобы активировать Kaspersky Scan Engine в оффлайн-режиме, выполните следующее.</p>
<ol class="listnumber1"><li class="listnumber1">Откройте файл конфигурации, соответствующий выбранному вами режиму:<ul class="listbullet2"><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме HTTP, откройте <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файл конфигурации kavhttpd.xml</a>.</li><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме ICAP, откройте <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файл конфигурации kavicapd.xml</a>.</li></ul></li><li class="listnumber1">Выполните одно из следующих действий.<ul class="listbullet2"><li class="listbullet2">Скопируйте файл ключа в директорию, указанную в элементе <code class="programcharacter">LicensePath</code> файла конфигурации.<p class="listcontinue2">Список других директорий, в которых Kaspersky Scan Engine автоматически выполняет поиск файла ключа, есть в описании элемента <code class="programcharacter">LicensePath</code>:</p> <ul class="listbullet3"><li class="listbullet3">В kavhttpd.xml (режим HTTP): DirectorySettings &gt; <a id="h201074" class="englishcrossreferencetemplate" href="#201044" target="_self">LicensePath</a>.</li><li class="listbullet3">В kavicapd.xml (режим ICAP): SDKSettings &gt; <a id="h201169" class="englishcrossreferencetemplate" href="#201118" target="_self">LicensePath</a>.</li></ul></li><li class="listbullet2">Если вы хотите сохранить файл ключа в другой директории, укажите путь к этой директории в элементе <code class="programcharacter">LicensePath</code> файла конфигурации и скопируйте туда файл appinfo.kli. Файл appinfo.kli находится в директории /bin пакета распространения.</li></ul></li><li class="listnumber1">В элементе <code class="programcharacter">LicensingMode</code> файла конфигурации укажите <code class="programcharacter">1</code>.</li><li class="listnumber1">Сохраните файл конфигурации.</li><li class="listnumber1">Перезагрузите службу Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">В режиме HTTP <a id="h193043" class="englishcrossreferencetemplate" href="#192981" target="_self">перезапустите службу kavhttpd</a>.</li><li class="listbullet2">В режиме ICAP <a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">перезапустите службу kavicapd</a>.</li></ul></li></ol><p class="bodytext">Если активация прошла успешно, Kaspersky Scan Engine запустится в обычном режиме, и вы сможете обновить антивирусные базы. В противном случае Kaspersky Scan Engine вернет ошибку в командную строку.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179855"><p><a name="179855" style="display: none;">[Topic 179855]</a></p>
	<h2 id="t234273" class="heading2">Активация Kaspersky Scan Engine в режиме лицензирования онлайн</h2>
<p class="bodytext">В этом разделе описано, как активировать Kaspersky Scan Engine в режиме онлайн после установки Kaspersky Scan Engine.</p>
<p class="bodytext">Вы можете активировать Kaspersky Scan Engine на странице <a id="h180245" class="englishcrossreferencetemplate" href="#179702" target="_self">настроек лицензии</a> в Kaspersky Scan Engine GUI.</p>
<p class="bodytext">Для активации Kaspersky Scan Engine в режиме лицензирования онлайн вам потребуется код активации. Код активации предоставляется вашим персональным техническим менеджером (ПТМ).</p>
<p class="warningbody">Ваш компьютер должен быть подключен к интернету, чтобы активировать Kaspersky Scan Engine в режиме лицензирования онлайн. При использовании режима лицензирования онлайн Kaspersky Scan Engine передает в &quot;Лабораторию Касперского&quot; информацию об установленной копии Kaspersky Scan Engine и коде активации. Смотрите также полный список данных, которые <a id="h180251" class="englishcrossreferencetemplate" href="#180002" target="_self">передаются в &quot;Лабораторию Касперского&quot; в режиме лицензирования онлайн</a>.</p>
<p class="procedureheading">Чтобы активировать Kaspersky Scan Engine в режиме лицензирования онлайн:</p>
<ol class="listnumber1"><li class="listnumber1">Создайте текстовый файл с именем license.</li><li class="listnumber1">Скопируйте в него код активации.<p class="attentioncontinue1">Убедитесь, что формат кода активации правильный. Правильный формат – XXXXX-XXXXX-XXXXX-XXXXX, где X – это число (0–9) или заглавная буква латинского алфавита (A–Z), за исключением &quot;I&quot; и &quot;O&quot;. </p> <p class="listcontinue1">В файле не должно быть других символов.</p> </li><li class="listnumber1">Сохраните файл. </li><li class="listnumber1">Откройте файл конфигурации, соответствующий режиму работы Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме HTTP, откройте <a id="h179927" class="englishcrossreferencetemplate" href="#184799" target="_self">файл конфигурации kavhttpd.xml</a>.</li><li class="listbullet2">Если вы используете Kaspersky Scan Engine в режиме ICAP, откройте <a id="h180154" class="englishcrossreferencetemplate" href="#192989" target="_self">файл конфигурации kavicapd.xml</a>.</li></ul></li><li class="listnumber1">Выполните одно из следующих действий.<ul class="listbullet2"><li class="listbullet2">Скопируйте файл лицензии в директорию, указанную в элементе <code class="programcharacter">LicensePath</code> файла конфигурации.<p class="listcontinue2">Список других директорий, в которых Kaspersky Scan Engine автоматически выполняет поиск файла лицензии, есть в описании элемента <code class="programcharacter">LicensePath</code>:</p> <ul class="listbullet3"><li class="listbullet3">В kavhttpd.xml (режим HTTP): DirectorySettings &gt; <a id="h201074" class="englishcrossreferencetemplate" href="#201044" target="_self">LicensePath</a>.</li><li class="listbullet3">В kavicapd.xml (режим ICAP): SDKSettings &gt; <a id="h201169" class="englishcrossreferencetemplate" href="#201118" target="_self">LicensePath</a>.</li></ul></li><li class="listbullet2">Если вы хотите сохранить файл лицензии в другой директории, укажите к ней путь в элементе <code class="programcharacter">LicensePath</code> и скопируйте файл appinfo.kli в эту директорию. Файл appinfo.kli находится в директории /bin пакета распространения.</li></ul></li><li class="listnumber1">В элементе <code class="programcharacter">LicensingMode</code> файла конфигурации укажите <code class="programcharacter">2</code>.</li><li class="listnumber1">Сохраните файл конфигурации.</li><li class="listnumber1">Перезагрузите службу Kaspersky Scan Engine.<ul class="listbullet2"><li class="listbullet2">В режиме HTTP <a id="h193043" class="englishcrossreferencetemplate" href="#192981" target="_self">перезапустите службу kavhttpd</a>.</li><li class="listbullet2">В режиме ICAP <a id="h193044" class="englishcrossreferencetemplate" href="#192990" target="_self">перезапустите службу kavicapd</a>.</li></ul></li></ol><p class="bodytext">Если активация прошла успешно, Kaspersky Scan Engine запустится в обычном режиме, и вы сможете обновить антивирусные базы. В противном случае Kaspersky Scan Engine вернет ошибку в командную строку.</p>
<p class="bodytext">После успешной активации в режиме лицензирования онлайн информация о лицензировании синхронизируется с серверами &quot;Лаборатории Касперского&quot;. Эту синхронизацию нужна, например, для изменения даты истечения срока действия кода активации (что устраняет необходимость в новой онлайн-активации) или для изменения доступных функций.</p>
<p class="bodytext">Синхронизация происходит автоматически один раз в день. Максимальное время без подключения к интернету – от 15 до 30 дней.</p>
<p class="warningbody">Чтобы синхронизировать лицензионную информацию с серверами &quot;Лаборатории Касперского&quot;, ваш компьютер должен быть подключен к интернету.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="179860"><p><a name="179860" style="display: none;">[Topic 179860]</a></p>
	<h2 id="t234427" class="heading2">Лицензионные ограничения</h2>
<p class="bodytext">Жизненный цикл лицензий в режимах лицензирования оффлайн и онлайн одинаков. Kaspersky Scan Engine можно использовать до определенного момента, который называется <em class="emphasischaracter">датой окончания срока действия</em>. Kaspersky Scan Engine использует файл ключа или код активации для определения даты окончания срока действия.</p>
<p class="bodytext">По истечении действия файла ключа или кода активации вы можете использовать Kaspersky Scan Engine только с лицензионными ограничениями.</p>
<p class="introheading">Лицензионные ограничения</p>
<p class="bodytext">Kaspersky Scan Engine может иметь следующие лицензионные ограничения:</p>
<ul class="listbullet1"><li class="listbullet1">Если время, полученное от KSN, по крайней мере на один день позже даты истечения срока действия вашего файла ключа или кода активации, Kaspersky Scan Engine будет работать, но вы не сможете выполнить проверку репутации файлов и URL-адресов. Убедитесь, что выключены <span class="guicharacter">Enable reputation checking</span> и <span class="guicharacter">Enable Phishing Protection</span> (см. <span class="guicharacter">Settings</span> -&gt; <span class="guicharacter">Scanning</span> в Kaspersky Scan Engine GUI), иначе вы не сможете запустить службы kavhttpd и kavicapd.</li><li class="listbullet1">Если дата выпуска антивирусных баз превышает срок действия вашего файла ключа или кода активации, Kaspersky Scan Engine не будет обновлять антивирусные базы.</li></ul><p class="introheading">Снятие лицензионных ограничений в режиме лицензирования онлайн</p>
<p class="bodytext">Чтобы снять лицензионные ограничения, вы можете сделать следующее.</p>
<ul class="listbullet1"><li class="listbullet1">Если ваша копия Kaspersky Scan Engine не была подключена к интернету в течение последних 15 дней и более, причина лицензионных ограничений, скорее всего, в устаревшей лицензионной информации. Чтобы снять лицензионные ограничения, разрешите Kaspersky Scan Engine выходить в интернет.<p class="attentioncontinue1">Чтобы избежать этой проблемы, убедитесь, что Kaspersky Scan Engine имеет постоянный доступ в интернет.</p> </li><li class="listbullet1">Если срок действия вашего кода активации истек, получите новый код и активируйте с его помощью Kaspersky Scan Engine. Чтобы активировать Kaspersky Scan Engine с новым кодом, ваша копия Kaspersky Scan Engine должна быть подключена к интернету.</li><li class="listbullet1">Если другие варианты невозможны, используйте более раннюю версию антивирусных баз для инициализации Kaspersky Scan Engine. Этот метод не снимает ограничений, накладываемых на функцию проверки репутации файлов и URL-адресов.</li></ul><p class="introheading">Снятие лицензионных ограничений в режиме лицензирования оффлайн</p>
<p class="bodytext">Чтобы снять лицензионные ограничения, получите новый файл ключа и активируйте с его помощью Kaspersky Scan Engine.</p>
<p class="bodytext">
<p class="introheading">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="182982"><p><a name="182982" style="display: none;">[Topic 182982]</a></p>
	<h1 id="t234410" class="heading1">Kaspersky Scan Engine GUI и SSL-сертификаты</h1>
<p class="bodytext">SSL-сертификат и закрытый ключ, сгенерированные при установке Kaspersky Scan Engine, позволяют использовать Kaspersky Scan Engine GUI через HTTPS. Сертификат является самозаверяющим, поэтому используемый вами браузер сообщает вам о ненадежном соединении. Мы рекомендуем <a id="h182985" class="englishcrossreferencetemplate" href="#182983" target="_self">использовать сертификат, которому доверяют в вашей инфраструктуре</a>. Однако если вы не можете использовать доверенный сертификат, можно <a id="h182986" class="englishcrossreferencetemplate" href="#182984" target="_self">добавить самозаверяющий сертификат в качестве доверенного</a> для вашего браузера или операционной системы.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#182983" target="_self">Генерация SSL-сертификатов для Kaspersky Scan Engine GUI</a></p><p class="relateditem"><a href="#182984" target="_self">Добавление самозаверяющего сертификата как доверенного для браузера (Linux)</a></p><p class="relateditem"><a href="#186925" target="_self">Добавление самозаверяющего сертификата как доверенного для браузера (Windows)</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="182983"><p><a name="182983" style="display: none;">[Topic 182983]</a></p>
	<h2 id="t234367" class="heading2">Генерация SSL-сертификатов для Kaspersky Scan Engine GUI</h2>
<p class="bodytext">Kaspersky Scan Engine GUI использует SSL-сертификат для HTTPS-соединений. По умолчанию Kaspersky Scan Engine GUI использует самозаверяющий сертификат и закрытый ключ, которые генерируются при <a id="h193042" class="englishcrossreferencetemplate" href="#192974" target="_self">установке Kaspersky Scan Engine</a>. Сгенерированный сертификат действителен в течение двух лет.</p>
<p class="bodytext">Мы рекомендуем вам сгенерировать сертификат, который будет доверенным в вашей инфраструктуре, и настроить Kaspersky Scan Engine GUI на использование его вместо самозаверяющего сертификата.</p>
<p class="attentionbody">Перед внесением изменений создайте резервную копию существующего закрытого ключа, сертификата и файла конфигурации Kaspersky Scan Engine.</p>
<p class="procedureheading">Чтобы сгенерировать доверенный сертификат для Kaspersky Scan Engine GUI, выполните следующее.</p>
<ol class="listnumber1"><li class="listnumber1">Создайте закрытый ключ и доверенный сертификат:<ol class="listalpha2"><li class="listalpha2">Создайте новую пару закрытого и открытого ключей.</li><li class="listalpha2">Используйте открытый ключ для создания запроса на подпись сертификата SSL (CSR).</li><li class="listalpha2">Подпишите CSR с помощью доверенного центра сертификации.<p class="listcontinue2">Это создает доверенный сертификат для закрытого ключа.</p> </li></ol></li><li class="listnumber1">Преобразуйте закрытый ключ и доверенный сертификат в формат PEM.</li><li class="listnumber1">Скопируйте закрытый ключ и сертификат в директорию <code class="programcharacter">%service_dir%/httpsrv</code>.<p class="attentioncontinue1">Вы должны настроить доступ к файлу закрытого ключа для Kaspersky Scan Engine GUI, чтобы только пользователь root и учетная запись пользователя, под которой запущена служба, могли иметь разрешение на чтение.</p> </li><li class="listnumber1">При необходимости отредактируйте элементы <code class="programcharacter">Settings &gt; ServerSettings &gt; SSLCertificatePath</code> и <code class="programcharacter">Settings &gt; ServerSettings &gt; SSLPrivatePath</code> <a id="h183008" class="englishcrossreferencetemplate" href="#179825" target="_self">файла конфигурации Kaspersky Scan Engine</a>, чтобы они содержали пути к сертификату и закрытому ключу.<p class="listcontinue1">Редактирование файла конфигурации Kaspersky Scan Engine вручную.</p> </li><li class="listnumber1">Перезапустите Kaspersky Scan Engine.<p class="spacer"> </li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="182984"><p><a name="182984" style="display: none;">[Topic 182984]</a></p>
	<h2 id="t234274" class="heading2">Добавление самозаверяющего сертификата как доверенного для браузера (Linux)</h2>
<p class="bodytext">В этом разделе показано, как добавить самозаверяющие сертификаты, созданные при установке Kaspersky Scan Engine, в доверенное хранилище. Это удалит предупреждения системы безопасности, создаваемые браузерами.</p>
<p class="bodytext">Информация в этом разделе применима к ситуации, когда пользователь получает доступ к Kaspersky Scan Engine GUI с того же компьютера, на котором он запущен. Если элемент <code class="programcharacter">Settings &gt; ServerSettings &gt; ConnectionString</code> в <a id="h183008" class="englishcrossreferencetemplate" href="#179825" target="_self">файле конфигурации Kaspersky Scan Engine</a> относится к внешнему интерфейсу, то сайт Kaspersky Scan Engine GUI не будет считаться доверенным, поскольку самозаверяющий сертификат может использоваться только с <code class="programcharacter">https: //127.0.0.1</code> и <code class="programcharacter">https://localhost</code>.</p>
<p class="bodytext">Чтобы избежать потенциальных угроз безопасности, рекомендуется использовать <a id="h182985" class="englishcrossreferencetemplate" href="#182983" target="_self">доверенный сертификат, подписанный центром сертификации</a>.</p>
<p class="introheading">Как сделать самозаверяющий сертификат доверенным в браузере (Kaspersky Scan Engine GUI открывается в Mozilla Firefox)</p>
<p class="bodytext">Добавьте Kaspersky Scan Engine GUI в список доверенных сайтов Mozilla Firefox, чтобы браузер не показывал предупреждения о сертификате.</p>
<p class="introheading">Как сделать самозаверяющий сертификат доверенным в браузере (Kaspersky Scan Engine GUI открывается в браузере для Linux)</p>
<p class="bodytext">Процедуры использования браузера для импорта сертификата как доверенного (в системах Linux) различаются в зависимости от используемого браузера и дистрибутива Linux. Но у них есть общие шаги: открыть форму настроек браузера и использовать форму для импорта сертификата в хранилище.</p>
<p class="procedureheading">Чтобы вручную сделать самозаверяющий сертификат доверенным в браузере в Linux, необходимо выполнить следующее.</p>
<ol class="listnumber1"><li class="listnumber1">Создайте директорию <code class="programcharacter">/usr/local/share/ca-certificates/</code>, если ее еще нет на вашем компьютере:<p class="listcontinue1"><code class="programcharacter">mkdir /usr/local/share/ca-certificates/</code></p> </li><li class="listnumber1">Скопируйте корневой сертификат (файл .crt) в созданную директорию:<p class="listcontinue1"><code class="programcharacter">cp &lt;full_path_to_the_certificate&gt; /usr/local/share/ca-certificates/</code></p> </li><li class="listnumber1">Обновите сертификаты:<p class="listcontinue1"><code class="programcharacter">sudo update-ca-certificates</code></p> <p class="attentioncontinue1">Если у вас нет пакета корневых сертификатов, установите его с помощью диспетчера пакетов.</p> </li></ol><p class="introheading">Удаление сертификата из списка доверенных</p>
<p class="bodytext">После перенастройки или удаления Kaspersky Scan Engine старые сертификаты больше не используются в Kaspersky Scan Engine GUI. Вы можете удалить их из списка доверенных сертификатов.</p>
<p class="bodytext">В системе Linux процедура удаления выполняется аналогично добавлению сертификата: откройте список доверенных сертификатов и удалите те, которые вам не нужны.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="186925"><p><a name="186925" style="display: none;">[Topic 186925]</a></p>
	<h2 id="t234275" class="heading2">Добавление самозаверяющего сертификата как доверенного для браузера (Windows)</h2>
<p class="bodytext">В этом разделе показано, как добавить самозаверяющие сертификаты, созданные при установке Kaspersky Scan Engine, в доверенное хранилище. Это удалит предупреждения системы безопасности, создаваемые браузерами.</p>
<p class="bodytext">Информация в этом разделе применима к ситуации, когда пользователь получает доступ к Kaspersky Scan Engine GUI с того же компьютера, на котором он запущен. Если элемент <code class="programcharacter">Settings &gt; ServerSettings &gt; ConnectionString</code> в <a id="h183008" class="englishcrossreferencetemplate" href="#179825" target="_self">файле конфигурации Kaspersky Scan Engine</a> относится к внешнему интерфейсу, то сайт Kaspersky Scan Engine GUI не будет считаться доверенным, поскольку самозаверяющий сертификат может использоваться только с <code class="programcharacter">https: //127.0.0.1</code> и <code class="programcharacter">https://localhost</code>.</p>
<p class="bodytext">Чтобы избежать потенциальных угроз безопасности, рекомендуется использовать <a id="h182985" class="englishcrossreferencetemplate" href="#182983" target="_self">доверенный сертификат, подписанный центром сертификации</a>.</p>
<p class="introheading">Как сделать самозаверяющий сертификат доверенным в браузере (Kaspersky Scan Engine GUI открывается в Internet Explorer)</p>
<p class="bodytext">Чтобы сделать сертификат доверенным в браузере, необходимо последовательно выполнить следующие три процедуры.</p>
<p class="bodytext"><span class="boldcharacter">Сохранить сертификат в локальный файл</span></p>
<p class="procedureheading">Чтобы сохранить сертификат в локальный файл:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте адрес <code class="programcharacter">https://127.0.0.1</code> или <code class="programcharacter">https://localhost</code> в Internet Explorer.<p class="listcontinue1">Браузер сообщает о проблеме с сертификатом безопасности веб-сайта.</p> <p class="picture"><img id="f174164" src="adding_trusted_1.png" class="linkedpngfiletemplate" alt="Проблема с сертификатом безопасности этого веб-сайта." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Сообщение об ошибке сертификата</p> </li><li class="listnumber1">Выберите ссылку <span class="boldcharacter">Continue to this website (not recommended)</span>.<p class="listcontinue1">В адресной строке появляется сообщение <span class="boldcharacter">Certificate Error</span>.</p> </li><li class="listnumber1">Нажмите <span class="boldcharacter">Certificate Error</span>.<p class="listcontinue1">Откроется окно <span class="boldcharacter">Untrusted Certificate</span>.</p> <p class="picture"><img id="f174165" src="adding_trusted_2.png" class="linkedpngfiletemplate" alt="Untrusted Certificate. About certificate errors. View certificates." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Окно <span class="boldcharacter">Untrusted Certificate</span></p> </li><li class="listnumber1">Выберите ссылку <span class="boldcharacter">View certificates</span>.<p class="listcontinue1">Откроется окно <span class="boldcharacter">Certificate</span> с информацией о сертификате Kaspersky Scan Engine.</p> <p class="picture"><img id="f174166" src="adding_trusted_3.png" class="linkedpngfiletemplate" alt="Вкладка &quot;General&quot;. Сведения о сертификате." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Окно <span class="boldcharacter">Certificate</span></p> </li><li class="listnumber1">Выберите вкладку <span class="boldcharacter">Details</span> и нажмите <span class="boldcharacter">Copy to File</span>, чтобы создать локальную копию сертификата.<p class="listcontinue1">Запустится мастер экспорта сертификатов.</p> <p class="picture"><img id="f174173" src="adding_trusted_10.png" class="linkedpngfiletemplate" alt="Окно приветствия." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Мастер экспорта сертификатов</p> </li><li class="listnumber1">Следуйте инструкциям мастера.<p class="listcontinue1">При экспорте сертификата используйте параметры мастера по умолчанию.</p> </li></ol><p class="bodytext"><span class="boldcharacter">Запустить процесс импорта сертификата</span></p>
<p class="procedureheading">Чтобы запустить процесс импорта сертификата через консоль управления MMC:</p>
<ol class="listnumber1"><li class="listnumber1">Из поля <span class="boldcharacter">Search</span> перейдите к полю <span class="boldcharacter">Run</span> и введите <em class="emphasischaracter">mmc</em>.<p class="listcontinue1">Теперь вы можете запустить MMC от имени администратора.</p> <p class="picture"><img id="f180513" src="run_mmc.png" class="linkedpngfiletemplate" alt="Окно &quot;Run&quot;. Открыть: mmc." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Запуск MMC</p> </li><li class="listnumber1">В открывшейся консоли MMC выберите <span class="boldcharacter">File</span> &gt; <span class="boldcharacter">Add/Remove Snap-in</span>.<p class="picture"><img id="f180514" src="add_remove_snap_in.png" class="linkedpngfiletemplate" alt="Консоль MMC. Меню &quot;File&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор <span class="boldcharacter">Add/Remove Snap-in</span></p> <p class="listcontinue1">Откроется окно <span class="boldcharacter">Add or Remove Snap-ins</span>.</p> </li><li class="listnumber1">В списке <span class="boldcharacter">Available snap-ins</span> выберите <span class="boldcharacter">Certificates</span> и нажмите <span class="boldcharacter">Add</span>.<p class="picture"><img id="f180516" src="add_certificates.png" class="linkedpngfiletemplate" alt="Окно &quot;Add or Remove Snap-ins&quot;. Доступные оснастки слева, выбранные – справа." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Добавление оснастки <span class="boldcharacter">Certificates</span></p> <p class="listcontinue1">Откроется окно <span class="boldcharacter">Certificates snap-in</span>.</p> </li><li class="listnumber1">Выберите пункт <span class="boldcharacter">Computer account</span> и нажмите <span class="boldcharacter">Next</span>.<p class="picture"><img id="f180517" src="select_computer_account.png" class="linkedpngfiletemplate" alt="Окно &quot;Certificates snap-in&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор пункта <span class="boldcharacter">Computer account</span></p> <p class="listcontinue1">В открывшемся окне <span class="boldcharacter">Select Computer</span> нажмите <span class="boldcharacter">Finish</span>.</p> <p class="picture"><img id="f180518" src="select_local_computer.png" class="linkedpngfiletemplate" alt="Окно &quot;Select Computer&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор опции <span class="boldcharacter">Local computer</span></p> </li><li class="listnumber1">На панели слева выберите <span class="boldcharacter">Certificates (Local Computer)</span> &gt; <span class="boldcharacter">Trusted Root Certification Authorities</span>, нажмите правой кнопкой мыши на <span class="boldcharacter">Certificates</span> и выберите <span class="boldcharacter">All Tasks</span> &gt; <span class="boldcharacter">Import</span>.<p class="picture"><img id="f180521" src="import_certificate.png" class="linkedpngfiletemplate" alt="Консоль MMC. Список сертификатов. Контекстное меню сертификата." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор действия <span class="boldcharacter">Import</span></p> <p class="listcontinue1">Запустится мастер импорта сертификатов.</p> </li></ol><p class="bodytext"><span class="boldcharacter">Импортировать сохраненный сертификат</span></p>
<p class="procedureheading">Чтобы добавить сохраненный сертификат в хранилище доверенных корневых центров сертификации:</p>
<ol class="listnumber1"><li class="listnumber1">На странице приветствия мастера нажмите кнопку <span class="boldcharacter">Next</span>.<p class="picture"><img id="f180522" src="cert_import_wizard.png" class="linkedpngfiletemplate" alt="Окно приветствия." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Мастер импорта сертификатов</p> </li><li class="listnumber1">Нажмите кнопку <span class="boldcharacter">Browse</span> и выберите сертификат, который был сохранен в процедуре &quot;Сохранить сертификат в локальный файл&quot;.<p class="picture"><img id="f180525" src="import_saved_certificate.png" class="linkedpngfiletemplate" alt="Мастер импорта сертификатов. Указан файл CER." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Импорт ранее сохраненного сертификата</p> </li><li class="listnumber1">На следующей странице мастера импорта сертификатов нажмите кнопку <span class="boldcharacter">Next</span>.<p class="picture"><img id="f180526" src="select_certificate_store.png" class="linkedpngfiletemplate" alt="Мастер импорта сертификатов. Указано &quot;Trusted Root Certification Authorities&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Выбор хранилища сертификатов</p> </li><li class="listnumber1">На последней странице мастера импорта сертификатов нажмите <span class="boldcharacter">Finish</span>.<p class="picture"><img id="f180552" src="complete_cert_import.png" class="linkedpngfiletemplate" alt="Мастер импорта сертификатов. Последнее окно." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Завершение импорта сертификата</p> </li><li class="listnumber1">Закройте консоль MMC и перезапустите браузер.<p class="listcontinue1">Проблема безопасности (ненадежный сертификат) решена, см. рисунок ниже.</p> <p class="picture"><img id="f174170" src="adding_trusted_7.png" class="linkedpngfiletemplate" alt="Окно &quot;Website Identification&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Идентификация веб-сайта</p> </li></ol><p class="introheading">Как сделать самозаверяющий сертификат доверенным в браузере (Kaspersky Scan Engine GUI открывается в Google Chrome)</p>
<p class="procedureheading">Чтобы сделать самозаверяющий сертификат для Kaspersky Scan Engine GUI доверенным при использовании Google Chrome:</p>
<ol class="listnumber1"><li class="listnumber1">Откройте адрес <code class="programcharacter">https://127.0.0.1</code> или <code class="programcharacter">https://localhost</code> в Google Chrome.<p class="listcontinue1">В адресной строке отобразится предупреждение о том, что соединение с сайтом не защищено.</p> </li><li class="listnumber1">Нажмите на сообщение <span class="boldcharacter">Not secure</span>.<p class="listcontinue1">Откроется окно со сведениями о безопасности веб-сайта.</p> </li><li class="listnumber1">Нажмите на <span class="boldcharacter">Certificate</span>, чтобы просмотреть информацию о сертификате (при наведении указателя мыши на <span class="boldcharacter">Certificate</span> появляется всплывающая подсказка <span class="boldcharacter">Show certificate</span>).</li><li class="listnumber1">В открывшемся окне <span class="boldcharacter">Certificate</span> выберите вкладку <span class="boldcharacter">Details</span> и нажмите <span class="boldcharacter">Copy to File</span>, чтобы создать локальную копию сертификата.<p class="listcontinue1">Запустится мастер экспорта сертификатов.</p> <p class="picture"><img id="f174173_1" src="adding_trusted_10.png" class="linkedpngfiletemplate" alt="Окно приветствия." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Мастер экспорта сертификатов</p> </li><li class="listnumber1">Следуйте инструкциям мастера.<p class="listcontinue1">При экспорте сертификата используйте параметры мастера по умолчанию.</p> </li><li class="listnumber1">После сохранения сертификата на локальном диске откройте его и добавьте в хранилище доверенных корневых центров сертификации, как описано в процедуре для Internet Explorer.</li><li class="listnumber1">Перезагрузите браузер.</li></ol><p class="introheading">Как сделать самозаверяющий сертификат доверенным в браузере (Kaspersky Scan Engine GUI открывается в Mozilla Firefox)</p>
<p class="bodytext">Добавьте Kaspersky Scan Engine GUI в список доверенных сайтов Mozilla Firefox, чтобы браузер не показывал предупреждения о сертификате.</p>
<p class="introheading">Удаление сертификата из списка доверенных</p>
<p class="bodytext">После перенастройки или удаления Kaspersky Scan Engine старые сертификаты больше не используются в Kaspersky Scan Engine. Вы можете удалить их из списка доверенных сертификатов.</p>
<p class="procedureheading">Чтобы удалить сертификат из списка доверенных, выполните следующие действия.</p>
<ol class="listnumber1"><li class="listnumber1">Откройте консоль управления сертификатами, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">certmgr.msc</code></p> </li><li class="listnumber1">На панели слева выберите <span class="boldcharacter">Trusted Root Certification Authorities &gt; Certificates</span>.<p class="picture"><img id="f174171" src="adding_trusted_8.png" class="linkedpngfiletemplate" alt="Список сертификатов. Выбрано &quot;Certificates&quot; в разделе &quot;Trusted Root Certification Authorities&quot;." vspace="0" hspace="0" align="bottom" border="0"></p> <p class="picturename">Консоль управления сертификатами</p> </li><li class="listnumber1">На панели результатов нажмите правой кнопкой мыши на добавленный сертификат и выберите <span class="boldcharacter">Delete</span>.</li></ol>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="182962"><p><a name="182962" style="display: none;">[Topic 182962]</a></p>
	<h1 id="t234539" class="heading1">Поиск и устранение неисправностей</h1>
<p class="bodytext">В этом разделе представлена информация, полезная при решении проблем, которые могут возникнуть при использовании Kaspersky Scan Engine.</p>
<p class="bodytext">Если вы столкнулись с проблемой, не упомянутой в этом разделе, включите логирование, повторите действия, которые предшествовали проблеме, а затем отправьте журналы и файлы конфигурации вашему техническому менеджеру по работе с клиентами.</p>
<p class="introheading">Проблема: Kaspersky Scan Engine не запускается после перезагрузки системы и не может быть запущен с помощью systemctl</p>
<p class="bodytext">Причина этой проблемы может заключаться в том, что директория <code class="programcharacter">/opt/</code> находится на смонтированном устройстве. Когда Kaspersky Scan Engine инициализируется после перезагрузки, устройство еще не смонтировано, и операционная система не может найти файлы модулей systemd для Kaspersky Scan Engine.</p>
<p class="bodytext">Чтобы решить эту проблему, попробуйте следующие действия:</p>
<ol class="listnumber1"><li class="listnumber1">Отключите службы Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">systemctl disable klScanEngineUI</code></li><li class="listbullet2">Для режима HTTP:<p class="listcontinue2"><code class="programcharacter">systemctl disable kavhttpd</code></p> </li><li class="listbullet2">Для режима ICAP:<p class="listcontinue2"><code class="programcharacter">systemctl disable kavicapd</code></p> </li></ul></li><li class="listnumber1">Удалите символьные ссылки на файлы конфигурации Kaspersky Scan Engine.<p class="listcontinue1"><code class="programcharacter">rm /etc/klScanEngineUI.xml /etc/kavhttpd.xml /etc/kavicapd.xml</code></p> </li><li class="listnumber1">Скопируйте файлы модуля Kaspersky Scan Engine в <code class="programcharacter">/etc/systemd/system/</code>:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">cp /opt/kaspersky/ScanEngine/etc/klScanEngineUI.service /etc/systemd/system/klScanEngineUI.service</code></li><li class="listbullet2">Для режима HTTP:<p class="listcontinue2"><code class="programcharacter">cp /opt/kaspersky/ScanEngine/etc/kavhttpd.service /etc/systemd/system/kavhttpd.service</code></p> </li><li class="listbullet2">Для режима ICAP:<p class="listcontinue2"><code class="programcharacter">cp /opt/kaspersky/ScanEngine/etc/kavicapd.service /etc/systemd/system/kavicapd.service</code></p> </li></ul></li><li class="listnumber1">Скопируйте файлы конфигурации Kaspersky Scan Engine в /etc/:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">cp /opt/kaspersky/ScanEngine/etc/klScanEngineUI.xml /etc/klScanEngineUI.xml</code></li><li class="listbullet2">Для режима HTTP:<p class="listcontinue2"><code class="programcharacter">cp /opt/kaspersky/ScanEngine/etc/kavhttpd.xml /etc/kavhttpd.xml</code></p> </li><li class="listbullet2">Для режима ICAP:<p class="listcontinue2"><code class="programcharacter">cp /opt/kaspersky/ScanEngine/etc/kavicapd.xml /etc/kavicapd.xml</code></p> </li></ul></li><li class="listnumber1">Перезагрузите systemd:<p class="listcontinue1"><code class="programcharacter">systemctl daemon-reload</code></p> </li><li class="listnumber1">Включите запуск служб Kaspersky Scan Engine при загрузке системы:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">systemctl enable klScanEngineUI</code></li><li class="listbullet2">Для режима HTTP:<p class="listcontinue2"><code class="programcharacter">systemctl enable kavhttpd</code></p> </li><li class="listbullet2">Для режима ICAP:<p class="listcontinue2"><code class="programcharacter">systemctl enable kavicapd</code></p> </li></ul></li><li class="listnumber1">Запустите службы Kaspersky Scan Engine:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">service klScanEngineUI start</code></li><li class="listbullet2">Для режима HTTP:<p class="listcontinue2"><code class="programcharacter">service kavhttpd start</code></p> </li><li class="listbullet2">Для режима ICAP:<p class="listcontinue2"><code class="programcharacter">service kavicapd start</code></p> </li></ul></li></ol><p class="introheading">Проблема: Kaspersky Scan Engine не запускается и не печатает журналы</p>
<p class="bodytext">Проблема может заключаться в том, что Kaspersky Scan Engine не может найти <code class="programcharacter">klScanEngineUI.xml</code>, либо файл поврежден и Kaspersky Scan Engine не может его прочитать. </p>
<ul class="listbullet1"><li class="listbullet1">Чтобы найти решение этой проблемы, проверьте файлы журналов, которые создаются в поддиректории <code class="programcharacter">/tmp/</code> директории установки Kaspersky Scan Engine.</li></ul><p class="introheading">Проблема: произошла ошибка при загрузке данных через Kaspersky Scan Engine GUI (панель управления или страница результатов проверки)</p>
<p class="bodytext">Причина возникновения проблемы – Kaspersky Scan Engine не может подключиться к базе данных <code class="programcharacter">kavebase</code> или прочитать из нее данные.</p>
<p class="bodytext">Чтобы решить эту проблему, попробуйте следующие действия:</p>
<ul class="listbullet1"><li class="listbullet1">Проверьте, запущен ли экземпляр PostgreSQL.</li><li class="listbullet1">Проверьте, доступен ли экземпляр PostgreSQL из вашего экземпляра Kaspersky Scan Engine.</li><li class="listbullet1">Проверьте, сохраняется ли база данных <code class="programcharacter">kavebase</code> в экземпляре PostgreSQL.<p class="listcontinue1">Если нет, создайте базу данных <code class="programcharacter">kavebase</code>, как описано в разделе &quot;<a id="h181517" class="englishcrossreferencetemplate" href="#180652" target="_self">Ручная установка (Linux)</a>&quot;.</p> </li><li class="listbullet1">Проверьте, сохраняется ли пользователь базы данных <code class="programcharacter">scanengine</code> в экземпляре PostgreSQL.<p class="listcontinue1">Если нет, создайте пользователя базы данных <code class="programcharacter">scanengine</code>, как описано в разделе &quot;<a id="h181517_2" class="englishcrossreferencetemplate" href="#180652" target="_self">Ручная установка (Linux)</a>&quot;.</p> </li></ul><p class="introheading">Проблема: Kaspersky Scan Engine GUI не отображается в браузере</p>
<p class="bodytext">Чтобы решить эту проблему, попробуйте следующие действия:</p>
<ul class="listbullet1"><li class="listbullet1">Убедитесь, что запущены экземпляр Kaspersky Scan Engine и служба klScanEngineUI.</li><li class="listbullet1">Убедитесь, что вы используете <a id="h193112" class="englishcrossreferencetemplate" href="#184795" target="_self">поддерживаемый браузер</a>.</li><li class="listbullet1">Убедитесь, что файл конфигурации klScanEngineUI.xml содержит следующее:<ul class="listbullet2"><li class="listbullet2">В поле <code class="programcharacter">ServerSettings &gt; EnableUI</code> указано значение <code class="programcharacter">true</code>.</li><li class="listbullet2">Элемент <code class="programcharacter">ServerSettings &gt; ConnectionString</code> содержит один из следующих IP-адресов:<ul class="listbullet3"><li class="listbullet3"><code class="programcharacter">127.0.0.1</code><p class="listcontinue3">В этом случае Kaspersky Scan Engine GUI доступен с того же компьютера, на котором установлен Kaspersky Scan Engine.</p>
</li><li class="listbullet3">Сетевой IP-адрес<p class="listcontinue3">В этом случае Kaspersky Scan Engine GUI доступен по сети.</p> <p class="listcontinue3">Убедитесь, что брандмауэр не блокирует доступ к компьютеру, на котором установлен Kaspersky Scan Engine.</p> </li></ul></li></ul></li></ul><p class="introheading">Проблема: ошибка ненадежного соединения при подключении к Kaspersky Scan Engine GUI</p>
<p class="bodytext">SSL-сертификаты, сгенерированные при установке Kaspersky Scan Engine, являются самозаверяющими, поэтому используемый вами браузер сообщает о ненадежном соединении.</p>
<p class="bodytext">Чтобы решить эту проблему, попробуйте следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Рекомендуется: <a id="h182985" class="englishcrossreferencetemplate" href="#182983" target="_self">используйте другие сертификаты, которым доверяет</a> ваша инфраструктура.</li><li class="listbullet1">Если вы не можете использовать другие сертификаты, можно <a id="h182986" class="englishcrossreferencetemplate" href="#182984" target="_self">добавить изначально сгенерированные сертификаты в качестве доверенных</a> для вашего браузера или операционной системы.</li></ul><p class="introheading">Проблема: произошла ошибка при сохранении параметров в Kaspersky Scan Engine GUI</p>
<ul class="listbullet1"><li class="listbullet1">Проверьте правильность указанных вами параметров.</li><li class="listbullet1">Проверьте статус службы <code class="programcharacter">kavhttpd</code> или <code class="programcharacter">kavicapd</code>, выполнив одну из команд:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">service kavhttpd status</code></li><li class="listbullet2"><code class="programcharacter">service kavicapd status</code></li></ul></li></ul><p class="introheading">Проблема: произошла ошибка при удалении базы данных во время деинсталляции, к базе данных kavebase обращаются другие пользователи</p>
<p class="bodytext">Возможная причина: кто-то еще подключен к базе данных <code class="programcharacter">kavebase</code> (например, с помощью pgAdmin).</p>
<p class="bodytext">Решение: выполните следующий запрос к <code class="programcharacter">kavebase</code>:</p>
<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">SELECT *, pg_terminate_backend(pid)</p>
<p class="program">FROM pg_stat_activity</p>
<p class="program">WHERE pid &lt;&gt; pg_backend_pid()</p>
<p class="program">AND datname = &#39;kavebase&#39;;</p>
</td>
</tr>

</table>
<p class="introheading">Проблема: psql не распознается как внутренняя или внешняя команда</p>
<p class="bodytext">Эта проблема может возникнуть в Windows. Чтобы решить эту проблему, добавьте директорию bin PostgreSQL в переменную среды PATH.</p>
<p class="procedureheading">В Windows выполните следующие действия.</p>
<ol class="listnumber1"><li class="listnumber1">Перейдите в  <span class="boldcharacter">Control Panel</span> -&gt; <span class="boldcharacter">System and Security</span> -&gt; <span class="boldcharacter">System</span> -&gt; <span class="boldcharacter">Advanced system settings</span> -&gt; <span class="boldcharacter">Environment variables...</span>.<p class="listcontinue1">Откроется диалоговое окно <span class="boldcharacter">Environment variables</span>.</p> </li><li class="listnumber1">В списке системных переменных (нижняя половина диалогового окна) выберите <span class="boldcharacter">Path</span> и нажмите кнопку <span class="boldcharacter">Edit</span>.</li><li class="listnumber1">Нажмите кнопку <span class="boldcharacter">New</span> и введите путь к директории bin PostgreSQL (например, <code class="programcharacter">C:\Program Files\PostgreSQL\13\bin</code>).</li><li class="listnumber1">Сохраните изменения, нажав кнопку <span class="boldcharacter">ОК</span> во всех диалоговых окнах.</li></ol><p class="introheading">Проблема: для аутентификации SCRAM требуется libpq версии 10 или выше</p>
<p class="bodytext">Эта проблема может возникнуть при установке Kaspersky Scan Engine, если вы используете PostgreSQL 13 и значение <code class="programcharacter">password_encryption</code> отличается от <code class="programcharacter">md5</code>.</p>
<p class="procedureheading">Чтобы решить эту проблему, сделайте следующее.</p>
<ol class="listnumber1"><li class="listnumber1">В файле конфигурации <code class="programcharacter">postgresql.conf</code> установите для параметра <code class="programcharacter">password_encryption</code> значение <code class="programcharacter">md5</code>. <p class="listcontinue1">Сохраните изменения.</p> </li><li class="listnumber1">Перезагрузите PostgreSQL:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">systemctl restart postgresql-13</p>
</td>
</tr>

</table> </li><li class="listnumber1">Обновите пароль пользователя базы данных с правами администратора (например, пользователя <code class="programcharacter">postgres</code>), который будет использоваться при установке Kaspersky Scan Engine:<table class="tableintopic" width="1131" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse" bgcolor="#E5F1FB">
<tr align="left" valign="top">
<td bgcolor="#E5F1FB" width="1131"><p class="program">alter user postgres with password &#39;%PASSWORD%&#39;;</p>
</td>
</tr>

</table> </li><li class="listnumber1">Убедитесь, что метод аутентификации установлен на <code class="programcharacter">md5</code> <a id="h198591" class="englishcrossreferencetemplate" href="#192975" target="_self">в файле pg_hba.conf</a>.</li><li class="listnumber1">Повторите установку Kaspersky Scan Engine.</li></ol><p class="introheading">Проблема: в Kaspersky Scan Engine GUI не отображаются события (панель управления или страница результатов проверки)</p>
<p class="bodytext">Эта проблема может возникнуть, если база данных <code class="programcharacter">kavebase</code> повреждена.</p>
<p class="procedureheading">Чтобы решить эту проблему, сделайте следующее.</p>
<ol class="listnumber1"><li class="listnumber1">Остановите следующие процессы:<ul class="listbullet2"><li class="listbullet2"><code class="programcharacter">klScanEngineUI</code></li><li class="listbullet2"><code class="programcharacter">kavhttpd</code> (режим HTTP) или <code class="programcharacter">kavicapd</code> (режим ICAP)</li></ul></li><li class="listnumber1">Удалите базу данных kavebase, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">DROP DATABASE kavebase;</code></p> </li><li class="listnumber1">Создайте новую базу данных <code class="programcharacter">kavebase</code>, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">CREATE DATABASE kavebase OWNER %owner%;</code></p> <p class="listcontinue1">Здесь <code class="programcharacter">%owner%</code> – это пользователь, созданный для работы с <code class="programcharacter">kavebase</code> при установке Kaspersky Scan Engine.</p> </li><li class="listnumber1">Импортируйте файл <code class="programcharacter">tables.sql</code> из директории <code class="programcharacter">%service_dir%/samples</code>, выполнив следующую команду:<p class="listcontinue1"><code class="programcharacter">psql -d kavebase -a -f tables.sql</code></p> </li><li class="listnumber1">Перезапустите процессы, которые вы остановили на шаге 1.</li></ol><p class="warningbody">После этой операции пароль <code class="programcharacter">admin</code> для Kaspersky Scan Engine GUI будет восстановлен до значения по умолчанию, а все предыдущие события будут удалены.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192996"><p><a name="192996" style="display: none;">[Topic 192996]</a></p>
	<h1 id="t234314" class="heading1">Данные, передаваемые в &quot;Лабораторию Касперского&quot;</h1>
<p class="bodytext">В этом разделе описаны данные, получаемые &quot;Лабораторией Касперского&quot; во время работы Kaspersky Scan Engine.</p>
<p class="bodytext">Полученная информация защищается &quot;Лабораторией Касперского&quot; в соответствии с установленными законом требованиями и действующими правилами &quot;Лаборатории Касперского&quot;. Данные передаются по зашифрованным каналам связи.</p>
<table class="relatedtopics belowtopictext" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width="321">
<p class="relatedheading">В этом разделе</p><p class="relateditem"><a href="#180001" target="_self">Данные, передаваемые в &quot;Лабораторию Касперского&quot; при обновлении</a></p><p class="relateditem"><a href="#180002" target="_self">Данные, передаваемые в &quot;Лабораторию Касперского&quot; в режиме лицензирования онлайн</a></p><p class="relateditem"><a href="#192997" target="_self">Данные, передаваемые в &quot;Лабораторию Касперского&quot; при проверке репутации файлов и URL-адресов</a></p><p class="relateditem"><a href="#180772" target="_self">Статистика, передаваемая в KSN</a></p><p class="relateditem"><a href="#185034" target="_self">О предоставлении данных</a></p></td>
</tr>
</table>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180001"><p><a name="180001" style="display: none;">[Topic 180001]</a></p>
	<h2 id="t234315" class="heading2">Данные, передаваемые в &quot;Лабораторию Касперского&quot; при обновлении</h2>
<p class="bodytext">Во время обновления Kaspersky Scan Engine передает в &quot;Лабораторию Касперского&quot; зашифрованную строку user agent.</p>
<p class="bodytext">Цель предоставления данных: расчет статистики использования продуктов &quot;Лаборатории Касперского&quot; и статистики обновлений.</p>
<p class="bodytext">Регион обработки данных: Москва, Россия.</p>
<p class="bodytext">Метод защиты данных: безопасное шифрование.</p>
<p class="bodytext">В строке user agent передается следующая информация:</p>
<ul class="listbullet1"><li class="listbullet1">Версия формата строки user agent.</li><li class="listbullet1">Идентификатор Kaspersky Scan Engine. </li><li class="listbullet1">Режим лицензирования.</li><li class="listbullet1">Идентификатор лицензии.</li><li class="listbullet1">Обновление идентификатора сеанса.</li><li class="listbullet1">Полная версия Kaspersky Scan Engine: мажорная версия, минорная версия, сборка, редакция и пакет исправлений.</li></ul><p class="bodytext">Срок хранения:</p>
<ul class="listbullet1"><li class="listbullet1">Пока обрабатываются статистические данные: 24 часа. </li><li class="listbullet1">После обработки статистических данных: <ul class="listbullet2"><li class="listbullet2">Идентификатор лицензии: неограниченно хранятся только первые 1000 идентификаторов.</li><li class="listbullet2">Остальные параметры хранятся бессрочно. Не являются личными данными.</li></ul></li></ul><p class="bodytext">Смотрите также подробную информацию <a id="h180046" class="englishcrossreferencetemplate" href="#185034" target="_self">о предоставлении данных</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180002"><p><a name="180002" style="display: none;">[Topic 180002]</a></p>
	<h2 id="t234317" class="heading2">Данные, передаваемые в &quot;Лабораторию Касперского&quot; в режиме лицензирования онлайн</h2>
<p class="bodytext">В <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режиме лицензирования онлайн</a> Kaspersky Scan Engine автоматически обновляет информацию о лицензировании раз в день. При обновлении информации о лицензировании Kaspersky Scan Engine передает в &quot;Лабораторию Касперского&quot; информацию об установленной копии Kaspersky Scan Engine и коде активации. Эта информация необходима для онлайн-активации.</p>
<p class="bodytext">Передается следующая информация:</p>
<ul class="listbullet1"><li class="listbullet1">Код активации, предоставленный во время онлайн-активации.</li><li class="listbullet1">Идентификатор Kaspersky Scan Engine.</li><li class="listbullet1">Идентификатор региональных настроек, используемый Kaspersky Scan Engine. </li><li class="listbullet1">Полная версия Kaspersky Scan Engine: мажорная версия, минорная версия, сборка, редакция и пакет исправлений.</li><li class="listbullet1">Системная дата и время.</li><li class="listbullet1">Уникальный идентификатор установки Kaspersky Scan Engine.</li><li class="listbullet1">Текущий статус кода активации (активен или заблокирован).</li><li class="listbullet1">Срок действия кода активации.</li><li class="listbullet1">Функциональность, доступная с этим кодом активации.</li><li class="listbullet1">Статус ограничений активаций (если он относится к коду активации).</li></ul><p class="bodytext">Смотрите также подробную информацию <a id="h180046" class="englishcrossreferencetemplate" href="#185034" target="_self">о предоставлении данных</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192997"><p><a name="192997" style="display: none;">[Topic 192997]</a></p>
	<h2 id="t234316" class="heading2">Данные, передаваемые в &quot;Лабораторию Касперского&quot; при проверке репутации файлов и URL-адресов</h2>
<p class="bodytext">Когда вы используете функции проверку репутации файлов и URL-адресов, Kaspersky Scan Engine передает &quot;Лаборатории Касперского&quot; информацию об установленной копии Kaspersky Scan Engine и об обнаруженных объектах.</p>
<p class="bodytext">Передается следующая информация:</p>
<ul class="listbullet1"><li class="listbullet1">Идентификатор Kaspersky Scan Engine.</li><li class="listbullet1">Полная версия Kaspersky Scan Engine: мажорная версия, минорная версия, сборка, редакция и пакет исправлений.</li><li class="listbullet1">Идентификатор обладателя лицензии.</li><li class="listbullet1">Хеш-суммы обрабатываемых файлов (MD5, SHA256).</li><li class="listbullet1">Версию KSN.</li><li class="listbullet1">Хеш-суммы имен обнаруженных объектов (MD5, SHA256).</li><li class="listbullet1">Нормализованный URL-адрес.</li></ul><p class="bodytext">Смотрите также подробную информацию <a id="h180046" class="englishcrossreferencetemplate" href="#185034" target="_self">о предоставлении данных</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="180772"><p><a name="180772" style="display: none;">[Topic 180772]</a></p>
	<h2 id="t234521" class="heading2">Статистика, передаваемая в KSN</h2>
<p class="bodytext">Вы можете отправить набор статистики в KSN.</p>
<p class="bodytext">Этот набор статистики включает следующее:</p>
<ul class="listbullet1"><li class="listbullet1">Информация об используемой версии Kaspersky Scan Engine.</li><li class="listbullet1">Информация о версии операционной системы отправителя статистики.</li><li class="listbullet1">Идентификатор обладателя лицензии.</li><li class="listbullet1">Информация об обнаруженных объектах.</li></ul><p class="bodytext">Смотрите также подробную информацию <a id="h180046" class="englishcrossreferencetemplate" href="#185034" target="_self">о предоставлении данных</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="185034"><p><a name="185034" style="display: none;">[Topic 185034]</a></p>
	<h2 id="t234266" class="heading2">О предоставлении данных</h2>
<p class="bodytext">В пакет распространения KAV SDK (далее <code class="programcharacter">%SDK_kit%</code>) входят файлы с информацией о процедуре предоставления данных, используемой в Kaspersky Scan Engine:</p>
<ul class="listbullet1"><li class="listbullet1"><code class="programcharacter">%SDK_kit%/doc/About data provision.txt</code> – описывает процедуру предоставления данных для <a id="h180137" class="englishcrossreferencetemplate" href="#180133" target="_self">проверки репутации файлов и веб-адресов</a>.</li><li class="listbullet1"><code class="programcharacter">%SDK_kit%/doc/About data provision - online licensing.txt</code> – описывает процедуру предоставления данных для <a id="h180819" class="englishcrossreferencetemplate" href="#179855" target="_self">режима лицензирования онлайн</a>.</li><li class="listbullet1"><code class="programcharacter">%SDK_kit%/doc/About data provision extended.txt</code> – описывает процедуру предоставления данных при отправке <a id="h180773" class="englishcrossreferencetemplate" href="#180772" target="_self">статистической информации</a> в KSN в Kaspersky Scan Engine для систем Windows.</li></ul><p class="bodytext">


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="234774"><p><a name="234774" style="display: none;">[Topic 234774]</a></p>
	<h1 id="t234774" class="heading1">Обращение в службу технической поддержки</h1>
<p class="bodytext">Если вы не нашли решения вашей проблемы в этой документации или других источниках, создайте запрос в службу технической поддержки &quot;Лаборатории Касперского&quot;. При обращении в службу технической поддержки &quot;Лаборатории Касперского&quot; <a class="hyperlinktemplate" href="https://support.kaspersky.com/corporate/before_request?topic=scanengine" target="_blank">укажите необходимую информацию о Kaspersky Scan Engine</a>.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192998"><p><a name="192998" style="display: none;">[Topic 192998]</a></p>
	<h1 id="t234392" class="heading1">Информация о стороннем коде</h1>
<p class="bodytext">Информация о стороннем коде содержится в двух файлах с именем legal_notices.txt. Один из этих файлов хранится в поддиректории <code class="programcharacter">doc</code> директории установки Kaspersky Scan Engine. Другой хранится в поддиректории <code class="programcharacter">doc</code> установочной директории KAV SDK.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="192999"><p><a name="192999" style="display: none;">[Topic 192999]</a></p>
	<h1 id="t234537" class="heading1">Уведомления о товарных знаках</h1>
<p class="bodytext">Зарегистрированные товарные знаки и знаки обслуживания являются собственностью их правообладателей.</p>
<p class="bodytext">Safari является товарным знаком Apple Inc.</p>
<p class="bodytext">Dell Technologies, Dell, EMC и другие товарные знаки являются товарными знаками Dell Inc. или ее дочерних компаний.</p>
<p class="bodytext">F5 является товарным знаком F5 Networks, Inc. в США и некоторых других странах.</p>
<p class="bodytext">Chrome, Google, Google Chrome – товарные знаки Google LLC.</p>
<p class="bodytext">Linux – товарный знак Linus Torvalds, зарегистрированный в США и в других странах.</p>
<p class="bodytext">Internet Explorer, Microsoft, Microsoft Edge, Visual Studio, Win32, Windows, Windows Server являются товарными знаками группы компаний Microsoft.</p>
<p class="bodytext">Firefox и Mozilla являются товарными знаками Mozilla Foundation в США и других странах.</p>
<p class="bodytext">Oracle и Solaris являются зарегистрированными товарными знаками Oracle и (или) ее дочерних компаний.</p>
<p class="bodytext">Red Hat – товарный знак Red Hat Inc. или ее дочерних предприятий, зарегистрированный в Соединенных Штатах Америки и в других странах.</p>
<p class="bodytext">Debian – зарегистрированный товарный знак Software in the Public Interest, Inc.</p>
<p class="bodytext">Splunk – товарный знак Splunk Inc., зарегистрированный в США и других странах.</p>
<p class="bodytext">UNIX – товарный знак, зарегистрированный в США и других странах, использование лицензировано X/Open Company Limited.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div><div class="cont" id="55937"><p><a name="55937" style="display: none;">[Topic 55937]</a></p>
	<h1 id="t131989" class="heading1">Авторские права</h1>
<p class="bodytext"> </p>
<p class="bodytext">&nbsp;</p>
<p class="bodytext">&nbsp;</p>
<p class="bodytext">&nbsp;</p>
<p class="bodytext">Уважаемый пользователь! </p>
<p class="bodytext">Спасибо, что доверяете нам. Мы надеемся, что этот документ поможет вам в работе и ответит на большинство ваших вопросов.</p>
<p class="bodytext">Внимание! Права на этот документ являются собственностью АО &quot;Лаборатория Касперского&quot; (далее также &quot;Лаборатория Касперского&quot;) и защищены законодательством Российской Федерации об авторском праве и международными договорами. За незаконное копирование и распространение документа и его отдельных частей нарушитель несет гражданскую, административную или уголовную ответственность в соответствии с применимым законодательством. </p>
<p class="bodytext">Копирование в любой форме, распространение, в том числе в переводе, любых материалов возможны только с письменного разрешения &quot;Лаборатории Касперского&quot;.</p>
<p class="bodytext">Документ и связанные с ним графические изображения могут быть использованы только в информационных, некоммерческих или личных целях.</p>
<p class="bodytext">Документ может быть изменен без предварительного уведомления.</p>
<p class="bodytext">За содержание, качество, актуальность и достоверность используемых в документе материалов, права на которые принадлежат другим правообладателям, а также за возможный ущерб, связанный с использованием этих материалов, &quot;Лаборатория Касперского&quot; ответственности не несет.</p>
<p class="revisiondate">Дата изменения документа: 23.10.2023</p>
<p class="returnaddress">© 2023 АО &quot;Лаборатория Касперского&quot;</p>
<p class="revisiondate"><a class="hyperlinktemplate" href="https://www.kaspersky.com" target="_blank">https://www.kaspersky.com</a><br><a class="hyperlinktemplate" href="https://support.kaspersky.com" target="_blank">https://support.kaspersky.com</a></p>
<p class="revisiondate"><a class="namedhyperlinktemplate" href="https://www.kaspersky.com/about/company" target="_blank">О &quot;Лаборатории Касперского&quot;</a></p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div></body></html>