<!DOCTYPE html><html lang="ru-RU" dir="ltr"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="maximum-scale=1.0">
    <title> Настройки службы (Service) </title>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MPK6ZG');</script>
	<!-- End Google Tag Manager -->
    <script type="text/javascript" src="../langs.js"></script>
    <script type="text/javascript">
        !function ( w, d ) {
            var scriptsPath="/localization/";
            if(w.location.pathname.match(/title\.htm$/)){scriptsPath="./js/"}d.writeln("\x3Cscript type='text/javascript' src='"+scriptsPath+d.documentElement.lang+".js'>\x3C/script>");
        }( window, document );
    </script>	
    <script type="text/javascript" src="toc.js"></script>
    
    <script type="text/javascript" src="aiconverter_result.js"></script>
    <link rel="stylesheet" type="text/css" href="typography.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.png" type="image/png">

            <!--[if lte IE 9]>
                <link rel="stylesheet" type="text/css" href="bootstrap.css">
            <![endif]-->
            <!--[if lte IE 8]>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
            <![endif]-->
            </head>

<body id="who-content" class="no-js">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MPK6ZG" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<noscript class="no-js__message">
	<a href="https://support.microsoft.com/en-us/kb/3135465" class="no-js__link">Пожалуйста, включите JavaScript в вашем браузере!</a>
	</noscript>
	<div class="cont">
	<h3 id="t234515" class="heading3">Настройки службы (Service)</h3>
<p class="bodytext">В этом разделе описан раздел <span class="guicharacter">Service</span> на странице <span class="guicharacter">Settings</span><span class="boldcharacter"></span>.</p>
<p class="picture"><img id="f182810" src="settings_service.png" class="linkedpngfiletemplate" alt="Несколько настроек службы для режима HTTP: протокол, IP-адрес и порт, постоянное соединение Keep-alive." vspace="0" hspace="0" align="bottom" border="0"></p>
<p class="picturename">Настройки службы (Service)</p>
<p class="bodytext">Если Kaspersky Scan Engine инициализируется в режиме HTTP, вы можете указать следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Protocol</span> — выберите HTTP, HTTPS или сокет домена UNIX.</li><li class="listbullet1">Адрес, который Kaspersky Anti-Virus Engine будет использовать для получения объектов для проверки.<p class="listcontinue1">Это может быть либо UNIX-сокет, либо IP-адрес и порт.</p> </li><li class="listbullet1"><span class="guicharacter">Private key path</span> — путь к файлу закрытого ключа для подключения по протоколу HTTPS (TLS).<p class="listcontinue1">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла kavhttpd.</p> <p class="listcontinue1">Вы должны указать этот параметр, если выбран протокол HTTPS.</p> <p class="attentioncontinue1">При настройке этого параметра в таблице со служебными событиями Kaspersky Scan Engine может появиться следующее сообщение: "our private key has a low security level. Please check the permissions for the file &lt;path&gt;." В этом случае вы должны настроить доступ к файлу закрытого ключа, чтобы только пользователь root и учетная запись пользователя, под которой запущена служба, могли иметь разрешение на чтение.</p> </li><li class="listbullet1"><span class="guicharacter">Certificate</span> — путь к файлу сертификата для подключения по протоколу HTTPS (TLS).<p class="listcontinue1">Это может быть как абсолютный, так и относительный путь. Относительный путь рассчитывается относительно бинарного файла kavhttpd.</p> <p class="listcontinue1">Вы должны указать этот параметр, если выбран протокол HTTPS.</p> </li><li class="listbullet1"><span class="guicharacter">Keep-alive connection</span> — указывает, нужно ли использовать <a id="h207358" class="englishcrossreferencetemplate" href="207348.htm" target="_self">Keep-Alive</a>.</li><li class="listbullet1"><span class="guicharacter">Connection timeout</span> — время, в течение которого неактивное соединение должно оставаться открытым (в миллисекундах) в ожидании нового запроса от HTTP-клиента.<p class="listcontinue1">Диапазон возможных значений от 0 до 18000. Если для этого параметра установлено значение 0, ограничение по времени для подключения отсутствует.</p> </li><li class="listbullet1"><span class="guicharacter">Maximum requests per connection</span> — максимальное количество запросов на одно подключение до его закрытия.<p class="listcontinue1">Диапазон возможных значений от 0 до 1000. Если для этого параметра установлено значение 0, количество запросов на одно подключение не ограничено.</p> </li><li class="listbullet1">В разделе <span class="guicharacter">Locations where remote scanning is allowed</span>, вы можете указать пути к местам, в которых разрешено сканирование, когда HTTP-клиент отправляет запросы на сканирование через TCP-сокет с удаленного компьютера. Сканирование в других местах расположения запрещено. Эти пути находятся в файловой системе компьютера, на котором установлен сервер Kaspersky Scan Engine. Ограничение области сканирования предотвращает проверку всей файловой системы сервера Kaspersky Scan Engine по команде извне.<p class="listcontinue1">Не рекомендуется использовать ссылки в качестве путей из соображений безопасности. Вместо этого используйте абсолютные пути.</p> <p class="attentioncontinue1">Kaspersky Scan Engine не добавляет и не удаляет объекты в директориях, указанных в разделе <span class="guicharacter">Locations where remote scanning is allowed</span>. HTTP-клиент должен отправить объекты для сканирования, а затем удалить их после сканирования.</p> <p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2">Абсолютный путь до директории.<p class="listcontinue2">Это значение позволяет сканировать файлы, расположенные внутри этой директории и всех ее поддиректорий.</p> <p class="listcontinue2">Директория должна быть расположена на том же компьютере, что и Kaspersky Scan Engine, или на удаленном жестком диске, который смонтирован на этом компьютере. </p> <p class="listcontinue2">Путь должен начинаться с корневой директории файловой системы компьютера, на котором установлен Kaspersky Scan Engine.</p> <p class="listcontinue2">Служба kavhttpd должна иметь права на чтение файлов в этой директории и всех ее поддиректориях.</p> </li><li class="listbullet2">Абсолютный путь до файла.<p class="listcontinue2">Позволяет сканировать определенный файл.</p> <p class="listcontinue2">Файл должен быть расположен на том же компьютере, что и Kaspersky Scan Engine, или на удаленном жестком диске, который смонтирован на этом компьютере. </p> <p class="listcontinue2">Путь должен начинаться с корневой директории файловой системы компьютера, на котором установлен Kaspersky Scan Engine.</p> <p class="listcontinue2">Служба kavhttpd должна иметь права на чтение этого файла.</p> </li><li class="listbullet2"><code class="programcharacter">/</code> (косая черта с наклоном вправо).<p class="listcontinue2">Позволяет сканировать все файлы файловой системы.</p> </li></ul></li><li class="listbullet1"><span class="guicharacter">Cross-origin resource sharing</span> — указывает список источников (IP-адреса или имена хостов с протоколом), которым должен быть предоставлен доступ к службе kavhttpd.<p class="listcontinue1">Возможные значения:</p> <ul class="listbullet2"><li class="listbullet2">IP-адрес или имя хоста с указанием протокола. </li><li class="listbullet2"><code class="programcharacter">*</code><p class="listcontinue2">Это значение позволяет любому источнику получить доступ к службе kavhttpd.</p>
</li><li class="listbullet2">Пустое значение.</li></ul><p class="listcontinue1">Этот параметр хранится в элементе <code class="programcharacter"><a id="h201539" class="englishcrossreferencetemplate" href="201900.htm" target="_self">CORS</a></code> файла конфигурации режима HTTP.</p> </li></ul><p class="attentionbody">В Windows рекомендуется указывать полный путь к файлу. В частности, настоятельно рекомендуется указывать полные пути к сертификату (<span class="guicharacter">Certificate</span>) и файлу ключа (<span class="guicharacter">Private key path</span>).</p>
<p class="bodytext">Если Kaspersky Scan Engine инициализируется в режиме ICAP, вы можете установить следующие параметры:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Port number</span> — указывает порт, который Kaspersky Scan Engine будет использовать, чтобы получать ICAP-запросы с содержимым для проверки.</li><li class="listbullet1"><span class="guicharacter">Send code 204</span> — указывает, должен ли Kaspersky Anti-Virus Engine отправлять код 204.</li><li class="listbullet1"><span class="guicharacter">Request mode address</span> — адрес, который kavicapd использует для обработки запросов в режиме запроса. <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">req</code>.</p> <p class="listcontinue1">Kaspersky Scan Engine включает в URL-адрес значение параметра <span class="guicharacter">Request mode address</span>, например:</p> <p class="listcontinue1"><code class="programcharacter">icap://icap-server.example.com:1344/req</code></p> <p class="attentioncontinue1">Не используйте одно и то же значение для параметров <span class="guicharacter">Request mode address</span> и <span class="guicharacter">Response mode address</span>.</p> </li><li class="listbullet1"><span class="guicharacter">Response mode address</span> — адрес, который kavicapd использует для обработки запросов в режиме ответа.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">resp</code>.</p> <p class="listcontinue1">Kaspersky Scan Engine включает в URL-адрес значение параметра <span class="guicharacter">Response mode address</span>, например:</p> <p class="listcontinue1"><code class="programcharacter">icap://icap-server.example.com:1344/resp</code></p> </li><li class="listbullet1"><span class="guicharacter">Keep-alive connection</span> — указывает, нужно ли использовать <a id="h207296" class="englishcrossreferencetemplate" href="207291.htm" target="_self">Keep-Alive</a>.</li><li class="listbullet1"><span class="guicharacter">Use Keep-alive unconditionally</span> — указывает, всегда ли Kaspersky Scan Engine использует постоянное соединение Keep-Alive, даже если клиенты ICAP не запрашивают его.</li><li class="listbullet1"><span class="guicharacter">Connection timeout</span> — время, в течение которого неактивное соединение должно оставаться открытым (в миллисекундах) в ожидании нового запроса от ICAP-клиента.<p class="listcontinue1">Диапазон возможных значений от 1 до 10000.</p> </li><li class="listbullet1"><span class="guicharacter">Maximum requests per connection</span> — максимальное количество запросов на одно подключение до его закрытия.<p class="listcontinue1">Диапазон возможных значений от 1 до 1000.</p> </li><li class="listbullet1"><span class="guicharacter">Partial mode</span> — позволяет сканировать файлы целиком, но отправлять их пользователю по частям до завершения проверки.<p class="listcontinue1">Возможные настройки для режима отправки по частям:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Delay</span> — указывает интервал (в секундах) между началом приема объекта и началом отправки его первого фрагмента.</li><li class="listbullet2"><span class="guicharacter">Chunk size</span> — определяет размер фрагментов объекта, передаваемых в период между началом приема объекта и окончанием проверки.</li><li class="listbullet2"><span class="guicharacter">Prevent re-downloading</span> — запрещает повторное скачивание заблокированных файлов браузером после разрыва соединения.</li><li class="listbullet2"><span class="guicharacter">Maximum cache size</span> — максимальный размер кеша в КБ для заблокированных URL-адресов.<p class="listcontinue2">Это максимальный объем ОЗУ, выделяемый для кеширования заблокированных URL-адресов.</p> <p class="listcontinue2">Диапазон возможных значений от 1 до 100000.</p> <p class="listcontinue2">Значение по умолчанию: 5000.</p> </li><li class="listbullet2"><span class="guicharacter">Lifetime for blocked URLs</span> — время жизни заблокированных URL-адресов, сохраненных в кеше (в секундах).<p class="listcontinue2">Диапазон возможных значений от 1 до 604800 (неделя).</p> <p class="listcontinue2">Значение по умолчанию: 1800.</p> </li></ul></li><li class="listbullet1">Дополнительные заголовки:<ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">User name HTTP header</span> — имя HTTP-заголовка, в котором имя пользователя HTTP-клиента передается в службу ICAP.<p class="listcontinue2">ICAP-служба запишет это значение в журналы.</p> <p class="listcontinue2">По умолчанию задано значение <code class="programcharacter">X-Client-Username</code>.</p> </li><li class="listbullet2"><span class="guicharacter">IP address HTTP header</span> — имя HTTP-заголовка, в котором IP-адрес HTTP-клиента передается в службу ICAP.<p class="listcontinue2">ICAP-служба запишет это значение в журналы.</p> <p class="listcontinue2">По умолчанию задано значение <code class="programcharacter">X-Client-IP</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Detected object name HTTP header</span> — имя поля заголовка, содержащего название обнаруженной угрозы.<p class="listcontinue2">ICAP-служба запишет это значение в журналы.</p> <p class="listcontinue2">По умолчанию значение этого параметра пустое.</p> </li><li class="listbullet2"><span class="guicharacter">Database version name HTTP header</span> — название поля заголовка, содержащего информацию о версии антивирусных баз, используемых Kaspersky Scan Engine для проверки объектов.</li><li class="listbullet2"><span class="guicharacter">Send X-Include</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Include</code> в свой ответ на запрос OPTIONS от ICAP-клиента. Чтобы включить отправку заголовка <code class="programcharacter">X-Include</code>, установите один или оба следующих флажка:<ul class="listbullet3"><li class="listbullet3"><span class="guicharacter">Request user name HTTP header</span> — значение, указанное в параметре <span class="guicharacter">User name HTTP header</span>. Если параметр <span class="guicharacter">User name HTTP header</span> пуст, флажок <span class="guicharacter">Request user name HTTP header</span> будет снят.</li><li class="listbullet3"><span class="guicharacter">Request IP address HTTP header</span> — значение, указанное в параметре <span class="guicharacter">IP address HTTP header</span>. Если параметр <span class="guicharacter">IP address HTTP header</span> пуст, флажок <span class="guicharacter">Request IP address HTTP header</span> будет снят.</li></ul><p class="listcontinue2">Если ни один из этих элементов не выбран, Kaspersky Scan Engine не будет включать заголовок <code class="programcharacter">X-Include</code> в ответы.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Infection-Found header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Infection-Found</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Infection-Found</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Violations-Found header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Violations-Found</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Violations-Found</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Response-Info header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Response-Info</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Response-Info</code>.</p> </li><li class="listbullet2"><span class="guicharacter">Send X-Response-Desc header</span> — указывает, включает ли Kaspersky Scan Engine заголовок <code class="programcharacter">X-Response-Desc</code> в свой ответ ICAP-клиенту.<p class="listcontinue2">По умолчанию Kaspersky Scan Engine не включает в ответы заголовок <code class="programcharacter">X-Response-Desc</code>.</p> </li></ul></li><li class="listbullet1"><span class="guicharacter">Action on signal</span> – действие, которое должно выполняться при получении сигналов <code class="programcharacter">SIGUSR1</code> и <code class="programcharacter">SIGUSR2</code>.<p class="listcontinue1">В раскрывающихся списках <span class="guicharacter">SIGUSR1 signal</span> и <span class="guicharacter">SIGUSR2 signal</span> вы можете выбрать следующие действия для обоих сигналов:</p> <ul class="listbullet2"><li class="listbullet2"><span class="guicharacter">Update and reload the anti-virus database</span> — обновление и перезагрузка баз с помощью встроенного функционала Kaspersky Scan Engine.<span class="guicharacter"> </span></li><li class="listbullet2"><span class="guicharacter">Reload the anti-virus database without updating</span> — перезагрузка баз без обновления.<p class="listcontinue2">Предполагается, что файлы в папке с базами уже обновлены и должны быть перезагружены.</p> </li><li class="listbullet2"><span class="guicharacter">Close log files in syslog format, then reopen them</span> — закрытие всех открытых файлов журналов в формате syslog и последующее их открытие для записи журналов в конец этих файлов.<p class="listcontinue2">Если файлы отсутствуют, плагин ICAP создаст их. Этот параметр позволяет выполнять ротацию журналов с помощью утилиты logrotate в режиме по умолчанию или с использованием директивы create.</p> </li></ul></li></ul><p class="bodytext">Для любого режима вы можете указать следующие параметры в разделе <span class="guicharacter">Maximum values</span>:</p>
<ul class="listbullet1"><li class="listbullet1"><span class="guicharacter">Sessions</span> — максимальное количество сеансов.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">10</code>.</p> <p class="attentioncontinue1">Не рекомендуется указывать значение, превышающее количество TCP-соединений, которые ваш HTTP-клиент может одновременно поддерживать с Kaspersky Scan Engine.</p> </li><li class="listbullet1"><span class="guicharacter">Connections</span> — максимальное количество активных TCP-соединений, которые KAV HTTP может поддерживать одновременно.<p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">100</code>.</p> </li><li class="listbullet1"><span class="guicharacter">Threads</span> — максимальное количество потоков сканирования. Вы можете использовать до 256 таких потоков. <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">8</code>.</p> </li><li class="listbullet1"><span class="guicharacter">Processes</span> — максимальное количество процессов проверки. Вы можете использовать до 256 таких процессов. <p class="listcontinue1">Значение по умолчанию: <code class="programcharacter">4</code>.</p> </li></ul><p class="bodytext">При применении новых настроек службы Kaspersky Anti-Virus Engine перезагружается.</p>


	<a href="#" class="bt-home">В начало страницы</a>
	</div>



</body></html>